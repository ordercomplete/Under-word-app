/*! jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
 //@ sourceMappingURL=jquery-1.10.2.min.map
 */
(function (e, t) {
  var n,
    r,
    i = typeof t,
    o = e.location,
    a = e.document,
    s = a.documentElement,
    l = e.jQuery,
    u = e.$,
    c = {},
    p = [],
    f = "1.10.2",
    d = p.concat,
    h = p.push,
    g = p.slice,
    m = p.indexOf,
    y = c.toString,
    v = c.hasOwnProperty,
    b = f.trim,
    x = function (e, t) {
      return new x.fn.init(e, t, r);
    },
    w = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
    T = /\S+/g,
    C = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
    N = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
    k = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
    E = /^[\],:{}\s]*$/,
    S = /(?:^|:|,)(?:\s*\[)+/g,
    A = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
    j = /"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,
    D = /^-ms-/,
    L = /-([\da-z])/gi,
    H = function (e, t) {
      return t.toUpperCase();
    },
    q = function (e) {
      (a.addEventListener ||
        "load" === e.type ||
        "complete" === a.readyState) &&
        (_(), x.ready());
    },
    _ = function () {
      a.addEventListener
        ? (a.removeEventListener("DOMContentLoaded", q, !1),
          e.removeEventListener("load", q, !1))
        : (a.detachEvent("onreadystatechange", q), e.detachEvent("onload", q));
    };
  (x.fn = x.prototype =
    {
      jquery: f,
      constructor: x,
      init: function (e, n, r) {
        var i, o;
        if (!e) {
          return this;
        }
        if ("string" == typeof e) {
          if (
            ((i =
              "<" === e.charAt(0) &&
              ">" === e.charAt(e.length - 1) &&
              e.length >= 3
                ? [null, e, null]
                : N.exec(e)),
            !i || (!i[1] && n))
          ) {
            return !n || n.jquery
              ? (n || r).find(e)
              : this.constructor(n).find(e);
          }
          if (i[1]) {
            if (
              ((n = n instanceof x ? n[0] : n),
              x.merge(
                this,
                x.parseHTML(
                  i[1],
                  n && n.nodeType ? n.ownerDocument || n : a,
                  !0
                )
              ),
              k.test(i[1]) && x.isPlainObject(n))
            ) {
              for (i in n) {
                x.isFunction(this[i]) ? this[i](n[i]) : this.attr(i, n[i]);
              }
            }
            return this;
          }
          if (((o = a.getElementById(i[2])), o && o.parentNode)) {
            if (o.id !== i[2]) {
              return r.find(e);
            }
            (this.length = 1), (this[0] = o);
          }
          return (this.context = a), (this.selector = e), this;
        }
        return e.nodeType
          ? ((this.context = this[0] = e), (this.length = 1), this)
          : x.isFunction(e)
          ? r.ready(e)
          : (e.selector !== t &&
              ((this.selector = e.selector), (this.context = e.context)),
            x.makeArray(e, this));
      },
      selector: "",
      length: 0,
      toArray: function () {
        return g.call(this);
      },
      get: function (e) {
        return null == e
          ? this.toArray()
          : 0 > e
          ? this[this.length + e]
          : this[e];
      },
      pushStack: function (e) {
        var t = x.merge(this.constructor(), e);
        return (t.prevObject = this), (t.context = this.context), t;
      },
      each: function (e, t) {
        return x.each(this, e, t);
      },
      ready: function (e) {
        return x.ready.promise().done(e), this;
      },
      slice: function () {
        return this.pushStack(g.apply(this, arguments));
      },
      first: function () {
        return this.eq(0);
      },
      last: function () {
        return this.eq(-1);
      },
      eq: function (e) {
        var t = this.length,
          n = +e + (0 > e ? t : 0);
        return this.pushStack(n >= 0 && t > n ? [this[n]] : []);
      },
      map: function (e) {
        return this.pushStack(
          x.map(this, function (t, n) {
            return e.call(t, n, t);
          })
        );
      },
      end: function () {
        return this.prevObject || this.constructor(null);
      },
      push: h,
      sort: [].sort,
      splice: [].splice,
    }),
    (x.fn.init.prototype = x.fn),
    (x.extend = x.fn.extend =
      function () {
        var e,
          n,
          r,
          i,
          o,
          a,
          s = arguments[0] || {},
          l = 1,
          u = arguments.length,
          c = !1;
        for (
          "boolean" == typeof s && ((c = s), (s = arguments[1] || {}), (l = 2)),
            "object" == typeof s || x.isFunction(s) || (s = {}),
            u === l && ((s = this), --l);
          u > l;
          l++
        ) {
          if (null != (o = arguments[l])) {
            for (i in o) {
              (e = s[i]),
                (r = o[i]),
                s !== r &&
                  (c && r && (x.isPlainObject(r) || (n = x.isArray(r)))
                    ? (n
                        ? ((n = !1), (a = e && x.isArray(e) ? e : []))
                        : (a = e && x.isPlainObject(e) ? e : {}),
                      (s[i] = x.extend(c, a, r)))
                    : r !== t && (s[i] = r));
            }
          }
        }
        return s;
      }),
    x.extend({
      expando: "jQuery" + (f + Math.random()).replace(/\D/g, ""),
      noConflict: function (t) {
        return e.$ === x && (e.$ = u), t && e.jQuery === x && (e.jQuery = l), x;
      },
      isReady: !1,
      readyWait: 1,
      holdReady: function (e) {
        e ? x.readyWait++ : x.ready(!0);
      },
      ready: function (e) {
        if (e === !0 ? !--x.readyWait : !x.isReady) {
          if (!a.body) {
            return setTimeout(x.ready);
          }
          (x.isReady = !0),
            (e !== !0 && --x.readyWait > 0) ||
              (n.resolveWith(a, [x]),
              x.fn.trigger && x(a).trigger("ready").off("ready"));
        }
      },
      isFunction: function (e) {
        return "function" === x.type(e);
      },
      isArray:
        Array.isArray ||
        function (e) {
          return "array" === x.type(e);
        },
      isWindow: function (e) {
        return null != e && e == e.window;
      },
      isNumeric: function (e) {
        return !isNaN(parseFloat(e)) && isFinite(e);
      },
      type: function (e) {
        return null == e
          ? e + ""
          : "object" == typeof e || "function" == typeof e
          ? c[y.call(e)] || "object"
          : typeof e;
      },
      isPlainObject: function (e) {
        var n;
        if (!e || "object" !== x.type(e) || e.nodeType || x.isWindow(e)) {
          return !1;
        }
        try {
          if (
            e.constructor &&
            !v.call(e, "constructor") &&
            !v.call(e.constructor.prototype, "isPrototypeOf")
          ) {
            return !1;
          }
        } catch (r) {
          return !1;
        }
        if (x.support.ownLast) {
          for (n in e) {
            return v.call(e, n);
          }
        }
        for (n in e) {
        }
        return n === t || v.call(e, n);
      },
      isEmptyObject: function (e) {
        var t;
        for (t in e) {
          return !1;
        }
        return !0;
      },
      error: function (e) {
        throw Error(e);
      },
      parseHTML: function (e, t, n) {
        if (!e || "string" != typeof e) {
          return null;
        }
        "boolean" == typeof t && ((n = t), (t = !1)), (t = t || a);
        var r = k.exec(e),
          i = !n && [];
        return r
          ? [t.createElement(r[1])]
          : ((r = x.buildFragment([e], t, i)),
            i && x(i).remove(),
            x.merge([], r.childNodes));
      },
      parseJSON: function (n) {
        return e.JSON && e.JSON.parse
          ? e.JSON.parse(n)
          : null === n
          ? n
          : "string" == typeof n &&
            ((n = x.trim(n)),
            n && E.test(n.replace(A, "@").replace(j, "]").replace(S, "")))
          ? Function("return " + n)()
          : (x.error("Invalid JSON: " + n), t);
      },
      parseXML: function (n) {
        var r, i;
        if (!n || "string" != typeof n) {
          return null;
        }
        try {
          e.DOMParser
            ? ((i = new DOMParser()), (r = i.parseFromString(n, "text/xml")))
            : ((r = new ActiveXObject("Microsoft.XMLDOM")),
              (r.async = "false"),
              r.loadXML(n));
        } catch (o) {
          r = t;
        }
        return (
          (r &&
            r.documentElement &&
            !r.getElementsByTagName("parsererror").length) ||
            x.error("Invalid XML: " + n),
          r
        );
      },
      noop: function () {},
      globalEval: function (t) {
        t &&
          x.trim(t) &&
          (
            e.execScript ||
            function (t) {
              e.eval.call(e, t);
            }
          )(t);
      },
      camelCase: function (e) {
        return e.replace(D, "ms-").replace(L, H);
      },
      nodeName: function (e, t) {
        return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase();
      },
      each: function (e, t, n) {
        var r,
          i = 0,
          o = e.length,
          a = M(e);
        if (n) {
          if (a) {
            for (; o > i; i++) {
              if (((r = t.apply(e[i], n)), r === !1)) {
                break;
              }
            }
          } else {
            for (i in e) {
              if (((r = t.apply(e[i], n)), r === !1)) {
                break;
              }
            }
          }
        } else {
          if (a) {
            for (; o > i; i++) {
              if (((r = t.call(e[i], i, e[i])), r === !1)) {
                break;
              }
            }
          } else {
            for (i in e) {
              if (((r = t.call(e[i], i, e[i])), r === !1)) {
                break;
              }
            }
          }
        }
        return e;
      },
      trim:
        b && !b.call("\ufeff\u00a0")
          ? function (e) {
              return null == e ? "" : b.call(e);
            }
          : function (e) {
              return null == e ? "" : (e + "").replace(C, "");
            },
      makeArray: function (e, t) {
        var n = t || [];
        return (
          null != e &&
            (M(Object(e))
              ? x.merge(n, "string" == typeof e ? [e] : e)
              : h.call(n, e)),
          n
        );
      },
      inArray: function (e, t, n) {
        var r;
        if (t) {
          if (m) {
            return m.call(t, e, n);
          }
          for (
            r = t.length, n = n ? (0 > n ? Math.max(0, r + n) : n) : 0;
            r > n;
            n++
          ) {
            if (n in t && t[n] === e) {
              return n;
            }
          }
        }
        return -1;
      },
      merge: function (e, n) {
        var r = n.length,
          i = e.length,
          o = 0;
        if ("number" == typeof r) {
          for (; r > o; o++) {
            e[i++] = n[o];
          }
        } else {
          while (n[o] !== t) {
            e[i++] = n[o++];
          }
        }
        return (e.length = i), e;
      },
      grep: function (e, t, n) {
        var r,
          i = [],
          o = 0,
          a = e.length;
        for (n = !!n; a > o; o++) {
          (r = !!t(e[o], o)), n !== r && i.push(e[o]);
        }
        return i;
      },
      map: function (e, t, n) {
        var r,
          i = 0,
          o = e.length,
          a = M(e),
          s = [];
        if (a) {
          for (; o > i; i++) {
            (r = t(e[i], i, n)), null != r && (s[s.length] = r);
          }
        } else {
          for (i in e) {
            (r = t(e[i], i, n)), null != r && (s[s.length] = r);
          }
        }
        return d.apply([], s);
      },
      guid: 1,
      proxy: function (e, n) {
        var r, i, o;
        return (
          "string" == typeof n && ((o = e[n]), (n = e), (e = o)),
          x.isFunction(e)
            ? ((r = g.call(arguments, 2)),
              (i = function () {
                return e.apply(n || this, r.concat(g.call(arguments)));
              }),
              (i.guid = e.guid = e.guid || x.guid++),
              i)
            : t
        );
      },
      access: function (e, n, r, i, o, a, s) {
        var l = 0,
          u = e.length,
          c = null == r;
        if ("object" === x.type(r)) {
          o = !0;
          for (l in r) {
            x.access(e, n, l, r[l], !0, a, s);
          }
        } else {
          if (
            i !== t &&
            ((o = !0),
            x.isFunction(i) || (s = !0),
            c &&
              (s
                ? (n.call(e, i), (n = null))
                : ((c = n),
                  (n = function (e, t, n) {
                    return c.call(x(e), n);
                  }))),
            n)
          ) {
            for (; u > l; l++) {
              n(e[l], r, s ? i : i.call(e[l], l, n(e[l], r)));
            }
          }
        }
        return o ? e : c ? n.call(e) : u ? n(e[0], r) : a;
      },
      now: function () {
        return new Date().getTime();
      },
      swap: function (e, t, n, r) {
        var i,
          o,
          a = {};
        for (o in t) {
          (a[o] = e.style[o]), (e.style[o] = t[o]);
        }
        i = n.apply(e, r || []);
        for (o in t) {
          e.style[o] = a[o];
        }
        return i;
      },
    }),
    (x.ready.promise = function (t) {
      if (!n) {
        if (((n = x.Deferred()), "complete" === a.readyState)) {
          setTimeout(x.ready);
        } else {
          if (a.addEventListener) {
            a.addEventListener("DOMContentLoaded", q, !1),
              e.addEventListener("load", q, !1);
          } else {
            a.attachEvent("onreadystatechange", q), e.attachEvent("onload", q);
            var r = !1;
            try {
              r = null == e.frameElement && a.documentElement;
            } catch (i) {}
            r &&
              r.doScroll &&
              (function o() {
                if (!x.isReady) {
                  try {
                    r.doScroll("left");
                  } catch (e) {
                    return setTimeout(o, 50);
                  }
                  _(), x.ready();
                }
              })();
          }
        }
      }
      return n.promise(t);
    }),
    x.each(
      "Boolean Number String Function Array Date RegExp Object Error".split(
        " "
      ),
      function (e, t) {
        c["[object " + t + "]"] = t.toLowerCase();
      }
    );
  function M(e) {
    var t = e.length,
      n = x.type(e);
    return x.isWindow(e)
      ? !1
      : 1 === e.nodeType && t
      ? !0
      : "array" === n ||
        ("function" !== n &&
          (0 === t || ("number" == typeof t && t > 0 && t - 1 in e)));
  }
  (r = x(a)),
    (function (e, t) {
      var n,
        r,
        i,
        o,
        a,
        s,
        l,
        u,
        c,
        p,
        f,
        d,
        h,
        g,
        m,
        y,
        v,
        b = "sizzle" + -new Date(),
        w = e.document,
        T = 0,
        C = 0,
        N = st(),
        k = st(),
        E = st(),
        S = !1,
        A = function (e, t) {
          return e === t ? ((S = !0), 0) : 0;
        },
        j = typeof t,
        D = 1 << 31,
        L = {}.hasOwnProperty,
        H = [],
        q = H.pop,
        _ = H.push,
        M = H.push,
        O = H.slice,
        F =
          H.indexOf ||
          function (e) {
            var t = 0,
              n = this.length;
            for (; n > t; t++) {
              if (this[t] === e) {
                return t;
              }
            }
            return -1;
          },
        B =
          "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
        P = "[\\x20\\t\\r\\n\\f]",
        R = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
        W = R.replace("w", "w#"),
        $ =
          "\\[" +
          P +
          "*(" +
          R +
          ")" +
          P +
          "*(?:([*^$|!~]?=)" +
          P +
          "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" +
          W +
          ")|)|)" +
          P +
          "*\\]",
        I =
          ":(" +
          R +
          ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" +
          $.replace(3, 8) +
          ")*)|.*)\\)|)",
        z = RegExp("^" + P + "+|((?:^|[^\\\\])(?:\\\\.)*)" + P + "+$", "g"),
        X = RegExp("^" + P + "*," + P + "*"),
        U = RegExp("^" + P + "*([>+~]|" + P + ")" + P + "*"),
        V = RegExp(P + "*[+~]"),
        Y = RegExp("=" + P + "*([^\\]'\"]*)" + P + "*\\]", "g"),
        J = RegExp(I),
        G = RegExp("^" + W + "$"),
        Q = {
          ID: RegExp("^#(" + R + ")"),
          CLASS: RegExp("^\\.(" + R + ")"),
          TAG: RegExp("^(" + R.replace("w", "w*") + ")"),
          ATTR: RegExp("^" + $),
          PSEUDO: RegExp("^" + I),
          CHILD: RegExp(
            "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" +
              P +
              "*(even|odd|(([+-]|)(\\d*)n|)" +
              P +
              "*(?:([+-]|)" +
              P +
              "*(\\d+)|))" +
              P +
              "*\\)|)",
            "i"
          ),
          bool: RegExp("^(?:" + B + ")$", "i"),
          needsContext: RegExp(
            "^" +
              P +
              "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
              P +
              "*((?:-\\d)?\\d*)" +
              P +
              "*\\)|)(?=[^-]|$)",
            "i"
          ),
        },
        K = /^[^{]+\{\s*\[native \w/,
        Z = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
        et = /^(?:input|select|textarea|button)$/i,
        tt = /^h\d$/i,
        nt = /'|\\/g,
        rt = RegExp("\\\\([\\da-f]{1,6}" + P + "?|(" + P + ")|.)", "ig"),
        it = function (e, t, n) {
          var r = "0x" + t - 65536;
          return r !== r || n
            ? t
            : 0 > r
            ? String.fromCharCode(r + 65536)
            : String.fromCharCode(55296 | (r >> 10), 56320 | (1023 & r));
        };
      try {
        M.apply((H = O.call(w.childNodes)), w.childNodes),
          H[w.childNodes.length].nodeType;
      } catch (ot) {
        M = {
          apply: H.length
            ? function (e, t) {
                _.apply(e, O.call(t));
              }
            : function (e, t) {
                var n = e.length,
                  r = 0;
                while ((e[n++] = t[r++])) {}
                e.length = n - 1;
              },
        };
      }
      function at(e, t, n, i) {
        var o, a, s, l, u, c, d, m, y, x;
        if (
          ((t ? t.ownerDocument || t : w) !== f && p(t),
          (t = t || f),
          (n = n || []),
          !e || "string" != typeof e)
        ) {
          return n;
        }
        if (1 !== (l = t.nodeType) && 9 !== l) {
          return [];
        }
        if (h && !i) {
          if ((o = Z.exec(e))) {
            if ((s = o[1])) {
              if (9 === l) {
                if (((a = t.getElementById(s)), !a || !a.parentNode)) {
                  return n;
                }
                if (a.id === s) {
                  return n.push(a), n;
                }
              } else {
                if (
                  t.ownerDocument &&
                  (a = t.ownerDocument.getElementById(s)) &&
                  v(t, a) &&
                  a.id === s
                ) {
                  return n.push(a), n;
                }
              }
            } else {
              if (o[2]) {
                return M.apply(n, t.getElementsByTagName(e)), n;
              }
              if (
                (s = o[3]) &&
                r.getElementsByClassName &&
                t.getElementsByClassName
              ) {
                return M.apply(n, t.getElementsByClassName(s)), n;
              }
            }
          }
          if (r.qsa && (!g || !g.test(e))) {
            if (
              ((m = d = b),
              (y = t),
              (x = 9 === l && e),
              1 === l && "object" !== t.nodeName.toLowerCase())
            ) {
              (c = mt(e)),
                (d = t.getAttribute("id"))
                  ? (m = d.replace(nt, "\\$&"))
                  : t.setAttribute("id", m),
                (m = "[id='" + m + "'] "),
                (u = c.length);
              while (u--) {
                c[u] = m + yt(c[u]);
              }
              (y = (V.test(e) && t.parentNode) || t), (x = c.join(","));
            }
            if (x) {
              try {
                return M.apply(n, y.querySelectorAll(x)), n;
              } catch (T) {
              } finally {
                d || t.removeAttribute("id");
              }
            }
          }
        }
        return kt(e.replace(z, "$1"), t, n, i);
      }
      function st() {
        var e = [];
        function t(n, r) {
          return (
            e.push((n += " ")) > o.cacheLength && delete t[e.shift()],
            (t[n] = r)
          );
        }
        return t;
      }
      function lt(e) {
        return (e[b] = !0), e;
      }
      function ut(e) {
        var t = f.createElement("div");
        try {
          return !!e(t);
        } catch (n) {
          return !1;
        } finally {
          t.parentNode && t.parentNode.removeChild(t), (t = null);
        }
      }
      function ct(e, t) {
        var n = e.split("|"),
          r = e.length;
        while (r--) {
          o.attrHandle[n[r]] = t;
        }
      }
      function pt(e, t) {
        var n = t && e,
          r =
            n &&
            1 === e.nodeType &&
            1 === t.nodeType &&
            (~t.sourceIndex || D) - (~e.sourceIndex || D);
        if (r) {
          return r;
        }
        if (n) {
          while ((n = n.nextSibling)) {
            if (n === t) {
              return -1;
            }
          }
        }
        return e ? 1 : -1;
      }
      function ft(e) {
        return function (t) {
          var n = t.nodeName.toLowerCase();
          return "input" === n && t.type === e;
        };
      }
      function dt(e) {
        return function (t) {
          var n = t.nodeName.toLowerCase();
          return ("input" === n || "button" === n) && t.type === e;
        };
      }
      function ht(e) {
        return lt(function (t) {
          return (
            (t = +t),
            lt(function (n, r) {
              var i,
                o = e([], n.length, t),
                a = o.length;
              while (a--) {
                n[(i = o[a])] && (n[i] = !(r[i] = n[i]));
              }
            })
          );
        });
      }
      (s = at.isXML =
        function (e) {
          var t = e && (e.ownerDocument || e).documentElement;
          return t ? "HTML" !== t.nodeName : !1;
        }),
        (r = at.support = {}),
        (p = at.setDocument =
          function (e) {
            var n = e ? e.ownerDocument || e : w,
              i = n.defaultView;
            return n !== f && 9 === n.nodeType && n.documentElement
              ? ((f = n),
                (d = n.documentElement),
                (h = !s(n)),
                i &&
                  i.attachEvent &&
                  i !== i.top &&
                  i.attachEvent("onbeforeunload", function () {
                    p();
                  }),
                (r.attributes = ut(function (e) {
                  return (e.className = "i"), !e.getAttribute("className");
                })),
                (r.getElementsByTagName = ut(function (e) {
                  return (
                    e.appendChild(n.createComment("")),
                    !e.getElementsByTagName("*").length
                  );
                })),
                (r.getElementsByClassName = ut(function (e) {
                  return (
                    (e.innerHTML =
                      "<div class='a'></div><div class='a i'></div>"),
                    (e.firstChild.className = "i"),
                    2 === e.getElementsByClassName("i").length
                  );
                })),
                (r.getById = ut(function (e) {
                  return (
                    (d.appendChild(e).id = b),
                    !n.getElementsByName || !n.getElementsByName(b).length
                  );
                })),
                r.getById
                  ? ((o.find.ID = function (e, t) {
                      if (typeof t.getElementById !== j && h) {
                        var n = t.getElementById(e);
                        return n && n.parentNode ? [n] : [];
                      }
                    }),
                    (o.filter.ID = function (e) {
                      var t = e.replace(rt, it);
                      return function (e) {
                        return e.getAttribute("id") === t;
                      };
                    }))
                  : (delete o.find.ID,
                    (o.filter.ID = function (e) {
                      var t = e.replace(rt, it);
                      return function (e) {
                        var n =
                          typeof e.getAttributeNode !== j &&
                          e.getAttributeNode("id");
                        return n && n.value === t;
                      };
                    })),
                (o.find.TAG = r.getElementsByTagName
                  ? function (e, n) {
                      return typeof n.getElementsByTagName !== j
                        ? n.getElementsByTagName(e)
                        : t;
                    }
                  : function (e, t) {
                      var n,
                        r = [],
                        i = 0,
                        o = t.getElementsByTagName(e);
                      if ("*" === e) {
                        while ((n = o[i++])) {
                          1 === n.nodeType && r.push(n);
                        }
                        return r;
                      }
                      return o;
                    }),
                (o.find.CLASS =
                  r.getElementsByClassName &&
                  function (e, n) {
                    return typeof n.getElementsByClassName !== j && h
                      ? n.getElementsByClassName(e)
                      : t;
                  }),
                (m = []),
                (g = []),
                (r.qsa = K.test(n.querySelectorAll)) &&
                  (ut(function (e) {
                    (e.innerHTML =
                      "<select><option selected=''></option></select>"),
                      e.querySelectorAll("[selected]").length ||
                        g.push("\\[" + P + "*(?:value|" + B + ")"),
                      e.querySelectorAll(":checked").length ||
                        g.push(":checked");
                  }),
                  ut(function (e) {
                    var t = n.createElement("input");
                    t.setAttribute("type", "hidden"),
                      e.appendChild(t).setAttribute("t", ""),
                      e.querySelectorAll("[t^='']").length &&
                        g.push("[*^$]=" + P + "*(?:''|\"\")"),
                      e.querySelectorAll(":enabled").length ||
                        g.push(":enabled", ":disabled"),
                      e.querySelectorAll("*,:x"),
                      g.push(",.*:");
                  })),
                (r.matchesSelector = K.test(
                  (y =
                    d.webkitMatchesSelector ||
                    d.mozMatchesSelector ||
                    d.oMatchesSelector ||
                    d.msMatchesSelector)
                )) &&
                  ut(function (e) {
                    (r.disconnectedMatch = y.call(e, "div")),
                      y.call(e, "[s!='']:x"),
                      m.push("!=", I);
                  }),
                (g = g.length && RegExp(g.join("|"))),
                (m = m.length && RegExp(m.join("|"))),
                (v =
                  K.test(d.contains) || d.compareDocumentPosition
                    ? function (e, t) {
                        var n = 9 === e.nodeType ? e.documentElement : e,
                          r = t && t.parentNode;
                        return (
                          e === r ||
                          !(
                            !r ||
                            1 !== r.nodeType ||
                            !(n.contains
                              ? n.contains(r)
                              : e.compareDocumentPosition &&
                                16 & e.compareDocumentPosition(r))
                          )
                        );
                      }
                    : function (e, t) {
                        if (t) {
                          while ((t = t.parentNode)) {
                            if (t === e) {
                              return !0;
                            }
                          }
                        }
                        return !1;
                      }),
                (A = d.compareDocumentPosition
                  ? function (e, t) {
                      if (e === t) {
                        return (S = !0), 0;
                      }
                      var i =
                        t.compareDocumentPosition &&
                        e.compareDocumentPosition &&
                        e.compareDocumentPosition(t);
                      return i
                        ? 1 & i ||
                          (!r.sortDetached &&
                            t.compareDocumentPosition(e) === i)
                          ? e === n || v(w, e)
                            ? -1
                            : t === n || v(w, t)
                            ? 1
                            : c
                            ? F.call(c, e) - F.call(c, t)
                            : 0
                          : 4 & i
                          ? -1
                          : 1
                        : e.compareDocumentPosition
                        ? -1
                        : 1;
                    }
                  : function (e, t) {
                      var r,
                        i = 0,
                        o = e.parentNode,
                        a = t.parentNode,
                        s = [e],
                        l = [t];
                      if (e === t) {
                        return (S = !0), 0;
                      }
                      if (!o || !a) {
                        return e === n
                          ? -1
                          : t === n
                          ? 1
                          : o
                          ? -1
                          : a
                          ? 1
                          : c
                          ? F.call(c, e) - F.call(c, t)
                          : 0;
                      }
                      if (o === a) {
                        return pt(e, t);
                      }
                      r = e;
                      while ((r = r.parentNode)) {
                        s.unshift(r);
                      }
                      r = t;
                      while ((r = r.parentNode)) {
                        l.unshift(r);
                      }
                      while (s[i] === l[i]) {
                        i++;
                      }
                      return i
                        ? pt(s[i], l[i])
                        : s[i] === w
                        ? -1
                        : l[i] === w
                        ? 1
                        : 0;
                    }),
                n)
              : f;
          }),
        (at.matches = function (e, t) {
          return at(e, null, null, t);
        }),
        (at.matchesSelector = function (e, t) {
          if (
            ((e.ownerDocument || e) !== f && p(e),
            (t = t.replace(Y, "='$1']")),
            !(!r.matchesSelector || !h || (m && m.test(t)) || (g && g.test(t))))
          ) {
            try {
              var n = y.call(e, t);
              if (
                n ||
                r.disconnectedMatch ||
                (e.document && 11 !== e.document.nodeType)
              ) {
                return n;
              }
            } catch (i) {}
          }
          return at(t, f, null, [e]).length > 0;
        }),
        (at.contains = function (e, t) {
          return (e.ownerDocument || e) !== f && p(e), v(e, t);
        }),
        (at.attr = function (e, n) {
          (e.ownerDocument || e) !== f && p(e);
          var i = o.attrHandle[n.toLowerCase()],
            a = i && L.call(o.attrHandle, n.toLowerCase()) ? i(e, n, !h) : t;
          return a === t
            ? r.attributes || !h
              ? e.getAttribute(n)
              : (a = e.getAttributeNode(n)) && a.specified
              ? a.value
              : null
            : a;
        }),
        (at.error = function (e) {
          throw Error("Syntax error, unrecognized expression: " + e);
        }),
        (at.uniqueSort = function (e) {
          var t,
            n = [],
            i = 0,
            o = 0;
          if (
            ((S = !r.detectDuplicates),
            (c = !r.sortStable && e.slice(0)),
            e.sort(A),
            S)
          ) {
            while ((t = e[o++])) {
              t === e[o] && (i = n.push(o));
            }
            while (i--) {
              e.splice(n[i], 1);
            }
          }
          return e;
        }),
        (a = at.getText =
          function (e) {
            var t,
              n = "",
              r = 0,
              i = e.nodeType;
            if (i) {
              if (1 === i || 9 === i || 11 === i) {
                if ("string" == typeof e.textContent) {
                  return e.textContent;
                }
                for (e = e.firstChild; e; e = e.nextSibling) {
                  n += a(e);
                }
              } else {
                if (3 === i || 4 === i) {
                  return e.nodeValue;
                }
              }
            } else {
              for (; (t = e[r]); r++) {
                n += a(t);
              }
            }
            return n;
          }),
        (o = at.selectors =
          {
            cacheLength: 50,
            createPseudo: lt,
            match: Q,
            attrHandle: {},
            find: {},
            relative: {
              ">": {
                dir: "parentNode",
                first: !0,
              },
              " ": {
                dir: "parentNode",
              },
              "+": {
                dir: "previousSibling",
                first: !0,
              },
              "~": {
                dir: "previousSibling",
              },
            },
            preFilter: {
              ATTR: function (e) {
                return (
                  (e[1] = e[1].replace(rt, it)),
                  (e[3] = (e[4] || e[5] || "").replace(rt, it)),
                  "~=" === e[2] && (e[3] = " " + e[3] + " "),
                  e.slice(0, 4)
                );
              },
              CHILD: function (e) {
                return (
                  (e[1] = e[1].toLowerCase()),
                  "nth" === e[1].slice(0, 3)
                    ? (e[3] || at.error(e[0]),
                      (e[4] = +(e[4]
                        ? e[5] + (e[6] || 1)
                        : 2 * ("even" === e[3] || "odd" === e[3]))),
                      (e[5] = +(e[7] + e[8] || "odd" === e[3])))
                    : e[3] && at.error(e[0]),
                  e
                );
              },
              PSEUDO: function (e) {
                var n,
                  r = !e[5] && e[2];
                return Q.CHILD.test(e[0])
                  ? null
                  : (e[3] && e[4] !== t
                      ? (e[2] = e[4])
                      : r &&
                        J.test(r) &&
                        (n = mt(r, !0)) &&
                        (n = r.indexOf(")", r.length - n) - r.length) &&
                        ((e[0] = e[0].slice(0, n)), (e[2] = r.slice(0, n))),
                    e.slice(0, 3));
              },
            },
            filter: {
              TAG: function (e) {
                var t = e.replace(rt, it).toLowerCase();
                return "*" === e
                  ? function () {
                      return !0;
                    }
                  : function (e) {
                      return e.nodeName && e.nodeName.toLowerCase() === t;
                    };
              },
              CLASS: function (e) {
                var t = N[e + " "];
                return (
                  t ||
                  ((t = RegExp("(^|" + P + ")" + e + "(" + P + "|$)")) &&
                    N(e, function (e) {
                      return t.test(
                        ("string" == typeof e.className && e.className) ||
                          (typeof e.getAttribute !== j &&
                            e.getAttribute("class")) ||
                          ""
                      );
                    }))
                );
              },
              ATTR: function (e, t, n) {
                return function (r) {
                  var i = at.attr(r, e);
                  return null == i
                    ? "!=" === t
                    : t
                    ? ((i += ""),
                      "=" === t
                        ? i === n
                        : "!=" === t
                        ? i !== n
                        : "^=" === t
                        ? n && 0 === i.indexOf(n)
                        : "*=" === t
                        ? n && i.indexOf(n) > -1
                        : "$=" === t
                        ? n && i.slice(-n.length) === n
                        : "~=" === t
                        ? (" " + i + " ").indexOf(n) > -1
                        : "|=" === t
                        ? i === n || i.slice(0, n.length + 1) === n + "-"
                        : !1)
                    : !0;
                };
              },
              CHILD: function (e, t, n, r, i) {
                var o = "nth" !== e.slice(0, 3),
                  a = "last" !== e.slice(-4),
                  s = "of-type" === t;
                return 1 === r && 0 === i
                  ? function (e) {
                      return !!e.parentNode;
                    }
                  : function (t, n, l) {
                      var u,
                        c,
                        p,
                        f,
                        d,
                        h,
                        g = o !== a ? "nextSibling" : "previousSibling",
                        m = t.parentNode,
                        y = s && t.nodeName.toLowerCase(),
                        v = !l && !s;
                      if (m) {
                        if (o) {
                          while (g) {
                            p = t;
                            while ((p = p[g])) {
                              if (
                                s
                                  ? p.nodeName.toLowerCase() === y
                                  : 1 === p.nodeType
                              ) {
                                return !1;
                              }
                            }
                            h = g = "only" === e && !h && "nextSibling";
                          }
                          return !0;
                        }
                        if (((h = [a ? m.firstChild : m.lastChild]), a && v)) {
                          (c = m[b] || (m[b] = {})),
                            (u = c[e] || []),
                            (d = u[0] === T && u[1]),
                            (f = u[0] === T && u[2]),
                            (p = d && m.childNodes[d]);
                          while (
                            (p = (++d && p && p[g]) || (f = d = 0) || h.pop())
                          ) {
                            if (1 === p.nodeType && ++f && p === t) {
                              c[e] = [T, d, f];
                              break;
                            }
                          }
                        } else {
                          if (
                            v &&
                            (u = (t[b] || (t[b] = {}))[e]) &&
                            u[0] === T
                          ) {
                            f = u[1];
                          } else {
                            while (
                              (p = (++d && p && p[g]) || (f = d = 0) || h.pop())
                            ) {
                              if (
                                (s
                                  ? p.nodeName.toLowerCase() === y
                                  : 1 === p.nodeType) &&
                                ++f &&
                                (v && ((p[b] || (p[b] = {}))[e] = [T, f]),
                                p === t)
                              ) {
                                break;
                              }
                            }
                          }
                        }
                        return (f -= i), f === r || (0 === f % r && f / r >= 0);
                      }
                    };
              },
              PSEUDO: function (e, t) {
                var n,
                  r =
                    o.pseudos[e] ||
                    o.setFilters[e.toLowerCase()] ||
                    at.error("unsupported pseudo: " + e);
                return r[b]
                  ? r(t)
                  : r.length > 1
                  ? ((n = [e, e, "", t]),
                    o.setFilters.hasOwnProperty(e.toLowerCase())
                      ? lt(function (e, n) {
                          var i,
                            o = r(e, t),
                            a = o.length;
                          while (a--) {
                            (i = F.call(e, o[a])), (e[i] = !(n[i] = o[a]));
                          }
                        })
                      : function (e) {
                          return r(e, 0, n);
                        })
                  : r;
              },
            },
            pseudos: {
              not: lt(function (e) {
                var t = [],
                  n = [],
                  r = l(e.replace(z, "$1"));
                return r[b]
                  ? lt(function (e, t, n, i) {
                      var o,
                        a = r(e, null, i, []),
                        s = e.length;
                      while (s--) {
                        (o = a[s]) && (e[s] = !(t[s] = o));
                      }
                    })
                  : function (e, i, o) {
                      return (t[0] = e), r(t, null, o, n), !n.pop();
                    };
              }),
              has: lt(function (e) {
                return function (t) {
                  return at(e, t).length > 0;
                };
              }),
              contains: lt(function (e) {
                return function (t) {
                  return (t.textContent || t.innerText || a(t)).indexOf(e) > -1;
                };
              }),
              lang: lt(function (e) {
                return (
                  G.test(e || "") || at.error("unsupported lang: " + e),
                  (e = e.replace(rt, it).toLowerCase()),
                  function (t) {
                    var n;
                    do {
                      if (
                        (n = h
                          ? t.lang
                          : t.getAttribute("xml:lang") ||
                            t.getAttribute("lang"))
                      ) {
                        return (
                          (n = n.toLowerCase()),
                          n === e || 0 === n.indexOf(e + "-")
                        );
                      }
                    } while ((t = t.parentNode) && 1 === t.nodeType);
                    return !1;
                  }
                );
              }),
              target: function (t) {
                var n = e.location && e.location.hash;
                return n && n.slice(1) === t.id;
              },
              root: function (e) {
                return e === d;
              },
              focus: function (e) {
                return (
                  e === f.activeElement &&
                  (!f.hasFocus || f.hasFocus()) &&
                  !!(e.type || e.href || ~e.tabIndex)
                );
              },
              enabled: function (e) {
                return e.disabled === !1;
              },
              disabled: function (e) {
                return e.disabled === !0;
              },
              checked: function (e) {
                var t = e.nodeName.toLowerCase();
                return (
                  ("input" === t && !!e.checked) ||
                  ("option" === t && !!e.selected)
                );
              },
              selected: function (e) {
                return (
                  e.parentNode && e.parentNode.selectedIndex, e.selected === !0
                );
              },
              empty: function (e) {
                for (e = e.firstChild; e; e = e.nextSibling) {
                  if (
                    e.nodeName > "@" ||
                    3 === e.nodeType ||
                    4 === e.nodeType
                  ) {
                    return !1;
                  }
                }
                return !0;
              },
              parent: function (e) {
                return !o.pseudos.empty(e);
              },
              header: function (e) {
                return tt.test(e.nodeName);
              },
              input: function (e) {
                return et.test(e.nodeName);
              },
              button: function (e) {
                var t = e.nodeName.toLowerCase();
                return ("input" === t && "button" === e.type) || "button" === t;
              },
              text: function (e) {
                var t;
                return (
                  "input" === e.nodeName.toLowerCase() &&
                  "text" === e.type &&
                  (null == (t = e.getAttribute("type")) ||
                    t.toLowerCase() === e.type)
                );
              },
              first: ht(function () {
                return [0];
              }),
              last: ht(function (e, t) {
                return [t - 1];
              }),
              eq: ht(function (e, t, n) {
                return [0 > n ? n + t : n];
              }),
              even: ht(function (e, t) {
                var n = 0;
                for (; t > n; n += 2) {
                  e.push(n);
                }
                return e;
              }),
              odd: ht(function (e, t) {
                var n = 1;
                for (; t > n; n += 2) {
                  e.push(n);
                }
                return e;
              }),
              lt: ht(function (e, t, n) {
                var r = 0 > n ? n + t : n;
                for (; --r >= 0; ) {
                  e.push(r);
                }
                return e;
              }),
              gt: ht(function (e, t, n) {
                var r = 0 > n ? n + t : n;
                for (; t > ++r; ) {
                  e.push(r);
                }
                return e;
              }),
            },
          }),
        (o.pseudos.nth = o.pseudos.eq);
      for (n in {
        radio: !0,
        checkbox: !0,
        file: !0,
        password: !0,
        image: !0,
      }) {
        o.pseudos[n] = ft(n);
      }
      for (n in {
        submit: !0,
        reset: !0,
      }) {
        o.pseudos[n] = dt(n);
      }
      function gt() {}
      (gt.prototype = o.filters = o.pseudos), (o.setFilters = new gt());
      function mt(e, t) {
        var n,
          r,
          i,
          a,
          s,
          l,
          u,
          c = k[e + " "];
        if (c) {
          return t ? 0 : c.slice(0);
        }
        (s = e), (l = []), (u = o.preFilter);
        while (s) {
          (!n || (r = X.exec(s))) &&
            (r && (s = s.slice(r[0].length) || s), l.push((i = []))),
            (n = !1),
            (r = U.exec(s)) &&
              ((n = r.shift()),
              i.push({
                value: n,
                type: r[0].replace(z, " "),
              }),
              (s = s.slice(n.length)));
          for (a in o.filter) {
            !(r = Q[a].exec(s)) ||
              (u[a] && !(r = u[a](r))) ||
              ((n = r.shift()),
              i.push({
                value: n,
                type: a,
                matches: r,
              }),
              (s = s.slice(n.length)));
          }
          if (!n) {
            break;
          }
        }
        return t ? s.length : s ? at.error(e) : k(e, l).slice(0);
      }
      function yt(e) {
        var t = 0,
          n = e.length,
          r = "";
        for (; n > t; t++) {
          r += e[t].value;
        }
        return r;
      }
      function vt(e, t, n) {
        var r = t.dir,
          o = n && "parentNode" === r,
          a = C++;
        return t.first
          ? function (t, n, i) {
              while ((t = t[r])) {
                if (1 === t.nodeType || o) {
                  return e(t, n, i);
                }
              }
            }
          : function (t, n, s) {
              var l,
                u,
                c,
                p = T + " " + a;
              if (s) {
                while ((t = t[r])) {
                  if ((1 === t.nodeType || o) && e(t, n, s)) {
                    return !0;
                  }
                }
              } else {
                while ((t = t[r])) {
                  if (1 === t.nodeType || o) {
                    if (((c = t[b] || (t[b] = {})), (u = c[r]) && u[0] === p)) {
                      if ((l = u[1]) === !0 || l === i) {
                        return l === !0;
                      }
                    } else {
                      if (
                        ((u = c[r] = [p]),
                        (u[1] = e(t, n, s) || i),
                        u[1] === !0)
                      ) {
                        return !0;
                      }
                    }
                  }
                }
              }
            };
      }
      function bt(e) {
        return e.length > 1
          ? function (t, n, r) {
              var i = e.length;
              while (i--) {
                if (!e[i](t, n, r)) {
                  return !1;
                }
              }
              return !0;
            }
          : e[0];
      }
      function xt(e, t, n, r, i) {
        var o,
          a = [],
          s = 0,
          l = e.length,
          u = null != t;
        for (; l > s; s++) {
          (o = e[s]) && (!n || n(o, r, i)) && (a.push(o), u && t.push(s));
        }
        return a;
      }
      function wt(e, t, n, r, i, o) {
        return (
          r && !r[b] && (r = wt(r)),
          i && !i[b] && (i = wt(i, o)),
          lt(function (o, a, s, l) {
            var u,
              c,
              p,
              f = [],
              d = [],
              h = a.length,
              g = o || Nt(t || "*", s.nodeType ? [s] : s, []),
              m = !e || (!o && t) ? g : xt(g, f, e, s, l),
              y = n ? (i || (o ? e : h || r) ? [] : a) : m;
            if ((n && n(m, y, s, l), r)) {
              (u = xt(y, d)), r(u, [], s, l), (c = u.length);
              while (c--) {
                (p = u[c]) && (y[d[c]] = !(m[d[c]] = p));
              }
            }
            if (o) {
              if (i || e) {
                if (i) {
                  (u = []), (c = y.length);
                  while (c--) {
                    (p = y[c]) && u.push((m[c] = p));
                  }
                  i(null, (y = []), u, l);
                }
                c = y.length;
                while (c--) {
                  (p = y[c]) &&
                    (u = i ? F.call(o, p) : f[c]) > -1 &&
                    (o[u] = !(a[u] = p));
                }
              }
            } else {
              (y = xt(y === a ? y.splice(h, y.length) : y)),
                i ? i(null, a, y, l) : M.apply(a, y);
            }
          })
        );
      }
      function Tt(e) {
        var t,
          n,
          r,
          i = e.length,
          a = o.relative[e[0].type],
          s = a || o.relative[" "],
          l = a ? 1 : 0,
          c = vt(
            function (e) {
              return e === t;
            },
            s,
            !0
          ),
          p = vt(
            function (e) {
              return F.call(t, e) > -1;
            },
            s,
            !0
          ),
          f = [
            function (e, n, r) {
              return (
                (!a && (r || n !== u)) ||
                ((t = n).nodeType ? c(e, n, r) : p(e, n, r))
              );
            },
          ];
        for (; i > l; l++) {
          if ((n = o.relative[e[l].type])) {
            f = [vt(bt(f), n)];
          } else {
            if (((n = o.filter[e[l].type].apply(null, e[l].matches)), n[b])) {
              for (r = ++l; i > r; r++) {
                if (o.relative[e[r].type]) {
                  break;
                }
              }
              return wt(
                l > 1 && bt(f),
                l > 1 &&
                  yt(
                    e.slice(0, l - 1).concat({
                      value: " " === e[l - 2].type ? "*" : "",
                    })
                  ).replace(z, "$1"),
                n,
                r > l && Tt(e.slice(l, r)),
                i > r && Tt((e = e.slice(r))),
                i > r && yt(e)
              );
            }
            f.push(n);
          }
        }
        return bt(f);
      }
      function Ct(e, t) {
        var n = 0,
          r = t.length > 0,
          a = e.length > 0,
          s = function (s, l, c, p, d) {
            var h,
              g,
              m,
              y = [],
              v = 0,
              b = "0",
              x = s && [],
              w = null != d,
              C = u,
              N = s || (a && o.find.TAG("*", (d && l.parentNode) || l)),
              k = (T += null == C ? 1 : Math.random() || 0.1);
            for (w && ((u = l !== f && l), (i = n)); null != (h = N[b]); b++) {
              if (a && h) {
                g = 0;
                while ((m = e[g++])) {
                  if (m(h, l, c)) {
                    p.push(h);
                    break;
                  }
                }
                w && ((T = k), (i = ++n));
              }
              r && ((h = !m && h) && v--, s && x.push(h));
            }
            if (((v += b), r && b !== v)) {
              g = 0;
              while ((m = t[g++])) {
                m(x, y, l, c);
              }
              if (s) {
                if (v > 0) {
                  while (b--) {
                    x[b] || y[b] || (y[b] = q.call(p));
                  }
                }
                y = xt(y);
              }
              M.apply(p, y),
                w && !s && y.length > 0 && v + t.length > 1 && at.uniqueSort(p);
            }
            return w && ((T = k), (u = C)), x;
          };
        return r ? lt(s) : s;
      }
      l = at.compile = function (e, t) {
        var n,
          r = [],
          i = [],
          o = E[e + " "];
        if (!o) {
          t || (t = mt(e)), (n = t.length);
          while (n--) {
            (o = Tt(t[n])), o[b] ? r.push(o) : i.push(o);
          }
          o = E(e, Ct(i, r));
        }
        return o;
      };
      function Nt(e, t, n) {
        var r = 0,
          i = t.length;
        for (; i > r; r++) {
          at(e, t[r], n);
        }
        return n;
      }
      function kt(e, t, n, i) {
        var a,
          s,
          u,
          c,
          p,
          f = mt(e);
        if (!i && 1 === f.length) {
          if (
            ((s = f[0] = f[0].slice(0)),
            s.length > 2 &&
              "ID" === (u = s[0]).type &&
              r.getById &&
              9 === t.nodeType &&
              h &&
              o.relative[s[1].type])
          ) {
            if (
              ((t = (o.find.ID(u.matches[0].replace(rt, it), t) || [])[0]), !t)
            ) {
              return n;
            }
            e = e.slice(s.shift().value.length);
          }
          a = Q.needsContext.test(e) ? 0 : s.length;
          while (a--) {
            if (((u = s[a]), o.relative[(c = u.type)])) {
              break;
            }
            if (
              (p = o.find[c]) &&
              (i = p(
                u.matches[0].replace(rt, it),
                (V.test(s[0].type) && t.parentNode) || t
              ))
            ) {
              if ((s.splice(a, 1), (e = i.length && yt(s)), !e)) {
                return M.apply(n, i), n;
              }
              break;
            }
          }
        }
        return l(e, f)(i, t, !h, n, V.test(e)), n;
      }
      (r.sortStable = b.split("").sort(A).join("") === b),
        (r.detectDuplicates = S),
        p(),
        (r.sortDetached = ut(function (e) {
          return 1 & e.compareDocumentPosition(f.createElement("div"));
        })),
        ut(function (e) {
          return (
            (e.innerHTML = "<a href='#'></a>"),
            "#" === e.firstChild.getAttribute("href")
          );
        }) ||
          ct("type|href|height|width", function (e, n, r) {
            return r
              ? t
              : e.getAttribute(n, "type" === n.toLowerCase() ? 1 : 2);
          }),
        (r.attributes &&
          ut(function (e) {
            return (
              (e.innerHTML = "<input/>"),
              e.firstChild.setAttribute("value", ""),
              "" === e.firstChild.getAttribute("value")
            );
          })) ||
          ct("value", function (e, n, r) {
            return r || "input" !== e.nodeName.toLowerCase()
              ? t
              : e.defaultValue;
          }),
        ut(function (e) {
          return null == e.getAttribute("disabled");
        }) ||
          ct(B, function (e, n, r) {
            var i;
            return r
              ? t
              : (i = e.getAttributeNode(n)) && i.specified
              ? i.value
              : e[n] === !0
              ? n.toLowerCase()
              : null;
          }),
        (x.find = at),
        (x.expr = at.selectors),
        (x.expr[":"] = x.expr.pseudos),
        (x.unique = at.uniqueSort),
        (x.text = at.getText),
        (x.isXMLDoc = at.isXML),
        (x.contains = at.contains);
    })(e);
  var O = {};
  function F(e) {
    var t = (O[e] = {});
    return (
      x.each(e.match(T) || [], function (e, n) {
        t[n] = !0;
      }),
      t
    );
  }
  (x.Callbacks = function (e) {
    e = "string" == typeof e ? O[e] || F(e) : x.extend({}, e);
    var n,
      r,
      i,
      o,
      a,
      s,
      l = [],
      u = !e.once && [],
      c = function (t) {
        for (
          r = e.memory && t, i = !0, a = s || 0, s = 0, o = l.length, n = !0;
          l && o > a;
          a++
        ) {
          if (l[a].apply(t[0], t[1]) === !1 && e.stopOnFalse) {
            r = !1;
            break;
          }
        }
        (n = !1),
          l && (u ? u.length && c(u.shift()) : r ? (l = []) : p.disable());
      },
      p = {
        add: function () {
          if (l) {
            var t = l.length;
            (function i(t) {
              x.each(t, function (t, n) {
                var r = x.type(n);
                "function" === r
                  ? (e.unique && p.has(n)) || l.push(n)
                  : n && n.length && "string" !== r && i(n);
              });
            })(arguments),
              n ? (o = l.length) : r && ((s = t), c(r));
          }
          return this;
        },
        remove: function () {
          return (
            l &&
              x.each(arguments, function (e, t) {
                var r;
                while ((r = x.inArray(t, l, r)) > -1) {
                  l.splice(r, 1), n && (o >= r && o--, a >= r && a--);
                }
              }),
            this
          );
        },
        has: function (e) {
          return e ? x.inArray(e, l) > -1 : !(!l || !l.length);
        },
        empty: function () {
          return (l = []), (o = 0), this;
        },
        disable: function () {
          return (l = u = r = t), this;
        },
        disabled: function () {
          return !l;
        },
        lock: function () {
          return (u = t), r || p.disable(), this;
        },
        locked: function () {
          return !u;
        },
        fireWith: function (e, t) {
          return (
            !l ||
              (i && !u) ||
              ((t = t || []),
              (t = [e, t.slice ? t.slice() : t]),
              n ? u.push(t) : c(t)),
            this
          );
        },
        fire: function () {
          return p.fireWith(this, arguments), this;
        },
        fired: function () {
          return !!i;
        },
      };
    return p;
  }),
    x.extend({
      Deferred: function (e) {
        var t = [
            ["resolve", "done", x.Callbacks("once memory"), "resolved"],
            ["reject", "fail", x.Callbacks("once memory"), "rejected"],
            ["notify", "progress", x.Callbacks("memory")],
          ],
          n = "pending",
          r = {
            state: function () {
              return n;
            },
            always: function () {
              return i.done(arguments).fail(arguments), this;
            },
            then: function () {
              var e = arguments;
              return x
                .Deferred(function (n) {
                  x.each(t, function (t, o) {
                    var a = o[0],
                      s = x.isFunction(e[t]) && e[t];
                    i[o[1]](function () {
                      var e = s && s.apply(this, arguments);
                      e && x.isFunction(e.promise)
                        ? e
                            .promise()
                            .done(n.resolve)
                            .fail(n.reject)
                            .progress(n.notify)
                        : n[a + "With"](
                            this === r ? n.promise() : this,
                            s ? [e] : arguments
                          );
                    });
                  }),
                    (e = null);
                })
                .promise();
            },
            promise: function (e) {
              return null != e ? x.extend(e, r) : r;
            },
          },
          i = {};
        return (
          (r.pipe = r.then),
          x.each(t, function (e, o) {
            var a = o[2],
              s = o[3];
            (r[o[1]] = a.add),
              s &&
                a.add(
                  function () {
                    n = s;
                  },
                  t[1 ^ e][2].disable,
                  t[2][2].lock
                ),
              (i[o[0]] = function () {
                return i[o[0] + "With"](this === i ? r : this, arguments), this;
              }),
              (i[o[0] + "With"] = a.fireWith);
          }),
          r.promise(i),
          e && e.call(i, i),
          i
        );
      },
      when: function (e) {
        var t = 0,
          n = g.call(arguments),
          r = n.length,
          i = 1 !== r || (e && x.isFunction(e.promise)) ? r : 0,
          o = 1 === i ? e : x.Deferred(),
          a = function (e, t, n) {
            return function (r) {
              (t[e] = this),
                (n[e] = arguments.length > 1 ? g.call(arguments) : r),
                n === s ? o.notifyWith(t, n) : --i || o.resolveWith(t, n);
            };
          },
          s,
          l,
          u;
        if (r > 1) {
          for (s = Array(r), l = Array(r), u = Array(r); r > t; t++) {
            n[t] && x.isFunction(n[t].promise)
              ? n[t]
                  .promise()
                  .done(a(t, u, n))
                  .fail(o.reject)
                  .progress(a(t, l, s))
              : --i;
          }
        }
        return i || o.resolveWith(u, n), o.promise();
      },
    }),
    (x.support = (function (t) {
      var n,
        r,
        o,
        s,
        l,
        u,
        c,
        p,
        f,
        d = a.createElement("div");
      if (
        (d.setAttribute("className", "t"),
        (d.innerHTML =
          "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>"),
        (n = d.getElementsByTagName("*") || []),
        (r = d.getElementsByTagName("a")[0]),
        !r || !r.style || !n.length)
      ) {
        return t;
      }
      (s = a.createElement("select")),
        (u = s.appendChild(a.createElement("option"))),
        (o = d.getElementsByTagName("input")[0]),
        (r.style.cssText = "top:1px;float:left;opacity:.5"),
        (t.getSetAttribute = "t" !== d.className),
        (t.leadingWhitespace = 3 === d.firstChild.nodeType),
        (t.tbody = !d.getElementsByTagName("tbody").length),
        (t.htmlSerialize = !!d.getElementsByTagName("link").length),
        (t.style = /top/.test(r.getAttribute("style"))),
        (t.hrefNormalized = "/a" === r.getAttribute("href")),
        (t.opacity = /^0.5/.test(r.style.opacity)),
        (t.cssFloat = !!r.style.cssFloat),
        (t.checkOn = !!o.value),
        (t.optSelected = u.selected),
        (t.enctype = !!a.createElement("form").enctype),
        (t.html5Clone =
          "<:nav></:nav>" !== a.createElement("nav").cloneNode(!0).outerHTML),
        (t.inlineBlockNeedsLayout = !1),
        (t.shrinkWrapBlocks = !1),
        (t.pixelPosition = !1),
        (t.deleteExpando = !0),
        (t.noCloneEvent = !0),
        (t.reliableMarginRight = !0),
        (t.boxSizingReliable = !0),
        (o.checked = !0),
        (t.noCloneChecked = o.cloneNode(!0).checked),
        (s.disabled = !0),
        (t.optDisabled = !u.disabled);
      try {
        delete d.test;
      } catch (h) {
        t.deleteExpando = !1;
      }
      (o = a.createElement("input")),
        o.setAttribute("value", ""),
        (t.input = "" === o.getAttribute("value")),
        (o.value = "t"),
        o.setAttribute("type", "radio"),
        (t.radioValue = "t" === o.value),
        o.setAttribute("checked", "t"),
        o.setAttribute("name", "t"),
        (l = a.createDocumentFragment()),
        l.appendChild(o),
        (t.appendChecked = o.checked),
        (t.checkClone = l.cloneNode(!0).cloneNode(!0).lastChild.checked),
        d.attachEvent &&
          (d.attachEvent("onclick", function () {
            t.noCloneEvent = !1;
          }),
          d.cloneNode(!0).click());
      for (f in {
        submit: !0,
        change: !0,
        focusin: !0,
      }) {
        d.setAttribute((c = "on" + f), "t"),
          (t[f + "Bubbles"] = c in e || d.attributes[c].expando === !1);
      }
      (d.style.backgroundClip = "content-box"),
        (d.cloneNode(!0).style.backgroundClip = ""),
        (t.clearCloneStyle = "content-box" === d.style.backgroundClip);
      for (f in x(t)) {
        break;
      }
      return (
        (t.ownLast = "0" !== f),
        x(function () {
          var n,
            r,
            o,
            s =
              "padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",
            l = a.getElementsByTagName("body")[0];
          l &&
            ((n = a.createElement("div")),
            (n.style.cssText =
              "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px"),
            l.appendChild(n).appendChild(d),
            (d.innerHTML = "<table><tr><td></td><td>t</td></tr></table>"),
            (o = d.getElementsByTagName("td")),
            (o[0].style.cssText = "padding:0;margin:0;border:0;display:none"),
            (p = 0 === o[0].offsetHeight),
            (o[0].style.display = ""),
            (o[1].style.display = "none"),
            (t.reliableHiddenOffsets = p && 0 === o[0].offsetHeight),
            (d.innerHTML = ""),
            (d.style.cssText =
              "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;"),
            x.swap(
              l,
              null != l.style.zoom
                ? {
                    zoom: 1,
                  }
                : {},
              function () {
                t.boxSizing = 4 === d.offsetWidth;
              }
            ),
            e.getComputedStyle &&
              ((t.pixelPosition =
                "1%" !== (e.getComputedStyle(d, null) || {}).top),
              (t.boxSizingReliable =
                "4px" ===
                (
                  e.getComputedStyle(d, null) || {
                    width: "4px",
                  }
                ).width),
              (r = d.appendChild(a.createElement("div"))),
              (r.style.cssText = d.style.cssText = s),
              (r.style.marginRight = r.style.width = "0"),
              (d.style.width = "1px"),
              (t.reliableMarginRight = !parseFloat(
                (e.getComputedStyle(r, null) || {}).marginRight
              ))),
            typeof d.style.zoom !== i &&
              ((d.innerHTML = ""),
              (d.style.cssText =
                s + "width:1px;padding:1px;display:inline;zoom:1"),
              (t.inlineBlockNeedsLayout = 3 === d.offsetWidth),
              (d.style.display = "block"),
              (d.innerHTML = "<div></div>"),
              (d.firstChild.style.width = "5px"),
              (t.shrinkWrapBlocks = 3 !== d.offsetWidth),
              t.inlineBlockNeedsLayout && (l.style.zoom = 1)),
            l.removeChild(n),
            (n = d = o = r = null));
        }),
        (n = s = l = u = r = o = null),
        t
      );
    })({}));
  var B = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
    P = /([A-Z])/g;
  function R(e, n, r, i) {
    if (x.acceptData(e)) {
      var o,
        a,
        s = x.expando,
        l = e.nodeType,
        u = l ? x.cache : e,
        c = l ? e[s] : e[s] && s;
      if ((c && u[c] && (i || u[c].data)) || r !== t || "string" != typeof n) {
        return (
          c || (c = l ? (e[s] = p.pop() || x.guid++) : s),
          u[c] ||
            (u[c] = l
              ? {}
              : {
                  toJSON: x.noop,
                }),
          ("object" == typeof n || "function" == typeof n) &&
            (i
              ? (u[c] = x.extend(u[c], n))
              : (u[c].data = x.extend(u[c].data, n))),
          (a = u[c]),
          i || (a.data || (a.data = {}), (a = a.data)),
          r !== t && (a[x.camelCase(n)] = r),
          "string" == typeof n
            ? ((o = a[n]), null == o && (o = a[x.camelCase(n)]))
            : (o = a),
          o
        );
      }
    }
  }
  function W(e, t, n) {
    if (x.acceptData(e)) {
      var r,
        i,
        o = e.nodeType,
        a = o ? x.cache : e,
        s = o ? e[x.expando] : x.expando;
      if (a[s]) {
        if (t && (r = n ? a[s] : a[s].data)) {
          x.isArray(t)
            ? (t = t.concat(x.map(t, x.camelCase)))
            : t in r
            ? (t = [t])
            : ((t = x.camelCase(t)), (t = t in r ? [t] : t.split(" "))),
            (i = t.length);
          while (i--) {
            delete r[t[i]];
          }
          if (n ? !I(r) : !x.isEmptyObject(r)) {
            return;
          }
        }
        (n || (delete a[s].data, I(a[s]))) &&
          (o
            ? x.cleanData([e], !0)
            : x.support.deleteExpando || a != a.window
            ? delete a[s]
            : (a[s] = null));
      }
    }
  }
  x.extend({
    cache: {},
    noData: {
      applet: !0,
      embed: !0,
      object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
    },
    hasData: function (e) {
      return (
        (e = e.nodeType ? x.cache[e[x.expando]] : e[x.expando]), !!e && !I(e)
      );
    },
    data: function (e, t, n) {
      return R(e, t, n);
    },
    removeData: function (e, t) {
      return W(e, t);
    },
    _data: function (e, t, n) {
      return R(e, t, n, !0);
    },
    _removeData: function (e, t) {
      return W(e, t, !0);
    },
    acceptData: function (e) {
      if (e.nodeType && 1 !== e.nodeType && 9 !== e.nodeType) {
        return !1;
      }
      var t = e.nodeName && x.noData[e.nodeName.toLowerCase()];
      return !t || (t !== !0 && e.getAttribute("classid") === t);
    },
  }),
    x.fn.extend({
      data: function (e, n) {
        var r,
          i,
          o = null,
          a = 0,
          s = this[0];
        if (e === t) {
          if (
            this.length &&
            ((o = x.data(s)), 1 === s.nodeType && !x._data(s, "parsedAttrs"))
          ) {
            for (r = s.attributes; r.length > a; a++) {
              (i = r[a].name),
                0 === i.indexOf("data-") &&
                  ((i = x.camelCase(i.slice(5))), $(s, i, o[i]));
            }
            x._data(s, "parsedAttrs", !0);
          }
          return o;
        }
        return "object" == typeof e
          ? this.each(function () {
              x.data(this, e);
            })
          : arguments.length > 1
          ? this.each(function () {
              x.data(this, e, n);
            })
          : s
          ? $(s, e, x.data(s, e))
          : null;
      },
      removeData: function (e) {
        return this.each(function () {
          x.removeData(this, e);
        });
      },
    });
  function $(e, n, r) {
    if (r === t && 1 === e.nodeType) {
      var i = "data-" + n.replace(P, "-$1").toLowerCase();
      if (((r = e.getAttribute(i)), "string" == typeof r)) {
        try {
          r =
            "true" === r
              ? !0
              : "false" === r
              ? !1
              : "null" === r
              ? null
              : +r + "" === r
              ? +r
              : B.test(r)
              ? x.parseJSON(r)
              : r;
        } catch (o) {}
        x.data(e, n, r);
      } else {
        r = t;
      }
    }
    return r;
  }
  function I(e) {
    var t;
    for (t in e) {
      if (("data" !== t || !x.isEmptyObject(e[t])) && "toJSON" !== t) {
        return !1;
      }
    }
    return !0;
  }
  x.extend({
    queue: function (e, n, r) {
      var i;
      return e
        ? ((n = (n || "fx") + "queue"),
          (i = x._data(e, n)),
          r &&
            (!i || x.isArray(r)
              ? (i = x._data(e, n, x.makeArray(r)))
              : i.push(r)),
          i || [])
        : t;
    },
    dequeue: function (e, t) {
      t = t || "fx";
      var n = x.queue(e, t),
        r = n.length,
        i = n.shift(),
        o = x._queueHooks(e, t),
        a = function () {
          x.dequeue(e, t);
        };
      "inprogress" === i && ((i = n.shift()), r--),
        i &&
          ("fx" === t && n.unshift("inprogress"),
          delete o.stop,
          i.call(e, a, o)),
        !r && o && o.empty.fire();
    },
    _queueHooks: function (e, t) {
      var n = t + "queueHooks";
      return (
        x._data(e, n) ||
        x._data(e, n, {
          empty: x.Callbacks("once memory").add(function () {
            x._removeData(e, t + "queue"), x._removeData(e, n);
          }),
        })
      );
    },
  }),
    x.fn.extend({
      queue: function (e, n) {
        var r = 2;
        return (
          "string" != typeof e && ((n = e), (e = "fx"), r--),
          r > arguments.length
            ? x.queue(this[0], e)
            : n === t
            ? this
            : this.each(function () {
                var t = x.queue(this, e, n);
                x._queueHooks(this, e),
                  "fx" === e && "inprogress" !== t[0] && x.dequeue(this, e);
              })
        );
      },
      dequeue: function (e) {
        return this.each(function () {
          x.dequeue(this, e);
        });
      },
      delay: function (e, t) {
        return (
          (e = x.fx ? x.fx.speeds[e] || e : e),
          (t = t || "fx"),
          this.queue(t, function (t, n) {
            var r = setTimeout(t, e);
            n.stop = function () {
              clearTimeout(r);
            };
          })
        );
      },
      clearQueue: function (e) {
        return this.queue(e || "fx", []);
      },
      promise: function (e, n) {
        var r,
          i = 1,
          o = x.Deferred(),
          a = this,
          s = this.length,
          l = function () {
            --i || o.resolveWith(a, [a]);
          };
        "string" != typeof e && ((n = e), (e = t)), (e = e || "fx");
        while (s--) {
          (r = x._data(a[s], e + "queueHooks")),
            r && r.empty && (i++, r.empty.add(l));
        }
        return l(), o.promise(n);
      },
    });
  var z,
    X,
    U = /[\t\r\n\f]/g,
    V = /\r/g,
    Y = /^(?:input|select|textarea|button|object)$/i,
    J = /^(?:a|area)$/i,
    G = /^(?:checked|selected)$/i,
    Q = x.support.getSetAttribute,
    K = x.support.input;
  x.fn.extend({
    attr: function (e, t) {
      return x.access(this, x.attr, e, t, arguments.length > 1);
    },
    removeAttr: function (e) {
      return this.each(function () {
        x.removeAttr(this, e);
      });
    },
    prop: function (e, t) {
      return x.access(this, x.prop, e, t, arguments.length > 1);
    },
    removeProp: function (e) {
      return (
        (e = x.propFix[e] || e),
        this.each(function () {
          try {
            (this[e] = t), delete this[e];
          } catch (n) {}
        })
      );
    },
    addClass: function (e) {
      var t,
        n,
        r,
        i,
        o,
        a = 0,
        s = this.length,
        l = "string" == typeof e && e;
      if (x.isFunction(e)) {
        return this.each(function (t) {
          x(this).addClass(e.call(this, t, this.className));
        });
      }
      if (l) {
        for (t = (e || "").match(T) || []; s > a; a++) {
          if (
            ((n = this[a]),
            (r =
              1 === n.nodeType &&
              (n.className ? (" " + n.className + " ").replace(U, " ") : " ")))
          ) {
            o = 0;
            while ((i = t[o++])) {
              0 > r.indexOf(" " + i + " ") && (r += i + " ");
            }
            n.className = x.trim(r);
          }
        }
      }
      return this;
    },
    removeClass: function (e) {
      var t,
        n,
        r,
        i,
        o,
        a = 0,
        s = this.length,
        l = 0 === arguments.length || ("string" == typeof e && e);
      if (x.isFunction(e)) {
        return this.each(function (t) {
          x(this).removeClass(e.call(this, t, this.className));
        });
      }
      if (l) {
        for (t = (e || "").match(T) || []; s > a; a++) {
          if (
            ((n = this[a]),
            (r =
              1 === n.nodeType &&
              (n.className ? (" " + n.className + " ").replace(U, " ") : "")))
          ) {
            o = 0;
            while ((i = t[o++])) {
              while (r.indexOf(" " + i + " ") >= 0) {
                r = r.replace(" " + i + " ", " ");
              }
            }
            n.className = e ? x.trim(r) : "";
          }
        }
      }
      return this;
    },
    toggleClass: function (e, t) {
      var n = typeof e;
      return "boolean" == typeof t && "string" === n
        ? t
          ? this.addClass(e)
          : this.removeClass(e)
        : x.isFunction(e)
        ? this.each(function (n) {
            x(this).toggleClass(e.call(this, n, this.className, t), t);
          })
        : this.each(function () {
            if ("string" === n) {
              var t,
                r = 0,
                o = x(this),
                a = e.match(T) || [];
              while ((t = a[r++])) {
                o.hasClass(t) ? o.removeClass(t) : o.addClass(t);
              }
            } else {
              (n === i || "boolean" === n) &&
                (this.className &&
                  x._data(this, "__className__", this.className),
                (this.className =
                  this.className || e === !1
                    ? ""
                    : x._data(this, "__className__") || ""));
            }
          });
    },
    hasClass: function (e) {
      var t = " " + e + " ",
        n = 0,
        r = this.length;
      for (; r > n; n++) {
        if (
          1 === this[n].nodeType &&
          (" " + this[n].className + " ").replace(U, " ").indexOf(t) >= 0
        ) {
          return !0;
        }
      }
      return !1;
    },
    val: function (e) {
      var n,
        r,
        i,
        o = this[0];
      if (arguments.length) {
        return (
          (i = x.isFunction(e)),
          this.each(function (n) {
            var o;
            1 === this.nodeType &&
              ((o = i ? e.call(this, n, x(this).val()) : e),
              null == o
                ? (o = "")
                : "number" == typeof o
                ? (o += "")
                : x.isArray(o) &&
                  (o = x.map(o, function (e) {
                    return null == e ? "" : e + "";
                  })),
              (r =
                x.valHooks[this.type] ||
                x.valHooks[this.nodeName.toLowerCase()]),
              (r && "set" in r && r.set(this, o, "value") !== t) ||
                (this.value = o));
          })
        );
      }
      if (o) {
        return (
          (r = x.valHooks[o.type] || x.valHooks[o.nodeName.toLowerCase()]),
          r && "get" in r && (n = r.get(o, "value")) !== t
            ? n
            : ((n = o.value),
              "string" == typeof n ? n.replace(V, "") : null == n ? "" : n)
        );
      }
    },
  }),
    x.extend({
      valHooks: {
        option: {
          get: function (e) {
            var t = x.find.attr(e, "value");
            return null != t ? t : e.text;
          },
        },
        select: {
          get: function (e) {
            var t,
              n,
              r = e.options,
              i = e.selectedIndex,
              o = "select-one" === e.type || 0 > i,
              a = o ? null : [],
              s = o ? i + 1 : r.length,
              l = 0 > i ? s : o ? i : 0;
            for (; s > l; l++) {
              if (
                ((n = r[l]),
                !(
                  (!n.selected && l !== i) ||
                  (x.support.optDisabled
                    ? n.disabled
                    : null !== n.getAttribute("disabled")) ||
                  (n.parentNode.disabled &&
                    x.nodeName(n.parentNode, "optgroup"))
                ))
              ) {
                if (((t = x(n).val()), o)) {
                  return t;
                }
                a.push(t);
              }
            }
            return a;
          },
          set: function (e, t) {
            var n,
              r,
              i = e.options,
              o = x.makeArray(t),
              a = i.length;
            while (a--) {
              (r = i[a]),
                (r.selected = x.inArray(x(r).val(), o) >= 0) && (n = !0);
            }
            return n || (e.selectedIndex = -1), o;
          },
        },
      },
      attr: function (e, n, r) {
        var o,
          a,
          s = e.nodeType;
        if (e && 3 !== s && 8 !== s && 2 !== s) {
          return typeof e.getAttribute === i
            ? x.prop(e, n, r)
            : ((1 === s && x.isXMLDoc(e)) ||
                ((n = n.toLowerCase()),
                (o = x.attrHooks[n] || (x.expr.match.bool.test(n) ? X : z))),
              r === t
                ? o && "get" in o && null !== (a = o.get(e, n))
                  ? a
                  : ((a = x.find.attr(e, n)), null == a ? t : a)
                : null !== r
                ? o && "set" in o && (a = o.set(e, r, n)) !== t
                  ? a
                  : (e.setAttribute(n, r + ""), r)
                : (x.removeAttr(e, n), t));
        }
      },
      removeAttr: function (e, t) {
        var n,
          r,
          i = 0,
          o = t && t.match(T);
        if (o && 1 === e.nodeType) {
          while ((n = o[i++])) {
            (r = x.propFix[n] || n),
              x.expr.match.bool.test(n)
                ? (K && Q) || !G.test(n)
                  ? (e[r] = !1)
                  : (e[x.camelCase("default-" + n)] = e[r] = !1)
                : x.attr(e, n, ""),
              e.removeAttribute(Q ? n : r);
          }
        }
      },
      attrHooks: {
        type: {
          set: function (e, t) {
            if (
              !x.support.radioValue &&
              "radio" === t &&
              x.nodeName(e, "input")
            ) {
              var n = e.value;
              return e.setAttribute("type", t), n && (e.value = n), t;
            }
          },
        },
      },
      propFix: {
        for: "htmlFor",
        class: "className",
      },
      prop: function (e, n, r) {
        var i,
          o,
          a,
          s = e.nodeType;
        if (e && 3 !== s && 8 !== s && 2 !== s) {
          return (
            (a = 1 !== s || !x.isXMLDoc(e)),
            a && ((n = x.propFix[n] || n), (o = x.propHooks[n])),
            r !== t
              ? o && "set" in o && (i = o.set(e, r, n)) !== t
                ? i
                : (e[n] = r)
              : o && "get" in o && null !== (i = o.get(e, n))
              ? i
              : e[n]
          );
        }
      },
      propHooks: {
        tabIndex: {
          get: function (e) {
            var t = x.find.attr(e, "tabindex");
            return t
              ? parseInt(t, 10)
              : Y.test(e.nodeName) || (J.test(e.nodeName) && e.href)
              ? 0
              : -1;
          },
        },
      },
    }),
    (X = {
      set: function (e, t, n) {
        return (
          t === !1
            ? x.removeAttr(e, n)
            : (K && Q) || !G.test(n)
            ? e.setAttribute((!Q && x.propFix[n]) || n, n)
            : (e[x.camelCase("default-" + n)] = e[n] = !0),
          n
        );
      },
    }),
    x.each(x.expr.match.bool.source.match(/\w+/g), function (e, n) {
      var r = x.expr.attrHandle[n] || x.find.attr;
      x.expr.attrHandle[n] =
        (K && Q) || !G.test(n)
          ? function (e, n, i) {
              var o = x.expr.attrHandle[n],
                a = i
                  ? t
                  : (x.expr.attrHandle[n] = t) != r(e, n, i)
                  ? n.toLowerCase()
                  : null;
              return (x.expr.attrHandle[n] = o), a;
            }
          : function (e, n, r) {
              return r
                ? t
                : e[x.camelCase("default-" + n)]
                ? n.toLowerCase()
                : null;
            };
    }),
    (K && Q) ||
      (x.attrHooks.value = {
        set: function (e, n, r) {
          return x.nodeName(e, "input")
            ? ((e.defaultValue = n), t)
            : z && z.set(e, n, r);
        },
      }),
    Q ||
      ((z = {
        set: function (e, n, r) {
          var i = e.getAttributeNode(r);
          return (
            i || e.setAttributeNode((i = e.ownerDocument.createAttribute(r))),
            (i.value = n += ""),
            "value" === r || n === e.getAttribute(r) ? n : t
          );
        },
      }),
      (x.expr.attrHandle.id =
        x.expr.attrHandle.name =
        x.expr.attrHandle.coords =
          function (e, n, r) {
            var i;
            return r
              ? t
              : (i = e.getAttributeNode(n)) && "" !== i.value
              ? i.value
              : null;
          }),
      (x.valHooks.button = {
        get: function (e, n) {
          var r = e.getAttributeNode(n);
          return r && r.specified ? r.value : t;
        },
        set: z.set,
      }),
      (x.attrHooks.contenteditable = {
        set: function (e, t, n) {
          z.set(e, "" === t ? !1 : t, n);
        },
      }),
      x.each(["width", "height"], function (e, n) {
        x.attrHooks[n] = {
          set: function (e, r) {
            return "" === r ? (e.setAttribute(n, "auto"), r) : t;
          },
        };
      })),
    x.support.hrefNormalized ||
      x.each(["href", "src"], function (e, t) {
        x.propHooks[t] = {
          get: function (e) {
            return e.getAttribute(t, 4);
          },
        };
      }),
    x.support.style ||
      (x.attrHooks.style = {
        get: function (e) {
          return e.style.cssText || t;
        },
        set: function (e, t) {
          return (e.style.cssText = t + "");
        },
      }),
    x.support.optSelected ||
      (x.propHooks.selected = {
        get: function (e) {
          var t = e.parentNode;
          return (
            t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex),
            null
          );
        },
      }),
    x.each(
      [
        "tabIndex",
        "readOnly",
        "maxLength",
        "cellSpacing",
        "cellPadding",
        "rowSpan",
        "colSpan",
        "useMap",
        "frameBorder",
        "contentEditable",
      ],
      function () {
        x.propFix[this.toLowerCase()] = this;
      }
    ),
    x.support.enctype || (x.propFix.enctype = "encoding"),
    x.each(["radio", "checkbox"], function () {
      (x.valHooks[this] = {
        set: function (e, n) {
          return x.isArray(n) ? (e.checked = x.inArray(x(e).val(), n) >= 0) : t;
        },
      }),
        x.support.checkOn ||
          (x.valHooks[this].get = function (e) {
            return null === e.getAttribute("value") ? "on" : e.value;
          });
    });
  var Z = /^(?:input|select|textarea)$/i,
    et = /^key/,
    tt = /^(?:mouse|contextmenu)|click/,
    nt = /^(?:focusinfocus|focusoutblur)$/,
    rt = /^([^.]*)(?:\.(.+)|)$/;
  function it() {
    return !0;
  }
  function ot() {
    return !1;
  }
  function at() {
    try {
      return a.activeElement;
    } catch (e) {}
  }
  (x.event = {
    global: {},
    add: function (e, n, r, o, a) {
      var s,
        l,
        u,
        c,
        p,
        f,
        d,
        h,
        g,
        m,
        y,
        v = x._data(e);
      if (v) {
        r.handler && ((c = r), (r = c.handler), (a = c.selector)),
          r.guid || (r.guid = x.guid++),
          (l = v.events) || (l = v.events = {}),
          (f = v.handle) ||
            ((f = v.handle =
              function (e) {
                return typeof x === i || (e && x.event.triggered === e.type)
                  ? t
                  : x.event.dispatch.apply(f.elem, arguments);
              }),
            (f.elem = e)),
          (n = (n || "").match(T) || [""]),
          (u = n.length);
        while (u--) {
          (s = rt.exec(n[u]) || []),
            (g = y = s[1]),
            (m = (s[2] || "").split(".").sort()),
            g &&
              ((p = x.event.special[g] || {}),
              (g = (a ? p.delegateType : p.bindType) || g),
              (p = x.event.special[g] || {}),
              (d = x.extend(
                {
                  type: g,
                  origType: y,
                  data: o,
                  handler: r,
                  guid: r.guid,
                  selector: a,
                  needsContext: a && x.expr.match.needsContext.test(a),
                  namespace: m.join("."),
                },
                c
              )),
              (h = l[g]) ||
                ((h = l[g] = []),
                (h.delegateCount = 0),
                (p.setup && p.setup.call(e, o, m, f) !== !1) ||
                  (e.addEventListener
                    ? e.addEventListener(g, f, !1)
                    : e.attachEvent && e.attachEvent("on" + g, f))),
              p.add &&
                (p.add.call(e, d), d.handler.guid || (d.handler.guid = r.guid)),
              a ? h.splice(h.delegateCount++, 0, d) : h.push(d),
              (x.event.global[g] = !0));
        }
        e = null;
      }
    },
    remove: function (e, t, n, r, i) {
      var o,
        a,
        s,
        l,
        u,
        c,
        p,
        f,
        d,
        h,
        g,
        m = x.hasData(e) && x._data(e);
      if (m && (c = m.events)) {
        (t = (t || "").match(T) || [""]), (u = t.length);
        while (u--) {
          if (
            ((s = rt.exec(t[u]) || []),
            (d = g = s[1]),
            (h = (s[2] || "").split(".").sort()),
            d)
          ) {
            (p = x.event.special[d] || {}),
              (d = (r ? p.delegateType : p.bindType) || d),
              (f = c[d] || []),
              (s =
                s[2] &&
                RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)")),
              (l = o = f.length);
            while (o--) {
              (a = f[o]),
                (!i && g !== a.origType) ||
                  (n && n.guid !== a.guid) ||
                  (s && !s.test(a.namespace)) ||
                  (r && r !== a.selector && ("**" !== r || !a.selector)) ||
                  (f.splice(o, 1),
                  a.selector && f.delegateCount--,
                  p.remove && p.remove.call(e, a));
            }
            l &&
              !f.length &&
              ((p.teardown && p.teardown.call(e, h, m.handle) !== !1) ||
                x.removeEvent(e, d, m.handle),
              delete c[d]);
          } else {
            for (d in c) {
              x.event.remove(e, d + t[u], n, r, !0);
            }
          }
        }
        x.isEmptyObject(c) && (delete m.handle, x._removeData(e, "events"));
      }
    },
    trigger: function (n, r, i, o) {
      var s,
        l,
        u,
        c,
        p,
        f,
        d,
        h = [i || a],
        g = v.call(n, "type") ? n.type : n,
        m = v.call(n, "namespace") ? n.namespace.split(".") : [];
      if (
        ((u = f = i = i || a),
        3 !== i.nodeType &&
          8 !== i.nodeType &&
          !nt.test(g + x.event.triggered) &&
          (g.indexOf(".") >= 0 &&
            ((m = g.split(".")), (g = m.shift()), m.sort()),
          (l = 0 > g.indexOf(":") && "on" + g),
          (n = n[x.expando] ? n : new x.Event(g, "object" == typeof n && n)),
          (n.isTrigger = o ? 2 : 3),
          (n.namespace = m.join(".")),
          (n.namespace_re = n.namespace
            ? RegExp("(^|\\.)" + m.join("\\.(?:.*\\.|)") + "(\\.|$)")
            : null),
          (n.result = t),
          n.target || (n.target = i),
          (r = null == r ? [n] : x.makeArray(r, [n])),
          (p = x.event.special[g] || {}),
          o || !p.trigger || p.trigger.apply(i, r) !== !1))
      ) {
        if (!o && !p.noBubble && !x.isWindow(i)) {
          for (
            c = p.delegateType || g, nt.test(c + g) || (u = u.parentNode);
            u;
            u = u.parentNode
          ) {
            h.push(u), (f = u);
          }
          f === (i.ownerDocument || a) &&
            h.push(f.defaultView || f.parentWindow || e);
        }
        d = 0;
        while ((u = h[d++]) && !n.isPropagationStopped()) {
          (n.type = d > 1 ? c : p.bindType || g),
            (s = (x._data(u, "events") || {})[n.type] && x._data(u, "handle")),
            s && s.apply(u, r),
            (s = l && u[l]),
            s &&
              x.acceptData(u) &&
              s.apply &&
              s.apply(u, r) === !1 &&
              n.preventDefault();
        }
        if (
          ((n.type = g),
          !o &&
            !n.isDefaultPrevented() &&
            (!p._default || p._default.apply(h.pop(), r) === !1) &&
            x.acceptData(i) &&
            l &&
            i[g] &&
            !x.isWindow(i))
        ) {
          (f = i[l]), f && (i[l] = null), (x.event.triggered = g);
          try {
            i[g]();
          } catch (y) {}
          (x.event.triggered = t), f && (i[l] = f);
        }
        return n.result;
      }
    },
    dispatch: function (e) {
      e = x.event.fix(e);
      var n,
        r,
        i,
        o,
        a,
        s = [],
        l = g.call(arguments),
        u = (x._data(this, "events") || {})[e.type] || [],
        c = x.event.special[e.type] || {};
      if (
        ((l[0] = e),
        (e.delegateTarget = this),
        !c.preDispatch || c.preDispatch.call(this, e) !== !1)
      ) {
        (s = x.event.handlers.call(this, e, u)), (n = 0);
        while ((o = s[n++]) && !e.isPropagationStopped()) {
          (e.currentTarget = o.elem), (a = 0);
          while ((i = o.handlers[a++]) && !e.isImmediatePropagationStopped()) {
            (!e.namespace_re || e.namespace_re.test(i.namespace)) &&
              ((e.handleObj = i),
              (e.data = i.data),
              (r = (
                (x.event.special[i.origType] || {}).handle || i.handler
              ).apply(o.elem, l)),
              r !== t &&
                (e.result = r) === !1 &&
                (e.preventDefault(), e.stopPropagation()));
          }
        }
        return c.postDispatch && c.postDispatch.call(this, e), e.result;
      }
    },
    handlers: function (e, n) {
      var r,
        i,
        o,
        a,
        s = [],
        l = n.delegateCount,
        u = e.target;
      if (l && u.nodeType && (!e.button || "click" !== e.type)) {
        for (; u != this; u = u.parentNode || this) {
          if (1 === u.nodeType && (u.disabled !== !0 || "click" !== e.type)) {
            for (o = [], a = 0; l > a; a++) {
              (i = n[a]),
                (r = i.selector + " "),
                o[r] === t &&
                  (o[r] = i.needsContext
                    ? x(r, this).index(u) >= 0
                    : x.find(r, this, null, [u]).length),
                o[r] && o.push(i);
            }
            o.length &&
              s.push({
                elem: u,
                handlers: o,
              });
          }
        }
      }
      return (
        n.length > l &&
          s.push({
            elem: this,
            handlers: n.slice(l),
          }),
        s
      );
    },
    fix: function (e) {
      if (e[x.expando]) {
        return e;
      }
      var t,
        n,
        r,
        i = e.type,
        o = e,
        s = this.fixHooks[i];
      s ||
        (this.fixHooks[i] = s =
          tt.test(i) ? this.mouseHooks : et.test(i) ? this.keyHooks : {}),
        (r = s.props ? this.props.concat(s.props) : this.props),
        (e = new x.Event(o)),
        (t = r.length);
      while (t--) {
        (n = r[t]), (e[n] = o[n]);
      }
      return (
        e.target || (e.target = o.srcElement || a),
        3 === e.target.nodeType && (e.target = e.target.parentNode),
        (e.metaKey = !!e.metaKey),
        s.filter ? s.filter(e, o) : e
      );
    },
    props:
      "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(
        " "
      ),
    fixHooks: {},
    keyHooks: {
      props: "char charCode key keyCode".split(" "),
      filter: function (e, t) {
        return (
          null == e.which &&
            (e.which = null != t.charCode ? t.charCode : t.keyCode),
          e
        );
      },
    },
    mouseHooks: {
      props:
        "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(
          " "
        ),
      filter: function (e, n) {
        var r,
          i,
          o,
          s = n.button,
          l = n.fromElement;
        return (
          null == e.pageX &&
            null != n.clientX &&
            ((i = e.target.ownerDocument || a),
            (o = i.documentElement),
            (r = i.body),
            (e.pageX =
              n.clientX +
              ((o && o.scrollLeft) || (r && r.scrollLeft) || 0) -
              ((o && o.clientLeft) || (r && r.clientLeft) || 0)),
            (e.pageY =
              n.clientY +
              ((o && o.scrollTop) || (r && r.scrollTop) || 0) -
              ((o && o.clientTop) || (r && r.clientTop) || 0))),
          !e.relatedTarget &&
            l &&
            (e.relatedTarget = l === e.target ? n.toElement : l),
          e.which ||
            s === t ||
            (e.which = 1 & s ? 1 : 2 & s ? 3 : 4 & s ? 2 : 0),
          e
        );
      },
    },
    special: {
      load: {
        noBubble: !0,
      },
      focus: {
        trigger: function () {
          if (this !== at() && this.focus) {
            try {
              return this.focus(), !1;
            } catch (e) {}
          }
        },
        delegateType: "focusin",
      },
      blur: {
        trigger: function () {
          return this === at() && this.blur ? (this.blur(), !1) : t;
        },
        delegateType: "focusout",
      },
      click: {
        trigger: function () {
          return x.nodeName(this, "input") &&
            "checkbox" === this.type &&
            this.click
            ? (this.click(), !1)
            : t;
        },
        _default: function (e) {
          return x.nodeName(e.target, "a");
        },
      },
      beforeunload: {
        postDispatch: function (e) {
          e.result !== t && (e.originalEvent.returnValue = e.result);
        },
      },
    },
    simulate: function (e, t, n, r) {
      var i = x.extend(new x.Event(), n, {
        type: e,
        isSimulated: !0,
        originalEvent: {},
      });
      r ? x.event.trigger(i, null, t) : x.event.dispatch.call(t, i),
        i.isDefaultPrevented() && n.preventDefault();
    },
  }),
    (x.removeEvent = a.removeEventListener
      ? function (e, t, n) {
          e.removeEventListener && e.removeEventListener(t, n, !1);
        }
      : function (e, t, n) {
          var r = "on" + t;
          e.detachEvent &&
            (typeof e[r] === i && (e[r] = null), e.detachEvent(r, n));
        }),
    (x.Event = function (e, n) {
      return this instanceof x.Event
        ? (e && e.type
            ? ((this.originalEvent = e),
              (this.type = e.type),
              (this.isDefaultPrevented =
                e.defaultPrevented ||
                e.returnValue === !1 ||
                (e.getPreventDefault && e.getPreventDefault())
                  ? it
                  : ot))
            : (this.type = e),
          n && x.extend(this, n),
          (this.timeStamp = (e && e.timeStamp) || x.now()),
          (this[x.expando] = !0),
          t)
        : new x.Event(e, n);
    }),
    (x.Event.prototype = {
      isDefaultPrevented: ot,
      isPropagationStopped: ot,
      isImmediatePropagationStopped: ot,
      preventDefault: function () {
        var e = this.originalEvent;
        (this.isDefaultPrevented = it),
          e && (e.preventDefault ? e.preventDefault() : (e.returnValue = !1));
      },
      stopPropagation: function () {
        var e = this.originalEvent;
        (this.isPropagationStopped = it),
          e &&
            (e.stopPropagation && e.stopPropagation(), (e.cancelBubble = !0));
      },
      stopImmediatePropagation: function () {
        (this.isImmediatePropagationStopped = it), this.stopPropagation();
      },
    }),
    x.each(
      {
        mouseenter: "mouseover",
        mouseleave: "mouseout",
      },
      function (e, t) {
        x.event.special[e] = {
          delegateType: t,
          bindType: t,
          handle: function (e) {
            var n,
              r = this,
              i = e.relatedTarget,
              o = e.handleObj;
            return (
              (!i || (i !== r && !x.contains(r, i))) &&
                ((e.type = o.origType),
                (n = o.handler.apply(this, arguments)),
                (e.type = t)),
              n
            );
          },
        };
      }
    ),
    x.support.submitBubbles ||
      (x.event.special.submit = {
        setup: function () {
          return x.nodeName(this, "form")
            ? !1
            : (x.event.add(
                this,
                "click._submit keypress._submit",
                function (e) {
                  var n = e.target,
                    r =
                      x.nodeName(n, "input") || x.nodeName(n, "button")
                        ? n.form
                        : t;
                  r &&
                    !x._data(r, "submitBubbles") &&
                    (x.event.add(r, "submit._submit", function (e) {
                      e._submit_bubble = !0;
                    }),
                    x._data(r, "submitBubbles", !0));
                }
              ),
              t);
        },
        postDispatch: function (e) {
          e._submit_bubble &&
            (delete e._submit_bubble,
            this.parentNode &&
              !e.isTrigger &&
              x.event.simulate("submit", this.parentNode, e, !0));
        },
        teardown: function () {
          return x.nodeName(this, "form")
            ? !1
            : (x.event.remove(this, "._submit"), t);
        },
      }),
    x.support.changeBubbles ||
      (x.event.special.change = {
        setup: function () {
          return Z.test(this.nodeName)
            ? (("checkbox" === this.type || "radio" === this.type) &&
                (x.event.add(this, "propertychange._change", function (e) {
                  "checked" === e.originalEvent.propertyName &&
                    (this._just_changed = !0);
                }),
                x.event.add(this, "click._change", function (e) {
                  this._just_changed &&
                    !e.isTrigger &&
                    (this._just_changed = !1),
                    x.event.simulate("change", this, e, !0);
                })),
              !1)
            : (x.event.add(this, "beforeactivate._change", function (e) {
                var t = e.target;
                Z.test(t.nodeName) &&
                  !x._data(t, "changeBubbles") &&
                  (x.event.add(t, "change._change", function (e) {
                    !this.parentNode ||
                      e.isSimulated ||
                      e.isTrigger ||
                      x.event.simulate("change", this.parentNode, e, !0);
                  }),
                  x._data(t, "changeBubbles", !0));
              }),
              t);
        },
        handle: function (e) {
          var n = e.target;
          return this !== n ||
            e.isSimulated ||
            e.isTrigger ||
            ("radio" !== n.type && "checkbox" !== n.type)
            ? e.handleObj.handler.apply(this, arguments)
            : t;
        },
        teardown: function () {
          return x.event.remove(this, "._change"), !Z.test(this.nodeName);
        },
      }),
    x.support.focusinBubbles ||
      x.each(
        {
          focus: "focusin",
          blur: "focusout",
        },
        function (e, t) {
          var n = 0,
            r = function (e) {
              x.event.simulate(t, e.target, x.event.fix(e), !0);
            };
          x.event.special[t] = {
            setup: function () {
              0 === n++ && a.addEventListener(e, r, !0);
            },
            teardown: function () {
              0 === --n && a.removeEventListener(e, r, !0);
            },
          };
        }
      ),
    x.fn.extend({
      on: function (e, n, r, i, o) {
        var a, s;
        if ("object" == typeof e) {
          "string" != typeof n && ((r = r || n), (n = t));
          for (a in e) {
            this.on(a, n, r, e[a], o);
          }
          return this;
        }
        if (
          (null == r && null == i
            ? ((i = n), (r = n = t))
            : null == i &&
              ("string" == typeof n
                ? ((i = r), (r = t))
                : ((i = r), (r = n), (n = t))),
          i === !1)
        ) {
          i = ot;
        } else {
          if (!i) {
            return this;
          }
        }
        return (
          1 === o &&
            ((s = i),
            (i = function (e) {
              return x().off(e), s.apply(this, arguments);
            }),
            (i.guid = s.guid || (s.guid = x.guid++))),
          this.each(function () {
            x.event.add(this, e, i, r, n);
          })
        );
      },
      one: function (e, t, n, r) {
        return this.on(e, t, n, r, 1);
      },
      off: function (e, n, r) {
        var i, o;
        if (e && e.preventDefault && e.handleObj) {
          return (
            (i = e.handleObj),
            x(e.delegateTarget).off(
              i.namespace ? i.origType + "." + i.namespace : i.origType,
              i.selector,
              i.handler
            ),
            this
          );
        }
        if ("object" == typeof e) {
          for (o in e) {
            this.off(o, n, e[o]);
          }
          return this;
        }
        return (
          (n === !1 || "function" == typeof n) && ((r = n), (n = t)),
          r === !1 && (r = ot),
          this.each(function () {
            x.event.remove(this, e, r, n);
          })
        );
      },
      trigger: function (e, t) {
        return this.each(function () {
          x.event.trigger(e, t, this);
        });
      },
      triggerHandler: function (e, n) {
        var r = this[0];
        return r ? x.event.trigger(e, n, r, !0) : t;
      },
    });
  var st = /^.[^:#\[\.,]*$/,
    lt = /^(?:parents|prev(?:Until|All))/,
    ut = x.expr.match.needsContext,
    ct = {
      children: !0,
      contents: !0,
      next: !0,
      prev: !0,
    };
  x.fn.extend({
    find: function (e) {
      var t,
        n = [],
        r = this,
        i = r.length;
      if ("string" != typeof e) {
        return this.pushStack(
          x(e).filter(function () {
            for (t = 0; i > t; t++) {
              if (x.contains(r[t], this)) {
                return !0;
              }
            }
          })
        );
      }
      for (t = 0; i > t; t++) {
        x.find(e, r[t], n);
      }
      return (
        (n = this.pushStack(i > 1 ? x.unique(n) : n)),
        (n.selector = this.selector ? this.selector + " " + e : e),
        n
      );
    },
    has: function (e) {
      var t,
        n = x(e, this),
        r = n.length;
      return this.filter(function () {
        for (t = 0; r > t; t++) {
          if (x.contains(this, n[t])) {
            return !0;
          }
        }
      });
    },
    not: function (e) {
      return this.pushStack(ft(this, e || [], !0));
    },
    filter: function (e) {
      return this.pushStack(ft(this, e || [], !1));
    },
    is: function (e) {
      return !!ft(this, "string" == typeof e && ut.test(e) ? x(e) : e || [], !1)
        .length;
    },
    closest: function (e, t) {
      var n,
        r = 0,
        i = this.length,
        o = [],
        a = ut.test(e) || "string" != typeof e ? x(e, t || this.context) : 0;
      for (; i > r; r++) {
        for (n = this[r]; n && n !== t; n = n.parentNode) {
          if (
            11 > n.nodeType &&
            (a
              ? a.index(n) > -1
              : 1 === n.nodeType && x.find.matchesSelector(n, e))
          ) {
            n = o.push(n);
            break;
          }
        }
      }
      return this.pushStack(o.length > 1 ? x.unique(o) : o);
    },
    index: function (e) {
      return e
        ? "string" == typeof e
          ? x.inArray(this[0], x(e))
          : x.inArray(e.jquery ? e[0] : e, this)
        : this[0] && this[0].parentNode
        ? this.first().prevAll().length
        : -1;
    },
    add: function (e, t) {
      var n =
          "string" == typeof e
            ? x(e, t)
            : x.makeArray(e && e.nodeType ? [e] : e),
        r = x.merge(this.get(), n);
      return this.pushStack(x.unique(r));
    },
    addBack: function (e) {
      return this.add(null == e ? this.prevObject : this.prevObject.filter(e));
    },
  });
  function pt(e, t) {
    do {
      e = e[t];
    } while (e && 1 !== e.nodeType);
    return e;
  }
  x.each(
    {
      parent: function (e) {
        var t = e.parentNode;
        return t && 11 !== t.nodeType ? t : null;
      },
      parents: function (e) {
        return x.dir(e, "parentNode");
      },
      parentsUntil: function (e, t, n) {
        return x.dir(e, "parentNode", n);
      },
      next: function (e) {
        return pt(e, "nextSibling");
      },
      prev: function (e) {
        return pt(e, "previousSibling");
      },
      nextAll: function (e) {
        return x.dir(e, "nextSibling");
      },
      prevAll: function (e) {
        return x.dir(e, "previousSibling");
      },
      nextUntil: function (e, t, n) {
        return x.dir(e, "nextSibling", n);
      },
      prevUntil: function (e, t, n) {
        return x.dir(e, "previousSibling", n);
      },
      siblings: function (e) {
        return x.sibling((e.parentNode || {}).firstChild, e);
      },
      children: function (e) {
        return x.sibling(e.firstChild);
      },
      contents: function (e) {
        return x.nodeName(e, "iframe")
          ? e.contentDocument || e.contentWindow.document
          : x.merge([], e.childNodes);
      },
    },
    function (e, t) {
      x.fn[e] = function (n, r) {
        var i = x.map(this, t, n);
        return (
          "Until" !== e.slice(-5) && (r = n),
          r && "string" == typeof r && (i = x.filter(r, i)),
          this.length > 1 &&
            (ct[e] || (i = x.unique(i)), lt.test(e) && (i = i.reverse())),
          this.pushStack(i)
        );
      };
    }
  ),
    x.extend({
      filter: function (e, t, n) {
        var r = t[0];
        return (
          n && (e = ":not(" + e + ")"),
          1 === t.length && 1 === r.nodeType
            ? x.find.matchesSelector(r, e)
              ? [r]
              : []
            : x.find.matches(
                e,
                x.grep(t, function (e) {
                  return 1 === e.nodeType;
                })
              )
        );
      },
      dir: function (e, n, r) {
        var i = [],
          o = e[n];
        while (
          o &&
          9 !== o.nodeType &&
          (r === t || 1 !== o.nodeType || !x(o).is(r))
        ) {
          1 === o.nodeType && i.push(o), (o = o[n]);
        }
        return i;
      },
      sibling: function (e, t) {
        var n = [];
        for (; e; e = e.nextSibling) {
          1 === e.nodeType && e !== t && n.push(e);
        }
        return n;
      },
    });
  function ft(e, t, n) {
    if (x.isFunction(t)) {
      return x.grep(e, function (e, r) {
        return !!t.call(e, r, e) !== n;
      });
    }
    if (t.nodeType) {
      return x.grep(e, function (e) {
        return (e === t) !== n;
      });
    }
    if ("string" == typeof t) {
      if (st.test(t)) {
        return x.filter(t, e, n);
      }
      t = x.filter(t, e);
    }
    return x.grep(e, function (e) {
      return x.inArray(e, t) >= 0 !== n;
    });
  }
  function dt(e) {
    var t = ht.split("|"),
      n = e.createDocumentFragment();
    if (n.createElement) {
      while (t.length) {
        n.createElement(t.pop());
      }
    }
    return n;
  }
  var ht =
      "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
    gt = / jQuery\d+="(?:null|\d+)"/g,
    mt = RegExp("<(?:" + ht + ")[\\s/>]", "i"),
    yt = /^\s+/,
    vt =
      /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
    bt = /<([\w:]+)/,
    xt = /<tbody/i,
    wt = /<|&#?\w+;/,
    Tt = /<(?:script|style|link)/i,
    Ct = /^(?:checkbox|radio)$/i,
    Nt = /checked\s*(?:[^=]|=\s*.checked.)/i,
    kt = /^$|\/(?:java|ecma)script/i,
    Et = /^true\/(.*)/,
    St = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
    At = {
      option: [1, "<select multiple='multiple'>", "</select>"],
      legend: [1, "<fieldset>", "</fieldset>"],
      area: [1, "<map>", "</map>"],
      param: [1, "<object>", "</object>"],
      thead: [1, "<table>", "</table>"],
      tr: [2, "<table><tbody>", "</tbody></table>"],
      col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
      td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
      _default: x.support.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"],
    },
    jt = dt(a),
    Dt = jt.appendChild(a.createElement("div"));
  (At.optgroup = At.option),
    (At.tbody = At.tfoot = At.colgroup = At.caption = At.thead),
    (At.th = At.td),
    x.fn.extend({
      text: function (e) {
        return x.access(
          this,
          function (e) {
            return e === t
              ? x.text(this)
              : this.empty().append(
                  ((this[0] && this[0].ownerDocument) || a).createTextNode(e)
                );
          },
          null,
          e,
          arguments.length
        );
      },
      append: function () {
        return this.domManip(arguments, function (e) {
          if (
            1 === this.nodeType ||
            11 === this.nodeType ||
            9 === this.nodeType
          ) {
            var t = Lt(this, e);
            t.appendChild(e);
          }
        });
      },
      prepend: function () {
        return this.domManip(arguments, function (e) {
          if (
            1 === this.nodeType ||
            11 === this.nodeType ||
            9 === this.nodeType
          ) {
            var t = Lt(this, e);
            t.insertBefore(e, t.firstChild);
          }
        });
      },
      before: function () {
        return this.domManip(arguments, function (e) {
          this.parentNode && this.parentNode.insertBefore(e, this);
        });
      },
      after: function () {
        return this.domManip(arguments, function (e) {
          this.parentNode && this.parentNode.insertBefore(e, this.nextSibling);
        });
      },
      remove: function (e, t) {
        var n,
          r = e ? x.filter(e, this) : this,
          i = 0;
        for (; null != (n = r[i]); i++) {
          t || 1 !== n.nodeType || x.cleanData(Ft(n)),
            n.parentNode &&
              (t && x.contains(n.ownerDocument, n) && _t(Ft(n, "script")),
              n.parentNode.removeChild(n));
        }
        return this;
      },
      empty: function () {
        var e,
          t = 0;
        for (; null != (e = this[t]); t++) {
          1 === e.nodeType && x.cleanData(Ft(e, !1));
          while (e.firstChild) {
            e.removeChild(e.firstChild);
          }
          e.options && x.nodeName(e, "select") && (e.options.length = 0);
        }
        return this;
      },
      clone: function (e, t) {
        return (
          (e = null == e ? !1 : e),
          (t = null == t ? e : t),
          this.map(function () {
            return x.clone(this, e, t);
          })
        );
      },
      html: function (e) {
        return x.access(
          this,
          function (e) {
            var n = this[0] || {},
              r = 0,
              i = this.length;
            if (e === t) {
              return 1 === n.nodeType ? n.innerHTML.replace(gt, "") : t;
            }
            if (
              !(
                "string" != typeof e ||
                Tt.test(e) ||
                (!x.support.htmlSerialize && mt.test(e)) ||
                (!x.support.leadingWhitespace && yt.test(e)) ||
                At[(bt.exec(e) || ["", ""])[1].toLowerCase()]
              )
            ) {
              e = e.replace(vt, "<$1></$2>");
              try {
                for (; i > r; r++) {
                  (n = this[r] || {}),
                    1 === n.nodeType &&
                      (x.cleanData(Ft(n, !1)), (n.innerHTML = e));
                }
                n = 0;
              } catch (o) {}
            }
            n && this.empty().append(e);
          },
          null,
          e,
          arguments.length
        );
      },
      replaceWith: function () {
        var e = x.map(this, function (e) {
            return [e.nextSibling, e.parentNode];
          }),
          t = 0;
        return (
          this.domManip(
            arguments,
            function (n) {
              var r = e[t++],
                i = e[t++];
              i &&
                (r && r.parentNode !== i && (r = this.nextSibling),
                x(this).remove(),
                i.insertBefore(n, r));
            },
            !0
          ),
          t ? this : this.remove()
        );
      },
      detach: function (e) {
        return this.remove(e, !0);
      },
      domManip: function (e, t, n) {
        e = d.apply([], e);
        var r,
          i,
          o,
          a,
          s,
          l,
          u = 0,
          c = this.length,
          p = this,
          f = c - 1,
          h = e[0],
          g = x.isFunction(h);
        if (
          g ||
          (!(1 >= c || "string" != typeof h || x.support.checkClone) &&
            Nt.test(h))
        ) {
          return this.each(function (r) {
            var i = p.eq(r);
            g && (e[0] = h.call(this, r, i.html())), i.domManip(e, t, n);
          });
        }
        if (
          c &&
          ((l = x.buildFragment(e, this[0].ownerDocument, !1, !n && this)),
          (r = l.firstChild),
          1 === l.childNodes.length && (l = r),
          r)
        ) {
          for (a = x.map(Ft(l, "script"), Ht), o = a.length; c > u; u++) {
            (i = l),
              u !== f &&
                ((i = x.clone(i, !0, !0)), o && x.merge(a, Ft(i, "script"))),
              t.call(this[u], i, u);
          }
          if (o) {
            for (
              s = a[a.length - 1].ownerDocument, x.map(a, qt), u = 0;
              o > u;
              u++
            ) {
              (i = a[u]),
                kt.test(i.type || "") &&
                  !x._data(i, "globalEval") &&
                  x.contains(s, i) &&
                  (i.src
                    ? x._evalUrl(i.src)
                    : x.globalEval(
                        (i.text || i.textContent || i.innerHTML || "").replace(
                          St,
                          ""
                        )
                      ));
            }
          }
          l = r = null;
        }
        return this;
      },
    });
  function Lt(e, t) {
    return x.nodeName(e, "table") &&
      x.nodeName(1 === t.nodeType ? t : t.firstChild, "tr")
      ? e.getElementsByTagName("tbody")[0] ||
          e.appendChild(e.ownerDocument.createElement("tbody"))
      : e;
  }
  function Ht(e) {
    return (e.type = (null !== x.find.attr(e, "type")) + "/" + e.type), e;
  }
  function qt(e) {
    var t = Et.exec(e.type);
    return t ? (e.type = t[1]) : e.removeAttribute("type"), e;
  }
  function _t(e, t) {
    var n,
      r = 0;
    for (; null != (n = e[r]); r++) {
      x._data(n, "globalEval", !t || x._data(t[r], "globalEval"));
    }
  }
  function Mt(e, t) {
    if (1 === t.nodeType && x.hasData(e)) {
      var n,
        r,
        i,
        o = x._data(e),
        a = x._data(t, o),
        s = o.events;
      if (s) {
        delete a.handle, (a.events = {});
        for (n in s) {
          for (r = 0, i = s[n].length; i > r; r++) {
            x.event.add(t, n, s[n][r]);
          }
        }
      }
      a.data && (a.data = x.extend({}, a.data));
    }
  }
  function Ot(e, t) {
    var n, r, i;
    if (1 === t.nodeType) {
      if (
        ((n = t.nodeName.toLowerCase()),
        !x.support.noCloneEvent && t[x.expando])
      ) {
        i = x._data(t);
        for (r in i.events) {
          x.removeEvent(t, r, i.handle);
        }
        t.removeAttribute(x.expando);
      }
      "script" === n && t.text !== e.text
        ? ((Ht(t).text = e.text), qt(t))
        : "object" === n
        ? (t.parentNode && (t.outerHTML = e.outerHTML),
          x.support.html5Clone &&
            e.innerHTML &&
            !x.trim(t.innerHTML) &&
            (t.innerHTML = e.innerHTML))
        : "input" === n && Ct.test(e.type)
        ? ((t.defaultChecked = t.checked = e.checked),
          t.value !== e.value && (t.value = e.value))
        : "option" === n
        ? (t.defaultSelected = t.selected = e.defaultSelected)
        : ("input" === n || "textarea" === n) &&
          (t.defaultValue = e.defaultValue);
    }
  }
  x.each(
    {
      appendTo: "append",
      prependTo: "prepend",
      insertBefore: "before",
      insertAfter: "after",
      replaceAll: "replaceWith",
    },
    function (e, t) {
      x.fn[e] = function (e) {
        var n,
          r = 0,
          i = [],
          o = x(e),
          a = o.length - 1;
        for (; a >= r; r++) {
          (n = r === a ? this : this.clone(!0)),
            x(o[r])[t](n),
            h.apply(i, n.get());
        }
        return this.pushStack(i);
      };
    }
  );
  function Ft(e, n) {
    var r,
      o,
      a = 0,
      s =
        typeof e.getElementsByTagName !== i
          ? e.getElementsByTagName(n || "*")
          : typeof e.querySelectorAll !== i
          ? e.querySelectorAll(n || "*")
          : t;
    if (!s) {
      for (s = [], r = e.childNodes || e; null != (o = r[a]); a++) {
        !n || x.nodeName(o, n) ? s.push(o) : x.merge(s, Ft(o, n));
      }
    }
    return n === t || (n && x.nodeName(e, n)) ? x.merge([e], s) : s;
  }
  function Bt(e) {
    Ct.test(e.type) && (e.defaultChecked = e.checked);
  }
  x.extend({
    clone: function (e, t, n) {
      var r,
        i,
        o,
        a,
        s,
        l = x.contains(e.ownerDocument, e);
      if (
        (x.support.html5Clone ||
        x.isXMLDoc(e) ||
        !mt.test("<" + e.nodeName + ">")
          ? (o = e.cloneNode(!0))
          : ((Dt.innerHTML = e.outerHTML), Dt.removeChild((o = Dt.firstChild))),
        !(
          (x.support.noCloneEvent && x.support.noCloneChecked) ||
          (1 !== e.nodeType && 11 !== e.nodeType) ||
          x.isXMLDoc(e)
        ))
      ) {
        for (r = Ft(o), s = Ft(e), a = 0; null != (i = s[a]); ++a) {
          r[a] && Ot(i, r[a]);
        }
      }
      if (t) {
        if (n) {
          for (s = s || Ft(e), r = r || Ft(o), a = 0; null != (i = s[a]); a++) {
            Mt(i, r[a]);
          }
        } else {
          Mt(e, o);
        }
      }
      return (
        (r = Ft(o, "script")),
        r.length > 0 && _t(r, !l && Ft(e, "script")),
        (r = s = i = null),
        o
      );
    },
    buildFragment: function (e, t, n, r) {
      var i,
        o,
        a,
        s,
        l,
        u,
        c,
        p = e.length,
        f = dt(t),
        d = [],
        h = 0;
      for (; p > h; h++) {
        if (((o = e[h]), o || 0 === o)) {
          if ("object" === x.type(o)) {
            x.merge(d, o.nodeType ? [o] : o);
          } else {
            if (wt.test(o)) {
              (s = s || f.appendChild(t.createElement("div"))),
                (l = (bt.exec(o) || ["", ""])[1].toLowerCase()),
                (c = At[l] || At._default),
                (s.innerHTML = c[1] + o.replace(vt, "<$1></$2>") + c[2]),
                (i = c[0]);
              while (i--) {
                s = s.lastChild;
              }
              if (
                (!x.support.leadingWhitespace &&
                  yt.test(o) &&
                  d.push(t.createTextNode(yt.exec(o)[0])),
                !x.support.tbody)
              ) {
                (o =
                  "table" !== l || xt.test(o)
                    ? "<table>" !== c[1] || xt.test(o)
                      ? 0
                      : s
                    : s.firstChild),
                  (i = o && o.childNodes.length);
                while (i--) {
                  x.nodeName((u = o.childNodes[i]), "tbody") &&
                    !u.childNodes.length &&
                    o.removeChild(u);
                }
              }
              x.merge(d, s.childNodes), (s.textContent = "");
              while (s.firstChild) {
                s.removeChild(s.firstChild);
              }
              s = f.lastChild;
            } else {
              d.push(t.createTextNode(o));
            }
          }
        }
      }
      s && f.removeChild(s),
        x.support.appendChecked || x.grep(Ft(d, "input"), Bt),
        (h = 0);
      while ((o = d[h++])) {
        if (
          (!r || -1 === x.inArray(o, r)) &&
          ((a = x.contains(o.ownerDocument, o)),
          (s = Ft(f.appendChild(o), "script")),
          a && _t(s),
          n)
        ) {
          i = 0;
          while ((o = s[i++])) {
            kt.test(o.type || "") && n.push(o);
          }
        }
      }
      return (s = null), f;
    },
    cleanData: function (e, t) {
      var n,
        r,
        o,
        a,
        s = 0,
        l = x.expando,
        u = x.cache,
        c = x.support.deleteExpando,
        f = x.event.special;
      for (; null != (n = e[s]); s++) {
        if ((t || x.acceptData(n)) && ((o = n[l]), (a = o && u[o]))) {
          if (a.events) {
            for (r in a.events) {
              f[r] ? x.event.remove(n, r) : x.removeEvent(n, r, a.handle);
            }
          }
          u[o] &&
            (delete u[o],
            c
              ? delete n[l]
              : typeof n.removeAttribute !== i
              ? n.removeAttribute(l)
              : (n[l] = null),
            p.push(o));
        }
      }
    },
    _evalUrl: function (e) {
      return x.ajax({
        url: e,
        type: "GET",
        dataType: "script",
        async: !1,
        global: !1,
        throws: !0,
      });
    },
  }),
    x.fn.extend({
      wrapAll: function (e) {
        if (x.isFunction(e)) {
          return this.each(function (t) {
            x(this).wrapAll(e.call(this, t));
          });
        }
        if (this[0]) {
          var t = x(e, this[0].ownerDocument).eq(0).clone(!0);
          this[0].parentNode && t.insertBefore(this[0]),
            t
              .map(function () {
                var e = this;
                while (e.firstChild && 1 === e.firstChild.nodeType) {
                  e = e.firstChild;
                }
                return e;
              })
              .append(this);
        }
        return this;
      },
      wrapInner: function (e) {
        return x.isFunction(e)
          ? this.each(function (t) {
              x(this).wrapInner(e.call(this, t));
            })
          : this.each(function () {
              var t = x(this),
                n = t.contents();
              n.length ? n.wrapAll(e) : t.append(e);
            });
      },
      wrap: function (e) {
        var t = x.isFunction(e);
        return this.each(function (n) {
          x(this).wrapAll(t ? e.call(this, n) : e);
        });
      },
      unwrap: function () {
        return this.parent()
          .each(function () {
            x.nodeName(this, "body") || x(this).replaceWith(this.childNodes);
          })
          .end();
      },
    });
  var Pt,
    Rt,
    Wt,
    $t = /alpha\([^)]*\)/i,
    It = /opacity\s*=\s*([^)]*)/,
    zt = /^(top|right|bottom|left)$/,
    Xt = /^(none|table(?!-c[ea]).+)/,
    Ut = /^margin/,
    Vt = RegExp("^(" + w + ")(.*)$", "i"),
    Yt = RegExp("^(" + w + ")(?!px)[a-z%]+$", "i"),
    Jt = RegExp("^([+-])=(" + w + ")", "i"),
    Gt = {
      BODY: "block",
    },
    Qt = {
      position: "absolute",
      visibility: "hidden",
      display: "block",
    },
    Kt = {
      letterSpacing: 0,
      fontWeight: 400,
    },
    Zt = ["Top", "Right", "Bottom", "Left"],
    en = ["Webkit", "O", "Moz", "ms"];
  function tn(e, t) {
    if (t in e) {
      return t;
    }
    var n = t.charAt(0).toUpperCase() + t.slice(1),
      r = t,
      i = en.length;
    while (i--) {
      if (((t = en[i] + n), t in e)) {
        return t;
      }
    }
    return r;
  }
  function nn(e, t) {
    return (
      (e = t || e),
      "none" === x.css(e, "display") || !x.contains(e.ownerDocument, e)
    );
  }
  function rn(e, t) {
    var n,
      r,
      i,
      o = [],
      a = 0,
      s = e.length;
    for (; s > a; a++) {
      (r = e[a]),
        r.style &&
          ((o[a] = x._data(r, "olddisplay")),
          (n = r.style.display),
          t
            ? (o[a] || "none" !== n || (r.style.display = ""),
              "" === r.style.display &&
                nn(r) &&
                (o[a] = x._data(r, "olddisplay", ln(r.nodeName))))
            : o[a] ||
              ((i = nn(r)),
              ((n && "none" !== n) || !i) &&
                x._data(r, "olddisplay", i ? n : x.css(r, "display"))));
    }
    for (a = 0; s > a; a++) {
      (r = e[a]),
        r.style &&
          ((t && "none" !== r.style.display && "" !== r.style.display) ||
            (r.style.display = t ? o[a] || "" : "none"));
    }
    return e;
  }
  x.fn.extend({
    css: function (e, n) {
      return x.access(
        this,
        function (e, n, r) {
          var i,
            o,
            a = {},
            s = 0;
          if (x.isArray(n)) {
            for (o = Rt(e), i = n.length; i > s; s++) {
              a[n[s]] = x.css(e, n[s], !1, o);
            }
            return a;
          }
          return r !== t ? x.style(e, n, r) : x.css(e, n);
        },
        e,
        n,
        arguments.length > 1
      );
    },
    show: function () {
      return rn(this, !0);
    },
    hide: function () {
      return rn(this);
    },
    toggle: function (e) {
      return "boolean" == typeof e
        ? e
          ? this.show()
          : this.hide()
        : this.each(function () {
            nn(this) ? x(this).show() : x(this).hide();
          });
    },
  }),
    x.extend({
      cssHooks: {
        opacity: {
          get: function (e, t) {
            if (t) {
              var n = Wt(e, "opacity");
              return "" === n ? "1" : n;
            }
          },
        },
      },
      cssNumber: {
        columnCount: !0,
        fillOpacity: !0,
        fontWeight: !0,
        lineHeight: !0,
        opacity: !0,
        order: !0,
        orphans: !0,
        widows: !0,
        zIndex: !0,
        zoom: !0,
      },
      cssProps: {
        float: x.support.cssFloat ? "cssFloat" : "styleFloat",
      },
      style: function (e, n, r, i) {
        if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
          var o,
            a,
            s,
            l = x.camelCase(n),
            u = e.style;
          if (
            ((n = x.cssProps[l] || (x.cssProps[l] = tn(u, l))),
            (s = x.cssHooks[n] || x.cssHooks[l]),
            r === t)
          ) {
            return s && "get" in s && (o = s.get(e, !1, i)) !== t ? o : u[n];
          }
          if (
            ((a = typeof r),
            "string" === a &&
              (o = Jt.exec(r)) &&
              ((r = (o[1] + 1) * o[2] + parseFloat(x.css(e, n))),
              (a = "number")),
            !(
              null == r ||
              ("number" === a && isNaN(r)) ||
              ("number" !== a || x.cssNumber[l] || (r += "px"),
              x.support.clearCloneStyle ||
                "" !== r ||
                0 !== n.indexOf("background") ||
                (u[n] = "inherit"),
              s && "set" in s && (r = s.set(e, r, i)) === t)
            ))
          ) {
            try {
              u[n] = r;
            } catch (c) {}
          }
        }
      },
      css: function (e, n, r, i) {
        var o,
          a,
          s,
          l = x.camelCase(n);
        return (
          (n = x.cssProps[l] || (x.cssProps[l] = tn(e.style, l))),
          (s = x.cssHooks[n] || x.cssHooks[l]),
          s && "get" in s && (a = s.get(e, !0, r)),
          a === t && (a = Wt(e, n, i)),
          "normal" === a && n in Kt && (a = Kt[n]),
          "" === r || r
            ? ((o = parseFloat(a)), r === !0 || x.isNumeric(o) ? o || 0 : a)
            : a
        );
      },
    }),
    e.getComputedStyle
      ? ((Rt = function (t) {
          return e.getComputedStyle(t, null);
        }),
        (Wt = function (e, n, r) {
          var i,
            o,
            a,
            s = r || Rt(e),
            l = s ? s.getPropertyValue(n) || s[n] : t,
            u = e.style;
          return (
            s &&
              ("" !== l ||
                x.contains(e.ownerDocument, e) ||
                (l = x.style(e, n)),
              Yt.test(l) &&
                Ut.test(n) &&
                ((i = u.width),
                (o = u.minWidth),
                (a = u.maxWidth),
                (u.minWidth = u.maxWidth = u.width = l),
                (l = s.width),
                (u.width = i),
                (u.minWidth = o),
                (u.maxWidth = a))),
            l
          );
        }))
      : a.documentElement.currentStyle &&
        ((Rt = function (e) {
          return e.currentStyle;
        }),
        (Wt = function (e, n, r) {
          var i,
            o,
            a,
            s = r || Rt(e),
            l = s ? s[n] : t,
            u = e.style;
          return (
            null == l && u && u[n] && (l = u[n]),
            Yt.test(l) &&
              !zt.test(n) &&
              ((i = u.left),
              (o = e.runtimeStyle),
              (a = o && o.left),
              a && (o.left = e.currentStyle.left),
              (u.left = "fontSize" === n ? "1em" : l),
              (l = u.pixelLeft + "px"),
              (u.left = i),
              a && (o.left = a)),
            "" === l ? "auto" : l
          );
        }));
  function on(e, t, n) {
    var r = Vt.exec(t);
    return r ? Math.max(0, r[1] - (n || 0)) + (r[2] || "px") : t;
  }
  function an(e, t, n, r, i) {
    var o = n === (r ? "border" : "content") ? 4 : "width" === t ? 1 : 0,
      a = 0;
    for (; 4 > o; o += 2) {
      "margin" === n && (a += x.css(e, n + Zt[o], !0, i)),
        r
          ? ("content" === n && (a -= x.css(e, "padding" + Zt[o], !0, i)),
            "margin" !== n &&
              (a -= x.css(e, "border" + Zt[o] + "Width", !0, i)))
          : ((a += x.css(e, "padding" + Zt[o], !0, i)),
            "padding" !== n &&
              (a += x.css(e, "border" + Zt[o] + "Width", !0, i)));
    }
    return a;
  }
  function sn(e, t, n) {
    var r = !0,
      i = "width" === t ? e.offsetWidth : e.offsetHeight,
      o = Rt(e),
      a = x.support.boxSizing && "border-box" === x.css(e, "boxSizing", !1, o);
    if (0 >= i || null == i) {
      if (
        ((i = Wt(e, t, o)),
        (0 > i || null == i) && (i = e.style[t]),
        Yt.test(i))
      ) {
        return i;
      }
      (r = a && (x.support.boxSizingReliable || i === e.style[t])),
        (i = parseFloat(i) || 0);
    }
    return i + an(e, t, n || (a ? "border" : "content"), r, o) + "px";
  }
  function ln(e) {
    var t = a,
      n = Gt[e];
    return (
      n ||
        ((n = un(e, t)),
        ("none" !== n && n) ||
          ((Pt = (
            Pt ||
            x("<iframe frameborder='0' width='0' height='0'/>").css(
              "cssText",
              "display:block !important"
            )
          ).appendTo(t.documentElement)),
          (t = (Pt[0].contentWindow || Pt[0].contentDocument).document),
          t.write("<!doctype html><html><body>"),
          t.close(),
          (n = un(e, t)),
          Pt.detach()),
        (Gt[e] = n)),
      n
    );
  }
  function un(e, t) {
    var n = x(t.createElement(e)).appendTo(t.body),
      r = x.css(n[0], "display");
    return n.remove(), r;
  }
  x.each(["height", "width"], function (e, n) {
    x.cssHooks[n] = {
      get: function (e, r, i) {
        return r
          ? 0 === e.offsetWidth && Xt.test(x.css(e, "display"))
            ? x.swap(e, Qt, function () {
                return sn(e, n, i);
              })
            : sn(e, n, i)
          : t;
      },
      set: function (e, t, r) {
        var i = r && Rt(e);
        return on(
          e,
          t,
          r
            ? an(
                e,
                n,
                r,
                x.support.boxSizing &&
                  "border-box" === x.css(e, "boxSizing", !1, i),
                i
              )
            : 0
        );
      },
    };
  }),
    x.support.opacity ||
      (x.cssHooks.opacity = {
        get: function (e, t) {
          return It.test(
            (t && e.currentStyle ? e.currentStyle.filter : e.style.filter) || ""
          )
            ? 0.01 * parseFloat(RegExp.$1) + ""
            : t
            ? "1"
            : "";
        },
        set: function (e, t) {
          var n = e.style,
            r = e.currentStyle,
            i = x.isNumeric(t) ? "alpha(opacity=" + 100 * t + ")" : "",
            o = (r && r.filter) || n.filter || "";
          (n.zoom = 1),
            ((t >= 1 || "" === t) &&
              "" === x.trim(o.replace($t, "")) &&
              n.removeAttribute &&
              (n.removeAttribute("filter"), "" === t || (r && !r.filter))) ||
              (n.filter = $t.test(o) ? o.replace($t, i) : o + " " + i);
        },
      }),
    x(function () {
      x.support.reliableMarginRight ||
        (x.cssHooks.marginRight = {
          get: function (e, n) {
            return n
              ? x.swap(
                  e,
                  {
                    display: "inline-block",
                  },
                  Wt,
                  [e, "marginRight"]
                )
              : t;
          },
        }),
        !x.support.pixelPosition &&
          x.fn.position &&
          x.each(["top", "left"], function (e, n) {
            x.cssHooks[n] = {
              get: function (e, r) {
                return r
                  ? ((r = Wt(e, n)), Yt.test(r) ? x(e).position()[n] + "px" : r)
                  : t;
              },
            };
          });
    }),
    x.expr &&
      x.expr.filters &&
      ((x.expr.filters.hidden = function (e) {
        return (
          (0 >= e.offsetWidth && 0 >= e.offsetHeight) ||
          (!x.support.reliableHiddenOffsets &&
            "none" === ((e.style && e.style.display) || x.css(e, "display")))
        );
      }),
      (x.expr.filters.visible = function (e) {
        return !x.expr.filters.hidden(e);
      })),
    x.each(
      {
        margin: "",
        padding: "",
        border: "Width",
      },
      function (e, t) {
        (x.cssHooks[e + t] = {
          expand: function (n) {
            var r = 0,
              i = {},
              o = "string" == typeof n ? n.split(" ") : [n];
            for (; 4 > r; r++) {
              i[e + Zt[r] + t] = o[r] || o[r - 2] || o[0];
            }
            return i;
          },
        }),
          Ut.test(e) || (x.cssHooks[e + t].set = on);
      }
    );
  var cn = /%20/g,
    pn = /\[\]$/,
    fn = /\r?\n/g,
    dn = /^(?:submit|button|image|reset|file)$/i,
    hn = /^(?:input|select|textarea|keygen)/i;
  x.fn.extend({
    serialize: function () {
      return x.param(this.serializeArray());
    },
    serializeArray: function () {
      return this.map(function () {
        var e = x.prop(this, "elements");
        return e ? x.makeArray(e) : this;
      })
        .filter(function () {
          var e = this.type;
          return (
            this.name &&
            !x(this).is(":disabled") &&
            hn.test(this.nodeName) &&
            !dn.test(e) &&
            (this.checked || !Ct.test(e))
          );
        })
        .map(function (e, t) {
          var n = x(this).val();
          return null == n
            ? null
            : x.isArray(n)
            ? x.map(n, function (e) {
                return {
                  name: t.name,
                  value: e.replace(fn, "\r\n"),
                };
              })
            : {
                name: t.name,
                value: n.replace(fn, "\r\n"),
              };
        })
        .get();
    },
  }),
    (x.param = function (e, n) {
      var r,
        i = [],
        o = function (e, t) {
          (t = x.isFunction(t) ? t() : null == t ? "" : t),
            (i[i.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t));
        };
      if (
        (n === t && (n = x.ajaxSettings && x.ajaxSettings.traditional),
        x.isArray(e) || (e.jquery && !x.isPlainObject(e)))
      ) {
        x.each(e, function () {
          o(this.name, this.value);
        });
      } else {
        for (r in e) {
          gn(r, e[r], n, o);
        }
      }
      return i.join("&").replace(cn, "+");
    });
  function gn(e, t, n, r) {
    var i;
    if (x.isArray(t)) {
      x.each(t, function (t, i) {
        n || pn.test(e)
          ? r(e, i)
          : gn(e + "[" + ("object" == typeof i ? t : "") + "]", i, n, r);
      });
    } else {
      if (n || "object" !== x.type(t)) {
        r(e, t);
      } else {
        for (i in t) {
          gn(e + "[" + i + "]", t[i], n, r);
        }
      }
    }
  }
  x.each(
    "blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(
      " "
    ),
    function (e, t) {
      x.fn[t] = function (e, n) {
        return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t);
      };
    }
  ),
    x.fn.extend({
      hover: function (e, t) {
        return this.mouseenter(e).mouseleave(t || e);
      },
      bind: function (e, t, n) {
        return this.on(e, null, t, n);
      },
      unbind: function (e, t) {
        return this.off(e, null, t);
      },
      delegate: function (e, t, n, r) {
        return this.on(t, e, n, r);
      },
      undelegate: function (e, t, n) {
        return 1 === arguments.length
          ? this.off(e, "**")
          : this.off(t, e || "**", n);
      },
    });
  var mn,
    yn,
    vn = x.now(),
    bn = /\?/,
    xn = /#.*$/,
    wn = /([?&])_=[^&]*/,
    Tn = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
    Cn = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
    Nn = /^(?:GET|HEAD)$/,
    kn = /^\/\//,
    En = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,
    Sn = x.fn.load,
    An = {},
    jn = {},
    Dn = "*/".concat("*");
  try {
    yn = o.href;
  } catch (Ln) {
    (yn = a.createElement("a")), (yn.href = ""), (yn = yn.href);
  }
  mn = En.exec(yn.toLowerCase()) || [];
  function Hn(e) {
    return function (t, n) {
      "string" != typeof t && ((n = t), (t = "*"));
      var r,
        i = 0,
        o = t.toLowerCase().match(T) || [];
      if (x.isFunction(n)) {
        while ((r = o[i++])) {
          "+" === r[0]
            ? ((r = r.slice(1) || "*"), (e[r] = e[r] || []).unshift(n))
            : (e[r] = e[r] || []).push(n);
        }
      }
    };
  }
  function qn(e, n, r, i) {
    var o = {},
      a = e === jn;
    function s(l) {
      var u;
      return (
        (o[l] = !0),
        x.each(e[l] || [], function (e, l) {
          var c = l(n, r, i);
          return "string" != typeof c || a || o[c]
            ? a
              ? !(u = c)
              : t
            : (n.dataTypes.unshift(c), s(c), !1);
        }),
        u
      );
    }
    return s(n.dataTypes[0]) || (!o["*"] && s("*"));
  }
  function _n(e, n) {
    var r,
      i,
      o = x.ajaxSettings.flatOptions || {};
    for (i in n) {
      n[i] !== t && ((o[i] ? e : r || (r = {}))[i] = n[i]);
    }
    return r && x.extend(!0, e, r), e;
  }
  (x.fn.load = function (e, n, r) {
    if ("string" != typeof e && Sn) {
      return Sn.apply(this, arguments);
    }
    var i,
      o,
      a,
      s = this,
      l = e.indexOf(" ");
    return (
      l >= 0 && ((i = e.slice(l, e.length)), (e = e.slice(0, l))),
      x.isFunction(n)
        ? ((r = n), (n = t))
        : n && "object" == typeof n && (a = "POST"),
      s.length > 0 &&
        x
          .ajax({
            url: e,
            type: a,
            dataType: "html",
            data: n,
          })
          .done(function (e) {
            (o = arguments),
              s.html(i ? x("<div>").append(x.parseHTML(e)).find(i) : e);
          })
          .complete(
            r &&
              function (e, t) {
                s.each(r, o || [e.responseText, t, e]);
              }
          ),
      this
    );
  }),
    x.each(
      [
        "ajaxStart",
        "ajaxStop",
        "ajaxComplete",
        "ajaxError",
        "ajaxSuccess",
        "ajaxSend",
      ],
      function (e, t) {
        x.fn[t] = function (e) {
          return this.on(t, e);
        };
      }
    ),
    x.extend({
      active: 0,
      lastModified: {},
      etag: {},
      ajaxSettings: {
        url: yn,
        type: "GET",
        isLocal: Cn.test(mn[1]),
        global: !0,
        processData: !0,
        async: !0,
        contentType: "application/x-www-form-urlencoded; charset=UTF-8",
        accepts: {
          "*": Dn,
          text: "text/plain",
          html: "text/html",
          xml: "application/xml, text/xml",
          json: "application/json, text/javascript",
        },
        contents: {
          xml: /xml/,
          html: /html/,
          json: /json/,
        },
        responseFields: {
          xml: "responseXML",
          text: "responseText",
          json: "responseJSON",
        },
        converters: {
          "* text": String,
          "text html": !0,
          "text json": x.parseJSON,
          "text xml": x.parseXML,
        },
        flatOptions: {
          url: !0,
          context: !0,
        },
      },
      ajaxSetup: function (e, t) {
        return t ? _n(_n(e, x.ajaxSettings), t) : _n(x.ajaxSettings, e);
      },
      ajaxPrefilter: Hn(An),
      ajaxTransport: Hn(jn),
      ajax: function (e, n) {
        "object" == typeof e && ((n = e), (e = t)), (n = n || {});
        var r,
          i,
          o,
          a,
          s,
          l,
          u,
          c,
          p = x.ajaxSetup({}, n),
          f = p.context || p,
          d = p.context && (f.nodeType || f.jquery) ? x(f) : x.event,
          h = x.Deferred(),
          g = x.Callbacks("once memory"),
          m = p.statusCode || {},
          y = {},
          v = {},
          b = 0,
          w = "canceled",
          C = {
            readyState: 0,
            getResponseHeader: function (e) {
              var t;
              if (2 === b) {
                if (!c) {
                  c = {};
                  while ((t = Tn.exec(a))) {
                    c[t[1].toLowerCase()] = t[2];
                  }
                }
                t = c[e.toLowerCase()];
              }
              return null == t ? null : t;
            },
            getAllResponseHeaders: function () {
              return 2 === b ? a : null;
            },
            setRequestHeader: function (e, t) {
              var n = e.toLowerCase();
              return b || ((e = v[n] = v[n] || e), (y[e] = t)), this;
            },
            overrideMimeType: function (e) {
              return b || (p.mimeType = e), this;
            },
            statusCode: function (e) {
              var t;
              if (e) {
                if (2 > b) {
                  for (t in e) {
                    m[t] = [m[t], e[t]];
                  }
                } else {
                  C.always(e[C.status]);
                }
              }
              return this;
            },
            abort: function (e) {
              var t = e || w;
              return u && u.abort(t), k(0, t), this;
            },
          };
        if (
          ((h.promise(C).complete = g.add),
          (C.success = C.done),
          (C.error = C.fail),
          (p.url = ((e || p.url || yn) + "")
            .replace(xn, "")
            .replace(kn, mn[1] + "//")),
          (p.type = n.method || n.type || p.method || p.type),
          (p.dataTypes = x
            .trim(p.dataType || "*")
            .toLowerCase()
            .match(T) || [""]),
          null == p.crossDomain &&
            ((r = En.exec(p.url.toLowerCase())),
            (p.crossDomain = !(
              !r ||
              (r[1] === mn[1] &&
                r[2] === mn[2] &&
                (r[3] || ("http:" === r[1] ? "80" : "443")) ===
                  (mn[3] || ("http:" === mn[1] ? "80" : "443")))
            ))),
          p.data &&
            p.processData &&
            "string" != typeof p.data &&
            (p.data = x.param(p.data, p.traditional)),
          qn(An, p, n, C),
          2 === b)
        ) {
          return C;
        }
        (l = p.global),
          l && 0 === x.active++ && x.event.trigger("ajaxStart"),
          (p.type = p.type.toUpperCase()),
          (p.hasContent = !Nn.test(p.type)),
          (o = p.url),
          p.hasContent ||
            (p.data &&
              ((o = p.url += (bn.test(o) ? "&" : "?") + p.data), delete p.data),
            p.cache === !1 &&
              (p.url = wn.test(o)
                ? o.replace(wn, "$1_=" + vn++)
                : o + (bn.test(o) ? "&" : "?") + "_=" + vn++)),
          p.ifModified &&
            (x.lastModified[o] &&
              C.setRequestHeader("If-Modified-Since", x.lastModified[o]),
            x.etag[o] && C.setRequestHeader("If-None-Match", x.etag[o])),
          ((p.data && p.hasContent && p.contentType !== !1) || n.contentType) &&
            C.setRequestHeader("Content-Type", p.contentType),
          C.setRequestHeader(
            "Accept",
            p.dataTypes[0] && p.accepts[p.dataTypes[0]]
              ? p.accepts[p.dataTypes[0]] +
                  ("*" !== p.dataTypes[0] ? ", " + Dn + "; q=0.01" : "")
              : p.accepts["*"]
          );
        for (i in p.headers) {
          C.setRequestHeader(i, p.headers[i]);
        }
        if (p.beforeSend && (p.beforeSend.call(f, C, p) === !1 || 2 === b)) {
          return C.abort();
        }
        w = "abort";
        for (i in {
          success: 1,
          error: 1,
          complete: 1,
        }) {
          C[i](p[i]);
        }
        if ((u = qn(jn, p, n, C))) {
          (C.readyState = 1),
            l && d.trigger("ajaxSend", [C, p]),
            p.async &&
              p.timeout > 0 &&
              (s = setTimeout(function () {
                C.abort("timeout");
              }, p.timeout));
          try {
            (b = 1), u.send(y, k);
          } catch (N) {
            if (!(2 > b)) {
              throw N;
            }
            k(-1, N);
          }
        } else {
          k(-1, "No Transport");
        }
        function k(e, n, r, i) {
          var c,
            y,
            v,
            w,
            T,
            N = n;
          2 !== b &&
            ((b = 2),
            s && clearTimeout(s),
            (u = t),
            (a = i || ""),
            (C.readyState = e > 0 ? 4 : 0),
            (c = (e >= 200 && 300 > e) || 304 === e),
            r && (w = Mn(p, C, r)),
            (w = On(p, w, C, c)),
            c
              ? (p.ifModified &&
                  ((T = C.getResponseHeader("Last-Modified")),
                  T && (x.lastModified[o] = T),
                  (T = C.getResponseHeader("etag")),
                  T && (x.etag[o] = T)),
                204 === e || "HEAD" === p.type
                  ? (N = "nocontent")
                  : 304 === e
                  ? (N = "notmodified")
                  : ((N = w.state), (y = w.data), (v = w.error), (c = !v)))
              : ((v = N), (e || !N) && ((N = "error"), 0 > e && (e = 0))),
            (C.status = e),
            (C.statusText = (n || N) + ""),
            c ? h.resolveWith(f, [y, N, C]) : h.rejectWith(f, [C, N, v]),
            C.statusCode(m),
            (m = t),
            l && d.trigger(c ? "ajaxSuccess" : "ajaxError", [C, p, c ? y : v]),
            g.fireWith(f, [C, N]),
            l &&
              (d.trigger("ajaxComplete", [C, p]),
              --x.active || x.event.trigger("ajaxStop")));
        }
        return C;
      },
      getJSON: function (e, t, n) {
        return x.get(e, t, n, "json");
      },
      getScript: function (e, n) {
        return x.get(e, t, n, "script");
      },
    }),
    x.each(["get", "post"], function (e, n) {
      x[n] = function (e, r, i, o) {
        return (
          x.isFunction(r) && ((o = o || i), (i = r), (r = t)),
          x.ajax({
            url: e,
            type: n,
            dataType: o,
            data: r,
            success: i,
          })
        );
      };
    });
  function Mn(e, n, r) {
    var i,
      o,
      a,
      s,
      l = e.contents,
      u = e.dataTypes;
    while ("*" === u[0]) {
      u.shift(),
        o === t && (o = e.mimeType || n.getResponseHeader("Content-Type"));
    }
    if (o) {
      for (s in l) {
        if (l[s] && l[s].test(o)) {
          u.unshift(s);
          break;
        }
      }
    }
    if (u[0] in r) {
      a = u[0];
    } else {
      for (s in r) {
        if (!u[0] || e.converters[s + " " + u[0]]) {
          a = s;
          break;
        }
        i || (i = s);
      }
      a = a || i;
    }
    return a ? (a !== u[0] && u.unshift(a), r[a]) : t;
  }
  function On(e, t, n, r) {
    var i,
      o,
      a,
      s,
      l,
      u = {},
      c = e.dataTypes.slice();
    if (c[1]) {
      for (a in e.converters) {
        u[a.toLowerCase()] = e.converters[a];
      }
    }
    o = c.shift();
    while (o) {
      if (
        (e.responseFields[o] && (n[e.responseFields[o]] = t),
        !l && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)),
        (l = o),
        (o = c.shift()))
      ) {
        if ("*" === o) {
          o = l;
        } else {
          if ("*" !== l && l !== o) {
            if (((a = u[l + " " + o] || u["* " + o]), !a)) {
              for (i in u) {
                if (
                  ((s = i.split(" ")),
                  s[1] === o && (a = u[l + " " + s[0]] || u["* " + s[0]]))
                ) {
                  a === !0
                    ? (a = u[i])
                    : u[i] !== !0 && ((o = s[0]), c.unshift(s[1]));
                  break;
                }
              }
            }
            if (a !== !0) {
              if (a && e["throws"]) {
                t = a(t);
              } else {
                try {
                  t = a(t);
                } catch (p) {
                  return {
                    state: "parsererror",
                    error: a ? p : "No conversion from " + l + " to " + o,
                  };
                }
              }
            }
          }
        }
      }
    }
    return {
      state: "success",
      data: t,
    };
  }
  x.ajaxSetup({
    accepts: {
      script:
        "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",
    },
    contents: {
      script: /(?:java|ecma)script/,
    },
    converters: {
      "text script": function (e) {
        return x.globalEval(e), e;
      },
    },
  }),
    x.ajaxPrefilter("script", function (e) {
      e.cache === t && (e.cache = !1),
        e.crossDomain && ((e.type = "GET"), (e.global = !1));
    }),
    x.ajaxTransport("script", function (e) {
      if (e.crossDomain) {
        var n,
          r = a.head || x("head")[0] || a.documentElement;
        return {
          send: function (t, i) {
            (n = a.createElement("script")),
              (n.async = !0),
              e.scriptCharset && (n.charset = e.scriptCharset),
              (n.src = e.url),
              (n.onload = n.onreadystatechange =
                function (e, t) {
                  (t ||
                    !n.readyState ||
                    /loaded|complete/.test(n.readyState)) &&
                    ((n.onload = n.onreadystatechange = null),
                    n.parentNode && n.parentNode.removeChild(n),
                    (n = null),
                    t || i(200, "success"));
                }),
              r.insertBefore(n, r.firstChild);
          },
          abort: function () {
            n && n.onload(t, !0);
          },
        };
      }
    });
  var Fn = [],
    Bn = /(=)\?(?=&|$)|\?\?/;
  x.ajaxSetup({
    jsonp: "callback",
    jsonpCallback: function () {
      var e = Fn.pop() || x.expando + "_" + vn++;
      return (this[e] = !0), e;
    },
  }),
    x.ajaxPrefilter("json jsonp", function (n, r, i) {
      var o,
        a,
        s,
        l =
          n.jsonp !== !1 &&
          (Bn.test(n.url)
            ? "url"
            : "string" == typeof n.data &&
              !(n.contentType || "").indexOf(
                "application/x-www-form-urlencoded"
              ) &&
              Bn.test(n.data) &&
              "data");
      return l || "jsonp" === n.dataTypes[0]
        ? ((o = n.jsonpCallback =
            x.isFunction(n.jsonpCallback)
              ? n.jsonpCallback()
              : n.jsonpCallback),
          l
            ? (n[l] = n[l].replace(Bn, "$1" + o))
            : n.jsonp !== !1 &&
              (n.url += (bn.test(n.url) ? "&" : "?") + n.jsonp + "=" + o),
          (n.converters["script json"] = function () {
            return s || x.error(o + " was not called"), s[0];
          }),
          (n.dataTypes[0] = "json"),
          (a = e[o]),
          (e[o] = function () {
            s = arguments;
          }),
          i.always(function () {
            (e[o] = a),
              n[o] && ((n.jsonpCallback = r.jsonpCallback), Fn.push(o)),
              s && x.isFunction(a) && a(s[0]),
              (s = a = t);
          }),
          "script")
        : t;
    });
  var Pn,
    Rn,
    Wn = 0,
    $n =
      e.ActiveXObject &&
      function () {
        var e;
        for (e in Pn) {
          Pn[e](t, !0);
        }
      };
  function In() {
    try {
      return new e.XMLHttpRequest();
    } catch (t) {}
  }
  function zn() {
    try {
      return new e.ActiveXObject("Microsoft.XMLHTTP");
    } catch (t) {}
  }
  (x.ajaxSettings.xhr = e.ActiveXObject
    ? function () {
        return (!this.isLocal && In()) || zn();
      }
    : In),
    (Rn = x.ajaxSettings.xhr()),
    (x.support.cors = !!Rn && "withCredentials" in Rn),
    (Rn = x.support.ajax = !!Rn),
    Rn &&
      x.ajaxTransport(function (n) {
        if (!n.crossDomain || x.support.cors) {
          var r;
          return {
            send: function (i, o) {
              var a,
                s,
                l = n.xhr();
              if (
                (n.username
                  ? l.open(n.type, n.url, n.async, n.username, n.password)
                  : l.open(n.type, n.url, n.async),
                n.xhrFields)
              ) {
                for (s in n.xhrFields) {
                  l[s] = n.xhrFields[s];
                }
              }
              n.mimeType &&
                l.overrideMimeType &&
                l.overrideMimeType(n.mimeType),
                n.crossDomain ||
                  i["X-Requested-With"] ||
                  (i["X-Requested-With"] = "XMLHttpRequest");
              try {
                for (s in i) {
                  l.setRequestHeader(s, i[s]);
                }
              } catch (u) {}
              l.send((n.hasContent && n.data) || null),
                (r = function (e, i) {
                  var s, u, c, p;
                  try {
                    if (r && (i || 4 === l.readyState)) {
                      if (
                        ((r = t),
                        a &&
                          ((l.onreadystatechange = x.noop), $n && delete Pn[a]),
                        i)
                      ) {
                        4 !== l.readyState && l.abort();
                      } else {
                        (p = {}),
                          (s = l.status),
                          (u = l.getAllResponseHeaders()),
                          "string" == typeof l.responseText &&
                            (p.text = l.responseText);
                        try {
                          c = l.statusText;
                        } catch (f) {
                          c = "";
                        }
                        s || !n.isLocal || n.crossDomain
                          ? 1223 === s && (s = 204)
                          : (s = p.text ? 200 : 404);
                      }
                    }
                  } catch (d) {
                    i || o(-1, d);
                  }
                  p && o(s, c, p, u);
                }),
                n.async
                  ? 4 === l.readyState
                    ? setTimeout(r)
                    : ((a = ++Wn),
                      $n && (Pn || ((Pn = {}), x(e).unload($n)), (Pn[a] = r)),
                      (l.onreadystatechange = r))
                  : r();
            },
            abort: function () {
              r && r(t, !0);
            },
          };
        }
      });
  var Xn,
    Un,
    Vn = /^(?:toggle|show|hide)$/,
    Yn = RegExp("^(?:([+-])=|)(" + w + ")([a-z%]*)$", "i"),
    Jn = /queueHooks$/,
    Gn = [nr],
    Qn = {
      "*": [
        function (e, t) {
          var n = this.createTween(e, t),
            r = n.cur(),
            i = Yn.exec(t),
            o = (i && i[3]) || (x.cssNumber[e] ? "" : "px"),
            a =
              (x.cssNumber[e] || ("px" !== o && +r)) &&
              Yn.exec(x.css(n.elem, e)),
            s = 1,
            l = 20;
          if (a && a[3] !== o) {
            (o = o || a[3]), (i = i || []), (a = +r || 1);
            do {
              (s = s || ".5"), (a /= s), x.style(n.elem, e, a + o);
            } while (s !== (s = n.cur() / r) && 1 !== s && --l);
          }
          return (
            i &&
              ((a = n.start = +a || +r || 0),
              (n.unit = o),
              (n.end = i[1] ? a + (i[1] + 1) * i[2] : +i[2])),
            n
          );
        },
      ],
    };
  function Kn() {
    return (
      setTimeout(function () {
        Xn = t;
      }),
      (Xn = x.now())
    );
  }
  function Zn(e, t, n) {
    var r,
      i = (Qn[t] || []).concat(Qn["*"]),
      o = 0,
      a = i.length;
    for (; a > o; o++) {
      if ((r = i[o].call(n, t, e))) {
        return r;
      }
    }
  }
  function er(e, t, n) {
    var r,
      i,
      o = 0,
      a = Gn.length,
      s = x.Deferred().always(function () {
        delete l.elem;
      }),
      l = function () {
        if (i) {
          return !1;
        }
        var t = Xn || Kn(),
          n = Math.max(0, u.startTime + u.duration - t),
          r = n / u.duration || 0,
          o = 1 - r,
          a = 0,
          l = u.tweens.length;
        for (; l > a; a++) {
          u.tweens[a].run(o);
        }
        return (
          s.notifyWith(e, [u, o, n]),
          1 > o && l ? n : (s.resolveWith(e, [u]), !1)
        );
      },
      u = s.promise({
        elem: e,
        props: x.extend({}, t),
        opts: x.extend(
          !0,
          {
            specialEasing: {},
          },
          n
        ),
        originalProperties: t,
        originalOptions: n,
        startTime: Xn || Kn(),
        duration: n.duration,
        tweens: [],
        createTween: function (t, n) {
          var r = x.Tween(
            e,
            u.opts,
            t,
            n,
            u.opts.specialEasing[t] || u.opts.easing
          );
          return u.tweens.push(r), r;
        },
        stop: function (t) {
          var n = 0,
            r = t ? u.tweens.length : 0;
          if (i) {
            return this;
          }
          for (i = !0; r > n; n++) {
            u.tweens[n].run(1);
          }
          return t ? s.resolveWith(e, [u, t]) : s.rejectWith(e, [u, t]), this;
        },
      }),
      c = u.props;
    for (tr(c, u.opts.specialEasing); a > o; o++) {
      if ((r = Gn[o].call(u, e, c, u.opts))) {
        return r;
      }
    }
    return (
      x.map(c, Zn, u),
      x.isFunction(u.opts.start) && u.opts.start.call(e, u),
      x.fx.timer(
        x.extend(l, {
          elem: e,
          anim: u,
          queue: u.opts.queue,
        })
      ),
      u
        .progress(u.opts.progress)
        .done(u.opts.done, u.opts.complete)
        .fail(u.opts.fail)
        .always(u.opts.always)
    );
  }
  function tr(e, t) {
    var n, r, i, o, a;
    for (n in e) {
      if (
        ((r = x.camelCase(n)),
        (i = t[r]),
        (o = e[n]),
        x.isArray(o) && ((i = o[1]), (o = e[n] = o[0])),
        n !== r && ((e[r] = o), delete e[n]),
        (a = x.cssHooks[r]),
        a && "expand" in a)
      ) {
        (o = a.expand(o)), delete e[r];
        for (n in o) {
          n in e || ((e[n] = o[n]), (t[n] = i));
        }
      } else {
        t[r] = i;
      }
    }
  }
  x.Animation = x.extend(er, {
    tweener: function (e, t) {
      x.isFunction(e) ? ((t = e), (e = ["*"])) : (e = e.split(" "));
      var n,
        r = 0,
        i = e.length;
      for (; i > r; r++) {
        (n = e[r]), (Qn[n] = Qn[n] || []), Qn[n].unshift(t);
      }
    },
    prefilter: function (e, t) {
      t ? Gn.unshift(e) : Gn.push(e);
    },
  });
  function nr(e, t, n) {
    var r,
      i,
      o,
      a,
      s,
      l,
      u = this,
      c = {},
      p = e.style,
      f = e.nodeType && nn(e),
      d = x._data(e, "fxshow");
    n.queue ||
      ((s = x._queueHooks(e, "fx")),
      null == s.unqueued &&
        ((s.unqueued = 0),
        (l = s.empty.fire),
        (s.empty.fire = function () {
          s.unqueued || l();
        })),
      s.unqueued++,
      u.always(function () {
        u.always(function () {
          s.unqueued--, x.queue(e, "fx").length || s.empty.fire();
        });
      })),
      1 === e.nodeType &&
        ("height" in t || "width" in t) &&
        ((n.overflow = [p.overflow, p.overflowX, p.overflowY]),
        "inline" === x.css(e, "display") &&
          "none" === x.css(e, "float") &&
          (x.support.inlineBlockNeedsLayout && "inline" !== ln(e.nodeName)
            ? (p.zoom = 1)
            : (p.display = "inline-block"))),
      n.overflow &&
        ((p.overflow = "hidden"),
        x.support.shrinkWrapBlocks ||
          u.always(function () {
            (p.overflow = n.overflow[0]),
              (p.overflowX = n.overflow[1]),
              (p.overflowY = n.overflow[2]);
          }));
    for (r in t) {
      if (((i = t[r]), Vn.exec(i))) {
        if (
          (delete t[r], (o = o || "toggle" === i), i === (f ? "hide" : "show"))
        ) {
          continue;
        }
        c[r] = (d && d[r]) || x.style(e, r);
      }
    }
    if (!x.isEmptyObject(c)) {
      d ? "hidden" in d && (f = d.hidden) : (d = x._data(e, "fxshow", {})),
        o && (d.hidden = !f),
        f
          ? x(e).show()
          : u.done(function () {
              x(e).hide();
            }),
        u.done(function () {
          var t;
          x._removeData(e, "fxshow");
          for (t in c) {
            x.style(e, t, c[t]);
          }
        });
      for (r in c) {
        (a = Zn(f ? d[r] : 0, r, u)),
          r in d ||
            ((d[r] = a.start),
            f &&
              ((a.end = a.start),
              (a.start = "width" === r || "height" === r ? 1 : 0)));
      }
    }
  }
  function rr(e, t, n, r, i) {
    return new rr.prototype.init(e, t, n, r, i);
  }
  (x.Tween = rr),
    (rr.prototype = {
      constructor: rr,
      init: function (e, t, n, r, i, o) {
        (this.elem = e),
          (this.prop = n),
          (this.easing = i || "swing"),
          (this.options = t),
          (this.start = this.now = this.cur()),
          (this.end = r),
          (this.unit = o || (x.cssNumber[n] ? "" : "px"));
      },
      cur: function () {
        var e = rr.propHooks[this.prop];
        return e && e.get ? e.get(this) : rr.propHooks._default.get(this);
      },
      run: function (e) {
        var t,
          n = rr.propHooks[this.prop];
        return (
          (this.pos = t =
            this.options.duration
              ? x.easing[this.easing](
                  e,
                  this.options.duration * e,
                  0,
                  1,
                  this.options.duration
                )
              : e),
          (this.now = (this.end - this.start) * t + this.start),
          this.options.step &&
            this.options.step.call(this.elem, this.now, this),
          n && n.set ? n.set(this) : rr.propHooks._default.set(this),
          this
        );
      },
    }),
    (rr.prototype.init.prototype = rr.prototype),
    (rr.propHooks = {
      _default: {
        get: function (e) {
          var t;
          return null == e.elem[e.prop] ||
            (e.elem.style && null != e.elem.style[e.prop])
            ? ((t = x.css(e.elem, e.prop, "")), t && "auto" !== t ? t : 0)
            : e.elem[e.prop];
        },
        set: function (e) {
          x.fx.step[e.prop]
            ? x.fx.step[e.prop](e)
            : e.elem.style &&
              (null != e.elem.style[x.cssProps[e.prop]] || x.cssHooks[e.prop])
            ? x.style(e.elem, e.prop, e.now + e.unit)
            : (e.elem[e.prop] = e.now);
        },
      },
    }),
    (rr.propHooks.scrollTop = rr.propHooks.scrollLeft =
      {
        set: function (e) {
          e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now);
        },
      }),
    x.each(["toggle", "show", "hide"], function (e, t) {
      var n = x.fn[t];
      x.fn[t] = function (e, r, i) {
        return null == e || "boolean" == typeof e
          ? n.apply(this, arguments)
          : this.animate(ir(t, !0), e, r, i);
      };
    }),
    x.fn.extend({
      fadeTo: function (e, t, n, r) {
        return this.filter(nn).css("opacity", 0).show().end().animate(
          {
            opacity: t,
          },
          e,
          n,
          r
        );
      },
      animate: function (e, t, n, r) {
        var i = x.isEmptyObject(e),
          o = x.speed(t, n, r),
          a = function () {
            var t = er(this, x.extend({}, e), o);
            (i || x._data(this, "finish")) && t.stop(!0);
          };
        return (
          (a.finish = a),
          i || o.queue === !1 ? this.each(a) : this.queue(o.queue, a)
        );
      },
      stop: function (e, n, r) {
        var i = function (e) {
          var t = e.stop;
          delete e.stop, t(r);
        };
        return (
          "string" != typeof e && ((r = n), (n = e), (e = t)),
          n && e !== !1 && this.queue(e || "fx", []),
          this.each(function () {
            var t = !0,
              n = null != e && e + "queueHooks",
              o = x.timers,
              a = x._data(this);
            if (n) {
              a[n] && a[n].stop && i(a[n]);
            } else {
              for (n in a) {
                a[n] && a[n].stop && Jn.test(n) && i(a[n]);
              }
            }
            for (n = o.length; n--; ) {
              o[n].elem !== this ||
                (null != e && o[n].queue !== e) ||
                (o[n].anim.stop(r), (t = !1), o.splice(n, 1));
            }
            (t || !r) && x.dequeue(this, e);
          })
        );
      },
      finish: function (e) {
        return (
          e !== !1 && (e = e || "fx"),
          this.each(function () {
            var t,
              n = x._data(this),
              r = n[e + "queue"],
              i = n[e + "queueHooks"],
              o = x.timers,
              a = r ? r.length : 0;
            for (
              n.finish = !0,
                x.queue(this, e, []),
                i && i.stop && i.stop.call(this, !0),
                t = o.length;
              t--;

            ) {
              o[t].elem === this &&
                o[t].queue === e &&
                (o[t].anim.stop(!0), o.splice(t, 1));
            }
            for (t = 0; a > t; t++) {
              r[t] && r[t].finish && r[t].finish.call(this);
            }
            delete n.finish;
          })
        );
      },
    });
  function ir(e, t) {
    var n,
      r = {
        height: e,
      },
      i = 0;
    for (t = t ? 1 : 0; 4 > i; i += 2 - t) {
      (n = Zt[i]), (r["margin" + n] = r["padding" + n] = e);
    }
    return t && (r.opacity = r.width = e), r;
  }
  x.each(
    {
      slideDown: ir("show"),
      slideUp: ir("hide"),
      slideToggle: ir("toggle"),
      fadeIn: {
        opacity: "show",
      },
      fadeOut: {
        opacity: "hide",
      },
      fadeToggle: {
        opacity: "toggle",
      },
    },
    function (e, t) {
      x.fn[e] = function (e, n, r) {
        return this.animate(t, e, n, r);
      };
    }
  ),
    (x.speed = function (e, t, n) {
      var r =
        e && "object" == typeof e
          ? x.extend({}, e)
          : {
              complete: n || (!n && t) || (x.isFunction(e) && e),
              duration: e,
              easing: (n && t) || (t && !x.isFunction(t) && t),
            };
      return (
        (r.duration = x.fx.off
          ? 0
          : "number" == typeof r.duration
          ? r.duration
          : r.duration in x.fx.speeds
          ? x.fx.speeds[r.duration]
          : x.fx.speeds._default),
        (null == r.queue || r.queue === !0) && (r.queue = "fx"),
        (r.old = r.complete),
        (r.complete = function () {
          x.isFunction(r.old) && r.old.call(this),
            r.queue && x.dequeue(this, r.queue);
        }),
        r
      );
    }),
    (x.easing = {
      linear: function (e) {
        return e;
      },
      swing: function (e) {
        return 0.5 - Math.cos(e * Math.PI) / 2;
      },
    }),
    (x.timers = []),
    (x.fx = rr.prototype.init),
    (x.fx.tick = function () {
      var e,
        n = x.timers,
        r = 0;
      for (Xn = x.now(); n.length > r; r++) {
        (e = n[r]), e() || n[r] !== e || n.splice(r--, 1);
      }
      n.length || x.fx.stop(), (Xn = t);
    }),
    (x.fx.timer = function (e) {
      e() && x.timers.push(e) && x.fx.start();
    }),
    (x.fx.interval = 13),
    (x.fx.start = function () {
      Un || (Un = setInterval(x.fx.tick, x.fx.interval));
    }),
    (x.fx.stop = function () {
      clearInterval(Un), (Un = null);
    }),
    (x.fx.speeds = {
      slow: 600,
      fast: 200,
      _default: 400,
    }),
    (x.fx.step = {}),
    x.expr &&
      x.expr.filters &&
      (x.expr.filters.animated = function (e) {
        return x.grep(x.timers, function (t) {
          return e === t.elem;
        }).length;
      }),
    (x.fn.offset = function (e) {
      if (arguments.length) {
        return e === t
          ? this
          : this.each(function (t) {
              x.offset.setOffset(this, e, t);
            });
      }
      var n,
        r,
        o = {
          top: 0,
          left: 0,
        },
        a = this[0],
        s = a && a.ownerDocument;
      if (s) {
        return (
          (n = s.documentElement),
          x.contains(n, a)
            ? (typeof a.getBoundingClientRect !== i &&
                (o = a.getBoundingClientRect()),
              (r = or(s)),
              {
                top:
                  o.top + (r.pageYOffset || n.scrollTop) - (n.clientTop || 0),
                left:
                  o.left +
                  (r.pageXOffset || n.scrollLeft) -
                  (n.clientLeft || 0),
              })
            : o
        );
      }
    }),
    (x.offset = {
      setOffset: function (e, t, n) {
        var r = x.css(e, "position");
        "static" === r && (e.style.position = "relative");
        var i = x(e),
          o = i.offset(),
          a = x.css(e, "top"),
          s = x.css(e, "left"),
          l =
            ("absolute" === r || "fixed" === r) &&
            x.inArray("auto", [a, s]) > -1,
          u = {},
          c = {},
          p,
          f;
        l
          ? ((c = i.position()), (p = c.top), (f = c.left))
          : ((p = parseFloat(a) || 0), (f = parseFloat(s) || 0)),
          x.isFunction(t) && (t = t.call(e, n, o)),
          null != t.top && (u.top = t.top - o.top + p),
          null != t.left && (u.left = t.left - o.left + f),
          "using" in t ? t.using.call(e, u) : i.css(u);
      },
    }),
    x.fn.extend({
      position: function () {
        if (this[0]) {
          var e,
            t,
            n = {
              top: 0,
              left: 0,
            },
            r = this[0];
          return (
            "fixed" === x.css(r, "position")
              ? (t = r.getBoundingClientRect())
              : ((e = this.offsetParent()),
                (t = this.offset()),
                x.nodeName(e[0], "html") || (n = e.offset()),
                (n.top += x.css(e[0], "borderTopWidth", !0)),
                (n.left += x.css(e[0], "borderLeftWidth", !0))),
            {
              top: t.top - n.top - x.css(r, "marginTop", !0),
              left: t.left - n.left - x.css(r, "marginLeft", !0),
            }
          );
        }
      },
      offsetParent: function () {
        return this.map(function () {
          var e = this.offsetParent || s;
          while (
            e &&
            !x.nodeName(e, "html") &&
            "static" === x.css(e, "position")
          ) {
            e = e.offsetParent;
          }
          return e || s;
        });
      },
    }),
    x.each(
      {
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset",
      },
      function (e, n) {
        var r = /Y/.test(n);
        x.fn[e] = function (i) {
          return x.access(
            this,
            function (e, i, o) {
              var a = or(e);
              return o === t
                ? a
                  ? n in a
                    ? a[n]
                    : a.document.documentElement[i]
                  : e[i]
                : (a
                    ? a.scrollTo(
                        r ? x(a).scrollLeft() : o,
                        r ? o : x(a).scrollTop()
                      )
                    : (e[i] = o),
                  t);
            },
            e,
            i,
            arguments.length,
            null
          );
        };
      }
    );
  function or(e) {
    return x.isWindow(e)
      ? e
      : 9 === e.nodeType
      ? e.defaultView || e.parentWindow
      : !1;
  }
  x.each(
    {
      Height: "height",
      Width: "width",
    },
    function (e, n) {
      x.each(
        {
          padding: "inner" + e,
          content: n,
          "": "outer" + e,
        },
        function (r, i) {
          x.fn[i] = function (i, o) {
            var a = arguments.length && (r || "boolean" != typeof i),
              s = r || (i === !0 || o === !0 ? "margin" : "border");
            return x.access(
              this,
              function (n, r, i) {
                var o;
                return x.isWindow(n)
                  ? n.document.documentElement["client" + e]
                  : 9 === n.nodeType
                  ? ((o = n.documentElement),
                    Math.max(
                      n.body["scroll" + e],
                      o["scroll" + e],
                      n.body["offset" + e],
                      o["offset" + e],
                      o["client" + e]
                    ))
                  : i === t
                  ? x.css(n, r, s)
                  : x.style(n, r, i, s);
              },
              n,
              a ? i : t,
              a,
              null
            );
          };
        }
      );
    }
  ),
    (x.fn.size = function () {
      return this.length;
    }),
    (x.fn.andSelf = x.fn.addBack),
    "object" == typeof module && module && "object" == typeof module.exports
      ? (module.exports = x)
      : ((e.jQuery = e.$ = x),
        "function" == typeof define &&
          define.amd &&
          define("jquery", [], function () {
            return x;
          }));
})(window);
/*!
 * Bootstrap v3.1.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if ("undefined" == typeof jQuery) {
  throw new Error("Bootstrap's JavaScript requires jQuery");
}
+(function (d) {
  function c() {
    var f = document.createElement("bootstrap"),
      e = {
        WebkitTransition: "webkitTransitionEnd",
        MozTransition: "transitionend",
        OTransition: "oTransitionEnd otransitionend",
        transition: "transitionend",
      };
    for (var g in e) {
      if (void 0 !== f.style[g]) {
        return {
          end: e[g],
        };
      }
    }
    return !1;
  }
  (d.fn.emulateTransitionEnd = function (a) {
    var h = !1,
      g = this;
    d(this).one(d.support.transition.end, function () {
      h = !0;
    });
    var f = function () {
      h || d(g).trigger(d.support.transition.end);
    };
    return setTimeout(f, a), this;
  }),
    d(function () {
      d.support.transition = c();
    });
})(jQuery),
  +(function (f) {
    var e = '[data-dismiss="alert"]',
      h = function (a) {
        f(a).on("click", e, this.close);
      };
    h.prototype.close = function (a) {
      function o() {
        i.trigger("closed.bs.alert").remove();
      }
      var n = f(this),
        m = n.attr("data-target");
      m || ((m = n.attr("href")), (m = m && m.replace(/.*(?=#[^\s]*$)/, "")));
      var i = f(m);
      a && a.preventDefault(),
        i.length || (i = n.hasClass("alert") ? n : n.parent()),
        i.trigger((a = f.Event("close.bs.alert"))),
        a.isDefaultPrevented() ||
          (i.removeClass("in"),
          f.support.transition && i.hasClass("fade")
            ? i.one(f.support.transition.end, o).emulateTransitionEnd(150)
            : o());
    };
    var g = f.fn.alert;
    (f.fn.alert = function (a) {
      return this.each(function () {
        var c = f(this),
          b = c.data("bs.alert");
        b || c.data("bs.alert", (b = new h(this))),
          "string" == typeof a && b[a].call(c);
      });
    }),
      (f.fn.alert.Constructor = h),
      (f.fn.alert.noConflict = function () {
        return (f.fn.alert = g), this;
      }),
      f(document).on("click.bs.alert.data-api", e, h.prototype.close);
  })(jQuery),
  +(function (e) {
    var d = function (b, a) {
      (this.$element = e(b)),
        (this.options = e.extend({}, d.DEFAULTS, a)),
        (this.isLoading = !1);
    };
    (d.DEFAULTS = {
      loadingText: "loading...",
    }),
      (d.prototype.setState = function (a) {
        var m = "disabled",
          i = this.$element,
          h = i.is("input") ? "val" : "html",
          g = i.data();
        (a += "Text"),
          g.resetText || i.data("resetText", i[h]()),
          i[h](g[a] || this.options[a]),
          setTimeout(
            e.proxy(function () {
              "loadingText" == a
                ? ((this.isLoading = !0), i.addClass(m).attr(m, m))
                : this.isLoading &&
                  ((this.isLoading = !1), i.removeClass(m).removeAttr(m));
            }, this),
            0
          );
      }),
      (d.prototype.toggle = function () {
        var h = !0,
          g = this.$element.closest('[data-toggle="buttons"]');
        if (g.length) {
          var i = this.$element.find("input");
          "radio" == i.prop("type") &&
            (i.prop("checked") && this.$element.hasClass("active")
              ? (h = !1)
              : g.find(".active").removeClass("active")),
            h &&
              i
                .prop("checked", !this.$element.hasClass("active"))
                .trigger("change");
        }
        h && this.$element.toggleClass("active");
      });
    var f = e.fn.button;
    (e.fn.button = function (a) {
      return this.each(function () {
        var g = e(this),
          c = g.data("bs.button"),
          b = "object" == typeof a && a;
        c || g.data("bs.button", (c = new d(this, b))),
          "toggle" == a ? c.toggle() : a && c.setState(a);
      });
    }),
      (e.fn.button.Constructor = d),
      (e.fn.button.noConflict = function () {
        return (e.fn.button = f), this;
      }),
      e(document).on(
        "click.bs.button.data-api",
        "[data-toggle^=button]",
        function (a) {
          var g = e(a.target);
          g.hasClass("btn") || (g = g.closest(".btn")),
            g.button("toggle"),
            a.preventDefault();
        }
      );
  })(jQuery),
  +(function (e) {
    var d = function (a, g) {
      (this.$element = e(a)),
        (this.$indicators = this.$element.find(".carousel-indicators")),
        (this.options = g),
        (this.paused =
          this.sliding =
          this.interval =
          this.$active =
          this.$items =
            null),
        "hover" == this.options.pause &&
          this.$element
            .on("mouseenter", e.proxy(this.pause, this))
            .on("mouseleave", e.proxy(this.cycle, this));
    };
    (d.DEFAULTS = {
      interval: 5000,
      pause: "hover",
      wrap: !0,
    }),
      (d.prototype.cycle = function (a) {
        return (
          a || (this.paused = !1),
          this.interval && clearInterval(this.interval),
          this.options.interval &&
            !this.paused &&
            (this.interval = setInterval(
              e.proxy(this.next, this),
              this.options.interval
            )),
          this
        );
      }),
      (d.prototype.getActiveIndex = function () {
        return (
          (this.$active = this.$element.find(".item.active")),
          (this.$items = this.$active.parent().children()),
          this.$items.index(this.$active)
        );
      }),
      (d.prototype.to = function (a) {
        var h = this,
          g = this.getActiveIndex();
        return a > this.$items.length - 1 || 0 > a
          ? void 0
          : this.sliding
          ? this.$element.one("slid.bs.carousel", function () {
              h.to(a);
            })
          : g == a
          ? this.pause().cycle()
          : this.slide(a > g ? "next" : "prev", e(this.$items[a]));
      }),
      (d.prototype.pause = function (a) {
        return (
          a || (this.paused = !0),
          this.$element.find(".next, .prev").length &&
            e.support.transition &&
            (this.$element.trigger(e.support.transition.end), this.cycle(!0)),
          (this.interval = clearInterval(this.interval)),
          this
        );
      }),
      (d.prototype.next = function () {
        return this.sliding ? void 0 : this.slide("next");
      }),
      (d.prototype.prev = function () {
        return this.sliding ? void 0 : this.slide("prev");
      }),
      (d.prototype.slide = function (t, s) {
        var r = this.$element.find(".item.active"),
          q = s || r[t](),
          p = this.interval,
          o = "next" == t ? "left" : "right",
          n = "next" == t ? "first" : "last",
          m = this;
        if (!q.length) {
          if (!this.options.wrap) {
            return;
          }
          q = this.$element.find(".item")[n]();
        }
        if (q.hasClass("active")) {
          return (this.sliding = !1);
        }
        var a = e.Event("slide.bs.carousel", {
          relatedTarget: q[0],
          direction: o,
        });
        return (
          this.$element.trigger(a),
          a.isDefaultPrevented()
            ? void 0
            : ((this.sliding = !0),
              p && this.pause(),
              this.$indicators.length &&
                (this.$indicators.find(".active").removeClass("active"),
                this.$element.one("slid.bs.carousel", function () {
                  var c = e(m.$indicators.children()[m.getActiveIndex()]);
                  c && c.addClass("active");
                })),
              e.support.transition && this.$element.hasClass("slide")
                ? (q.addClass(t),
                  q[0].offsetWidth,
                  r.addClass(o),
                  q.addClass(o),
                  r
                    .one(e.support.transition.end, function () {
                      q.removeClass([t, o].join(" ")).addClass("active"),
                        r.removeClass(["active", o].join(" ")),
                        (m.sliding = !1),
                        setTimeout(function () {
                          m.$element.trigger("slid.bs.carousel");
                        }, 0);
                    })
                    .emulateTransitionEnd(
                      1000 * r.css("transition-duration").slice(0, -1)
                    ))
                : (r.removeClass("active"),
                  q.addClass("active"),
                  (this.sliding = !1),
                  this.$element.trigger("slid.bs.carousel")),
              p && this.cycle(),
              this)
        );
      });
    var f = e.fn.carousel;
    (e.fn.carousel = function (a) {
      return this.each(function () {
        var i = e(this),
          h = i.data("bs.carousel"),
          c = e.extend({}, d.DEFAULTS, i.data(), "object" == typeof a && a),
          b = "string" == typeof a ? a : c.slide;
        h || i.data("bs.carousel", (h = new d(this, c))),
          "number" == typeof a
            ? h.to(a)
            : b
            ? h[b]()
            : c.interval && h.pause().cycle();
      });
    }),
      (e.fn.carousel.Constructor = d),
      (e.fn.carousel.noConflict = function () {
        return (e.fn.carousel = f), this;
      }),
      e(document).on(
        "click.bs.carousel.data-api",
        "[data-slide], [data-slide-to]",
        function (a) {
          var o,
            n = e(this),
            m = e(
              n.attr("data-target") ||
                ((o = n.attr("href")) && o.replace(/.*(?=#[^\s]+$)/, ""))
            ),
            i = e.extend({}, m.data(), n.data()),
            h = n.attr("data-slide-to");
          h && (i.interval = !1),
            m.carousel(i),
            (h = n.attr("data-slide-to")) && m.data("bs.carousel").to(h),
            a.preventDefault();
        }
      ),
      e(window).on("load", function () {
        e('[data-ride="carousel"]').each(function () {
          var a = e(this);
          a.carousel(a.data());
        });
      });
  })(jQuery),
  +(function (e) {
    var d = function (b, a) {
      (this.$element = e(b)),
        (this.options = e.extend({}, d.DEFAULTS, a)),
        (this.transitioning = null),
        this.options.parent && (this.$parent = e(this.options.parent)),
        this.options.toggle && this.toggle();
    };
    (d.DEFAULTS = {
      toggle: !0,
    }),
      (d.prototype.dimension = function () {
        var b = this.$element.hasClass("width");
        return b ? "width" : "height";
      }),
      (d.prototype.show = function () {
        if (!this.transitioning && !this.$element.hasClass("in")) {
          var a = e.Event("show.bs.collapse");
          if ((this.$element.trigger(a), !a.isDefaultPrevented())) {
            var o = this.$parent && this.$parent.find("> .panel > .in");
            if (o && o.length) {
              var n = o.data("bs.collapse");
              if (n && n.transitioning) {
                return;
              }
              o.collapse("hide"), n || o.data("bs.collapse", null);
            }
            var m = this.dimension();
            this.$element.removeClass("collapse").addClass("collapsing")[m](0),
              (this.transitioning = 1);
            var i = function () {
              this.$element
                .removeClass("collapsing")
                .addClass("collapse in")
                [m]("auto"),
                (this.transitioning = 0),
                this.$element.trigger("shown.bs.collapse");
            };
            if (!e.support.transition) {
              return i.call(this);
            }
            var h = e.camelCase(["scroll", m].join("-"));
            this.$element
              .one(e.support.transition.end, e.proxy(i, this))
              .emulateTransitionEnd(350)
              [m](this.$element[0][h]);
          }
        }
      }),
      (d.prototype.hide = function () {
        if (!this.transitioning && this.$element.hasClass("in")) {
          var a = e.Event("hide.bs.collapse");
          if ((this.$element.trigger(a), !a.isDefaultPrevented())) {
            var h = this.dimension();
            this.$element[h](this.$element[h]())[0].offsetHeight,
              this.$element
                .addClass("collapsing")
                .removeClass("collapse")
                .removeClass("in"),
              (this.transitioning = 1);
            var g = function () {
              (this.transitioning = 0),
                this.$element
                  .trigger("hidden.bs.collapse")
                  .removeClass("collapsing")
                  .addClass("collapse");
            };
            return e.support.transition
              ? void this.$element[h](0)
                  .one(e.support.transition.end, e.proxy(g, this))
                  .emulateTransitionEnd(350)
              : g.call(this);
          }
        }
      }),
      (d.prototype.toggle = function () {
        this[this.$element.hasClass("in") ? "hide" : "show"]();
      });
    var f = e.fn.collapse;
    (e.fn.collapse = function (a) {
      return this.each(function () {
        var g = e(this),
          c = g.data("bs.collapse"),
          b = e.extend({}, d.DEFAULTS, g.data(), "object" == typeof a && a);
        !c && b.toggle && "show" == a && (a = !a),
          c || g.data("bs.collapse", (c = new d(this, b))),
          "string" == typeof a && c[a]();
      });
    }),
      (e.fn.collapse.Constructor = d),
      (e.fn.collapse.noConflict = function () {
        return (e.fn.collapse = f), this;
      }),
      e(document).on(
        "click.bs.collapse.data-api",
        "[data-toggle=collapse]",
        function (t) {
          var s,
            r = e(this),
            q =
              r.attr("data-target") ||
              t.preventDefault() ||
              ((s = r.attr("href")) && s.replace(/.*(?=#[^\s]+$)/, "")),
            p = e(q),
            o = p.data("bs.collapse"),
            n = o ? "toggle" : r.data(),
            m = r.attr("data-parent"),
            a = m && e(m);
          (o && o.transitioning) ||
            (a &&
              a
                .find('[data-toggle=collapse][data-parent="' + m + '"]')
                .not(r)
                .addClass("collapsed"),
            r[p.hasClass("in") ? "addClass" : "removeClass"]("collapsed")),
            p.collapse(n);
        }
      );
  })(jQuery),
  +(function (i) {
    function h(a) {
      i(p).remove(),
        i(o).each(function () {
          var c = q(i(this)),
            b = {
              relatedTarget: this,
            };
          c.hasClass("open") &&
            (c.trigger((a = i.Event("hide.bs.dropdown", b))),
            a.isDefaultPrevented() ||
              c.removeClass("open").trigger("hidden.bs.dropdown", b));
        });
    }
    function q(a) {
      var f = a.attr("data-target");
      f ||
        ((f = a.attr("href")),
        (f = f && /#[A-Za-z]/.test(f) && f.replace(/.*(?=#[^\s]*$)/, "")));
      var e = f && i(f);
      return e && e.length ? e : a.parent();
    }
    var p = ".dropdown-backdrop",
      o = "[data-toggle=dropdown]",
      n = function (a) {
        i(a).on("click.bs.dropdown", this.toggle);
      };
    (n.prototype.toggle = function (s) {
      var r = i(this);
      if (!r.is(".disabled, :disabled")) {
        var c = q(r),
          b = c.hasClass("open");
        if ((h(), !b)) {
          "ontouchstart" in document.documentElement &&
            !c.closest(".navbar-nav").length &&
            i('<div class="dropdown-backdrop"/>')
              .insertAfter(i(this))
              .on("click", h);
          var a = {
            relatedTarget: this,
          };
          if (
            (c.trigger((s = i.Event("show.bs.dropdown", a))),
            s.isDefaultPrevented())
          ) {
            return;
          }
          c.toggleClass("open").trigger("shown.bs.dropdown", a), r.focus();
        }
        return !1;
      }
    }),
      (n.prototype.keydown = function (a) {
        if (/(38|40|27)/.test(a.keyCode)) {
          var u = i(this);
          if (
            (a.preventDefault(),
            a.stopPropagation(),
            !u.is(".disabled, :disabled"))
          ) {
            var t = q(u),
              s = t.hasClass("open");
            if (!s || (s && 27 == a.keyCode)) {
              return 27 == a.which && t.find(o).focus(), u.click();
            }
            var r = " li:not(.divider):visible a",
              e = t.find("[role=menu]" + r + ", [role=listbox]" + r);
            if (e.length) {
              var c = e.index(e.filter(":focus"));
              38 == a.keyCode && c > 0 && c--,
                40 == a.keyCode && c < e.length - 1 && c++,
                ~c || (c = 0),
                e.eq(c).focus();
            }
          }
        }
      });
    var m = i.fn.dropdown;
    (i.fn.dropdown = function (a) {
      return this.each(function () {
        var e = i(this),
          b = e.data("bs.dropdown");
        b || e.data("bs.dropdown", (b = new n(this))),
          "string" == typeof a && b[a].call(e);
      });
    }),
      (i.fn.dropdown.Constructor = n),
      (i.fn.dropdown.noConflict = function () {
        return (i.fn.dropdown = m), this;
      }),
      i(document)
        .on("click.bs.dropdown.data-api", h)
        .on("click.bs.dropdown.data-api", ".dropdown form", function (b) {
          b.stopPropagation();
        })
        .on("click.bs.dropdown.data-api", o, n.prototype.toggle)
        .on(
          "keydown.bs.dropdown.data-api",
          o + ", [role=menu], [role=listbox]",
          n.prototype.keydown
        );
  })(jQuery),
  +(function (e) {
    var d = function (a, g) {
      (this.options = g),
        (this.$element = e(a)),
        (this.$backdrop = this.isShown = null),
        this.options.remote &&
          this.$element.find(".modal-content").load(
            this.options.remote,
            e.proxy(function () {
              this.$element.trigger("loaded.bs.modal");
            }, this)
          );
    };
    (d.DEFAULTS = {
      backdrop: !0,
      keyboard: !0,
      show: !0,
    }),
      (d.prototype.toggle = function (b) {
        return this[this.isShown ? "hide" : "show"](b);
      }),
      (d.prototype.show = function (a) {
        var h = this,
          g = e.Event("show.bs.modal", {
            relatedTarget: a,
          });
        this.$element.trigger(g),
          this.isShown ||
            g.isDefaultPrevented() ||
            ((this.isShown = !0),
            this.escape(),
            this.$element.on(
              "click.dismiss.bs.modal",
              '[data-dismiss="modal"]',
              e.proxy(this.hide, this)
            ),
            this.backdrop(function () {
              var c = e.support.transition && h.$element.hasClass("fade");
              h.$element.parent().length || h.$element.appendTo(document.body),
                h.$element.show().scrollTop(0),
                c && h.$element[0].offsetWidth,
                h.$element.addClass("in").attr("aria-hidden", !1),
                h.enforceFocus();
              var b = e.Event("shown.bs.modal", {
                relatedTarget: a,
              });
              c
                ? h.$element
                    .find(".modal-dialog")
                    .one(e.support.transition.end, function () {
                      h.$element.focus().trigger(b);
                    })
                    .emulateTransitionEnd(300)
                : h.$element.focus().trigger(b);
            }));
      }),
      (d.prototype.hide = function (a) {
        a && a.preventDefault(),
          (a = e.Event("hide.bs.modal")),
          this.$element.trigger(a),
          this.isShown &&
            !a.isDefaultPrevented() &&
            ((this.isShown = !1),
            this.escape(),
            e(document).off("focusin.bs.modal"),
            this.$element
              .removeClass("in")
              .attr("aria-hidden", !0)
              .off("click.dismiss.bs.modal"),
            e.support.transition && this.$element.hasClass("fade")
              ? this.$element
                  .one(e.support.transition.end, e.proxy(this.hideModal, this))
                  .emulateTransitionEnd(300)
              : this.hideModal());
      }),
      (d.prototype.enforceFocus = function () {
        e(document)
          .off("focusin.bs.modal")
          .on(
            "focusin.bs.modal",
            e.proxy(function (b) {
              this.$element[0] === b.target ||
                this.$element.has(b.target).length ||
                this.$element.focus();
            }, this)
          );
      }),
      (d.prototype.escape = function () {
        this.isShown && this.options.keyboard
          ? this.$element.on(
              "keyup.dismiss.bs.modal",
              e.proxy(function (b) {
                27 == b.which && this.hide();
              }, this)
            )
          : this.isShown || this.$element.off("keyup.dismiss.bs.modal");
      }),
      (d.prototype.hideModal = function () {
        var b = this;
        this.$element.hide(),
          this.backdrop(function () {
            b.removeBackdrop(), b.$element.trigger("hidden.bs.modal");
          });
      }),
      (d.prototype.removeBackdrop = function () {
        this.$backdrop && this.$backdrop.remove(), (this.$backdrop = null);
      }),
      (d.prototype.backdrop = function (a) {
        var h = this.$element.hasClass("fade") ? "fade" : "";
        if (this.isShown && this.options.backdrop) {
          var g = e.support.transition && h;
          if (
            ((this.$backdrop = e(
              '<div class="modal-backdrop ' + h + '" />'
            ).appendTo(document.body)),
            this.$element.on(
              "click.dismiss.bs.modal",
              e.proxy(function (b) {
                b.target === b.currentTarget &&
                  ("static" == this.options.backdrop
                    ? this.$element[0].focus.call(this.$element[0])
                    : this.hide.call(this));
              }, this)
            ),
            g && this.$backdrop[0].offsetWidth,
            this.$backdrop.addClass("in"),
            !a)
          ) {
            return;
          }
          g
            ? this.$backdrop
                .one(e.support.transition.end, a)
                .emulateTransitionEnd(150)
            : a();
        } else {
          !this.isShown && this.$backdrop
            ? (this.$backdrop.removeClass("in"),
              e.support.transition && this.$element.hasClass("fade")
                ? this.$backdrop
                    .one(e.support.transition.end, a)
                    .emulateTransitionEnd(150)
                : a())
            : a && a();
        }
      });
    var f = e.fn.modal;
    (e.fn.modal = function (b, a) {
      return this.each(function () {
        var i = e(this),
          h = i.data("bs.modal"),
          c = e.extend({}, d.DEFAULTS, i.data(), "object" == typeof b && b);
        h || i.data("bs.modal", (h = new d(this, c))),
          "string" == typeof b ? h[b](a) : c.show && h.show(a);
      });
    }),
      (e.fn.modal.Constructor = d),
      (e.fn.modal.noConflict = function () {
        return (e.fn.modal = f), this;
      }),
      e(document).on(
        "click.bs.modal.data-api",
        '[data-toggle="modal"]',
        function (a) {
          var m = e(this),
            i = m.attr("href"),
            h = e(
              m.attr("data-target") || (i && i.replace(/.*(?=#[^\s]+$)/, ""))
            ),
            g = h.data("bs.modal")
              ? "toggle"
              : e.extend(
                  {
                    remote: !/#/.test(i) && i,
                  },
                  h.data(),
                  m.data()
                );
          m.is("a") && a.preventDefault(),
            h.modal(g, this).one("hide", function () {
              m.is(":visible") && m.focus();
            });
        }
      ),
      e(document)
        .on("show.bs.modal", ".modal", function () {
          e(document.body).addClass("modal-open");
        })
        .on("hidden.bs.modal", ".modal", function () {
          e(document.body).removeClass("modal-open");
        });
  })(jQuery),
  +(function (e) {
    var d = function (g, c) {
      (this.type =
        this.options =
        this.enabled =
        this.timeout =
        this.hoverState =
        this.$element =
          null),
        this.init("tooltip", g, c);
    };
    (d.DEFAULTS = {
      animation: !0,
      placement: "top",
      selector: !1,
      template:
        '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
      trigger: "hover focus",
      title: "",
      delay: 0,
      html: !1,
      container: !1,
    }),
      (d.prototype.init = function (a, s, r) {
        (this.enabled = !0),
          (this.type = a),
          (this.$element = e(s)),
          (this.options = this.getOptions(r));
        for (var q = this.options.trigger.split(" "), p = q.length; p--; ) {
          var o = q[p];
          if ("click" == o) {
            this.$element.on(
              "click." + this.type,
              this.options.selector,
              e.proxy(this.toggle, this)
            );
          } else {
            if ("manual" != o) {
              var n = "hover" == o ? "mouseenter" : "focusin",
                m = "hover" == o ? "mouseleave" : "focusout";
              this.$element.on(
                n + "." + this.type,
                this.options.selector,
                e.proxy(this.enter, this)
              ),
                this.$element.on(
                  m + "." + this.type,
                  this.options.selector,
                  e.proxy(this.leave, this)
                );
            }
          }
        }
        this.options.selector
          ? (this._options = e.extend({}, this.options, {
              trigger: "manual",
              selector: "",
            }))
          : this.fixTitle();
      }),
      (d.prototype.getDefaults = function () {
        return d.DEFAULTS;
      }),
      (d.prototype.getOptions = function (a) {
        return (
          (a = e.extend({}, this.getDefaults(), this.$element.data(), a)),
          a.delay &&
            "number" == typeof a.delay &&
            (a.delay = {
              show: a.delay,
              hide: a.delay,
            }),
          a
        );
      }),
      (d.prototype.getDelegateOptions = function () {
        var a = {},
          g = this.getDefaults();
        return (
          this._options &&
            e.each(this._options, function (b, c) {
              g[b] != c && (a[b] = c);
            }),
          a
        );
      }),
      (d.prototype.enter = function (a) {
        var g =
          a instanceof this.constructor
            ? a
            : e(a.currentTarget)
                [this.type](this.getDelegateOptions())
                .data("bs." + this.type);
        return (
          clearTimeout(g.timeout),
          (g.hoverState = "in"),
          g.options.delay && g.options.delay.show
            ? void (g.timeout = setTimeout(function () {
                "in" == g.hoverState && g.show();
              }, g.options.delay.show))
            : g.show()
        );
      }),
      (d.prototype.leave = function (a) {
        var g =
          a instanceof this.constructor
            ? a
            : e(a.currentTarget)
                [this.type](this.getDelegateOptions())
                .data("bs." + this.type);
        return (
          clearTimeout(g.timeout),
          (g.hoverState = "out"),
          g.options.delay && g.options.delay.hide
            ? void (g.timeout = setTimeout(function () {
                "out" == g.hoverState && g.hide();
              }, g.options.delay.hide))
            : g.hide()
        );
      }),
      (d.prototype.show = function () {
        var H = e.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
          if ((this.$element.trigger(H), H.isDefaultPrevented())) {
            return;
          }
          var G = this,
            F = this.tip();
          this.setContent(), this.options.animation && F.addClass("fade");
          var E =
              "function" == typeof this.options.placement
                ? this.options.placement.call(this, F[0], this.$element[0])
                : this.options.placement,
            D = /\s?auto?\s?/i,
            C = D.test(E);
          C && (E = E.replace(D, "") || "top"),
            F.detach()
              .css({
                top: 0,
                left: 0,
                display: "block",
              })
              .addClass(E),
            this.options.container
              ? F.appendTo(this.options.container)
              : F.insertAfter(this.$element);
          var B = this.getPosition(),
            A = F[0].offsetWidth,
            z = F[0].offsetHeight;
          if (C) {
            var y = this.$element.parent(),
              x = E,
              w = document.documentElement.scrollTop || document.body.scrollTop,
              v =
                "body" == this.options.container
                  ? window.innerWidth
                  : y.outerWidth(),
              u =
                "body" == this.options.container
                  ? window.innerHeight
                  : y.outerHeight(),
              t = "body" == this.options.container ? 0 : y.offset().left;
            (E =
              "bottom" == E && B.top + B.height + z - w > u
                ? "top"
                : "top" == E && B.top - w - z < 0
                ? "bottom"
                : "right" == E && B.right + A > v
                ? "left"
                : "left" == E && B.left - A < t
                ? "right"
                : E),
              F.removeClass(x).addClass(E);
          }
          var s = this.getCalculatedOffset(E, B, A, z);
          this.applyPlacement(s, E), (this.hoverState = null);
          var a = function () {
            G.$element.trigger("shown.bs." + G.type);
          };
          e.support.transition && this.$tip.hasClass("fade")
            ? F.one(e.support.transition.end, a).emulateTransitionEnd(150)
            : a();
        }
      }),
      (d.prototype.applyPlacement = function (v, u) {
        var t,
          s = this.tip(),
          r = s[0].offsetWidth,
          q = s[0].offsetHeight,
          p = parseInt(s.css("margin-top"), 10),
          o = parseInt(s.css("margin-left"), 10);
        isNaN(p) && (p = 0),
          isNaN(o) && (o = 0),
          (v.top = v.top + p),
          (v.left = v.left + o),
          e.offset.setOffset(
            s[0],
            e.extend(
              {
                using: function (b) {
                  s.css({
                    top: Math.round(b.top),
                    left: Math.round(b.left),
                  });
                },
              },
              v
            ),
            0
          ),
          s.addClass("in");
        var n = s[0].offsetWidth,
          m = s[0].offsetHeight;
        if (
          ("top" == u && m != q && ((t = !0), (v.top = v.top + q - m)),
          /bottom|top/.test(u))
        ) {
          var a = 0;
          v.left < 0 &&
            ((a = -2 * v.left),
            (v.left = 0),
            s.offset(v),
            (n = s[0].offsetWidth),
            (m = s[0].offsetHeight)),
            this.replaceArrow(a - r + n, n, "left");
        } else {
          this.replaceArrow(m - q, m, "top");
        }
        t && s.offset(v);
      }),
      (d.prototype.replaceArrow = function (h, g, i) {
        this.arrow().css(i, h ? 50 * (1 - h / g) + "%" : "");
      }),
      (d.prototype.setContent = function () {
        var g = this.tip(),
          c = this.getTitle();
        g.find(".tooltip-inner")[this.options.html ? "html" : "text"](c),
          g.removeClass("fade in top bottom left right");
      }),
      (d.prototype.hide = function () {
        function a() {
          "in" != i.hoverState && h.detach(),
            i.$element.trigger("hidden.bs." + i.type);
        }
        var i = this,
          h = this.tip(),
          g = e.Event("hide.bs." + this.type);
        return (
          this.$element.trigger(g),
          g.isDefaultPrevented()
            ? void 0
            : (h.removeClass("in"),
              e.support.transition && this.$tip.hasClass("fade")
                ? h.one(e.support.transition.end, a).emulateTransitionEnd(150)
                : a(),
              (this.hoverState = null),
              this)
        );
      }),
      (d.prototype.fixTitle = function () {
        var b = this.$element;
        (b.attr("title") || "string" != typeof b.attr("data-original-title")) &&
          b
            .attr("data-original-title", b.attr("title") || "")
            .attr("title", "");
      }),
      (d.prototype.hasContent = function () {
        return this.getTitle();
      }),
      (d.prototype.getPosition = function () {
        var a = this.$element[0];
        return e.extend(
          {},
          "function" == typeof a.getBoundingClientRect
            ? a.getBoundingClientRect()
            : {
                width: a.offsetWidth,
                height: a.offsetHeight,
              },
          this.$element.offset()
        );
      }),
      (d.prototype.getCalculatedOffset = function (h, g, m, i) {
        return "bottom" == h
          ? {
              top: g.top + g.height,
              left: g.left + g.width / 2 - m / 2,
            }
          : "top" == h
          ? {
              top: g.top - i,
              left: g.left + g.width / 2 - m / 2,
            }
          : "left" == h
          ? {
              top: g.top + g.height / 2 - i / 2,
              left: g.left - m,
            }
          : {
              top: g.top + g.height / 2 - i / 2,
              left: g.left + g.width,
            };
      }),
      (d.prototype.getTitle = function () {
        var h,
          g = this.$element,
          i = this.options;
        return (h =
          g.attr("data-original-title") ||
          ("function" == typeof i.title ? i.title.call(g[0]) : i.title));
      }),
      (d.prototype.tip = function () {
        return (this.$tip = this.$tip || e(this.options.template));
      }),
      (d.prototype.arrow = function () {
        return (this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow"));
      }),
      (d.prototype.validate = function () {
        this.$element[0].parentNode ||
          (this.hide(), (this.$element = null), (this.options = null));
      }),
      (d.prototype.enable = function () {
        this.enabled = !0;
      }),
      (d.prototype.disable = function () {
        this.enabled = !1;
      }),
      (d.prototype.toggleEnabled = function () {
        this.enabled = !this.enabled;
      }),
      (d.prototype.toggle = function (a) {
        var g = a
          ? e(a.currentTarget)
              [this.type](this.getDelegateOptions())
              .data("bs." + this.type)
          : this;
        g.tip().hasClass("in") ? g.leave(g) : g.enter(g);
      }),
      (d.prototype.destroy = function () {
        clearTimeout(this.timeout),
          this.hide()
            .$element.off("." + this.type)
            .removeData("bs." + this.type);
      });
    var f = e.fn.tooltip;
    (e.fn.tooltip = function (a) {
      return this.each(function () {
        var g = e(this),
          c = g.data("bs.tooltip"),
          b = "object" == typeof a && a;
        (c || "destroy" != a) &&
          (c || g.data("bs.tooltip", (c = new d(this, b))),
          "string" == typeof a && c[a]());
      });
    }),
      (e.fn.tooltip.Constructor = d),
      (e.fn.tooltip.noConflict = function () {
        return (e.fn.tooltip = f), this;
      });
  })(jQuery),
  +(function (e) {
    var d = function (g, c) {
      this.init("popover", g, c);
    };
    if (!e.fn.tooltip) {
      throw new Error("Popover requires tooltip.js");
    }
    (d.DEFAULTS = e.extend({}, e.fn.tooltip.Constructor.DEFAULTS, {
      placement: "right",
      trigger: "click",
      content: "",
      template:
        '<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',
    })),
      (d.prototype = e.extend({}, e.fn.tooltip.Constructor.prototype)),
      (d.prototype.constructor = d),
      (d.prototype.getDefaults = function () {
        return d.DEFAULTS;
      }),
      (d.prototype.setContent = function () {
        var h = this.tip(),
          g = this.getTitle(),
          i = this.getContent();
        h.find(".popover-title")[this.options.html ? "html" : "text"](g),
          h
            .find(".popover-content")
            [
              this.options.html
                ? "string" == typeof i
                  ? "html"
                  : "append"
                : "text"
            ](i),
          h.removeClass("fade top bottom left right in"),
          h.find(".popover-title").html() || h.find(".popover-title").hide();
      }),
      (d.prototype.hasContent = function () {
        return this.getTitle() || this.getContent();
      }),
      (d.prototype.getContent = function () {
        var g = this.$element,
          c = this.options;
        return (
          g.attr("data-content") ||
          ("function" == typeof c.content ? c.content.call(g[0]) : c.content)
        );
      }),
      (d.prototype.arrow = function () {
        return (this.$arrow = this.$arrow || this.tip().find(".arrow"));
      }),
      (d.prototype.tip = function () {
        return this.$tip || (this.$tip = e(this.options.template)), this.$tip;
      });
    var f = e.fn.popover;
    (e.fn.popover = function (a) {
      return this.each(function () {
        var g = e(this),
          c = g.data("bs.popover"),
          b = "object" == typeof a && a;
        (c || "destroy" != a) &&
          (c || g.data("bs.popover", (c = new d(this, b))),
          "string" == typeof a && c[a]());
      });
    }),
      (e.fn.popover.Constructor = d),
      (e.fn.popover.noConflict = function () {
        return (e.fn.popover = f), this;
      });
  })(jQuery),
  +(function (e) {
    function d(h, g) {
      var b,
        a = e.proxy(this.process, this);
      (this.$element = e(e(h).is("body") ? window : h)),
        (this.$body = e("body")),
        (this.$scrollElement = this.$element.on(
          "scroll.bs.scroll-spy.data-api",
          a
        )),
        (this.options = e.extend({}, d.DEFAULTS, g)),
        (this.selector =
          (this.options.target ||
            ((b = e(h).attr("href")) && b.replace(/.*(?=#[^\s]+$)/, "")) ||
            "") + " .nav li > a"),
        (this.offsets = e([])),
        (this.targets = e([])),
        (this.activeTarget = null),
        this.refresh(),
        this.process();
    }
    (d.DEFAULTS = {
      offset: 10,
    }),
      (d.prototype.refresh = function () {
        var a = this.$element[0] == window ? "offset" : "position";
        (this.offsets = e([])), (this.targets = e([]));
        var g = this;
        this.$body
          .find(this.selector)
          .map(function () {
            var h = e(this),
              c = h.data("target") || h.attr("href"),
              b = /^#./.test(c) && e(c);
            return (
              (b &&
                b.length &&
                b.is(":visible") && [
                  [
                    b[a]().top +
                      (!e.isWindow(g.$scrollElement.get(0)) &&
                        g.$scrollElement.scrollTop()),
                    c,
                  ],
                ]) ||
              null
            );
          })
          .sort(function (h, c) {
            return h[0] - c[0];
          })
          .each(function () {
            g.offsets.push(this[0]), g.targets.push(this[1]);
          });
      }),
      (d.prototype.process = function () {
        var i,
          h = this.$scrollElement.scrollTop() + this.options.offset,
          q = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight,
          p = q - this.$scrollElement.height(),
          o = this.offsets,
          n = this.targets,
          m = this.activeTarget;
        if (h >= p) {
          return m != (i = n.last()[0]) && this.activate(i);
        }
        if (m && h <= o[0]) {
          return m != (i = n[0]) && this.activate(i);
        }
        for (i = o.length; i--; ) {
          m != n[i] &&
            h >= o[i] &&
            (!o[i + 1] || h <= o[i + 1]) &&
            this.activate(n[i]);
        }
      }),
      (d.prototype.activate = function (a) {
        (this.activeTarget = a),
          e(this.selector)
            .parentsUntil(this.options.target, ".active")
            .removeClass("active");
        var h =
            this.selector +
            '[data-target="' +
            a +
            '"],' +
            this.selector +
            '[href="' +
            a +
            '"]',
          g = e(h).parents("li").addClass("active");
        g.parent(".dropdown-menu").length &&
          (g = g.closest("li.dropdown").addClass("active")),
          g.trigger("activate.bs.scrollspy");
      });
    var f = e.fn.scrollspy;
    (e.fn.scrollspy = function (a) {
      return this.each(function () {
        var g = e(this),
          c = g.data("bs.scrollspy"),
          b = "object" == typeof a && a;
        c || g.data("bs.scrollspy", (c = new d(this, b))),
          "string" == typeof a && c[a]();
      });
    }),
      (e.fn.scrollspy.Constructor = d),
      (e.fn.scrollspy.noConflict = function () {
        return (e.fn.scrollspy = f), this;
      }),
      e(window).on("load", function () {
        e('[data-spy="scroll"]').each(function () {
          var a = e(this);
          a.scrollspy(a.data());
        });
      });
  })(jQuery),
  +(function (e) {
    var d = function (a) {
      this.element = e(a);
    };
    (d.prototype.show = function () {
      var a = this.element,
        o = a.closest("ul:not(.dropdown-menu)"),
        n = a.data("target");
      if (
        (n ||
          ((n = a.attr("href")), (n = n && n.replace(/.*(?=#[^\s]*$)/, ""))),
        !a.parent("li").hasClass("active"))
      ) {
        var m = o.find(".active:last a")[0],
          i = e.Event("show.bs.tab", {
            relatedTarget: m,
          });
        if ((a.trigger(i), !i.isDefaultPrevented())) {
          var h = e(n);
          this.activate(a.parent("li"), o),
            this.activate(h, h.parent(), function () {
              a.trigger({
                type: "shown.bs.tab",
                relatedTarget: m,
              });
            });
        }
      }
    }),
      (d.prototype.activate = function (a, o, n) {
        function m() {
          i
            .removeClass("active")
            .find("> .dropdown-menu > .active")
            .removeClass("active"),
            a.addClass("active"),
            h ? (a[0].offsetWidth, a.addClass("in")) : a.removeClass("fade"),
            a.parent(".dropdown-menu") &&
              a.closest("li.dropdown").addClass("active"),
            n && n();
        }
        var i = o.find("> .active"),
          h = n && e.support.transition && i.hasClass("fade");
        h ? i.one(e.support.transition.end, m).emulateTransitionEnd(150) : m(),
          i.removeClass("in");
      });
    var f = e.fn.tab;
    (e.fn.tab = function (a) {
      return this.each(function () {
        var c = e(this),
          b = c.data("bs.tab");
        b || c.data("bs.tab", (b = new d(this))),
          "string" == typeof a && b[a]();
      });
    }),
      (e.fn.tab.Constructor = d),
      (e.fn.tab.noConflict = function () {
        return (e.fn.tab = f), this;
      }),
      e(document).on(
        "click.bs.tab.data-api",
        '[data-toggle="tab"], [data-toggle="pill"]',
        function (a) {
          a.preventDefault(), e(this).tab("show");
        }
      );
  })(jQuery),
  +(function (e) {
    var d = function (b, a) {
      (this.options = e.extend({}, d.DEFAULTS, a)),
        (this.$window = e(window)
          .on("scroll.bs.affix.data-api", e.proxy(this.checkPosition, this))
          .on(
            "click.bs.affix.data-api",
            e.proxy(this.checkPositionWithEventLoop, this)
          )),
        (this.$element = e(b)),
        (this.affixed = this.unpin = this.pinnedOffset = null),
        this.checkPosition();
    };
    (d.RESET = "affix affix-top affix-bottom"),
      (d.DEFAULTS = {
        offset: 0,
      }),
      (d.prototype.getPinnedOffset = function () {
        if (this.pinnedOffset) {
          return this.pinnedOffset;
        }
        this.$element.removeClass(d.RESET).addClass("affix");
        var b = this.$window.scrollTop(),
          g = this.$element.offset();
        return (this.pinnedOffset = g.top - b);
      }),
      (d.prototype.checkPositionWithEventLoop = function () {
        setTimeout(e.proxy(this.checkPosition, this), 1);
      }),
      (d.prototype.checkPosition = function () {
        if (this.$element.is(":visible")) {
          var s = e(document).height(),
            r = this.$window.scrollTop(),
            q = this.$element.offset(),
            p = this.options.offset,
            o = p.top,
            n = p.bottom;
          "top" == this.affixed && (q.top += r),
            "object" != typeof p && (n = o = p),
            "function" == typeof o && (o = p.top(this.$element)),
            "function" == typeof n && (n = p.bottom(this.$element));
          var m =
            null != this.unpin && r + this.unpin <= q.top
              ? !1
              : null != n && q.top + this.$element.height() >= s - n
              ? "bottom"
              : null != o && o >= r
              ? "top"
              : !1;
          if (this.affixed !== m) {
            this.unpin && this.$element.css("top", "");
            var b = "affix" + (m ? "-" + m : ""),
              a = e.Event(b + ".bs.affix");
            this.$element.trigger(a),
              a.isDefaultPrevented() ||
                ((this.affixed = m),
                (this.unpin = "bottom" == m ? this.getPinnedOffset() : null),
                this.$element
                  .removeClass(d.RESET)
                  .addClass(b)
                  .trigger(e.Event(b.replace("affix", "affixed"))),
                "bottom" == m &&
                  this.$element.offset({
                    top: s - n - this.$element.height(),
                  }));
          }
        }
      });
    var f = e.fn.affix;
    (e.fn.affix = function (a) {
      return this.each(function () {
        var g = e(this),
          c = g.data("bs.affix"),
          b = "object" == typeof a && a;
        c || g.data("bs.affix", (c = new d(this, b))),
          "string" == typeof a && c[a]();
      });
    }),
      (e.fn.affix.Constructor = d),
      (e.fn.affix.noConflict = function () {
        return (e.fn.affix = f), this;
      }),
      e(window).on("load", function () {
        e('[data-spy="affix"]').each(function () {
          var a = e(this),
            g = a.data();
          (g.offset = g.offset || {}),
            g.offsetBottom && (g.offset.bottom = g.offsetBottom),
            g.offsetTop && (g.offset.top = g.offsetTop),
            a.affix(g);
        });
      });
  })(jQuery);
/*!
 * Intro.js v3.3.1
 * https://introjs.com
 *
 * Copyright (C) 2012-2021 Afshin Mehrabani (@afshinmeh).
 * https://raw.githubusercontent.com/usablica/intro.js/master/license.md
 *
 * Date: Sun, 07 Feb 2021 12:38:48 GMT
 */
!(function (a, b) {
  "object" == typeof exports && "undefined" != typeof module
    ? (module.exports = b())
    : "function" == typeof define && define.amd
    ? define(b)
    : ((a = a || self).introJs = b());
})(this, function () {
  function cG(a) {
    return (cG =
      "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
        ? function (b) {
            return typeof b;
          }
        : function (b) {
            return b &&
              "function" == typeof Symbol &&
              b.constructor === Symbol &&
              b !== Symbol.prototype
              ? "symbol"
              : typeof b;
          })(a);
  }
  var c2 = (function () {
    var a = {};
    return function (b) {
      var c =
        arguments.length > 1 && void 0 !== arguments[1]
          ? arguments[1]
          : "introjs-stamp";
      return (a[c] = a[c] || 0), void 0 === b[c] && (b[c] = a[c]++), b[c];
    };
  })();
  function cP(b, c, f) {
    if (b) {
      for (var a = 0, d = b.length; a < d; a++) {
        c(b[a], a);
      }
    }
    "function" == typeof f && f();
  }
  var cX = new (function () {
      var a = "introjs_event";
      (this._id = function (c, e, b, d) {
        return e + c2(b) + (d ? "_".concat(c2(d)) : "");
      }),
        (this.on = function (g, m, d, h, f) {
          var c = this._id.apply(this, arguments),
            b = function (e) {
              return d.call(h || g, e || window.event);
            };
          "addEventListener" in g
            ? g.addEventListener(m, b, f)
            : "attachEvent" in g && g.attachEvent("on".concat(m), b),
            (g[a] = g[a] || {}),
            (g[a][c] = b);
        }),
        (this.off = function (g, m, d, h, f) {
          var c = this._id.apply(this, arguments),
            b = g[a] && g[a][c];
          b &&
            ("removeEventListener" in g
              ? g.removeEventListener(m, b, f)
              : "detachEvent" in g && g.detachEvent("on".concat(m), b),
            (g[a][c] = null));
        });
    })(),
    cN =
      "undefined" != typeof globalThis
        ? globalThis
        : "undefined" != typeof window
        ? window
        : "undefined" != typeof global
        ? global
        : "undefined" != typeof self
        ? self
        : {};
  function cJ(a, b) {
    return (
      a(
        (b = {
          exports: {},
        }),
        b.exports
      ),
      b.exports
    );
  }
  var cS = function (a) {
      return a && a.Math == Math && a;
    },
    da =
      cS("object" == typeof globalThis && globalThis) ||
      cS("object" == typeof window && window) ||
      cS("object" == typeof self && self) ||
      cS("object" == typeof cN && cN) ||
      (function () {
        return this;
      })() ||
      Function("return this")(),
    cI = function (a) {
      try {
        return !!a();
      } catch (a) {
        return !0;
      }
    },
    c7 = !cI(function () {
      return (
        7 !=
        Object.defineProperty({}, 1, {
          get: function () {
            return 7;
          },
        })[1]
      );
    }),
    cF = {}.propertyIsEnumerable,
    cZ = Object.getOwnPropertyDescriptor,
    c1 = {
      f:
        cZ &&
        !cF.call(
          {
            1: 2,
          },
          1
        )
          ? function (a) {
              var b = cZ(this, a);
              return !!b && b.enumerable;
            }
          : cF,
    },
    cL = function (a, b) {
      return {
        enumerable: !(1 & a),
        configurable: !(2 & a),
        writable: !(4 & a),
        value: b,
      };
    },
    c5 = {}.toString,
    c0 = function (a) {
      return c5.call(a).slice(8, -1);
    },
    cD = "".split,
    cR = cI(function () {
      return !Object("z").propertyIsEnumerable(0);
    })
      ? function (a) {
          return "String" == c0(a) ? cD.call(a, "") : Object(a);
        }
      : Object,
    c8 = function (a) {
      if (null == a) {
        throw TypeError("Can't call method on " + a);
      }
      return a;
    },
    cz = function (a) {
      return cR(c8(a));
    },
    cC = function (a) {
      return "object" == typeof a ? null !== a : "function" == typeof a;
    },
    dc = function (b, c) {
      if (!cC(b)) {
        return b;
      }
      var d, a;
      if (c && "function" == typeof (d = b.toString) && !cC((a = d.call(b)))) {
        return a;
      }
      if ("function" == typeof (d = b.valueOf) && !cC((a = d.call(b)))) {
        return a;
      }
      if (!c && "function" == typeof (d = b.toString) && !cC((a = d.call(b)))) {
        return a;
      }
      throw TypeError("Can't convert object to primitive value");
    },
    ds = {}.hasOwnProperty,
    cB = function (a, b) {
      return ds.call(a, b);
    },
    dW = da.document,
    cV = cC(dW) && cC(dW.createElement),
    dR = function (a) {
      return cV ? dW.createElement(a) : {};
    },
    dZ =
      !c7 &&
      !cI(function () {
        return (
          7 !=
          Object.defineProperty(dR("div"), "a", {
            get: function () {
              return 7;
            },
          }).a
        );
      }),
    cT = Object.getOwnPropertyDescriptor,
    dC = {
      f: c7
        ? cT
        : function (a, b) {
            if (((a = cz(a)), (b = dc(b, !0)), dZ)) {
              try {
                return cT(a, b);
              } catch (a) {}
            }
            if (cB(a, b)) {
              return cL(!c1.f.call(a, b), a[b]);
            }
          },
    },
    dr = function (a) {
      if (!cC(a)) {
        throw TypeError(String(a) + " is not an object");
      }
      return a;
    },
    dL = Object.defineProperty,
    dA = {
      f: c7
        ? dL
        : function (a, b, c) {
            if ((dr(a), (b = dc(b, !0)), dr(c), dZ)) {
              try {
                return dL(a, b, c);
              } catch (a) {}
            }
            if ("get" in c || "set" in c) {
              throw TypeError("Accessors not supported");
            }
            return "value" in c && (a[b] = c.value), a;
          },
    },
    dy = c7
      ? function (a, b, c) {
          return dA.f(a, b, cL(1, c));
        }
      : function (a, b, c) {
          return (a[b] = c), a;
        },
    dF = function (a, b) {
      try {
        dy(da, a, b);
      } catch (c) {
        da[a] = b;
      }
      return b;
    },
    dv = da["__core-js_shared__"] || dF("__core-js_shared__", {}),
    cK = Function.toString;
  "function" != typeof dv.inspectSource &&
    (dv.inspectSource = function (a) {
      return cK.call(a);
    });
  var dE,
    dX,
    dM,
    eh = dv.inspectSource,
    dU = da.WeakMap,
    dp = "function" == typeof dU && /native code/.test(eh(dU)),
    dP = cJ(function (a) {
      (a.exports = function (b, c) {
        return dv[b] || (dv[b] = void 0 !== c ? c : {});
      })("versions", []).push({
        version: "3.8.3",
        mode: "global",
        copyright: " 2021 Denis Pushkarev (zloirock.ru)",
      });
    }),
    cy = 0,
    dm = Math.random(),
    dk = function (a) {
      return (
        "Symbol(" +
        String(void 0 === a ? "" : a) +
        ")_" +
        (++cy + dm).toString(36)
      );
    },
    dN = dP("keys"),
    dH = function (a) {
      return dN[a] || (dN[a] = dk(a));
    },
    dj = {},
    dh = da.WeakMap;
  if (dp) {
    var dw = dv.state || (dv.state = new dh()),
      dJ = dw.get,
      df = dw.has,
      bd = dw.set;
    (dE = function (a, b) {
      return (b.facade = a), bd.call(dw, a, b), b;
    }),
      (dX = function (a) {
        return dJ.call(dw, a) || {};
      }),
      (dM = function (a) {
        return df.call(dw, a);
      });
  } else {
    var bZ = dH("state");
    (dj[bZ] = !0),
      (dE = function (a, b) {
        return (b.facade = a), dy(a, bZ, b), b;
      }),
      (dX = function (a) {
        return cB(a, bZ) ? a[bZ] : {};
      }),
      (dM = function (a) {
        return cB(a, bZ);
      });
  }
  var dB = {
      set: dE,
      get: dX,
      has: dM,
      enforce: function (a) {
        return dM(a) ? dX(a) : dE(a, {});
      },
      getterFor: function (a) {
        return function (b) {
          var c;
          if (!cC(b) || (c = dX(b)).type !== a) {
            throw TypeError("Incompatible receiver, " + a + " required");
          }
          return c;
        };
      },
    },
    aT = cJ(function (b) {
      var c = dB.get,
        d = dB.enforce,
        a = String(String).split("String");
      (b.exports = function (h, n, p, m) {
        var f,
          i = !!m && !!m.unsafe,
          q = !!m && !!m.enumerable,
          g = !!m && !!m.noTargetGet;
        "function" == typeof p &&
          ("string" != typeof n || cB(p, "name") || dy(p, "name", n),
          (f = d(p)).source ||
            (f.source = a.join("string" == typeof n ? n : ""))),
          h !== da
            ? (i ? !g && h[n] && (q = !0) : delete h[n],
              q ? (h[n] = p) : dy(h, n, p))
            : q
            ? (h[n] = p)
            : dF(n, p);
      })(Function.prototype, "toString", function () {
        return ("function" == typeof this && c(this).source) || eh(this);
      });
    }),
    cQ = da,
    bP = function (a) {
      return "function" == typeof a ? a : void 0;
    },
    eu = function (a, b) {
      return arguments.length < 2
        ? bP(cQ[a]) || bP(da[a])
        : (cQ[a] && cQ[a][b]) || (da[a] && da[a][b]);
    },
    d3 = Math.ceil,
    bw = Math.floor,
    cA = function (a) {
      return isNaN((a = +a)) ? 0 : (a > 0 ? bw : d3)(a);
    },
    aX = Math.min,
    a7 = function (a) {
      return a > 0 ? aX(cA(a), 9007199254740991) : 0;
    },
    bI = Math.max,
    cm = Math.min,
    cg = function (a, b) {
      var c = cA(a);
      return c < 0 ? bI(c + b, 0) : cm(c, b);
    },
    bq = function (a) {
      return function (g, m, d) {
        var h,
          f = cz(g),
          c = a7(f.length),
          b = cg(d, c);
        if (a && m != m) {
          for (; c > b; ) {
            if ((h = f[b++]) != h) {
              return !0;
            }
          }
        } else {
          for (; c > b; b++) {
            if ((a || b in f) && f[b] === m) {
              return a || b || 0;
            }
          }
        }
        return !a && -1;
      };
    },
    aK = {
      includes: bq(!0),
      indexOf: bq(!1),
    },
    d9 = aK.indexOf,
    dg = function (b, d) {
      var g,
        a = cz(b),
        f = 0,
        c = [];
      for (g in a) {
        !cB(dj, g) && cB(a, g) && c.push(g);
      }
      for (; d.length > f; ) {
        cB(a, (g = d[f++])) && (~d9(c, g) || c.push(g));
      }
      return c;
    },
    eg = [
      "constructor",
      "hasOwnProperty",
      "isPrototypeOf",
      "propertyIsEnumerable",
      "toLocaleString",
      "toString",
      "valueOf",
    ],
    au = eg.concat("length", "prototype"),
    ab = {
      f:
        Object.getOwnPropertyNames ||
        function (a) {
          return dg(a, au);
        },
    },
    ex = {
      f: Object.getOwnPropertySymbols,
    },
    ez =
      eu("Reflect", "ownKeys") ||
      function (a) {
        var b = ab.f(dr(a)),
          c = ex.f;
        return c ? b.concat(c(a)) : b;
      },
    a6 = function (c, f) {
      for (var h = ez(f), b = dA.f, g = dC.f, d = 0; d < h.length; d++) {
        var a = h[d];
        cB(c, a) || b(c, a, g(f, a));
      }
    },
    aE = /#|\.prototype\./,
    aD = function (a, b) {
      var c = ak[bH(a)];
      return c == ed || (c != bu && ("function" == typeof b ? cI(b) : !!b));
    },
    bH = (aD.normalize = function (a) {
      return String(a).replace(aE, ".").toLowerCase();
    }),
    ak = (aD.data = {}),
    bu = (aD.NATIVE = "N"),
    ed = (aD.POLYFILL = "P"),
    dx = aD,
    bb = dC.f,
    aV = function (q, h) {
      var d,
        g,
        b,
        a,
        f,
        v = q.target,
        m = q.global,
        p = q.stat;
      if ((d = m ? da : p ? da[v] || dF(v, {}) : (da[v] || {}).prototype)) {
        for (g in h) {
          if (
            ((a = h[g]),
            (b = q.noTargetGet ? (f = bb(d, g)) && f.value : d[g]),
            !dx(m ? g : v + (p ? "." : "#") + g, q.forced) && void 0 !== b)
          ) {
            if (typeof a == typeof b) {
              continue;
            }
            a6(a, b);
          }
          (q.sham || (b && b.sham)) && dy(a, "sham", !0), aT(d, g, a, q);
        }
      }
    },
    b2 = function () {
      var a = dr(this),
        b = "";
      return (
        a.global && (b += "g"),
        a.ignoreCase && (b += "i"),
        a.multiline && (b += "m"),
        a.dotAll && (b += "s"),
        a.unicode && (b += "u"),
        a.sticky && (b += "y"),
        b
      );
    };
  function aq(a, b) {
    return RegExp(a, b);
  }
  var b4,
    bN,
    bp = {
      UNSUPPORTED_Y: cI(function () {
        var a = aq("a", "y");
        return (a.lastIndex = 2), null != a.exec("abcd");
      }),
      BROKEN_CARET: cI(function () {
        var a = aq("^r", "gy");
        return (a.lastIndex = 2), null != a.exec("str");
      }),
    },
    d7 = RegExp.prototype.exec,
    du = String.prototype.replace,
    aS = d7,
    dQ =
      ((b4 = /a/),
      (bN = /b*/g),
      d7.call(b4, "a"),
      d7.call(bN, "a"),
      0 !== b4.lastIndex || 0 !== bN.lastIndex),
    ah = bp.UNSUPPORTED_Y || bp.BROKEN_CARET,
    dV = void 0 !== /()??/.exec("")[1];
  (dQ || dV || ah) &&
    (aS = function (w) {
      var m,
        f,
        h,
        d,
        b = this,
        g = ah && b.sticky,
        q = b2.call(b),
        x = b.source,
        p = 0,
        v = w;
      return (
        g &&
          (-1 === (q = q.replace("y", "")).indexOf("g") && (q += "g"),
          (v = String(w).slice(b.lastIndex)),
          b.lastIndex > 0 &&
            (!b.multiline || (b.multiline && "\n" !== w[b.lastIndex - 1])) &&
            ((x = "(?: " + x + ")"), (v = " " + v), p++),
          (f = new RegExp("^(?:" + x + ")", q))),
        dV && (f = new RegExp("^" + x + "$(?!\\s)", q)),
        dQ && (m = b.lastIndex),
        (h = d7.call(g ? f : b, v)),
        g
          ? h
            ? ((h.input = h.input.slice(p)),
              (h[0] = h[0].slice(p)),
              (h.index = b.lastIndex),
              (b.lastIndex += h[0].length))
            : (b.lastIndex = 0)
          : dQ && h && (b.lastIndex = b.global ? h.index + h[0].length : m),
        dV &&
          h &&
          h.length > 1 &&
          du.call(h[0], f, function () {
            for (d = 1; d < arguments.length - 2; d++) {
              void 0 === arguments[d] && (h[d] = void 0);
            }
          }),
        h
      );
    });
  var c3 = aS;
  aV(
    {
      target: "RegExp",
      proto: !0,
      forced: /./.exec !== c3,
    },
    {
      exec: c3,
    }
  );
  var cr =
      !!Object.getOwnPropertySymbols &&
      !cI(function () {
        return !String(Symbol());
      }),
    es = cr && !Symbol.sham && "symbol" == typeof Symbol.iterator,
    ck = dP("wks"),
    b9 = da.Symbol,
    bU = es ? b9 : (b9 && b9.withoutSetter) || dk,
    aI = function (a) {
      return (
        cB(ck, a) ||
          (cr && cB(b9, a) ? (ck[a] = b9[a]) : (ck[a] = bU("Symbol." + a))),
        ck[a]
      );
    },
    cM = aI("species"),
    bC = !cI(function () {
      var a = /./;
      return (
        (a.exec = function () {
          var b = [];
          return (
            (b.groups = {
              a: "7",
            }),
            b
          );
        }),
        "7" !== "".replace(a, "$<a>")
      );
    }),
    bo = "$0" === "a".replace(/./, "$0"),
    b6 = aI("replace"),
    d1 = !!/./[b6] && "" === /./[b6]("a", "$0"),
    a0 = !cI(function () {
      var a = /(?:)/,
        b = a.exec;
      a.exec = function () {
        return b.apply(this, arguments);
      };
      var c = "ab".split(a);
      return 2 !== c.length || "a" !== c[0] || "b" !== c[1];
    }),
    dd = function (x, q, f, m) {
      var d = aI(x),
        b = !cI(function () {
          var a = {};
          return (
            (a[d] = function () {
              return 7;
            }),
            7 != ""[x](a)
          );
        }),
        g =
          b &&
          !cI(function () {
            var a = !1,
              c = /a/;
            return (
              "split" === x &&
                (((c = {}).constructor = {}),
                (c.constructor[cM] = function () {
                  return c;
                }),
                (c.flags = ""),
                (c[d] = /./[d])),
              (c.exec = function () {
                return (a = !0), null;
              }),
              c[d](""),
              !a
            );
          });
      if (
        !b ||
        !g ||
        ("replace" === x && (!bC || !bo || d1)) ||
        ("split" === x && !a0)
      ) {
        var v = /./[d],
          s = f(
            d,
            ""[x],
            function (c, h, u, a, r) {
              return h.exec === c3
                ? b && !r
                  ? {
                      done: !0,
                      value: v.call(h, u, a),
                    }
                  : {
                      done: !0,
                      value: c.call(u, h, a),
                    }
                : {
                    done: !1,
                  };
            },
            {
              REPLACE_KEEPS_$0: bo,
              REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE: d1,
            }
          ),
          w = s[0],
          p = s[1];
        aT(String.prototype, x, w),
          aT(
            RegExp.prototype,
            d,
            2 == q
              ? function (a, c) {
                  return p.call(a, this, c);
                }
              : function (a) {
                  return p.call(a, this);
                }
          );
      }
      m && dy(RegExp.prototype[d], "sham", !0);
    },
    bY = function (a) {
      return function (g, m) {
        var d,
          h,
          f = String(c8(g)),
          c = cA(m),
          b = f.length;
        return c < 0 || c >= b
          ? a
            ? ""
            : void 0
          : (d = f.charCodeAt(c)) < 55296 ||
            d > 56319 ||
            c + 1 === b ||
            (h = f.charCodeAt(c + 1)) < 56320 ||
            h > 57343
          ? a
            ? f.charAt(c)
            : d
          : a
          ? f.slice(c, c + 2)
          : h - 56320 + ((d - 55296) << 10) + 65536;
      };
    },
    eC = {
      codeAt: bY(!1),
      charAt: bY(!0),
    }.charAt,
    eb = function (a, b, c) {
      return b + (c ? eC(a, b).length : 1);
    },
    bG = function (b, c) {
      var d = b.exec;
      if ("function" == typeof d) {
        var a = d.call(b, c);
        if ("object" != typeof a) {
          throw TypeError(
            "RegExp exec method returned something other than an Object or null"
          );
        }
        return a;
      }
      if ("RegExp" !== c0(b)) {
        throw TypeError("RegExp#exec called on incompatible receiver");
      }
      return c3.call(b, c);
    };
  dd("match", 1, function (a, b, c) {
    return [
      function (f) {
        var g = c8(this),
          d = null == f ? void 0 : f[a];
        return void 0 !== d ? d.call(f, g) : new RegExp(f)[a](String(g));
      },
      function (p) {
        var g = c(b, p, this);
        if (g.done) {
          return g.value;
        }
        var e = dr(p),
          d = String(this);
        if (!e.global) {
          return bG(e, d);
        }
        var f = e.unicode;
        e.lastIndex = 0;
        for (var m, q = [], h = 0; null !== (m = bG(e, d)); ) {
          var n = String(m[0]);
          (q[h] = n),
            "" === n && (e.lastIndex = eb(d, a7(e.lastIndex), f)),
            h++;
        }
        return 0 === h ? null : q;
      },
    ];
  });
  var cW,
    a5,
    bh =
      Array.isArray ||
      function (a) {
        return "Array" == c0(a);
      },
    bS = function (a) {
      return Object(c8(a));
    },
    cx = function (b, c, d) {
      var a = dc(c);
      a in b ? dA.f(b, a, cL(0, d)) : (b[a] = d);
    },
    cp = aI("species"),
    bz = function (a, b) {
      var c;
      return (
        bh(a) &&
          ("function" != typeof (c = a.constructor) ||
          (c !== Array && !bh(c.prototype))
            ? cC(c) && null === (c = c[cp]) && (c = void 0)
            : (c = void 0)),
        new (void 0 === c ? Array : c)(0 === b ? 0 : b)
      );
    },
    aR = eu("navigator", "userAgent") || "",
    el = da.process,
    dI = el && el.versions,
    er = dI && dI.v8;
  er
    ? (a5 = (cW = er.split("."))[0] + cW[1])
    : aR &&
      (!(cW = aR.match(/Edge\/(\d+)/)) || cW[1] >= 74) &&
      (cW = aR.match(/Chrome\/(\d+)/)) &&
      (a5 = cW[1]);
  var aC = a5 && +a5,
    am = aI("species"),
    ad = function (a) {
      return (
        aC >= 51 ||
        !cI(function () {
          var b = [];
          return (
            ((b.constructor = {})[am] = function () {
              return {
                foo: 1,
              };
            }),
            1 !== b[a](Boolean).foo
          );
        })
      );
    },
    ag = aI("isConcatSpreadable"),
    bf =
      aC >= 51 ||
      !cI(function () {
        var a = [];
        return (a[ag] = !1), a.concat()[0] !== a;
      }),
    aN = ad("concat"),
    aL = function (a) {
      if (!cC(a)) {
        return !1;
      }
      var b = a[ag];
      return void 0 !== b ? !!b : bh(a);
    };
  aV(
    {
      target: "Array",
      proto: !0,
      forced: !bf || !aN,
    },
    {
      concat: function (p) {
        var h,
          d,
          g,
          c,
          b,
          f = bS(this),
          m = bz(f, 0),
          q = 0;
        for (h = -1, g = arguments.length; h < g; h++) {
          if (aL((b = -1 === h ? f : arguments[h]))) {
            if (q + (c = a7(b.length)) > 9007199254740991) {
              throw TypeError("Maximum allowed index exceeded");
            }
            for (d = 0; d < c; d++, q++) {
              d in b && cx(m, q, b[d]);
            }
          } else {
            if (q >= 9007199254740991) {
              throw TypeError("Maximum allowed index exceeded");
            }
            cx(m, q++, b);
          }
        }
        return (m.length = q), m;
      },
    }
  );
  var bQ = {};
  bQ[aI("toStringTag")] = "z";
  var ax = "[object z]" === String(bQ),
    bE = aI("toStringTag"),
    eq =
      "Arguments" ==
      c0(
        (function () {
          return arguments;
        })()
      ),
    dY = ax
      ? c0
      : function (b) {
          var c, d, a;
          return void 0 === b
            ? "Undefined"
            : null === b
            ? "Null"
            : "string" ==
              typeof (d = (function (f, g) {
                try {
                  return f[g];
                } catch (f) {}
              })((c = Object(b)), bE))
            ? d
            : eq
            ? c0(c)
            : "Object" == (a = c0(c)) && "function" == typeof c.callee
            ? "Arguments"
            : a;
        },
    bm = ax
      ? {}.toString
      : function () {
          return "[object " + dY(this) + "]";
        };
  ax ||
    aT(Object.prototype, "toString", bm, {
      unsafe: !0,
    });
  var a4 = RegExp.prototype,
    cb = a4.toString,
    aB = cI(function () {
      return (
        "/a/b" !=
        cb.call({
          source: "a",
          flags: "b",
        })
      );
    }),
    cd = "toString" != cb.name;
  (aB || cd) &&
    aT(
      RegExp.prototype,
      "toString",
      function () {
        var a = dr(this),
          b = String(a.source),
          c = a.flags;
        return (
          "/" +
          b +
          "/" +
          String(
            void 0 === c && a instanceof RegExp && !("flags" in a4)
              ? b2.call(a)
              : c
          )
        );
      },
      {
        unsafe: !0,
      }
    );
  var bW = aI("match"),
    bx = function (a) {
      var b;
      return cC(a) && (void 0 !== (b = a[bW]) ? !!b : "RegExp" == c0(a));
    },
    ej = function (a) {
      if ("function" != typeof a) {
        throw TypeError(String(a) + " is not a function");
      }
      return a;
    },
    dT = aI("species"),
    aY = [].push,
    d4 = Math.min,
    av = !cI(function () {
      return !RegExp(4294967295, "y");
    });
  function d6(b, c) {
    if (b instanceof SVGElement) {
      var a = b.getAttribute("class") || "";
      a.match(c) || b.setAttribute("class", "".concat(a, " ").concat(c));
    } else {
      if (void 0 !== b.classList) {
        cP(c.split(" "), function (d) {
          b.classList.add(d);
        });
      } else {
        b.className.match(c) || (b.className += " ".concat(c));
      }
    }
  }
  function dl(a, b) {
    var c = "";
    return (
      a.currentStyle
        ? (c = a.currentStyle[b])
        : document.defaultView &&
          document.defaultView.getComputedStyle &&
          (c = document.defaultView
            .getComputedStyle(a, null)
            .getPropertyValue(b)),
      c && c.toLowerCase ? c.toLowerCase() : c
    );
  }
  function cE(a) {
    var b = a.element;
    if (this._options.scrollToElement) {
      var c = (function (f) {
        var g = window.getComputedStyle(f),
          m = "absolute" === g.position,
          d = /(auto|scroll)/;
        if ("fixed" === g.position) {
          return document.body;
        }
        for (var h = f; (h = h.parentElement); ) {
          if (
            ((g = window.getComputedStyle(h)),
            (!m || "static" !== g.position) &&
              d.test(g.overflow + g.overflowY + g.overflowX))
          ) {
            return h;
          }
        }
        return document.body;
      })(b);
      c !== document.body && (c.scrollTop = b.offsetTop - c.offsetTop);
    }
  }
  function eA() {
    if (void 0 !== window.innerWidth) {
      return {
        width: window.innerWidth,
        height: window.innerHeight,
      };
    }
    var a = document.documentElement;
    return {
      width: a.clientWidth,
      height: a.clientHeight,
    };
  }
  function cu(b, d, g) {
    var a,
      f = d.element;
    if (
      "off" !== b &&
      this._options.scrollToElement &&
      ((a =
        "tooltip" === b
          ? g.getBoundingClientRect()
          : f.getBoundingClientRect()),
      !(function (h) {
        var i = h.getBoundingClientRect();
        return (
          i.top >= 0 &&
          i.left >= 0 &&
          i.bottom + 80 <= window.innerHeight &&
          i.right <= window.innerWidth
        );
      })(f))
    ) {
      var c = eA().height;
      a.bottom - (a.bottom - a.top) < 0 || f.clientHeight > c
        ? window.scrollBy(
            0,
            a.top - (c / 2 - a.height / 2) - this._options.scrollPadding
          )
        : window.scrollBy(
            0,
            a.top - (c / 2 - a.height / 2) + this._options.scrollPadding
          );
    }
  }
  function ch(a) {
    a.setAttribute("role", "button"), (a.tabIndex = 0);
  }
  function b0(b) {
    var d = document.body,
      g = document.documentElement,
      a = window.pageYOffset || g.scrollTop || d.scrollTop,
      f = window.pageXOffset || g.scrollLeft || d.scrollLeft,
      c = b.getBoundingClientRect();
    return {
      top: c.top + a,
      width: c.width,
      height: c.height,
      left: c.left + f,
    };
  }
  function aQ(a) {
    var b = a.parentNode;
    return (
      !(!b || "HTML" === b.nodeName) && ("fixed" === dl(a, "position") || aQ(b))
    );
  }
  dd(
    "split",
    2,
    function (b, c, d) {
      var a;
      return (
        (a =
          "c" == "abbc".split(/(b)*/)[1] ||
          4 != "test".split(/(?:)/, -1).length ||
          2 != "ab".split(/(?:ab)*/).length ||
          4 != ".".split(/(.?)(.?)/).length ||
          ".".split(/()()/).length > 1 ||
          "".split(/.?/).length
            ? function (y, g) {
                var p = String(c8(this)),
                  f = void 0 === g ? 4294967295 : g >>> 0;
                if (0 === f) {
                  return [];
                }
                if (void 0 === y) {
                  return [p];
                }
                if (!bx(y)) {
                  return c.call(p, y, f);
                }
                for (
                  var e,
                    m,
                    w,
                    z = [],
                    v =
                      (y.ignoreCase ? "i" : "") +
                      (y.multiline ? "m" : "") +
                      (y.unicode ? "u" : "") +
                      (y.sticky ? "y" : ""),
                    x = 0,
                    q = new RegExp(y.source, v + "g");
                  (e = c3.call(q, p)) &&
                  !(
                    (m = q.lastIndex) > x &&
                    (z.push(p.slice(x, e.index)),
                    e.length > 1 &&
                      e.index < p.length &&
                      aY.apply(z, e.slice(1)),
                    (w = e[0].length),
                    (x = m),
                    z.length >= f)
                  );

                ) {
                  q.lastIndex === e.index && q.lastIndex++;
                }
                return (
                  x === p.length
                    ? (!w && q.test("")) || z.push("")
                    : z.push(p.slice(x)),
                  z.length > f ? z.slice(0, f) : z
                );
              }
            : "0".split(void 0, 0).length
            ? function (e, f) {
                return void 0 === e && 0 === f ? [] : c.call(this, e, f);
              }
            : c),
        [
          function (g, i) {
            var h = c8(this),
              f = null == g ? void 0 : g[b];
            return void 0 !== f ? f.call(g, h, i) : a.call(String(h), g, i);
          },
          function (G, n) {
            var e = d(a, G, this, n, a !== c);
            if (e.done) {
              return e.value;
            }
            var w = dr(G),
              D = String(this),
              H = (function (g, h) {
                var m,
                  f = dr(g).constructor;
                return void 0 === f || null == (m = dr(f)[dT]) ? h : ej(m);
              })(w, RegExp),
              B = w.unicode,
              F =
                (w.ignoreCase ? "i" : "") +
                (w.multiline ? "m" : "") +
                (w.unicode ? "u" : "") +
                (av ? "y" : "g"),
              x = new H(av ? w : "^(?:" + w.source + ")", F),
              z = void 0 === n ? 4294967295 : n >>> 0;
            if (0 === z) {
              return [];
            }
            if (0 === D.length) {
              return null === bG(x, D) ? [D] : [];
            }
            for (var i = 0, A = 0, y = []; A < D.length; ) {
              x.lastIndex = av ? A : 0;
              var E,
                q = bG(x, av ? D : D.slice(A));
              if (
                null === q ||
                (E = d4(a7(x.lastIndex + (av ? 0 : A)), D.length)) === i
              ) {
                A = eb(D, A, B);
              } else {
                if ((y.push(D.slice(i, A)), y.length === z)) {
                  return y;
                }
                for (var C = 1; C <= q.length - 1; C++) {
                  if ((y.push(q[C]), y.length === z)) {
                    return y;
                  }
                }
                A = i = E;
              }
            }
            return y.push(D.slice(i)), y;
          },
        ]
      );
    },
    !av
  );
  var c9 = Math.floor,
    bK = "".replace,
    bj = /\$([$&'`]|\d\d?|<[^>]*>)/g,
    b1 = /\$([$&'`]|\d\d?)/g,
    dK = function (p, h, d, g, c, b) {
      var f = d + p.length,
        m = g.length,
        q = b1;
      return (
        void 0 !== c && ((c = bS(c)), (q = bj)),
        bK.call(b, q, function (n, i) {
          var o;
          switch (i.charAt(0)) {
            case "$":
              return "$";
            case "&":
              return p;
            case "`":
              return h.slice(0, d);
            case "'":
              return h.slice(f);
            case "<":
              o = c[i.slice(1, -1)];
              break;
            default:
              var a = +i;
              if (0 === a) {
                return n;
              }
              if (a > m) {
                var e = c9(a / 10);
                return 0 === e
                  ? n
                  : e <= m
                  ? void 0 === g[e - 1]
                    ? i.charAt(1)
                    : g[e - 1] + i.charAt(1)
                  : n;
              }
              o = g[a - 1];
          }
          return void 0 === o ? "" : o;
        })
      );
    },
    cY = Math.max,
    bT = Math.min;
  function ew(a, b) {
    if (a instanceof SVGElement) {
      var c = a.getAttribute("class") || "";
      a.setAttribute("class", c.replace(b, "").replace(/^\s+|\s+$/g, ""));
    } else {
      a.className = a.className.replace(b, "").replace(/^\s+|\s+$/g, "");
    }
  }
  function d5(b, c) {
    var d = "";
    if ((b.style.cssText && (d += b.style.cssText), "string" == typeof c)) {
      d += c;
    } else {
      for (var a in c) {
        d += "".concat(a, ":").concat(c[a], ";");
      }
    }
    b.style.cssText = d;
  }
  function bA(b) {
    if (b) {
      if (!this._introItems[this._currentStep]) {
        return;
      }
      var c = this._introItems[this._currentStep],
        d = b0(c.element),
        a = this._options.helperElementPadding;
      aQ(c.element)
        ? d6(b, "introjs-fixedTooltip")
        : ew(b, "introjs-fixedTooltip"),
        "floating" === c.position && (a = 0),
        d5(b, {
          width: "".concat(d.width + a, "px"),
          height: "".concat(d.height + a, "px"),
          top: "".concat(d.top - a / 2, "px"),
          left: "".concat(d.left - a / 2, "px"),
        });
    }
  }
  dd("replace", 2, function (c, f, h, b) {
    var g = b.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,
      d = b.REPLACE_KEEPS_$0,
      a = g ? "$" : "$0";
    return [
      function (q, e) {
        var p = c8(this),
          m = null == q ? void 0 : q[c];
        return void 0 !== m ? m.call(q, p, e) : f.call(String(p), q, e);
      },
      function (A, H) {
        if ((!g && d) || ("string" == typeof H && -1 === H.indexOf(a))) {
          var O = h(f, A, this, H);
          if (O.done) {
            return O.value;
          }
        }
        var B = dr(A),
          M = String(this),
          z = "function" == typeof H;
        z || (H = String(H));
        var I = B.global;
        if (I) {
          var K = B.unicode;
          B.lastIndex = 0;
        }
        for (var E = []; ; ) {
          var L = bG(B, M);
          if (null === L) {
            break;
          }
          if ((E.push(L), !I)) {
            break;
          }
          "" === String(L[0]) && (B.lastIndex = eb(M, a7(B.lastIndex), K));
        }
        for (var J, r = "", F = 0, N = 0; N < E.length; N++) {
          L = E[N];
          for (
            var n = String(L[0]),
              q = cY(bT(cA(L.index), M.length), 0),
              P = [],
              e = 1;
            e < L.length;
            e++
          ) {
            P.push(void 0 === (J = L[e]) ? J : String(J));
          }
          var o = L.groups;
          if (z) {
            var D = [n].concat(P, q, M);
            void 0 !== o && D.push(o);
            var G = String(H.apply(void 0, D));
          } else {
            G = dK(n, M, q, P, o, H);
          }
          q >= F && ((r += M.slice(F, q) + G), (F = q + n.length));
        }
        return r + M.slice(F);
      },
    ];
  });
  var cH = [].push,
    a1 = function (f) {
      var h = 1 == f,
        p = 2 == f,
        d = 3 == f,
        m = 4 == f,
        g = 6 == f,
        c = 7 == f,
        b = 5 == f || g;
      return function (C, q, B, e) {
        for (
          var n,
            a,
            o = bS(C),
            i = cR(o),
            A = (function (s, u, v) {
              if ((ej(s), void 0 === u)) {
                return s;
              }
              switch (v) {
                case 0:
                  return function () {
                    return s.call(u);
                  };
                case 1:
                  return function (w) {
                    return s.call(u, w);
                  };
                case 2:
                  return function (y, w) {
                    return s.call(u, y, w);
                  };
                case 3:
                  return function (D, w, y) {
                    return s.call(u, D, w, y);
                  };
              }
              return function () {
                return s.apply(u, arguments);
              };
            })(q, B, 3),
            t = a7(i.length),
            r = 0,
            x = e || bz,
            z = h ? x(C, t) : p || c ? x(C, 0) : void 0;
          t > r;
          r++
        ) {
          if ((b || r in i) && ((a = A((n = i[r]), r, o)), f)) {
            if (h) {
              z[r] = a;
            } else {
              if (a) {
                switch (f) {
                  case 3:
                    return !0;
                  case 5:
                    return n;
                  case 6:
                    return r;
                  case 2:
                    cH.call(z, n);
                }
              } else {
                switch (f) {
                  case 4:
                    return !1;
                  case 7:
                    cH.call(z, n);
                }
              }
            }
          }
        }
        return g ? -1 : d || m ? m : z;
      };
    },
    a9 = {
      forEach: a1(0),
      map: a1(1),
      filter: a1(2),
      some: a1(3),
      every: a1(4),
      find: a1(5),
      findIndex: a1(6),
      filterOut: a1(7),
    },
    bL = Object.defineProperty,
    cq = {},
    cj = function (a) {
      throw a;
    },
    bs = function (b, d) {
      if (cB(cq, b)) {
        return cq[b];
      }
      d || (d = {});
      var g = [][b],
        a = !!cB(d, "ACCESSORS") && d.ACCESSORS,
        f = cB(d, 0) ? d[0] : cj,
        c = cB(d, 1) ? d[1] : void 0;
      return (cq[b] =
        !!g &&
        !cI(function () {
          if (a && !c7) {
            return !0;
          }
          var e = {
            length: -1,
          };
          a
            ? bL(e, 1, {
                enumerable: !0,
                get: cj,
              })
            : (e[1] = 1),
            g.call(e, f, c);
        }));
    },
    aO = a9.filter,
    ec = ad("filter"),
    dq = bs("filter");
  aV(
    {
      target: "Array",
      proto: !0,
      forced: !ec || !dq,
    },
    {
      filter: function (a) {
        return aO(this, a, arguments.length > 1 ? arguments[1] : void 0);
      },
    }
  );
  var em,
    ay =
      Object.keys ||
      function (a) {
        return dg(a, eg);
      },
    af = c7
      ? Object.defineProperties
      : function (b, d) {
          dr(b);
          for (var g, a = ay(d), f = a.length, c = 0; f > c; ) {
            dA.f(b, (g = a[c++]), d[g]);
          }
          return b;
        },
    eB = eu("document", "documentElement"),
    eD = dH("IE_PROTO"),
    a8 = function () {},
    aG = function (a) {
      return "<script>" + a + "</script>";
    },
    aF = function () {
      try {
        em = document.domain && new ActiveXObject("htmlfile");
      } catch (a) {}
      var a, b;
      aF = em
        ? (function (d) {
            d.write(aG("")), d.close();
            var f = d.parentWindow.Object;
            return (d = null), f;
          })(em)
        : (((b = dR("iframe")).style.display = "none"),
          eB.appendChild(b),
          (b.src = String("javascript:")),
          (a = b.contentWindow.document).open(),
          a.write(aG("document.F=Object")),
          a.close(),
          a.F);
      for (var c = eg.length; c--; ) {
        delete aF.prototype[eg[c]];
      }
      return aF();
    };
  dj[eD] = !0;
  var bJ =
      Object.create ||
      function (a, b) {
        var c;
        return (
          null !== a
            ? ((a8.prototype = dr(a)),
              (c = new a8()),
              (a8.prototype = null),
              (c[eD] = a))
            : (c = aF()),
          void 0 === b ? c : af(c, b)
        );
      },
    ao = aI("unscopables"),
    by = Array.prototype;
  null == by[ao] &&
    dA.f(by, ao, {
      configurable: !0,
      value: bJ(null),
    });
  var ek,
    dG = aK.includes;
  aV(
    {
      target: "Array",
      proto: !0,
      forced: !bs("indexOf", {
        ACCESSORS: !0,
        1: 0,
      }),
    },
    {
      includes: function (a) {
        return dG(this, a, arguments.length > 1 ? arguments[1] : void 0);
      },
    }
  ),
    (ek = "includes"),
    (by[ao][ek] = !0);
  var bg = function (a, b) {
      var c = [][a];
      return (
        !!c &&
        cI(function () {
          c.call(
            null,
            b ||
              function () {
                throw 1;
              },
            1
          );
        })
      );
    },
    aZ = aK.indexOf,
    b5 = [].indexOf,
    aw = !!b5 && 1 / [1].indexOf(1, -0) < 0,
    b7 = bg("indexOf"),
    bR = bs("indexOf", {
      ACCESSORS: !0,
      1: 0,
    });
  aV(
    {
      target: "Array",
      proto: !0,
      forced: aw || !b7 || !bR,
    },
    {
      indexOf: function (a) {
        return aw
          ? b5.apply(this, arguments) || 0
          : aZ(this, a, arguments.length > 1 ? arguments[1] : void 0);
      },
    }
  );
  var br = [].join,
    ea = cR != Object,
    dD = bg("join", ",");
  aV(
    {
      target: "Array",
      proto: !0,
      forced: ea || !dD,
    },
    {
      join: function (a) {
        return br.call(cz(this), void 0 === a ? "," : a);
      },
    }
  );
  var aU = ad("slice"),
    d0 = bs("slice", {
      ACCESSORS: !0,
      0: 0,
      1: 2,
    }),
    al = aI("species"),
    d2 = [].slice,
    db = Math.max;
  aV(
    {
      target: "Array",
      proto: !0,
      forced: !aU || !d0,
    },
    {
      slice: function (p, h) {
        var d,
          g,
          c,
          b = cz(this),
          f = a7(b.length),
          m = cg(p, f),
          q = cg(void 0 === h ? f : h, f);
        if (
          bh(b) &&
          ("function" != typeof (d = b.constructor) ||
          (d !== Array && !bh(d.prototype))
            ? cC(d) && null === (d = d[al]) && (d = void 0)
            : (d = void 0),
          d === Array || void 0 === d)
        ) {
          return d2.call(b, m, q);
        }
        for (
          g = new (void 0 === d ? Array : d)(db(q - m, 0)), c = 0;
          m < q;
          m++, c++
        ) {
          m in b && cx(g, c, b[m]);
        }
        return (g.length = c), g;
      },
    }
  );
  var cw = function (a) {
      if (bx(a)) {
        throw TypeError("The method doesn't accept regular expressions");
      }
      return a;
    },
    ev = aI("match");
  function co(b, c, f, a, d) {
    return b.left + c + f.width > a.width
      ? ((d.left = "".concat(a.width - f.width - b.left, "px")), !1)
      : ((d.left = "".concat(c, "px")), !0);
  }
  function cc(b, c, d, a) {
    return b.left + b.width - c - d.width < 0
      ? ((a.style.left = "".concat(-b.left, "px")), !1)
      : ((a.style.right = "".concat(c, "px")), !0);
  }
  aV(
    {
      target: "String",
      proto: !0,
      forced: !(function (a) {
        var b = /./;
        try {
          "/./"[a](b);
        } catch (c) {
          try {
            return (b[ev] = !1), "/./"[a](b);
          } catch (a) {}
        }
        return !1;
      })("includes"),
    },
    {
      includes: function (a) {
        return !!~String(c8(this)).indexOf(
          cw(a),
          arguments.length > 1 ? arguments[1] : void 0
        );
      },
    }
  );
  var bX = ad("splice"),
    aM = bs("splice", {
      ACCESSORS: !0,
      0: 0,
      1: 2,
    }),
    cU = Math.max,
    bF = Math.min;
  function bl(a, b) {
    a.includes(b) && a.splice(a.indexOf(b), 1);
  }
  function b3(y, q, f) {
    var m = this._options.positionPrecedence.slice(),
      d = eA(),
      b = b0(q).height + 10,
      g = b0(q).width + 20,
      w = y.getBoundingClientRect(),
      z = "floating";
    w.bottom + b > d.height && bl(m, "bottom"),
      w.top - b < 0 && bl(m, "top"),
      w.right + g > d.width && bl(m, "right"),
      w.left - g < 0 && bl(m, "left");
    var v,
      x,
      p = -1 !== (x = (v = f || "").indexOf("-")) ? v.substr(x) : "";
    return (
      f && (f = f.split("-")[0]),
      m.length && (z = m.includes(f) ? f : m[0]),
      ["top", "bottom"].includes(z) &&
        (z += (function (u, B, D, s) {
          var C = D.width,
            A = B / 2,
            h = Math.min(C, window.screen.width),
            c = ["-left-aligned", "-middle-aligned", "-right-aligned"];
          return (
            h - u < B && bl(c, "-left-aligned"),
            (u < A || h - u < A) && bl(c, "-middle-aligned"),
            u < B && bl(c, "-right-aligned"),
            c.length ? (c.includes(s) ? s : c[0]) : "-middle-aligned"
          );
        })(w.left, g, d, p)),
      z
    );
  }
  function dS(y, q, f, m) {
    var d,
      b,
      g,
      w,
      z,
      v = "";
    if (
      ((m = m || !1),
      (q.style.top = null),
      (q.style.right = null),
      (q.style.bottom = null),
      (q.style.left = null),
      (q.style.marginLeft = null),
      (q.style.marginTop = null),
      (f.style.display = "inherit"),
      this._introItems[this._currentStep])
    ) {
      switch (
        ((v =
          "string" ==
          typeof (d = this._introItems[this._currentStep]).tooltipClass
            ? d.tooltipClass
            : this._options.tooltipClass),
        (q.className = ["introjs-tooltip", v].filter(Boolean).join(" ")),
        q.setAttribute("role", "dialog"),
        "floating" !== (z = this._introItems[this._currentStep].position) &&
          this._options.autoPosition &&
          (z = b3.call(this, y, q, z)),
        (g = b0(y)),
        (b = b0(q)),
        (w = eA()),
        d6(q, "introjs-".concat(z)),
        z)
      ) {
        case "top-right-aligned":
          f.className = "introjs-arrow bottom-right";
          var x = 0;
          cc(g, x, b, q), (q.style.bottom = "".concat(g.height + 20, "px"));
          break;
        case "top-middle-aligned":
          f.className = "introjs-arrow bottom-middle";
          var p = g.width / 2 - b.width / 2;
          m && (p += 5),
            cc(g, p, b, q) && ((q.style.right = null), co(g, p, b, w, q)),
            (q.style.bottom = "".concat(g.height + 20, "px"));
          break;
        case "top-left-aligned":
        case "top":
          (f.className = "introjs-arrow bottom"),
            co(g, m ? 0 : 15, b, w, q),
            (q.style.bottom = "".concat(g.height + 20, "px"));
          break;
        case "right":
          (q.style.left = "".concat(g.width + 20, "px")),
            g.top + b.height > w.height
              ? ((f.className = "introjs-arrow left-bottom"),
                (q.style.top = "-".concat(b.height - g.height - 20, "px")))
              : (f.className = "introjs-arrow left");
          break;
        case "left":
          m || !0 !== this._options.showStepNumbers || (q.style.top = "15px"),
            g.top + b.height > w.height
              ? ((q.style.top = "-".concat(b.height - g.height - 20, "px")),
                (f.className = "introjs-arrow right-bottom"))
              : (f.className = "introjs-arrow right"),
            (q.style.right = "".concat(g.width + 20, "px"));
          break;
        case "floating":
          (f.style.display = "none"),
            (q.style.left = "50%"),
            (q.style.top = "50%"),
            (q.style.marginLeft = "-".concat(b.width / 2, "px")),
            (q.style.marginTop = "-".concat(b.height / 2, "px"));
          break;
        case "bottom-right-aligned":
          (f.className = "introjs-arrow top-right"),
            cc(g, (x = 0), b, q),
            (q.style.top = "".concat(g.height + 20, "px"));
          break;
        case "bottom-middle-aligned":
          (f.className = "introjs-arrow top-middle"),
            (p = g.width / 2 - b.width / 2),
            m && (p += 5),
            cc(g, p, b, q) && ((q.style.right = null), co(g, p, b, w, q)),
            (q.style.top = "".concat(g.height + 20, "px"));
          break;
        default:
          (f.className = "introjs-arrow top"),
            co(g, 0, b, w, q),
            (q.style.top = "".concat(g.height + 20, "px"));
      }
    }
  }
  function aW() {
    cP(document.querySelectorAll(".introjs-showElement"), function (a) {
      ew(a, /introjs-[a-zA-Z]+/g);
    });
  }
  function c6(b, d) {
    var g = document.createElement(b);
    d = d || {};
    var a = /^(?:role|data-|aria-)/;
    for (var f in d) {
      var c = d[f];
      "style" === f ? d5(g, c) : f.match(a) ? g.setAttribute(f, c) : (g[f] = c);
    }
    return g;
  }
  function bV(b, c, d) {
    if (d) {
      var a = c.style.opacity || "1";
      d5(c, {
        opacity: "0",
      }),
        window.setTimeout(function () {
          d5(c, {
            opacity: a,
          });
        }, 10);
    }
    b.appendChild(c);
  }
  function ey() {
    return (
      (parseInt(this._currentStep + 1, 10) / this._introItems.length) * 100
    );
  }
  function d8() {
    var a = document.querySelector(".introjs-disableInteraction");
    null === a &&
      ((a = c6("div", {
        className: "introjs-disableInteraction",
      })),
      this._targetElement.appendChild(a)),
      bA.call(this, a);
  }
  function bD(I) {
    var Z = this;
    void 0 !== this._introChangeCallback &&
      this._introChangeCallback.call(this, I.element);
    var V,
      P,
      L,
      R = this,
      at = document.querySelector(".introjs-helperLayer"),
      J = document.querySelector(".introjs-tooltipReferenceLayer"),
      ai = "introjs-helperLayer";
    if (
      ("string" == typeof I.highlightClass &&
        (ai += " ".concat(I.highlightClass)),
      "string" == typeof this._options.highlightClass &&
        (ai += " ".concat(this._options.highlightClass)),
      null !== at)
    ) {
      var G = J.querySelector(".introjs-helperNumberLayer"),
        W = J.querySelector(".introjs-tooltiptext"),
        Y = J.querySelector(".introjs-tooltip-title"),
        O = J.querySelector(".introjs-arrow"),
        ae = J.querySelector(".introjs-tooltip");
      (L = J.querySelector(".introjs-skipbutton")),
        (P = J.querySelector(".introjs-prevbutton")),
        (V = J.querySelector(".introjs-nextbutton")),
        (at.className = ai),
        (ae.style.opacity = 0),
        (ae.style.display = "none"),
        cE.call(R, I),
        bA.call(R, at),
        bA.call(R, J),
        aW(),
        R._lastShowElementTimer && window.clearTimeout(R._lastShowElementTimer),
        (R._lastShowElementTimer = window.setTimeout(function () {
          null !== G &&
            (G.innerHTML = ""
              .concat(I.step, " of ")
              .concat(Z._introItems.length)),
            (W.innerHTML = I.intro),
            (Y.innerHTML = I.title),
            (ae.style.display = "block"),
            dS.call(R, I.element, ae, O),
            R._options.showBullets &&
              ((J.querySelector(".introjs-bullets li > a.active").className =
                ""),
              (J.querySelector(
                '.introjs-bullets li > a[data-stepnumber="'.concat(I.step, '"]')
              ).className = "active")),
            (J.querySelector(
              ".introjs-progress .introjs-progressbar"
            ).style.cssText = "width:".concat(ey.call(R), "%;")),
            J.querySelector(
              ".introjs-progress .introjs-progressbar"
            ).setAttribute("aria-valuenow", ey.call(R)),
            (ae.style.opacity = 1),
            ((null != V && /introjs-donebutton/gi.test(V.className)) ||
              null != V) &&
              V.focus(),
            cu.call(R, I.scrollTo, I, W);
        }, 350));
    } else {
      var X = c6("div", {
          className: ai,
        }),
        F = c6("div", {
          className: "introjs-tooltipReferenceLayer",
        }),
        Q = c6("div", {
          className: "introjs-arrow",
        }),
        an = c6("div", {
          className: "introjs-tooltip",
        }),
        z = c6("div", {
          className: "introjs-tooltiptext",
        }),
        D = c6("div", {
          className: "introjs-tooltip-header",
        }),
        be = c6("h1", {
          className: "introjs-tooltip-title",
        }),
        n = c6("div", {
          className: "introjs-bullets",
        }),
        B = c6("div"),
        K = c6("div");
      d5(X, {
        "box-shadow":
          "0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(
            R._options.overlayOpacity.toString(),
            ") 0 0 0 5000px"
          ),
      }),
        cE.call(R, I),
        bA.call(R, X),
        bA.call(R, F),
        bV(this._targetElement, X, !0),
        bV(this._targetElement, F),
        (z.innerHTML = I.intro),
        (be.innerHTML = I.title),
        !1 === this._options.showBullets && (n.style.display = "none");
      var U = c6("ul");
      U.setAttribute("role", "tablist");
      var H = function () {
        R.goToStep(this.getAttribute("data-stepnumber"));
      };
      cP(this._introItems, function (c, f) {
        var a = c.step,
          d = c6("li"),
          b = c6("a");
        d.setAttribute("role", "presentation"),
          b.setAttribute("role", "tab"),
          (b.onclick = H),
          f === I.step - 1 && (b.className = "active"),
          ch(b),
          (b.innerHTML = "&nbsp;"),
          b.setAttribute("data-stepnumber", a),
          d.appendChild(b),
          U.appendChild(d);
      }),
        n.appendChild(U),
        (B.className = "introjs-progress"),
        !1 === this._options.showProgress && (B.style.display = "none");
      var M = c6("div", {
        className: "introjs-progressbar",
      });
      this._options.progressBarAdditionalClass &&
        (M.className += " " + this._options.progressBarAdditionalClass),
        M.setAttribute("role", "progress"),
        M.setAttribute("aria-valuemin", 0),
        M.setAttribute("aria-valuemax", 100),
        M.setAttribute("aria-valuenow", ey.call(this)),
        (M.style.cssText = "width:".concat(ey.call(this), "%;")),
        B.appendChild(M),
        (K.className = "introjs-tooltipbuttons"),
        !1 === this._options.showButtons && (K.style.display = "none"),
        D.appendChild(be),
        an.appendChild(D),
        an.appendChild(z),
        an.appendChild(n),
        an.appendChild(B);
      var T = c6("div");
      !0 === this._options.showStepNumbers &&
        ((T.className = "introjs-helperNumberLayer"),
        (T.innerHTML = ""
          .concat(I.step, " of ")
          .concat(this._introItems.length)),
        an.appendChild(T)),
        an.appendChild(Q),
        F.appendChild(an),
        ((V = c6("a")).onclick = function () {
          R._introItems.length - 1 !== R._currentStep
            ? bc.call(R)
            : /introjs-donebutton/gi.test(V.className) &&
              ("function" == typeof R._introCompleteCallback &&
                R._introCompleteCallback.call(R),
              bk.call(R, R._targetElement));
        }),
        ch(V),
        (V.innerHTML = this._options.nextLabel),
        ((P = c6("a")).onclick = function () {
          0 !== R._currentStep && bO.call(R);
        }),
        ch(P),
        (P.innerHTML = this._options.prevLabel),
        ch(
          (L = c6("a", {
            className: "introjs-skipbutton",
          }))
        ),
        (L.innerHTML = this._options.skipLabel),
        (L.onclick = function () {
          R._introItems.length - 1 === R._currentStep &&
            "function" == typeof R._introCompleteCallback &&
            R._introCompleteCallback.call(R),
            "function" == typeof R._introSkipCallback &&
              R._introSkipCallback.call(R),
            bk.call(R, R._targetElement);
        }),
        D.appendChild(L),
        this._introItems.length > 1 && K.appendChild(P),
        K.appendChild(V),
        an.appendChild(K),
        dS.call(R, I.element, an, Q),
        cu.call(this, I.scrollTo, I, an);
    }
    var q = R._targetElement.querySelector(".introjs-disableInteraction");
    q && q.parentNode.removeChild(q),
      I.disableInteraction && d8.call(R),
      0 === this._currentStep && this._introItems.length > 1
        ? (null != V &&
            ((V.className = "".concat(
              this._options.buttonClass,
              " introjs-nextbutton"
            )),
            (V.innerHTML = this._options.nextLabel)),
          !0 === this._options.hidePrev
            ? (null != P &&
                (P.className = "".concat(
                  this._options.buttonClass,
                  " introjs-prevbutton introjs-hidden"
                )),
              null != V && d6(V, "introjs-fullbutton"))
            : null != P &&
              (P.className = "".concat(
                this._options.buttonClass,
                " introjs-prevbutton introjs-disabled"
              )))
        : this._introItems.length - 1 === this._currentStep ||
          1 === this._introItems.length
        ? (null != P &&
            (P.className = "".concat(
              this._options.buttonClass,
              " introjs-prevbutton"
            )),
          !0 === this._options.hideNext
            ? (null != V &&
                (V.className = "".concat(
                  this._options.buttonClass,
                  " introjs-nextbutton introjs-hidden"
                )),
              null != P && d6(P, "introjs-fullbutton"))
            : null != V &&
              (!0 === this._options.nextToDone
                ? ((V.innerHTML = this._options.doneLabel),
                  d6(
                    V,
                    "".concat(
                      this._options.buttonClass,
                      " introjs-nextbutton introjs-donebutton"
                    )
                  ))
                : (V.className = "".concat(
                    this._options.buttonClass,
                    " introjs-nextbutton introjs-disabled"
                  ))))
        : (null != P &&
            (P.className = "".concat(
              this._options.buttonClass,
              " introjs-prevbutton"
            )),
          null != V &&
            ((V.className = "".concat(
              this._options.buttonClass,
              " introjs-nextbutton"
            )),
            (V.innerHTML = this._options.nextLabel))),
      null != P && P.setAttribute("role", "button"),
      null != V && V.setAttribute("role", "button"),
      null != L && L.setAttribute("role", "button"),
      null != V && V.focus(),
      (function (a) {
        var b = a.element;
        d6(b, "introjs-showElement");
        var c = dl(b, "position");
        "absolute" !== c &&
          "relative" !== c &&
          "sticky" !== c &&
          "fixed" !== c &&
          d6(b, "introjs-relativePosition");
      })(I),
      void 0 !== this._introAfterChangeCallback &&
        this._introAfterChangeCallback.call(this, I.element);
  }
  function cO(a) {
    (this._currentStep = a - 2), void 0 !== this._introItems && bc.call(this);
  }
  function a3(a) {
    (this._currentStepNumber = a), void 0 !== this._introItems && bc.call(this);
  }
  function bc() {
    var b = this;
    (this._direction = "forward"),
      void 0 !== this._currentStepNumber &&
        cP(this._introItems, function (d, f) {
          d.step === b._currentStepNumber &&
            ((b._currentStep = f - 1), (b._currentStepNumber = void 0));
        }),
      void 0 === this._currentStep
        ? (this._currentStep = 0)
        : ++this._currentStep;
    var c = this._introItems[this._currentStep],
      a = !0;
    return (
      void 0 !== this._introBeforeChangeCallback &&
        (a = this._introBeforeChangeCallback.call(this, c && c.element)),
      !1 === a
        ? (--this._currentStep, !1)
        : this._introItems.length <= this._currentStep
        ? ("function" == typeof this._introCompleteCallback &&
            this._introCompleteCallback.call(this),
          void bk.call(this, this._targetElement))
        : void bD.call(this, c)
    );
  }
  function bO() {
    if (((this._direction = "backward"), 0 === this._currentStep)) {
      return !1;
    }
    --this._currentStep;
    var a = this._introItems[this._currentStep],
      b = !0;
    if (
      (void 0 !== this._introBeforeChangeCallback &&
        (b = this._introBeforeChangeCallback.call(this, a && a.element)),
      !1 === b)
    ) {
      return ++this._currentStep, !1;
    }
    bD.call(this, a);
  }
  function cs() {
    return this._currentStep;
  }
  function cl(a) {
    var b = void 0 === a.code ? a.which : a.code;
    if (
      (null === b && (b = null === a.charCode ? a.keyCode : a.charCode),
      ("Escape" !== b && 27 !== b) || !0 !== this._options.exitOnEsc)
    ) {
      if ("ArrowLeft" === b || 37 === b) {
        bO.call(this);
      } else {
        if ("ArrowRight" === b || 39 === b) {
          bc.call(this);
        } else {
          if ("Enter" === b || "NumpadEnter" === b || 13 === b) {
            var c = a.target || a.srcElement;
            c && c.className.match("introjs-prevbutton")
              ? bO.call(this)
              : c && c.className.match("introjs-skipbutton")
              ? (this._introItems.length - 1 === this._currentStep &&
                  "function" == typeof this._introCompleteCallback &&
                  this._introCompleteCallback.call(this),
                bk.call(this, this._targetElement))
              : c && c.getAttribute("data-stepnumber")
              ? c.click()
              : bc.call(this),
              a.preventDefault ? a.preventDefault() : (a.returnValue = !1);
          }
        }
      }
    } else {
      bk.call(this, this._targetElement);
    }
  }
  function bv(b) {
    if (null === b || "object" !== cG(b) || void 0 !== b.nodeType) {
      return b;
    }
    var c = {};
    for (var a in b) {
      void 0 !== window.jQuery && b[a] instanceof window.jQuery
        ? (c[a] = b[a])
        : (c[a] = bv(b[a]));
    }
    return c;
  }
  function aP(a) {
    var b = document.querySelector(".introjs-hints");
    return b ? b.querySelectorAll(a) : [];
  }
  function ef(a) {
    var b = aP('.introjs-hint[data-step="'.concat(a, '"]'))[0];
    aH.call(this),
      b && d6(b, "introjs-hidehint"),
      void 0 !== this._hintCloseCallback &&
        this._hintCloseCallback.call(this, a);
  }
  function dz() {
    var a = this;
    cP(aP(".introjs-hint"), function (b) {
      ef.call(a, b.getAttribute("data-step"));
    });
  }
  function ep() {
    var a = this,
      b = aP(".introjs-hint");
    b && b.length
      ? cP(b, function (c) {
          aA.call(a, c.getAttribute("data-step"));
        })
      : bM.call(this, this._targetElement);
  }
  function aA(a) {
    var b = aP('.introjs-hint[data-step="'.concat(a, '"]'))[0];
    b && ew(b, /introjs-hidehint/g);
  }
  function aj() {
    var a = this;
    cP(aP(".introjs-hint"), function (b) {
      aa.call(a, b.getAttribute("data-step"));
    });
  }
  function aa(a) {
    var b = aP('.introjs-hint[data-step="'.concat(a, '"]'))[0];
    b && b.parentNode.removeChild(b);
  }
  function ac() {
    var b = this,
      c = this,
      a = document.querySelector(".introjs-hints");
    null === a &&
      (a = c6("div", {
        className: "introjs-hints",
      }));
    cP(this._introItems, function (h, g) {
      if (
        !document.querySelector('.introjs-hint[data-step="'.concat(g, '"]'))
      ) {
        var f = c6("a", {
          className: "introjs-hint",
        });
        ch(f),
          (f.onclick = (function (i) {
            return function (o) {
              var m = o || window.event;
              m.stopPropagation && m.stopPropagation(),
                null !== m.cancelBubble && (m.cancelBubble = !0),
                aJ.call(c, i);
            };
          })(g)),
          h.hintAnimation || d6(f, "introjs-hint-no-anim"),
          aQ(h.element) && d6(f, "introjs-fixedhint");
        var e = c6("div", {
            className: "introjs-hint-dot",
          }),
          d = c6("div", {
            className: "introjs-hint-pulse",
          });
        f.appendChild(e),
          f.appendChild(d),
          f.setAttribute("data-step", g),
          (h.targetElement = h.element),
          (h.element = f),
          ba.call(b, h.hintPosition, f, h.targetElement),
          a.appendChild(f);
      }
    }),
      document.body.appendChild(a),
      void 0 !== this._hintsAddedCallback &&
        this._hintsAddedCallback.call(this);
  }
  function ba(b, c, f) {
    var a = c.style,
      d = b0.call(this, f);
    switch (b) {
      default:
      case "top-left":
        (a.left = "".concat(d.left, "px")), (a.top = "".concat(d.top, "px"));
        break;
      case "top-right":
        (a.left = "".concat(d.left + d.width - 20, "px")),
          (a.top = "".concat(d.top, "px"));
        break;
      case "bottom-left":
        (a.left = "".concat(d.left, "px")),
          (a.top = "".concat(d.top + d.height - 20, "px"));
        break;
      case "bottom-right":
        (a.left = "".concat(d.left + d.width - 20, "px")),
          (a.top = "".concat(d.top + d.height - 20, "px"));
        break;
      case "middle-left":
        (a.left = "".concat(d.left, "px")),
          (a.top = "".concat(d.top + (d.height - 20) / 2, "px"));
        break;
      case "middle-right":
        (a.left = "".concat(d.left + d.width - 20, "px")),
          (a.top = "".concat(d.top + (d.height - 20) / 2, "px"));
        break;
      case "middle-middle":
        (a.left = "".concat(d.left + (d.width - 20) / 2, "px")),
          (a.top = "".concat(d.top + (d.height - 20) / 2, "px"));
        break;
      case "bottom-middle":
        (a.left = "".concat(d.left + (d.width - 20) / 2, "px")),
          (a.top = "".concat(d.top + d.height - 20, "px"));
        break;
      case "top-middle":
        (a.left = "".concat(d.left + (d.width - 20) / 2, "px")),
          (a.top = "".concat(d.top, "px"));
    }
  }
  function aJ(u) {
    var m = document.querySelector('.introjs-hint[data-step="'.concat(u, '"]')),
      f = this._introItems[u];
    void 0 !== this._hintClickCallback &&
      this._hintClickCallback.call(this, m, f, u);
    var h = aH.call(this);
    if (parseInt(h, 10) !== u) {
      var d = c6("div", {
          className: "introjs-tooltip",
        }),
        b = c6("div"),
        g = c6("div"),
        q = c6("div");
      (d.onclick = function (a) {
        a.stopPropagation ? a.stopPropagation() : (a.cancelBubble = !0);
      }),
        (b.className = "introjs-tooltiptext");
      var v = c6("p");
      v.innerHTML = f.hint;
      var p = c6("a");
      (p.className = this._options.buttonClass),
        p.setAttribute("role", "button"),
        (p.innerHTML = this._options.hintButtonLabel),
        (p.onclick = ef.bind(this, u)),
        b.appendChild(v),
        b.appendChild(p),
        (g.className = "introjs-arrow"),
        d.appendChild(g),
        d.appendChild(b),
        (this._currentStep = m.getAttribute("data-step")),
        (q.className = "introjs-tooltipReferenceLayer introjs-hintReference"),
        q.setAttribute("data-step", m.getAttribute("data-step")),
        bA.call(this, q),
        q.appendChild(d),
        document.body.appendChild(q),
        dS.call(this, m, d, g, !0);
    }
  }
  function aH() {
    var a = document.querySelector(".introjs-hintReference");
    if (a) {
      var b = a.getAttribute("data-step");
      return a.parentNode.removeChild(a), b;
    }
  }
  function bM(a) {
    var b = this;
    if (((this._introItems = []), this._options.hints)) {
      cP(this._options.hints, function (d) {
        var e = bv(d);
        "string" == typeof e.element &&
          (e.element = document.querySelector(e.element)),
          (e.hintPosition = e.hintPosition || b._options.hintPosition),
          (e.hintAnimation = e.hintAnimation || b._options.hintAnimation),
          null !== e.element && b._introItems.push(e);
      });
    } else {
      var c = a.querySelectorAll("*[data-hint]");
      if (!c || !c.length) {
        return !1;
      }
      cP(c, function (d) {
        var e = d.getAttribute("data-hintanimation");
        (e = e ? "true" === e : b._options.hintAnimation),
          b._introItems.push({
            element: d,
            hint: d.getAttribute("data-hint"),
            hintPosition:
              d.getAttribute("data-hintposition") || b._options.hintPosition,
            hintAnimation: e,
            tooltipClass: d.getAttribute("data-tooltipclass"),
            position:
              d.getAttribute("data-position") || b._options.tooltipPosition,
          });
      });
    }
    ac.call(this),
      cX.on(document, "click", aH, this, !1),
      cX.on(window, "resize", ar, this, !0);
  }
  function ar() {
    var a = this;
    cP(this._introItems, function (c) {
      var f = c.targetElement,
        b = c.hintPosition,
        d = c.element;
      void 0 !== f && ba.call(a, b, d, f);
    });
  }
  function bB() {
    if (
      (bA.call(this, document.querySelector(".introjs-helperLayer")),
      bA.call(this, document.querySelector(".introjs-tooltipReferenceLayer")),
      bA.call(this, document.querySelector(".introjs-disableInteraction")),
      void 0 !== this._currentStep && null !== this._currentStep)
    ) {
      var a = document.querySelector(".introjs-arrow"),
        b = document.querySelector(".introjs-tooltip");
      dS.call(this, this._introItems[this._currentStep].element, b, a);
    }
    return ar.call(this), this;
  }
  function eo() {
    bB.call(this);
  }
  function dO(a, b) {
    if (a && a.parentElement) {
      var c = a.parentElement;
      b
        ? (d5(a, {
            opacity: "0",
          }),
          window.setTimeout(function () {
            c.removeChild(a);
          }, 500))
        : c.removeChild(a);
    }
  }
  function bk(a, c) {
    var d = !0;
    if (
      (void 0 !== this._introBeforeExitCallback &&
        (d = this._introBeforeExitCallback.call(this)),
      c || !1 !== d)
    ) {
      var b = a.querySelectorAll(".introjs-overlay");
      b &&
        b.length &&
        cP(b, function (e) {
          return dO(e);
        }),
        dO(a.querySelector(".introjs-helperLayer"), !0),
        dO(a.querySelector(".introjs-tooltipReferenceLayer")),
        dO(a.querySelector(".introjs-disableInteraction")),
        dO(document.querySelector(".introjsFloatingElement")),
        aW(),
        cX.off(window, "keydown", cl, this, !0),
        cX.off(window, "resize", eo, this, !0),
        void 0 !== this._introExitCallback &&
          this._introExitCallback.call(this),
        (this._currentStep = void 0);
    }
  }
  function a2(b) {
    var c = c6("div", {
        className: "introjs-overlay",
      }),
      d = this;
    if (b.tagName && "body" !== b.tagName.toLowerCase()) {
      var a = b0(b);
      a &&
        d5(c, {
          width: "".concat(a.width, "px"),
          height: "".concat(a.height, "px"),
          top: "".concat(a.top, "px"),
          left: "".concat(a.left, "px"),
        });
    } else {
      d5(c, {
        top: 0,
        bottom: 0,
        left: 0,
        right: 0,
        position: "fixed",
      });
    }
    return (
      b.appendChild(c),
      !0 === d._options.exitOnOverlayClick &&
        (d5(c, {
          cursor: "pointer",
        }),
        (c.onclick = function () {
          bk.call(d, b);
        })),
      !0
    );
  }
  function b8(n, g) {
    var d = this,
      b = n.querySelectorAll("*[data-intro]"),
      f = [];
    if (this._options.steps) {
      cP(this._options.steps, function (a) {
        var c = bv(a);
        if (
          ((c.step = f.length + 1),
          (c.title = c.title || ""),
          "string" == typeof c.element &&
            (c.element = document.querySelector(c.element)),
          void 0 === c.element || null === c.element)
        ) {
          var o = document.querySelector(".introjsFloatingElement");
          null === o &&
            ((o = c6("div", {
              className: "introjsFloatingElement",
            })),
            document.body.appendChild(o)),
            (c.element = o),
            (c.position = "floating");
        }
        (c.scrollTo = c.scrollTo || d._options.scrollTo),
          void 0 === c.disableInteraction &&
            (c.disableInteraction = d._options.disableInteraction),
          null !== c.element && f.push(c);
      });
    } else {
      var i;
      if (b.length < 1) {
        return !1;
      }
      cP(b, function (a) {
        if (
          (!g || a.getAttribute("data-intro-group") === g) &&
          "none" !== a.style.display
        ) {
          var c = parseInt(a.getAttribute("data-step"), 10);
          (i = a.hasAttribute("data-disable-interaction")
            ? !!a.getAttribute("data-disable-interaction")
            : d._options.disableInteraction),
            c > 0 &&
              (f[c - 1] = {
                element: a,
                title: a.getAttribute("data-title") || "",
                intro: a.getAttribute("data-intro"),
                step: parseInt(a.getAttribute("data-step"), 10),
                tooltipClass: a.getAttribute("data-tooltipclass"),
                highlightClass: a.getAttribute("data-highlightclass"),
                position:
                  a.getAttribute("data-position") || d._options.tooltipPosition,
                scrollTo:
                  a.getAttribute("data-scrollto") || d._options.scrollTo,
                disableInteraction: i,
              });
        }
      });
      var p = 0;
      cP(b, function (a) {
        if (
          (!g || a.getAttribute("data-intro-group") === g) &&
          null === a.getAttribute("data-step")
        ) {
          for (; void 0 !== f[p]; ) {
            p++;
          }
          (i = a.hasAttribute("data-disable-interaction")
            ? !!a.getAttribute("data-disable-interaction")
            : d._options.disableInteraction),
            (f[p] = {
              element: a,
              title: a.getAttribute("data-title") || "",
              intro: a.getAttribute("data-intro"),
              step: p + 1,
              tooltipClass: a.getAttribute("data-tooltipclass"),
              highlightClass: a.getAttribute("data-highlightclass"),
              position:
                a.getAttribute("data-position") || d._options.tooltipPosition,
              scrollTo: a.getAttribute("data-scrollto") || d._options.scrollTo,
              disableInteraction: i,
            });
        }
      });
    }
    for (var h = [], m = 0; m < f.length; m++) {
      f[m] && h.push(f[m]);
    }
    return (
      (f = h).sort(function (a, c) {
        return a.step - c.step;
      }),
      (this._introItems = f),
      a2.call(this, n) &&
        (bc.call(this),
        this._options.keyboardNavigation &&
          cX.on(window, "keydown", cl, this, !0),
        cX.on(window, "resize", eo, this, !0)),
      !1
    );
  }
  aV(
    {
      target: "Array",
      proto: !0,
      forced: !bX || !aM,
    },
    {
      splice: function (y, q) {
        var f,
          m,
          d,
          b,
          g,
          w,
          z = bS(this),
          v = a7(z.length),
          x = cg(y, v),
          p = arguments.length;
        if (
          (0 === p
            ? (f = m = 0)
            : 1 === p
            ? ((f = 0), (m = v - x))
            : ((f = p - 2), (m = bF(cU(cA(q), 0), v - x))),
          v + f - m > 9007199254740991)
        ) {
          throw TypeError("Maximum allowed length exceeded");
        }
        for (d = bz(z, m), b = 0; b < m; b++) {
          (g = x + b) in z && cx(d, b, z[g]);
        }
        if (((d.length = m), f < m)) {
          for (b = x; b < v - m; b++) {
            (w = b + f), (g = b + m) in z ? (z[w] = z[g]) : delete z[w];
          }
          for (b = v; b > v - m + f; b--) {
            delete z[b - 1];
          }
        } else {
          if (f > m) {
            for (b = v - m; b > x; b--) {
              (w = b + f - 1),
                (g = b + m - 1) in z ? (z[w] = z[g]) : delete z[w];
            }
          }
        }
        for (b = 0; b < f; b++) {
          z[b + x] = arguments[b + 2];
        }
        return (z.length = v - m + f), d;
      },
    }
  );
  function az(a) {
    (this._targetElement = a),
      (this._introItems = []),
      (this._options = {
        nextLabel: "Next",
        prevLabel: "Back",
        skipLabel: "",
        doneLabel: "Done",
        hidePrev: !1,
        hideNext: !1,
        nextToDone: !0,
        tooltipPosition: "bottom",
        tooltipClass: "",
        highlightClass: "",
        exitOnEsc: !0,
        exitOnOverlayClick: !0,
        showStepNumbers: !1,
        keyboardNavigation: !0,
        showButtons: !0,
        showBullets: !0,
        showProgress: !1,
        scrollToElement: !0,
        scrollTo: "element",
        scrollPadding: 30,
        overlayOpacity: 0.5,
        autoPosition: !0,
        positionPrecedence: ["bottom", "top", "right", "left"],
        disableInteraction: !1,
        helperElementPadding: 10,
        hintPosition: "top-middle",
        hintButtonLabel: "Got it",
        hintAnimation: !0,
        buttonClass: "introjs-button",
        progressBarAdditionalClass: !1,
      });
  }
  var ca = function cP(a) {
    var c;
    if ("object" === cG(a)) {
      c = new az(a);
    } else {
      if ("string" == typeof a) {
        var b = document.querySelector(a);
        if (!b) {
          throw new Error("There is no element with given selector.");
        }
        c = new az(b);
      } else {
        c = new az(document.body);
      }
    }
    return (cP.instances[c2(c, "introjs-instance")] = c), c;
  };
  return (
    (ca.version = "3.3.1"),
    (ca.instances = {}),
    (ca.fn = az.prototype =
      {
        clone: function () {
          return new az(this);
        },
        setOption: function (a, b) {
          return (this._options[a] = b), this;
        },
        setOptions: function (a) {
          return (
            (this._options = (function (c, d) {
              var f,
                b = {};
              for (f in c) {
                b[f] = c[f];
              }
              for (f in d) {
                b[f] = d[f];
              }
              return b;
            })(this._options, a)),
            this
          );
        },
        start: function (a) {
          return b8.call(this, this._targetElement, a), this;
        },
        goToStep: function (a) {
          return cO.call(this, a), this;
        },
        addStep: function (a) {
          return (
            this._options.steps || (this._options.steps = []),
            this._options.steps.push(a),
            this
          );
        },
        addSteps: function (a) {
          if (a.length) {
            for (var b = 0; b < a.length; b++) {
              this.addStep(a[b]);
            }
            return this;
          }
        },
        goToStepNumber: function (a) {
          return a3.call(this, a), this;
        },
        nextStep: function () {
          return bc.call(this), this;
        },
        previousStep: function () {
          return bO.call(this), this;
        },
        currentStep: function () {
          return cs.call(this);
        },
        exit: function (a) {
          return bk.call(this, this._targetElement, a), this;
        },
        refresh: function () {
          return bB.call(this), this;
        },
        onbeforechange: function (a) {
          if ("function" != typeof a) {
            throw new Error(
              "Provided callback for onbeforechange was not a function"
            );
          }
          return (this._introBeforeChangeCallback = a), this;
        },
        onchange: function (a) {
          if ("function" != typeof a) {
            throw new Error(
              "Provided callback for onchange was not a function."
            );
          }
          return (this._introChangeCallback = a), this;
        },
        onafterchange: function (a) {
          if ("function" != typeof a) {
            throw new Error(
              "Provided callback for onafterchange was not a function"
            );
          }
          return (this._introAfterChangeCallback = a), this;
        },
        oncomplete: function (a) {
          if ("function" != typeof a) {
            throw new Error(
              "Provided callback for oncomplete was not a function."
            );
          }
          return (this._introCompleteCallback = a), this;
        },
        onhintsadded: function (a) {
          if ("function" != typeof a) {
            throw new Error(
              "Provided callback for onhintsadded was not a function."
            );
          }
          return (this._hintsAddedCallback = a), this;
        },
        onhintclick: function (a) {
          if ("function" != typeof a) {
            throw new Error(
              "Provided callback for onhintclick was not a function."
            );
          }
          return (this._hintClickCallback = a), this;
        },
        onhintclose: function (a) {
          if ("function" != typeof a) {
            throw new Error(
              "Provided callback for onhintclose was not a function."
            );
          }
          return (this._hintCloseCallback = a), this;
        },
        onexit: function (a) {
          if ("function" != typeof a) {
            throw new Error("Provided callback for onexit was not a function.");
          }
          return (this._introExitCallback = a), this;
        },
        onskip: function (a) {
          if ("function" != typeof a) {
            throw new Error("Provided callback for onskip was not a function.");
          }
          return (this._introSkipCallback = a), this;
        },
        onbeforeexit: function (a) {
          if ("function" != typeof a) {
            throw new Error(
              "Provided callback for onbeforeexit was not a function."
            );
          }
          return (this._introBeforeExitCallback = a), this;
        },
        addHints: function () {
          return bM.call(this, this._targetElement), this;
        },
        hideHint: function (a) {
          return ef.call(this, a), this;
        },
        hideHints: function () {
          return dz.call(this), this;
        },
        showHint: function (a) {
          return aA.call(this, a), this;
        },
        showHints: function () {
          return ep.call(this), this;
        },
        removeHints: function () {
          return aj.call(this), this;
        },
        removeHint: function (a) {
          return aa().call(this, a), this;
        },
        showHintDialog: function (a) {
          return aJ.call(this, a), this;
        },
      }),
    ca
  );
});
var sprintf = (function () {
  function a(d) {
    return Object.prototype.toString.call(d).slice(8, -1).toLowerCase();
  }
  function b(e, f) {
    for (var d = []; f > 0; d[--f] = e) {}
    return d.join("");
  }
  var c = function () {
    if (!c.cache.hasOwnProperty(arguments[0])) {
      c.cache[arguments[0]] = c.parse(arguments[0]);
    }
    return c.format.call(null, c.cache[arguments[0]], arguments);
  };
  c.format = function (o, n) {
    var s = 1,
      q = o.length,
      g = "",
      t,
      d = [],
      h,
      f,
      m,
      e,
      p,
      r;
    for (h = 0; h < q; h++) {
      g = a(o[h]);
      if (g === "string") {
        d.push(o[h]);
      } else {
        if (g === "array") {
          m = o[h];
          if (m[2]) {
            t = n[s];
            for (f = 0; f < m[2].length; f++) {
              if (!t.hasOwnProperty(m[2][f])) {
                throw sprintf(
                  '[sprintf] property "%s" does not exist',
                  m[2][f]
                );
              }
              t = t[m[2][f]];
            }
          } else {
            if (m[1]) {
              t = n[m[1]];
            } else {
              t = n[s++];
            }
          }
          if (/[^s]/.test(m[8]) && a(t) != "number") {
            throw sprintf("[sprintf] expecting number but found %s", a(t));
          }
          switch (m[8]) {
            case "b":
              t = t.toString(2);
              break;
            case "c":
              t = String.fromCharCode(t);
              break;
            case "d":
              t = parseInt(t, 10);
              break;
            case "e":
              t = m[7] ? t.toExponential(m[7]) : t.toExponential();
              break;
            case "f":
              t = m[7] ? parseFloat(t).toFixed(m[7]) : parseFloat(t);
              break;
            case "o":
              t = t.toString(8);
              break;
            case "s":
              t = (t = String(t)) && m[7] ? t.substring(0, m[7]) : t;
              break;
            case "u":
              t = Math.abs(t);
              break;
            case "x":
              t = t.toString(16);
              break;
            case "X":
              t = t.toString(16).toUpperCase();
              break;
          }
          t = /[def]/.test(m[8]) && m[3] && t >= 0 ? "+" + t : t;
          p = m[4] ? (m[4] == "0" ? "0" : m[4].charAt(1)) : " ";
          r = m[6] - String(t).length;
          e = m[6] ? b(p, r) : "";
          d.push(m[5] ? t + e : e + t);
        }
      }
    }
    return d.join("");
  };
  c.cache = {};
  c.parse = function (d) {
    var g = d,
      h = [],
      m = [],
      i = 0;
    while (g) {
      if ((h = /^[^\x25]+/.exec(g)) !== null) {
        m.push(h[0]);
      } else {
        if ((h = /^\x25{2}/.exec(g)) !== null) {
          m.push("%");
        } else {
          if (
            (h =
              /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(
                g
              )) !== null
          ) {
            if (h[2]) {
              i |= 1;
              var n = [],
                f = h[2],
                e = [];
              if ((e = /^([a-z_][a-z_\d]*)/i.exec(f)) !== null) {
                n.push(e[1]);
                while ((f = f.substring(e[0].length)) !== "") {
                  if ((e = /^\.([a-z_][a-z_\d]*)/i.exec(f)) !== null) {
                    n.push(e[1]);
                  } else {
                    if ((e = /^\[(\d+)\]/.exec(f)) !== null) {
                      n.push(e[1]);
                    } else {
                      throw "[sprintf] huh?";
                    }
                  }
                }
              } else {
                throw "[sprintf] huh?";
              }
              h[2] = n;
            } else {
              i |= 2;
            }
            if (i === 3) {
              throw "[sprintf] mixing positional and named placeholders is not (yet) supported";
            }
            m.push(h);
          } else {
            throw "[sprintf] huh?";
          }
        }
      }
      g = g.substring(h[0].length);
    }
    return m;
  };
  return c;
})();
var vsprintf = function (b, a) {
  a.unshift(b);
  return sprintf.apply(null, a);
};
(function () {
  var ai = this,
    ac = ai._,
    ae = {},
    at = Array.prototype,
    ab = Object.prototype,
    an = Function.prototype,
    ax = at.push,
    ah = at.slice,
    av = at.concat,
    ak = ab.toString,
    ar = ab.hasOwnProperty,
    ad = at.forEach,
    ag = at.map,
    ao = at.reduce,
    aa = at.reduceRight,
    au = at.filter,
    aq = at.every,
    aj = at.some,
    X = at.indexOf,
    aw = at.lastIndexOf,
    Y = Array.isArray,
    ay = Object.keys,
    am = an.bind,
    Z = function (a) {
      return a instanceof Z
        ? a
        : this instanceof Z
        ? ((this._wrapped = a), void 0)
        : new Z(a);
    };
  "undefined" != typeof exports
    ? ("undefined" != typeof module &&
        module.exports &&
        (exports = module.exports = Z),
      (exports._ = Z))
    : (ai._ = Z),
    (Z.VERSION = "1.4.4");
  var W =
    (Z.each =
    Z.forEach =
      function (h, f, g) {
        if (null != h) {
          if (ad && h.forEach === ad) {
            h.forEach(f, g);
          } else {
            if (h.length === +h.length) {
              for (var c = 0, d = h.length; d > c; c++) {
                if (f.call(g, h[c], c, h) === ae) {
                  return;
                }
              }
            } else {
              for (var b in h) {
                if (Z.has(h, b) && f.call(g, h[b], b, h) === ae) {
                  return;
                }
              }
            }
          }
        }
      });
  Z.map = Z.collect = function (d, a, b) {
    var c = [];
    return null == d
      ? c
      : ag && d.map === ag
      ? d.map(a, b)
      : (W(d, function (g, e, f) {
          c[c.length] = a.call(b, g, e, f);
        }),
        c);
  };
  var H = "Reduce of empty array with no initial value";
  (Z.reduce =
    Z.foldl =
    Z.inject =
      function (f, b, c, d) {
        var a = arguments.length > 2;
        if ((null == f && (f = []), ao && f.reduce === ao)) {
          return d && (b = Z.bind(b, d)), a ? f.reduce(b, c) : f.reduce(b);
        }
        if (
          (W(f, function (h, g, e) {
            a ? (c = b.call(d, c, h, g, e)) : ((c = h), (a = !0));
          }),
          !a)
        ) {
          throw new TypeError(H);
        }
        return c;
      }),
    (Z.reduceRight = Z.foldr =
      function (m, f, g, h) {
        var c = arguments.length > 2;
        if ((null == m && (m = []), aa && m.reduceRight === aa)) {
          return (
            h && (f = Z.bind(f, h)), c ? m.reduceRight(f, g) : m.reduceRight(f)
          );
        }
        var d = m.length;
        if (d !== +d) {
          var b = Z.keys(m);
          d = b.length;
        }
        if (
          (W(m, function (e, i, a) {
            (i = b ? b[--d] : --d),
              c ? (g = f.call(h, g, m[i], i, a)) : ((g = m[i]), (c = !0));
          }),
          !c)
        ) {
          throw new TypeError(H);
        }
        return g;
      }),
    (Z.find = Z.detect =
      function (d, a, b) {
        var c;
        return (
          Q(d, function (g, e, f) {
            return a.call(b, g, e, f) ? ((c = g), !0) : void 0;
          }),
          c
        );
      }),
    (Z.filter = Z.select =
      function (d, a, b) {
        var c = [];
        return null == d
          ? c
          : au && d.filter === au
          ? d.filter(a, b)
          : (W(d, function (g, e, f) {
              a.call(b, g, e, f) && (c[c.length] = g);
            }),
            c);
      }),
    (Z.reject = function (c, a, b) {
      return Z.filter(
        c,
        function (g, f, d) {
          return !a.call(b, g, f, d);
        },
        b
      );
    }),
    (Z.every = Z.all =
      function (d, b, c) {
        b || (b = Z.identity);
        var a = !0;
        return null == d
          ? a
          : aq && d.every === aq
          ? d.every(b, c)
          : (W(d, function (g, f, e) {
              return (a = a && b.call(c, g, f, e)) ? void 0 : ae;
            }),
            !!a);
      });
  var Q =
    (Z.some =
    Z.any =
      function (d, b, c) {
        b || (b = Z.identity);
        var a = !1;
        return null == d
          ? a
          : aj && d.some === aj
          ? d.some(b, c)
          : (W(d, function (g, f, e) {
              return a || (a = b.call(c, g, f, e)) ? ae : void 0;
            }),
            !!a);
      });
  (Z.contains = Z.include =
    function (b, a) {
      return null == b
        ? !1
        : X && b.indexOf === X
        ? b.indexOf(a) != -1
        : Q(b, function (c) {
            return c === a;
          });
    }),
    (Z.invoke = function (d, a) {
      var b = ah.call(arguments, 2),
        c = Z.isFunction(a);
      return Z.map(d, function (e) {
        return (c ? a : e[a]).apply(e, b);
      });
    }),
    (Z.pluck = function (b, a) {
      return Z.map(b, function (c) {
        return c[a];
      });
    }),
    (Z.where = function (c, a, b) {
      return Z.isEmpty(a)
        ? b
          ? null
          : []
        : Z[b ? "find" : "filter"](c, function (e) {
            for (var d in a) {
              if (a[d] !== e[d]) {
                return !1;
              }
            }
            return !0;
          });
    }),
    (Z.findWhere = function (b, a) {
      return Z.where(b, a, !0);
    }),
    (Z.max = function (d, a, b) {
      if (!a && Z.isArray(d) && d[0] === +d[0] && 65535 > d.length) {
        return Math.max.apply(Math, d);
      }
      if (!a && Z.isEmpty(d)) {
        return -1 / 0;
      }
      var c = {
        computed: -1 / 0,
        value: -1 / 0,
      };
      return (
        W(d, function (h, f, g) {
          var e = a ? a.call(b, h, f, g) : h;
          e >= c.computed &&
            (c = {
              value: h,
              computed: e,
            });
        }),
        c.value
      );
    }),
    (Z.min = function (d, a, b) {
      if (!a && Z.isArray(d) && d[0] === +d[0] && 65535 > d.length) {
        return Math.min.apply(Math, d);
      }
      if (!a && Z.isEmpty(d)) {
        return 1 / 0;
      }
      var c = {
        computed: 1 / 0,
        value: 1 / 0,
      };
      return (
        W(d, function (h, f, g) {
          var e = a ? a.call(b, h, f, g) : h;
          c.computed > e &&
            (c = {
              value: h,
              computed: e,
            });
        }),
        c.value
      );
    }),
    (Z.shuffle = function (d) {
      var a,
        b = 0,
        c = [];
      return (
        W(d, function (e) {
          (a = Z.random(b++)), (c[b - 1] = c[a]), (c[a] = e);
        }),
        c
      );
    });
  var al = function (a) {
    return Z.isFunction(a)
      ? a
      : function (b) {
          return b[a];
        };
  };
  Z.sortBy = function (d, a, b) {
    var c = al(a);
    return Z.pluck(
      Z.map(d, function (g, f, e) {
        return {
          value: g,
          index: f,
          criteria: c.call(b, g, f, e),
        };
      }).sort(function (i, f) {
        var g = i.criteria,
          h = f.criteria;
        if (g !== h) {
          if (g > h || g === void 0) {
            return 1;
          }
          if (h > g || h === void 0) {
            return -1;
          }
        }
        return i.index < f.index ? -1 : 1;
      }),
      "value"
    );
  };
  var P = function (g, c, d, f) {
    var a = {},
      b = al(c || Z.identity);
    return (
      W(g, function (h, e) {
        var i = b.call(d, h, e, g);
        f(a, i, h);
      }),
      a
    );
  };
  (Z.groupBy = function (c, a, b) {
    return P(c, a, b, function (f, d, e) {
      (Z.has(f, d) ? f[d] : (f[d] = [])).push(e);
    });
  }),
    (Z.countBy = function (c, a, b) {
      return P(c, a, b, function (e, d) {
        Z.has(e, d) || (e[d] = 0), e[d]++;
      });
    }),
    (Z.sortedIndex = function (p, f, g, h) {
      g = null == g ? Z.identity : al(g);
      for (var c = g.call(h, f), d = 0, b = p.length; b > d; ) {
        var m = (d + b) >>> 1;
        c > g.call(h, p[m]) ? (d = m + 1) : (b = m);
      }
      return d;
    }),
    (Z.toArray = function (a) {
      return a
        ? Z.isArray(a)
          ? ah.call(a)
          : a.length === +a.length
          ? Z.map(a, Z.identity)
          : Z.values(a)
        : [];
    }),
    (Z.size = function (a) {
      return null == a
        ? 0
        : a.length === +a.length
        ? a.length
        : Z.keys(a).length;
    }),
    (Z.first =
      Z.head =
      Z.take =
        function (c, a, b) {
          return null == c ? void 0 : null == a || b ? c[0] : ah.call(c, 0, a);
        }),
    (Z.initial = function (c, a, b) {
      return ah.call(c, 0, c.length - (null == a || b ? 1 : a));
    }),
    (Z.last = function (c, a, b) {
      return null == c
        ? void 0
        : null == a || b
        ? c[c.length - 1]
        : ah.call(c, Math.max(c.length - a, 0));
    }),
    (Z.rest =
      Z.tail =
      Z.drop =
        function (c, a, b) {
          return ah.call(c, null == a || b ? 1 : a);
        }),
    (Z.compact = function (a) {
      return Z.filter(a, Z.identity);
    });
  var G = function (c, a, b) {
    return (
      W(c, function (d) {
        Z.isArray(d) ? (a ? ax.apply(b, d) : G(d, a, b)) : b.push(d);
      }),
      b
    );
  };
  (Z.flatten = function (b, a) {
    return G(b, a, []);
  }),
    (Z.without = function (a) {
      return Z.difference(a, ah.call(arguments, 1));
    }),
    (Z.uniq = Z.unique =
      function (m, f, g, h) {
        Z.isFunction(f) && ((h = g), (g = f), (f = !1));
        var c = g ? Z.map(m, g, h) : m,
          d = [],
          b = [];
        return (
          W(c, function (a, i) {
            (f ? i && b[b.length - 1] === a : Z.contains(b, a)) ||
              (b.push(a), d.push(m[i]));
          }),
          d
        );
      }),
    (Z.union = function () {
      return Z.uniq(av.apply(at, arguments));
    }),
    (Z.intersection = function (b) {
      var a = ah.call(arguments, 1);
      return Z.filter(Z.uniq(b), function (c) {
        return Z.every(a, function (d) {
          return Z.indexOf(d, c) >= 0;
        });
      });
    }),
    (Z.difference = function (b) {
      var a = av.apply(at, ah.call(arguments, 1));
      return Z.filter(b, function (c) {
        return !Z.contains(a, c);
      });
    }),
    (Z.zip = function () {
      for (
        var d = ah.call(arguments),
          a = Z.max(Z.pluck(d, "length")),
          b = Array(a),
          c = 0;
        a > c;
        c++
      ) {
        b[c] = Z.pluck(d, "" + c);
      }
      return b;
    }),
    (Z.object = function (f, b) {
      if (null == f) {
        return {};
      }
      for (var c = {}, d = 0, a = f.length; a > d; d++) {
        b ? (c[f[d]] = b[d]) : (c[f[d][0]] = f[d][1]);
      }
      return c;
    }),
    (Z.indexOf = function (f, b, c) {
      if (null == f) {
        return -1;
      }
      var d = 0,
        a = f.length;
      if (c) {
        if ("number" != typeof c) {
          return (d = Z.sortedIndex(f, b)), f[d] === b ? d : -1;
        }
        d = 0 > c ? Math.max(0, a + c) : c;
      }
      if (X && f.indexOf === X) {
        return f.indexOf(b, c);
      }
      for (; a > d; d++) {
        if (f[d] === b) {
          return d;
        }
      }
      return -1;
    }),
    (Z.lastIndexOf = function (f, b, c) {
      if (null == f) {
        return -1;
      }
      var d = null != c;
      if (aw && f.lastIndexOf === aw) {
        return d ? f.lastIndexOf(b, c) : f.lastIndexOf(b);
      }
      for (var a = d ? c : f.length; a--; ) {
        if (f[a] === b) {
          return a;
        }
      }
      return -1;
    }),
    (Z.range = function (g, c, d) {
      1 >= arguments.length && ((c = g || 0), (g = 0)), (d = arguments[2] || 1);
      for (
        var f = Math.max(Math.ceil((c - g) / d), 0), a = 0, b = Array(f);
        f > a;

      ) {
        (b[a++] = g), (g += d);
      }
      return b;
    }),
    (Z.bind = function (c, a) {
      if (c.bind === am && am) {
        return am.apply(c, ah.call(arguments, 1));
      }
      var b = ah.call(arguments, 2);
      return function () {
        return c.apply(a, b.concat(ah.call(arguments)));
      };
    }),
    (Z.partial = function (b) {
      var a = ah.call(arguments, 1);
      return function () {
        return b.apply(this, a.concat(ah.call(arguments)));
      };
    }),
    (Z.bindAll = function (b) {
      var a = ah.call(arguments, 1);
      return (
        0 === a.length && (a = Z.functions(b)),
        W(a, function (c) {
          b[c] = Z.bind(b[c], b);
        }),
        b
      );
    }),
    (Z.memoize = function (c, a) {
      var b = {};
      return (
        a || (a = Z.identity),
        function () {
          var d = a.apply(this, arguments);
          return Z.has(b, d) ? b[d] : (b[d] = c.apply(this, arguments));
        }
      );
    }),
    (Z.delay = function (c, a) {
      var b = ah.call(arguments, 2);
      return setTimeout(function () {
        return c.apply(null, b);
      }, a);
    }),
    (Z.defer = function (a) {
      return Z.delay.apply(Z, [a, 1].concat(ah.call(arguments, 1)));
    }),
    (Z.throttle = function (p, f) {
      var g,
        h,
        c,
        d,
        b = 0,
        m = function () {
          (b = new Date()), (c = null), (d = p.apply(g, h));
        };
      return function () {
        var e = new Date(),
          a = f - (e - b);
        return (
          (g = this),
          (h = arguments),
          0 >= a
            ? (clearTimeout(c), (c = null), (b = e), (d = p.apply(g, h)))
            : c || (c = setTimeout(m, a)),
          d
        );
      };
    }),
    (Z.debounce = function (f, b, c) {
      var d, a;
      return function () {
        var g = this,
          e = arguments,
          h = function () {
            (d = null), c || (a = f.apply(g, e));
          },
          m = c && !d;
        return (
          clearTimeout(d), (d = setTimeout(h, b)), m && (a = f.apply(g, e)), a
        );
      };
    }),
    (Z.once = function (c) {
      var a,
        b = !1;
      return function () {
        return b
          ? a
          : ((b = !0), (a = c.apply(this, arguments)), (c = null), a);
      };
    }),
    (Z.wrap = function (b, a) {
      return function () {
        var c = [b];
        return ax.apply(c, arguments), a.apply(this, c);
      };
    }),
    (Z.compose = function () {
      var a = arguments;
      return function () {
        for (var b = arguments, c = a.length - 1; c >= 0; c--) {
          b = [a[c].apply(this, b)];
        }
        return b[0];
      };
    }),
    (Z.after = function (b, a) {
      return 0 >= b
        ? a()
        : function () {
            return 1 > --b ? a.apply(this, arguments) : void 0;
          };
    }),
    (Z.keys =
      ay ||
      function (c) {
        if (c !== Object(c)) {
          throw new TypeError("Invalid object");
        }
        var a = [];
        for (var b in c) {
          Z.has(c, b) && (a[a.length] = b);
        }
        return a;
      }),
    (Z.values = function (c) {
      var a = [];
      for (var b in c) {
        Z.has(c, b) && a.push(c[b]);
      }
      return a;
    }),
    (Z.pairs = function (c) {
      var a = [];
      for (var b in c) {
        Z.has(c, b) && a.push([b, c[b]]);
      }
      return a;
    }),
    (Z.invert = function (c) {
      var a = {};
      for (var b in c) {
        Z.has(c, b) && (a[c[b]] = b);
      }
      return a;
    }),
    (Z.functions = Z.methods =
      function (c) {
        var a = [];
        for (var b in c) {
          Z.isFunction(c[b]) && a.push(b);
        }
        return a.sort();
      }),
    (Z.extend = function (a) {
      return (
        W(ah.call(arguments, 1), function (b) {
          if (b) {
            for (var c in b) {
              a[c] = b[c];
            }
          }
        }),
        a
      );
    }),
    (Z.pick = function (c) {
      var a = {},
        b = av.apply(at, ah.call(arguments, 1));
      return (
        W(b, function (d) {
          d in c && (a[d] = c[d]);
        }),
        a
      );
    }),
    (Z.omit = function (d) {
      var b = {},
        c = av.apply(at, ah.call(arguments, 1));
      for (var a in d) {
        Z.contains(c, a) || (b[a] = d[a]);
      }
      return b;
    }),
    (Z.defaults = function (a) {
      return (
        W(ah.call(arguments, 1), function (b) {
          if (b) {
            for (var c in b) {
              null == a[c] && (a[c] = b[c]);
            }
          }
        }),
        a
      );
    }),
    (Z.clone = function (a) {
      return Z.isObject(a) ? (Z.isArray(a) ? a.slice() : Z.extend({}, a)) : a;
    }),
    (Z.tap = function (b, a) {
      return a(b), b;
    });
  var L = function (g, x, b, p) {
    if (g === x) {
      return 0 !== g || 1 / g == 1 / x;
    }
    if (null == g || null == x) {
      return g === x;
    }
    g instanceof Z && (g = g._wrapped), x instanceof Z && (x = x._wrapped);
    var w = ak.call(g);
    if (w != ak.call(x)) {
      return !1;
    }
    switch (w) {
      case "[object String]":
        return g == x + "";
      case "[object Number]":
        return g != +g ? x != +x : 0 == g ? 1 / g == 1 / x : g == +x;
      case "[object Date]":
      case "[object Boolean]":
        return +g == +x;
      case "[object RegExp]":
        return (
          g.source == x.source &&
          g.global == x.global &&
          g.multiline == x.multiline &&
          g.ignoreCase == x.ignoreCase
        );
    }
    if ("object" != typeof g || "object" != typeof x) {
      return !1;
    }
    for (var h = b.length; h--; ) {
      if (b[h] == g) {
        return p[h] == x;
      }
    }
    b.push(g), p.push(x);
    var v = 0,
      d = !0;
    if ("[object Array]" == w) {
      if (((v = g.length), (d = v == x.length))) {
        for (; v-- && (d = L(g[v], x[v], b, p)); ) {}
      }
    } else {
      var q = g.constructor,
        m = x.constructor;
      if (
        q !== m &&
        !(
          Z.isFunction(q) &&
          q instanceof q &&
          Z.isFunction(m) &&
          m instanceof m
        )
      ) {
        return !1;
      }
      for (var y in g) {
        if (Z.has(g, y) && (v++, !(d = Z.has(x, y) && L(g[y], x[y], b, p)))) {
          break;
        }
      }
      if (d) {
        for (y in x) {
          if (Z.has(x, y) && !v--) {
            break;
          }
        }
        d = !v;
      }
    }
    return b.pop(), p.pop(), d;
  };
  (Z.isEqual = function (b, a) {
    return L(b, a, [], []);
  }),
    (Z.isEmpty = function (b) {
      if (null == b) {
        return !0;
      }
      if (Z.isArray(b) || Z.isString(b)) {
        return 0 === b.length;
      }
      for (var a in b) {
        if (Z.has(b, a)) {
          return !1;
        }
      }
      return !0;
    }),
    (Z.isElement = function (a) {
      return !(!a || 1 !== a.nodeType);
    }),
    (Z.isArray =
      Y ||
      function (a) {
        return "[object Array]" == ak.call(a);
      }),
    (Z.isObject = function (a) {
      return a === Object(a);
    }),
    W(
      ["Arguments", "Function", "String", "Number", "Date", "RegExp"],
      function (a) {
        Z["is" + a] = function (b) {
          return ak.call(b) == "[object " + a + "]";
        };
      }
    ),
    Z.isArguments(arguments) ||
      (Z.isArguments = function (a) {
        return !(!a || !Z.has(a, "callee"));
      }),
    "function" != typeof /./ &&
      (Z.isFunction = function (a) {
        return "function" == typeof a;
      }),
    (Z.isFinite = function (a) {
      return isFinite(a) && !isNaN(parseFloat(a));
    }),
    (Z.isNaN = function (a) {
      return Z.isNumber(a) && a != +a;
    }),
    (Z.isBoolean = function (a) {
      return a === !0 || a === !1 || "[object Boolean]" == ak.call(a);
    }),
    (Z.isNull = function (a) {
      return null === a;
    }),
    (Z.isUndefined = function (a) {
      return a === void 0;
    }),
    (Z.has = function (b, a) {
      return ar.call(b, a);
    }),
    (Z.noConflict = function () {
      return (ai._ = ac), this;
    }),
    (Z.identity = function (a) {
      return a;
    }),
    (Z.times = function (f, b, c) {
      for (var d = Array(f), a = 0; f > a; a++) {
        d[a] = b.call(c, a);
      }
      return d;
    }),
    (Z.random = function (b, a) {
      return (
        null == a && ((a = b), (b = 0)),
        b + Math.floor(Math.random() * (a - b + 1))
      );
    });
  var K = {
    escape: {
      "&": "&amp;",
      "<": "&lt;",
      ">": "&gt;",
      '"': "&quot;",
      "'": "&#x27;",
      "/": "&#x2F;",
    },
  };
  K.unescape = Z.invert(K.escape);
  var C = {
    escape: RegExp("[" + Z.keys(K.escape).join("") + "]", "g"),
    unescape: RegExp("(" + Z.keys(K.unescape).join("|") + ")", "g"),
  };
  Z.each(["escape", "unescape"], function (a) {
    Z[a] = function (b) {
      return null == b
        ? ""
        : ("" + b).replace(C[a], function (c) {
            return K[a][c];
          });
    };
  }),
    (Z.result = function (c, a) {
      if (null == c) {
        return null;
      }
      var b = c[a];
      return Z.isFunction(b) ? b.call(c) : b;
    }),
    (Z.mixin = function (a) {
      W(Z.functions(a), function (b) {
        var c = (Z[b] = a[b]);
        Z.prototype[b] = function () {
          var d = [this._wrapped];
          return ax.apply(d, arguments), U.call(this, c.apply(Z, d));
        };
      });
    });
  var J = 0;
  (Z.uniqueId = function (b) {
    var a = ++J + "";
    return b ? b + a : a;
  }),
    (Z.templateSettings = {
      evaluate: /<%([\s\S]+?)%>/g,
      interpolate: /<%=([\s\S]+?)%>/g,
      escape: /<%-([\s\S]+?)%>/g,
    });
  var z = /(.)^/,
    af = {
      "'": "'",
      "\\": "\\",
      "\r": "r",
      "\n": "n",
      "	": "t",
      "\u2028": "u2028",
      "\u2029": "u2029",
    },
    V = /\\|'|\r|\n|\t|\u2028|\u2029/g;
  (Z.template = function (f, s, b) {
    var h;
    b = Z.defaults({}, b, Z.templateSettings);
    var q = RegExp(
        [
          (b.escape || z).source,
          (b.interpolate || z).source,
          (b.evaluate || z).source,
        ].join("|") + "|$",
        "g"
      ),
      g = 0,
      p = "__p+='";
    f.replace(q, function (c, i, n, a, v) {
      return (
        (p += f.slice(g, v).replace(V, function (e) {
          return "\\" + af[e];
        })),
        i && (p += "'+\n((__t=(" + i + "))==null?'':_.escape(__t))+\n'"),
        n && (p += "'+\n((__t=(" + n + "))==null?'':__t)+\n'"),
        a && (p += "';\n" + a + "\n__p+='"),
        (g = v + c.length),
        c
      );
    }),
      (p += "';\n"),
      b.variable || (p = "with(obj||{}){\n" + p + "}\n"),
      (p =
        "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" +
        p +
        "return __p;\n");
    try {
      h = Function(b.variable || "obj", "_", p);
    } catch (d) {
      throw ((d.source = p), d);
    }
    if (s) {
      return h(s, Z);
    }
    var m = function (a) {
      return h.call(this, a, Z);
    };
    return (
      (m.source = "function(" + (b.variable || "obj") + "){\n" + p + "}"), m
    );
  }),
    (Z.chain = function (a) {
      return Z(a).chain();
    });
  var U = function (a) {
    return this._chain ? Z(a).chain() : a;
  };
  Z.mixin(Z),
    W(
      ["pop", "push", "reverse", "shift", "sort", "splice", "unshift"],
      function (b) {
        var a = at[b];
        Z.prototype[b] = function () {
          var c = this._wrapped;
          return (
            a.apply(c, arguments),
            ("shift" != b && "splice" != b) || 0 !== c.length || delete c[0],
            U.call(this, c)
          );
        };
      }
    ),
    W(["concat", "join", "slice"], function (b) {
      var a = at[b];
      Z.prototype[b] = function () {
        return U.call(this, a.apply(this._wrapped, arguments));
      };
    }),
    Z.extend(Z.prototype, {
      chain: function () {
        return (this._chain = !0), this;
      },
      value: function () {
        return this._wrapped;
      },
    });
}).call(this);
if (typeof JSON !== "object") {
  JSON = {};
}
(function () {
  function f(n) {
    return n < 10 ? "0" + n : n;
  }
  if (typeof Date.prototype.toJSON !== "function") {
    Date.prototype.toJSON = function (key) {
      return isFinite(this.valueOf())
        ? this.getUTCFullYear() +
            "-" +
            f(this.getUTCMonth() + 1) +
            "-" +
            f(this.getUTCDate()) +
            "T" +
            f(this.getUTCHours()) +
            ":" +
            f(this.getUTCMinutes()) +
            ":" +
            f(this.getUTCSeconds()) +
            "Z"
        : null;
    };
    String.prototype.toJSON =
      Number.prototype.toJSON =
      Boolean.prototype.toJSON =
        function (key) {
          return this.valueOf();
        };
  }
  var cx =
      /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
    escapable =
      /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
    gap,
    indent,
    meta = {
      "\b": "\\b",
      "\t": "\\t",
      "\n": "\\n",
      "\f": "\\f",
      "\r": "\\r",
      '"': '\\"',
      "\\": "\\\\",
    },
    rep;
  function quote(string) {
    escapable.lastIndex = 0;
    return escapable.test(string)
      ? '"' +
          string.replace(escapable, function (a) {
            var c = meta[a];
            return typeof c === "string"
              ? c
              : "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4);
          }) +
          '"'
      : '"' + string + '"';
  }
  function str(key, holder) {
    var i,
      k,
      v,
      length,
      mind = gap,
      partial,
      value = holder[key];
    if (
      value &&
      typeof value === "object" &&
      typeof value.toJSON === "function"
    ) {
      value = value.toJSON(key);
    }
    if (typeof rep === "function") {
      value = rep.call(holder, key, value);
    }
    switch (typeof value) {
      case "string":
        return quote(value);
      case "number":
        return isFinite(value) ? String(value) : "null";
      case "boolean":
      case "null":
        return String(value);
      case "object":
        if (!value) {
          return "null";
        }
        gap += indent;
        partial = [];
        if (Object.prototype.toString.apply(value) === "[object Array]") {
          length = value.length;
          for (i = 0; i < length; i += 1) {
            partial[i] = str(i, value) || "null";
          }
          v =
            partial.length === 0
              ? "[]"
              : gap
              ? "[\n" + gap + partial.join(",\n" + gap) + "\n" + mind + "]"
              : "[" + partial.join(",") + "]";
          gap = mind;
          return v;
        }
        if (rep && typeof rep === "object") {
          length = rep.length;
          for (i = 0; i < length; i += 1) {
            if (typeof rep[i] === "string") {
              k = rep[i];
              v = str(k, value);
              if (v) {
                partial.push(quote(k) + (gap ? ": " : ":") + v);
              }
            }
          }
        } else {
          for (k in value) {
            if (Object.prototype.hasOwnProperty.call(value, k)) {
              v = str(k, value);
              if (v) {
                partial.push(quote(k) + (gap ? ": " : ":") + v);
              }
            }
          }
        }
        v =
          partial.length === 0
            ? "{}"
            : gap
            ? "{\n" + gap + partial.join(",\n" + gap) + "\n" + mind + "}"
            : "{" + partial.join(",") + "}";
        gap = mind;
        return v;
    }
  }
  if (typeof JSON.stringify !== "function") {
    JSON.stringify = function (value, replacer, space) {
      var i;
      gap = "";
      indent = "";
      if (typeof space === "number") {
        for (i = 0; i < space; i += 1) {
          indent += " ";
        }
      } else {
        if (typeof space === "string") {
          indent = space;
        }
      }
      rep = replacer;
      if (
        replacer &&
        typeof replacer !== "function" &&
        (typeof replacer !== "object" || typeof replacer.length !== "number")
      ) {
        throw new Error("JSON.stringify");
      }
      return str("", {
        "": value,
      });
    };
  }
  if (typeof JSON.parse !== "function") {
    JSON.parse = function (text, reviver) {
      var j;
      function walk(holder, key) {
        var k,
          v,
          value = holder[key];
        if (value && typeof value === "object") {
          for (k in value) {
            if (Object.prototype.hasOwnProperty.call(value, k)) {
              v = walk(value, k);
              if (v !== undefined) {
                value[k] = v;
              } else {
                delete value[k];
              }
            }
          }
        }
        return reviver.call(holder, key, value);
      }
      text = String(text);
      cx.lastIndex = 0;
      if (cx.test(text)) {
        text = text.replace(cx, function (a) {
          return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4);
        });
      }
      if (
        /^[\],:{}\s]*$/.test(
          text
            .replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@")
            .replace(
              /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
              "]"
            )
            .replace(/(?:^|:|,)(?:\s*\[)+/g, "")
        )
      ) {
        j = eval("(" + text + ")");
        return typeof reviver === "function"
          ? walk(
              {
                "": j,
              },
              ""
            )
          : j;
      }
      throw new SyntaxError("JSON.parse");
    };
  }
})();
(function () {
  var ac = this;
  var ar = ac.Backbone;
  var am = [];
  var ae = am.push;
  var ad = am.slice;
  var ah = am.splice;
  var aw;
  if (typeof exports !== "undefined") {
    aw = exports;
  } else {
    aw = ac.Backbone = {};
  }
  aw.VERSION = "1.0.0";
  var an = ac._;
  if (!an && typeof require !== "undefined") {
    an = require("underscore");
  }
  aw.$ = ac.jQuery || ac.Zepto || ac.ender || ac.$;
  aw.noConflict = function () {
    ac.Backbone = ar;
    return this;
  };
  aw.emulateHTTP = false;
  aw.emulateJSON = false;
  var ag = (aw.Events = {
    on: function (b, d, a) {
      if (!aj(this, "on", b, [d, a]) || !d) {
        return this;
      }
      this._events || (this._events = {});
      var c = this._events[b] || (this._events[b] = []);
      c.push({
        callback: d,
        context: a,
        ctx: a || this,
      });
      return this;
    },
    once: function (b, f, a) {
      if (!aj(this, "once", b, [f, a]) || !f) {
        return this;
      }
      var d = this;
      var c = an.once(function () {
        d.off(b, c);
        f.apply(this, arguments);
      });
      c._callback = f;
      return this.on(b, c, a);
    },
    off: function (y, p, h) {
      var b, A, g, w, d, x, v, m;
      if (!this._events || !aj(this, "off", y, [p, h])) {
        return this;
      }
      if (!y && !p && !h) {
        this._events = {};
        return this;
      }
      w = y ? [y] : an.keys(this._events);
      for (d = 0, x = w.length; d < x; d++) {
        y = w[d];
        if ((g = this._events[y])) {
          this._events[y] = b = [];
          if (p || h) {
            for (v = 0, m = g.length; v < m; v++) {
              A = g[v];
              if (
                (p && p !== A.callback && p !== A.callback._callback) ||
                (h && h !== A.context)
              ) {
                b.push(A);
              }
            }
          }
          if (!b.length) {
            delete this._events[y];
          }
        }
      }
      return this;
    },
    trigger: function (b) {
      if (!this._events) {
        return this;
      }
      var d = ad.call(arguments, 1);
      if (!aj(this, "trigger", b, d)) {
        return this;
      }
      var a = this._events[b];
      var c = this._events.all;
      if (a) {
        au(a, d);
      }
      if (c) {
        au(c, arguments);
      }
      return this;
    },
    stopListening: function (b, f, a) {
      var d = this._listeners;
      if (!d) {
        return this;
      }
      var c = !f && !a;
      if (typeof f === "object") {
        a = this;
      }
      if (b) {
        (d = {})[b._listenerId] = b;
      }
      for (var g in d) {
        d[g].off(f, a, this);
        if (c) {
          delete this._listeners[g];
        }
      }
      return this;
    },
  });
  var ab = /\s+/;
  var aj = function (d, o, c, m) {
    if (!c) {
      return true;
    }
    if (typeof c === "object") {
      for (var g in c) {
        d[o].apply(d, [g, c[g]].concat(m));
      }
      return false;
    }
    if (ab.test(c)) {
      var p = c.split(ab);
      for (var b = 0, f = p.length; b < f; b++) {
        d[o].apply(d, [p[b]].concat(m));
      }
      return false;
    }
    return true;
  };
  var au = function (d, o) {
    var c,
      m = -1,
      g = d.length,
      p = o[0],
      b = o[1],
      f = o[2];
    switch (o.length) {
      case 0:
        while (++m < g) {
          (c = d[m]).callback.call(c.ctx);
        }
        return;
      case 1:
        while (++m < g) {
          (c = d[m]).callback.call(c.ctx, p);
        }
        return;
      case 2:
        while (++m < g) {
          (c = d[m]).callback.call(c.ctx, p, b);
        }
        return;
      case 3:
        while (++m < g) {
          (c = d[m]).callback.call(c.ctx, p, b, f);
        }
        return;
      default:
        while (++m < g) {
          (c = d[m]).callback.apply(c.ctx, o);
        }
    }
  };
  var aq = {
    listenTo: "on",
    listenToOnce: "once",
  };
  an.each(aq, function (a, b) {
    ag[b] = function (g, c, f) {
      var d = this._listeners || (this._listeners = {});
      var h = g._listenerId || (g._listenerId = an.uniqueId("l"));
      d[h] = g;
      if (typeof c === "object") {
        f = this;
      }
      g[a](c, f, this);
      return this;
    };
  });
  ag.bind = ag.on;
  ag.unbind = ag.off;
  an.extend(aw, ag);
  var at = (aw.Model = function (b, d) {
    var a;
    var c = b || {};
    d || (d = {});
    this.cid = an.uniqueId("c");
    this.attributes = {};
    an.extend(this, an.pick(d, af));
    if (d.parse) {
      c = this.parse(c, d) || {};
    }
    if ((a = an.result(this, "defaults"))) {
      c = an.defaults({}, c, a);
    }
    this.set(c, d);
    this.changed = {};
    this.initialize.apply(this, arguments);
  });
  var af = ["url", "urlRoot", "collection"];
  an.extend(at.prototype, ag, {
    changed: null,
    validationError: null,
    idAttribute: "id",
    initialize: function () {},
    toJSON: function (a) {
      return an.clone(this.attributes);
    },
    sync: function () {
      return aw.sync.apply(this, arguments);
    },
    get: function (a) {
      return this.attributes[a];
    },
    escape: function (a) {
      return an.escape(this.get(a));
    },
    has: function (a) {
      return this.get(a) != null;
    },
    set: function (E, w, p) {
      var b, H, h, A, g, C, m, y;
      if (E == null) {
        return this;
      }
      if (typeof E === "object") {
        H = E;
        p = w;
      } else {
        (H = {})[E] = w;
      }
      p || (p = {});
      if (!this._validate(H, p)) {
        return false;
      }
      h = p.unset;
      g = p.silent;
      A = [];
      C = this._changing;
      this._changing = true;
      if (!C) {
        this._previousAttributes = an.clone(this.attributes);
        this.changed = {};
      }
      (y = this.attributes), (m = this._previousAttributes);
      if (this.idAttribute in H) {
        this.id = H[this.idAttribute];
      }
      for (b in H) {
        w = H[b];
        if (!an.isEqual(y[b], w)) {
          A.push(b);
        }
        if (!an.isEqual(m[b], w)) {
          this.changed[b] = w;
        } else {
          delete this.changed[b];
        }
        h ? delete y[b] : (y[b] = w);
      }
      if (!g) {
        if (A.length) {
          this._pending = true;
        }
        for (var v = 0, x = A.length; v < x; v++) {
          this.trigger("change:" + A[v], this, y[A[v]], p);
        }
      }
      if (C) {
        return this;
      }
      if (!g) {
        while (this._pending) {
          this._pending = false;
          this.trigger("change", this, p);
        }
      }
      this._pending = false;
      this._changing = false;
      return this;
    },
    unset: function (a, b) {
      return this.set(
        a,
        void 0,
        an.extend({}, b, {
          unset: true,
        })
      );
    },
    clear: function (b) {
      var c = {};
      for (var a in this.attributes) {
        c[a] = void 0;
      }
      return this.set(
        c,
        an.extend({}, b, {
          unset: true,
        })
      );
    },
    hasChanged: function (a) {
      if (a == null) {
        return !an.isEmpty(this.changed);
      }
      return an.has(this.changed, a);
    },
    changedAttributes: function (b) {
      if (!b) {
        return this.hasChanged() ? an.clone(this.changed) : false;
      }
      var f,
        a = false;
      var d = this._changing ? this._previousAttributes : this.attributes;
      for (var c in b) {
        if (an.isEqual(d[c], (f = b[c]))) {
          continue;
        }
        (a || (a = {}))[c] = f;
      }
      return a;
    },
    previous: function (a) {
      if (a == null || !this._previousAttributes) {
        return null;
      }
      return this._previousAttributes[a];
    },
    previousAttributes: function () {
      return an.clone(this._previousAttributes);
    },
    fetch: function (b) {
      b = b ? an.clone(b) : {};
      if (b.parse === void 0) {
        b.parse = true;
      }
      var c = this;
      var a = b.success;
      b.success = function (d) {
        if (!c.set(c.parse(d, b), b)) {
          return false;
        }
        if (a) {
          a(c, d, b);
        }
        c.trigger("sync", c, d, b);
      };
      D(this, b);
      return this.sync("read", this, b);
    },
    save: function (p, g, f) {
      var b,
        v,
        d,
        h = this.attributes;
      if (p == null || typeof p === "object") {
        b = p;
        f = g;
      } else {
        (b = {})[p] = g;
      }
      if (b && (!f || !f.wait) && !this.set(b, f)) {
        return false;
      }
      f = an.extend(
        {
          validate: true,
        },
        f
      );
      if (!this._validate(b, f)) {
        return false;
      }
      if (b && f.wait) {
        this.attributes = an.extend({}, h, b);
      }
      if (f.parse === void 0) {
        f.parse = true;
      }
      var c = this;
      var m = f.success;
      f.success = function (a) {
        c.attributes = h;
        var i = c.parse(a, f);
        if (f.wait) {
          i = an.extend(b || {}, i);
        }
        if (an.isObject(i) && !c.set(i, f)) {
          return false;
        }
        if (m) {
          m(c, a, f);
        }
        c.trigger("sync", c, a, f);
      };
      D(this, f);
      v = this.isNew() ? "create" : f.patch ? "patch" : "update";
      if (v === "patch") {
        f.attrs = b;
      }
      d = this.sync(v, this, f);
      if (b && f.wait) {
        this.attributes = h;
      }
      return d;
    },
    destroy: function (b) {
      b = b ? an.clone(b) : {};
      var f = this;
      var a = b.success;
      var d = function () {
        f.trigger("destroy", f, f.collection, b);
      };
      b.success = function (e) {
        if (b.wait || f.isNew()) {
          d();
        }
        if (a) {
          a(f, e, b);
        }
        if (!f.isNew()) {
          f.trigger("sync", f, e, b);
        }
      };
      if (this.isNew()) {
        b.success();
        return false;
      }
      D(this, b);
      var c = this.sync("delete", this, b);
      if (!b.wait) {
        d();
      }
      return c;
    },
    url: function () {
      var a =
        an.result(this, "urlRoot") || an.result(this.collection, "url") || q();
      if (this.isNew()) {
        return a;
      }
      return (
        a +
        (a.charAt(a.length - 1) === "/" ? "" : "/") +
        encodeURIComponent(this.id)
      );
    },
    parse: function (a, b) {
      return a;
    },
    clone: function () {
      return new this.constructor(this.attributes);
    },
    isNew: function () {
      return this.id == null;
    },
    isValid: function (a) {
      return this._validate(
        {},
        an.extend(a || {}, {
          validate: true,
        })
      );
    },
    _validate: function (b, c) {
      if (!c.validate || !this.validate) {
        return true;
      }
      b = an.extend({}, this.attributes, b);
      var a = (this.validationError = this.validate(b, c) || null);
      if (!a) {
        return true;
      }
      this.trigger(
        "invalid",
        this,
        a,
        an.extend(c || {}, {
          validationError: a,
        })
      );
      return false;
    },
  });
  var aa = ["keys", "values", "pairs", "invert", "pick", "omit"];
  an.each(aa, function (a) {
    at.prototype[a] = function () {
      var b = ad.call(arguments);
      b.unshift(this.attributes);
      return an[a].apply(an, b);
    };
  });
  var ao = (aw.Collection = function (a, b) {
    b || (b = {});
    if (b.url) {
      this.url = b.url;
    }
    if (b.model) {
      this.model = b.model;
    }
    if (b.comparator !== void 0) {
      this.comparator = b.comparator;
    }
    this._reset();
    this.initialize.apply(this, arguments);
    if (a) {
      this.reset(
        a,
        an.extend(
          {
            silent: true,
          },
          b
        )
      );
    }
  });
  var ai = {
    add: true,
    remove: true,
    merge: true,
  };
  var X = {
    add: true,
    merge: false,
    remove: false,
  };
  an.extend(ao.prototype, ag, {
    model: at,
    initialize: function () {},
    toJSON: function (a) {
      return this.map(function (b) {
        return b.toJSON(a);
      });
    },
    sync: function () {
      return aw.sync.apply(this, arguments);
    },
    add: function (a, b) {
      return this.set(a, an.defaults(b || {}, X));
    },
    remove: function (b, f) {
      b = an.isArray(b) ? b.slice() : [b];
      f || (f = {});
      var a, d, c, g;
      for (a = 0, d = b.length; a < d; a++) {
        g = this.get(b[a]);
        if (!g) {
          continue;
        }
        delete this._byId[g.id];
        delete this._byId[g.cid];
        c = this.indexOf(g);
        this.models.splice(c, 1);
        this.length--;
        if (!f.silent) {
          f.index = c;
          g.trigger("remove", g, this, f);
        }
        this._removeReference(g);
      }
      return this;
    },
    set: function (I, x) {
      x = an.defaults(x || {}, ai);
      if (x.parse) {
        I = this.parse(I, x);
      }
      if (!an.isArray(I)) {
        I = I ? [I] : [];
      }
      var n, N, C, h, H, m;
      var A = x.at;
      var w = this.comparator && A == null && x.sort !== false;
      var y = an.isString(this.comparator) ? this.comparator : null;
      var b = [],
        E = [],
        r = {};
      for (n = 0, N = I.length; n < N; n++) {
        if (!(C = this._prepareModel(I[n], x))) {
          continue;
        }
        if ((H = this.get(C))) {
          if (x.remove) {
            r[H.cid] = true;
          }
          if (x.merge) {
            H.set(C.attributes, x);
            if (w && !m && H.hasChanged(y)) {
              m = true;
            }
          }
        } else {
          if (x.add) {
            b.push(C);
            C.on("all", this._onModelEvent, this);
            this._byId[C.cid] = C;
            if (C.id != null) {
              this._byId[C.id] = C;
            }
          }
        }
      }
      if (x.remove) {
        for (n = 0, N = this.length; n < N; ++n) {
          if (!r[(C = this.models[n]).cid]) {
            E.push(C);
          }
        }
        if (E.length) {
          this.remove(E, x);
        }
      }
      if (b.length) {
        if (w) {
          m = true;
        }
        this.length += b.length;
        if (A != null) {
          ah.apply(this.models, [A, 0].concat(b));
        } else {
          ae.apply(this.models, b);
        }
      }
      if (m) {
        this.sort({
          silent: true,
        });
      }
      if (x.silent) {
        return this;
      }
      for (n = 0, N = b.length; n < N; n++) {
        (C = b[n]).trigger("add", C, this, x);
      }
      if (m) {
        this.trigger("sort", this, x);
      }
      return this;
    },
    reset: function (b, d) {
      d || (d = {});
      for (var a = 0, c = this.models.length; a < c; a++) {
        this._removeReference(this.models[a]);
      }
      d.previousModels = this.models;
      this._reset();
      this.add(
        b,
        an.extend(
          {
            silent: true,
          },
          d
        )
      );
      if (!d.silent) {
        this.trigger("reset", this, d);
      }
      return this;
    },
    push: function (a, b) {
      a = this._prepareModel(a, b);
      this.add(
        a,
        an.extend(
          {
            at: this.length,
          },
          b
        )
      );
      return a;
    },
    pop: function (a) {
      var b = this.at(this.length - 1);
      this.remove(b, a);
      return b;
    },
    unshift: function (a, b) {
      a = this._prepareModel(a, b);
      this.add(
        a,
        an.extend(
          {
            at: 0,
          },
          b
        )
      );
      return a;
    },
    shift: function (a) {
      var b = this.at(0);
      this.remove(b, a);
      return b;
    },
    slice: function (a, b) {
      return this.models.slice(a, b);
    },
    get: function (a) {
      if (a == null) {
        return void 0;
      }
      return this._byId[a.id != null ? a.id : a.cid || a];
    },
    at: function (a) {
      return this.models[a];
    },
    where: function (a, b) {
      if (an.isEmpty(a)) {
        return b ? void 0 : [];
      }
      return this[b ? "find" : "filter"](function (d) {
        for (var c in a) {
          if (a[c] !== d.get(c)) {
            return false;
          }
        }
        return true;
      });
    },
    findWhere: function (a) {
      return this.where(a, true);
    },
    sort: function (a) {
      if (!this.comparator) {
        throw new Error("Cannot sort a set without a comparator");
      }
      a || (a = {});
      if (an.isString(this.comparator) || this.comparator.length === 1) {
        this.models = this.sortBy(this.comparator, this);
      } else {
        this.models.sort(an.bind(this.comparator, this));
      }
      if (!a.silent) {
        this.trigger("sort", this, a);
      }
      return this;
    },
    sortedIndex: function (b, d, a) {
      d || (d = this.comparator);
      var c = an.isFunction(d)
        ? d
        : function (e) {
            return e.get(d);
          };
      return an.sortedIndex(this.models, b, c, a);
    },
    pluck: function (a) {
      return an.invoke(this.models, "get", a);
    },
    fetch: function (b) {
      b = b ? an.clone(b) : {};
      if (b.parse === void 0) {
        b.parse = true;
      }
      var c = b.success;
      var a = this;
      b.success = function (e) {
        var d = b.reset ? "reset" : "set";
        a[d](e, b);
        if (c) {
          c(a, e, b);
        }
        a.trigger("sync", a, e, b);
      };
      D(this, b);
      return this.sync("read", this, b);
    },
    create: function (b, d) {
      d = d ? an.clone(d) : {};
      if (!(b = this._prepareModel(b, d))) {
        return false;
      }
      if (!d.wait) {
        this.add(b, d);
      }
      var a = this;
      var c = d.success;
      d.success = function (e) {
        if (d.wait) {
          a.add(b, d);
        }
        if (c) {
          c(b, e, d);
        }
      };
      b.save(null, d);
      return b;
    },
    parse: function (a, b) {
      return a;
    },
    clone: function () {
      return new this.constructor(this.models);
    },
    _reset: function () {
      this.length = 0;
      this.models = [];
      this._byId = {};
    },
    _prepareModel: function (b, c) {
      if (b instanceof at) {
        if (!b.collection) {
          b.collection = this;
        }
        return b;
      }
      c || (c = {});
      c.collection = this;
      var a = new this.model(b, c);
      if (!a._validate(b, c)) {
        this.trigger("invalid", this, b, c);
        return false;
      }
      return a;
    },
    _removeReference: function (a) {
      if (this === a.collection) {
        delete a.collection;
      }
      a.off("all", this._onModelEvent, this);
    },
    _onModelEvent: function (b, d, a, c) {
      if ((b === "add" || b === "remove") && a !== this) {
        return;
      }
      if (b === "destroy") {
        this.remove(d, c);
      }
      if (d && b === "change:" + d.idAttribute) {
        delete this._byId[d.previous(d.idAttribute)];
        if (d.id != null) {
          this._byId[d.id] = d;
        }
      }
      this.trigger.apply(this, arguments);
    },
  });
  var ax = [
    "forEach",
    "each",
    "map",
    "collect",
    "reduce",
    "foldl",
    "inject",
    "reduceRight",
    "foldr",
    "find",
    "detect",
    "filter",
    "select",
    "reject",
    "every",
    "all",
    "some",
    "any",
    "include",
    "contains",
    "invoke",
    "max",
    "min",
    "toArray",
    "size",
    "first",
    "head",
    "take",
    "initial",
    "rest",
    "tail",
    "drop",
    "last",
    "without",
    "indexOf",
    "shuffle",
    "lastIndexOf",
    "isEmpty",
    "chain",
  ];
  an.each(ax, function (a) {
    ao.prototype[a] = function () {
      var b = ad.call(arguments);
      b.unshift(this.models);
      return an[a].apply(an, b);
    };
  });
  var Z = ["groupBy", "countBy", "sortBy"];
  an.each(Z, function (a) {
    ao.prototype[a] = function (d, b) {
      var c = an.isFunction(d)
        ? d
        : function (e) {
            return e.get(d);
          };
      return an[a](this.models, c, b);
    };
  });
  var av = (aw.View = function (a) {
    this.cid = an.uniqueId("view");
    this._configure(a || {});
    this._ensureElement();
    this.initialize.apply(this, arguments);
    this.delegateEvents();
  });
  var Y = /^(\S+)\s*(.*)$/;
  var M = [
    "model",
    "collection",
    "el",
    "id",
    "attributes",
    "className",
    "tagName",
    "events",
  ];
  an.extend(av.prototype, ag, {
    tagName: "div",
    $: function (a) {
      return this.$el.find(a);
    },
    initialize: function () {},
    render: function () {
      return this;
    },
    remove: function () {
      this.$el.remove();
      this.stopListening();
      return this;
    },
    setElement: function (a, b) {
      if (this.$el) {
        this.undelegateEvents();
      }
      this.$el = a instanceof aw.$ ? a : aw.$(a);
      this.el = this.$el[0];
      if (b !== false) {
        this.delegateEvents();
      }
      return this;
    },
    delegateEvents: function (b) {
      if (!(b || (b = an.result(this, "events")))) {
        return this;
      }
      this.undelegateEvents();
      for (var f in b) {
        var a = b[f];
        if (!an.isFunction(a)) {
          a = this[b[f]];
        }
        if (!a) {
          continue;
        }
        var d = f.match(Y);
        var c = d[1],
          g = d[2];
        a = an.bind(a, this);
        c += ".delegateEvents" + this.cid;
        if (g === "") {
          this.$el.on(c, a);
        } else {
          this.$el.on(c, g, a);
        }
      }
      return this;
    },
    undelegateEvents: function () {
      this.$el.off(".delegateEvents" + this.cid);
      return this;
    },
    _configure: function (a) {
      if (this.options) {
        a = an.extend({}, an.result(this, "options"), a);
      }
      an.extend(this, an.pick(a, M));
      this.options = a;
    },
    _ensureElement: function () {
      if (!this.el) {
        var a = an.extend({}, an.result(this, "attributes"));
        if (this.id) {
          a.id = an.result(this, "id");
        }
        if (this.className) {
          a["class"] = an.result(this, "className");
        }
        var b = aw.$("<" + an.result(this, "tagName") + ">").attr(a);
        this.setElement(b, false);
      } else {
        this.setElement(an.result(this, "el"), false);
      }
    },
  });
  aw.sync = function (b, f, a) {
    var d = ak[b];
    an.defaults(a || (a = {}), {
      emulateHTTP: aw.emulateHTTP,
      emulateJSON: aw.emulateJSON,
    });
    var c = {
      type: d,
      dataType: "json",
    };
    if (!a.url) {
      c.url = an.result(f, "url") || q();
    }
    if (
      a.data == null &&
      f &&
      (b === "create" || b === "update" || b === "patch")
    ) {
      c.contentType = "application/json";
      c.data = JSON.stringify(a.attrs || f.toJSON(a));
    }
    if (a.emulateJSON) {
      c.contentType = "application/x-www-form-urlencoded";
      c.data = c.data
        ? {
            model: c.data,
          }
        : {};
    }
    if (a.emulateHTTP && (d === "PUT" || d === "DELETE" || d === "PATCH")) {
      c.type = "POST";
      if (a.emulateJSON) {
        c.data._method = d;
      }
      var h = a.beforeSend;
      a.beforeSend = function (e) {
        e.setRequestHeader("X-HTTP-Method-Override", d);
        if (h) {
          return h.apply(this, arguments);
        }
      };
    }
    if (c.type !== "GET" && !a.emulateJSON) {
      c.processData = false;
    }
    if (
      c.type === "PATCH" &&
      window.ActiveXObject &&
      !(window.external && window.external.msActiveXFilteringEnabled)
    ) {
      c.xhr = function () {
        return new ActiveXObject("Microsoft.XMLHTTP");
      };
    }
    var g = (a.xhr = aw.ajax(an.extend(c, a)));
    f.trigger("request", f, g, a);
    return g;
  };
  var ak = {
    create: "POST",
    update: "PUT",
    patch: "PATCH",
    delete: "DELETE",
    read: "GET",
  };
  aw.ajax = function () {
    return aw.$.ajax.apply(aw.$, arguments);
  };
  var B = (aw.Router = function (a) {
    a || (a = {});
    if (a.routes) {
      this.routes = a.routes;
    }
    this._bindRoutes();
    this.initialize.apply(this, arguments);
  });
  var W = /\((.*?)\)/g;
  var z = /(\(\?)?:\w+/g;
  var L = /\*\w+/g;
  var V = /[\-{}\[\]+?.,\\\^$|#\s]/g;
  an.extend(B.prototype, ag, {
    initialize: function () {},
    route: function (b, d, a) {
      if (!an.isRegExp(b)) {
        b = this._routeToRegExp(b);
      }
      if (an.isFunction(d)) {
        a = d;
        d = "";
      }
      if (!a) {
        a = this[d];
      }
      var c = this;
      aw.history.route(b, function (e) {
        var f = c._extractParameters(b, e);
        a && a.apply(c, f);
        c.trigger.apply(c, ["route:" + d].concat(f));
        c.trigger("route", d, f);
        aw.history.trigger("route", c, d, f);
      });
      return this;
    },
    navigate: function (a, b) {
      aw.history.navigate(a, b);
      return this;
    },
    _bindRoutes: function () {
      if (!this.routes) {
        return;
      }
      this.routes = an.result(this, "routes");
      var a,
        b = an.keys(this.routes);
      while ((a = b.pop()) != null) {
        this.route(a, this.routes[a]);
      }
    },
    _routeToRegExp: function (a) {
      a = a
        .replace(V, "\\$&")
        .replace(W, "(?:$1)?")
        .replace(z, function (b, c) {
          return c ? b : "([^/]+)";
        })
        .replace(L, "(.*?)");
      return new RegExp("^" + a + "$");
    },
    _extractParameters: function (b, c) {
      var a = b.exec(c).slice(1);
      return an.map(a, function (d) {
        return d ? decodeURIComponent(d) : null;
      });
    },
  });
  var K = (aw.History = function () {
    this.handlers = [];
    an.bindAll(this, "checkUrl");
    if (typeof window !== "undefined") {
      this.location = window.location;
      this.history = window.history;
    }
  });
  var J = /^[#\/]|\s+$/g;
  var F = /^\/+|\/+$/g;
  var G = /msie [\w.]+/;
  var Q = /\/$/;
  K.started = false;
  an.extend(K.prototype, ag, {
    interval: 50,
    getHash: function (a) {
      var b = (a || this).location.href.match(/#(.*)$/);
      return b ? b[1] : "";
    },
    getFragment: function (b, c) {
      if (b == null) {
        if (this._hasPushState || !this._wantsHashChange || c) {
          b = this.location.pathname;
          var a = this.root.replace(Q, "");
          if (!b.indexOf(a)) {
            b = b.substr(a.length);
          }
        } else {
          b = this.getHash();
        }
      }
      return b.replace(J, "");
    },
    start: function (b) {
      if (K.started) {
        throw new Error("Backbone.history has already been started");
      }
      K.started = true;
      this.options = an.extend(
        {},
        {
          root: "/",
        },
        this.options,
        b
      );
      this.root = this.options.root;
      this._wantsHashChange = this.options.hashChange !== false;
      this._wantsPushState = !!this.options.pushState;
      this._hasPushState = !!(
        this.options.pushState &&
        this.history &&
        this.history.pushState
      );
      var f = this.getFragment();
      var a = document.documentMode;
      var d = G.exec(navigator.userAgent.toLowerCase()) && (!a || a <= 7);
      this.root = ("/" + this.root + "/").replace(F, "/");
      if (d && this._wantsHashChange) {
        this.iframe = aw
          .$('<iframe src="javascript:0" tabindex="-1" />')
          .hide()
          .appendTo("body")[0].contentWindow;
        this.navigate(f);
      }
      if (this._hasPushState) {
        aw.$(window).on("popstate", this.checkUrl);
      } else {
        if (this._wantsHashChange && "onhashchange" in window && !d) {
          aw.$(window).on("hashchange", this.checkUrl);
        } else {
          if (this._wantsHashChange) {
            this._checkUrlInterval = setInterval(this.checkUrl, this.interval);
          }
        }
      }
      this.fragment = f;
      var c = this.location;
      var g = c.pathname.replace(/[^\/]$/, "$&/") === this.root;
      if (
        this._wantsHashChange &&
        this._wantsPushState &&
        !this._hasPushState &&
        !g
      ) {
        this.fragment = this.getFragment(null, true);
        this.location.replace(
          this.root + this.location.search + "#" + this.fragment
        );
        return true;
      } else {
        if (this._wantsPushState && this._hasPushState && g && c.hash) {
          this.fragment = this.getHash().replace(J, "");
          this.history.replaceState(
            {},
            document.title,
            this.root + this.fragment + c.search
          );
        }
      }
      if (!this.options.silent) {
        return this.loadUrl();
      }
    },
    stop: function () {
      aw.$(window)
        .off("popstate", this.checkUrl)
        .off("hashchange", this.checkUrl);
      clearInterval(this._checkUrlInterval);
      K.started = false;
    },
    route: function (a, b) {
      this.handlers.unshift({
        route: a,
        callback: b,
      });
    },
    checkUrl: function (a) {
      var b = this.getFragment();
      if (b === this.fragment && this.iframe) {
        b = this.getFragment(this.getHash(this.iframe));
      }
      if (b === this.fragment) {
        return false;
      }
      if (this.iframe) {
        this.navigate(b);
      }
      this.loadUrl() || this.loadUrl(this.getHash());
    },
    loadUrl: function (b) {
      var c = (this.fragment = this.getFragment(b));
      var a = an.any(this.handlers, function (d) {
        if (d.route.test(c)) {
          d.callback(c);
          return true;
        }
      });
      return a;
    },
    navigate: function (b, c) {
      if (!K.started) {
        return false;
      }
      if (!c || c === true) {
        c = {
          trigger: c,
        };
      }
      b = this.getFragment(b || "");
      if (this.fragment === b) {
        return;
      }
      this.fragment = b;
      var a = this.root + b;
      if (this._hasPushState) {
        this.history[c.replace ? "replaceState" : "pushState"](
          {},
          document.title,
          a
        );
      } else {
        if (this._wantsHashChange) {
          this._updateHash(this.location, b, c.replace);
          if (
            this.iframe &&
            b !== this.getFragment(this.getHash(this.iframe))
          ) {
            if (!c.replace) {
              this.iframe.document.open().close();
            }
            this._updateHash(this.iframe.location, b, c.replace);
          }
        } else {
          return this.location.assign(a);
        }
      }
      if (c.trigger) {
        this.loadUrl(b);
      }
    },
    _updateHash: function (b, d, a) {
      if (a) {
        var c = b.href.replace(/(javascript:|#).*$/, "");
        b.replace(c + "#" + d);
      } else {
        b.hash = "#" + d;
      }
    },
  });
  aw.history = new K();
  var al = function (b, f) {
    var a = this;
    var d;
    if (b && an.has(b, "constructor")) {
      d = b.constructor;
    } else {
      d = function () {
        return a.apply(this, arguments);
      };
    }
    an.extend(d, a, f);
    var c = function () {
      this.constructor = d;
    };
    c.prototype = a.prototype;
    d.prototype = new c();
    if (b) {
      an.extend(d.prototype, b);
    }
    d.__super__ = a.prototype;
    return d;
  };
  at.extend = ao.extend = B.extend = av.extend = K.extend = al;
  var q = function () {
    throw new Error('A "url" property or function must be specified');
  };
  var D = function (b, c) {
    var a = c.error;
    c.error = function (d) {
      if (a) {
        a(b, d, c);
      }
      b.trigger("error", b, d, c);
    };
  };
}).call(this);
(function (d, c) {
  typeof define == "function" && define.amd
    ? define(["underscore", "backbone"], function (b, a) {
        return c(b || d._, a || d.Backbone);
      })
    : c(_, Backbone);
})(this, function (f, e) {
  function h() {
    return (((1 + Math.random()) * 65536) | 0).toString(16).substring(1);
  }
  function g() {
    return (
      h() + h() + "-" + h() + "-" + h() + "-" + h() + "-" + h() + h() + h()
    );
  }
  return (
    (e.LocalStorage = window.Store =
      function (d) {
        this.name = d;
        var c = this.localStorage().getItem(this.name);
        this.records = (c && c.split(",")) || [];
      }),
    f.extend(e.LocalStorage.prototype, {
      save: function () {
        this.localStorage().setItem(this.name, this.records.join(","));
      },
      create: function (b) {
        return (
          b.id || ((b.id = g()), b.set(b.idAttribute, b.id)),
          this.localStorage().setItem(
            this.name + "-" + b.id,
            JSON.stringify(b)
          ),
          this.records.push(b.id.toString()),
          this.save(),
          this.find(b)
        );
      },
      update: function (a) {
        return (
          this.localStorage().setItem(
            this.name + "-" + a.id,
            JSON.stringify(a)
          ),
          f.include(this.records, a.id.toString()) ||
            this.records.push(a.id.toString()),
          this.save(),
          this.find(a)
        );
      },
      find: function (b) {
        return this.jsonData(
          this.localStorage().getItem(this.name + "-" + b.id)
        );
      },
      findAll: function () {
        return f(this.records)
          .chain()
          .map(function (b) {
            return this.jsonData(
              this.localStorage().getItem(this.name + "-" + b)
            );
          }, this)
          .compact()
          .value();
      },
      destroy: function (a) {
        return a.isNew()
          ? !1
          : (this.localStorage().removeItem(this.name + "-" + a.id),
            (this.records = f.reject(this.records, function (b) {
              return b === a.id.toString();
            })),
            this.save(),
            a);
      },
      localStorage: function () {
        return localStorage;
      },
      jsonData: function (b) {
        return b && JSON.parse(b);
      },
      _clear: function () {
        var a = this.localStorage(),
          d = new RegExp("^" + this.name + "-");
        a.removeItem(this.name),
          f
            .chain(a)
            .keys()
            .filter(function (b) {
              return d.test(b);
            })
            .each(function (b) {
              a.removeItem(b);
            });
      },
      _storageSize: function () {
        return this.localStorage().length;
      },
    }),
    (e.LocalStorage.sync =
      window.Store.sync =
      e.localSync =
        function (b, s, r) {
          var q = s.localStorage || s.collection.localStorage,
            p,
            o,
            n = $.Deferred && $.Deferred();
          try {
            switch (b) {
              case "read":
                p = s.id != undefined ? q.find(s) : q.findAll();
                break;
              case "create":
                p = q.create(s);
                break;
              case "update":
                p = q.update(s);
                break;
              case "delete":
                p = q.destroy(s);
            }
          } catch (m) {
            m.code === DOMException.QUOTA_EXCEEDED_ERR && q._storageSize() === 0
              ? (o = "Private browsing is unsupported")
              : (o = m.message);
          }
          return (
            p
              ? (s.trigger("sync", s, p, r),
                r &&
                  r.success &&
                  (e.VERSION === "0.9.10" ? r.success(s, p, r) : r.success(p)),
                n && n.resolve(p))
              : ((o = o ? o : "Record Not Found"),
                s.trigger("error", s, o, r),
                r &&
                  r.error &&
                  (e.VERSION === "0.9.10" ? r.error(s, o, r) : r.error(o)),
                n && n.reject(o)),
            r && r.complete && r.complete(p),
            n && n.promise()
          );
        }),
    (e.ajaxSync = e.sync),
    (e.getSyncMethod = function (b) {
      return b.localStorage || (b.collection && b.collection.localStorage)
        ? e.localSync
        : e.ajaxSync;
    }),
    (e.sync = function (b, m, i) {
      return e.getSyncMethod(m).apply(this, [b, m, i]);
    }),
    e.LocalStorage
  );
});
(function (a) {
  if (typeof a.fn.each2 == "undefined") {
    a.extend(a.fn, {
      each2: function (f) {
        var d = a([0]),
          e = -1,
          b = this.length;
        while (
          ++e < b &&
          (d.context = d[0] = this[e]) &&
          f.call(d[0], e, d) !== false
        ) {}
        return this;
      },
    });
  }
})(jQuery);
(function (G, p) {
  if (window.Select2 !== p) {
    return;
  }
  var N,
    Q,
    A,
    c,
    a,
    s,
    r = {
      x: 0,
      y: 0,
    },
    y,
    z,
    N = {
      TAB: 9,
      ENTER: 13,
      ESC: 27,
      SPACE: 32,
      LEFT: 37,
      UP: 38,
      RIGHT: 39,
      DOWN: 40,
      SHIFT: 16,
      CTRL: 17,
      ALT: 18,
      PAGE_UP: 33,
      PAGE_DOWN: 34,
      HOME: 36,
      END: 35,
      BACKSPACE: 8,
      DELETE: 46,
      isArrow: function (R) {
        R = R.which ? R.which : R;
        switch (R) {
          case N.LEFT:
          case N.RIGHT:
          case N.UP:
          case N.DOWN:
            return true;
        }
        return false;
      },
      isControl: function (S) {
        var R = S.which;
        switch (R) {
          case N.SHIFT:
          case N.CTRL:
          case N.ALT:
            return true;
        }
        if (S.metaKey) {
          return true;
        }
        return false;
      },
      isFunctionKey: function (R) {
        R = R.which ? R.which : R;
        return R >= 112 && R <= 123;
      },
    },
    E = "<div class='select2-measure-scrollbar'></div>",
    d = {
      "\u24B6": "A",
      "\uFF21": "A",
      "\u00C0": "A",
      "\u00C1": "A",
      "\u00C2": "A",
      "\u1EA6": "A",
      "\u1EA4": "A",
      "\u1EAA": "A",
      "\u1EA8": "A",
      "\u00C3": "A",
      "\u0100": "A",
      "\u0102": "A",
      "\u1EB0": "A",
      "\u1EAE": "A",
      "\u1EB4": "A",
      "\u1EB2": "A",
      "\u0226": "A",
      "\u01E0": "A",
      "\u00C4": "A",
      "\u01DE": "A",
      "\u1EA2": "A",
      "\u00C5": "A",
      "\u01FA": "A",
      "\u01CD": "A",
      "\u0200": "A",
      "\u0202": "A",
      "\u1EA0": "A",
      "\u1EAC": "A",
      "\u1EB6": "A",
      "\u1E00": "A",
      "\u0104": "A",
      "\u023A": "A",
      "\u2C6F": "A",
      "\uA732": "AA",
      "\u00C6": "AE",
      "\u01FC": "AE",
      "\u01E2": "AE",
      "\uA734": "AO",
      "\uA736": "AU",
      "\uA738": "AV",
      "\uA73A": "AV",
      "\uA73C": "AY",
      "\u24B7": "B",
      "\uFF22": "B",
      "\u1E02": "B",
      "\u1E04": "B",
      "\u1E06": "B",
      "\u0243": "B",
      "\u0182": "B",
      "\u0181": "B",
      "\u24B8": "C",
      "\uFF23": "C",
      "\u0106": "C",
      "\u0108": "C",
      "\u010A": "C",
      "\u010C": "C",
      "\u00C7": "C",
      "\u1E08": "C",
      "\u0187": "C",
      "\u023B": "C",
      "\uA73E": "C",
      "\u24B9": "D",
      "\uFF24": "D",
      "\u1E0A": "D",
      "\u010E": "D",
      "\u1E0C": "D",
      "\u1E10": "D",
      "\u1E12": "D",
      "\u1E0E": "D",
      "\u0110": "D",
      "\u018B": "D",
      "\u018A": "D",
      "\u0189": "D",
      "\uA779": "D",
      "\u01F1": "DZ",
      "\u01C4": "DZ",
      "\u01F2": "Dz",
      "\u01C5": "Dz",
      "\u24BA": "E",
      "\uFF25": "E",
      "\u00C8": "E",
      "\u00C9": "E",
      "\u00CA": "E",
      "\u1EC0": "E",
      "\u1EBE": "E",
      "\u1EC4": "E",
      "\u1EC2": "E",
      "\u1EBC": "E",
      "\u0112": "E",
      "\u1E14": "E",
      "\u1E16": "E",
      "\u0114": "E",
      "\u0116": "E",
      "\u00CB": "E",
      "\u1EBA": "E",
      "\u011A": "E",
      "\u0204": "E",
      "\u0206": "E",
      "\u1EB8": "E",
      "\u1EC6": "E",
      "\u0228": "E",
      "\u1E1C": "E",
      "\u0118": "E",
      "\u1E18": "E",
      "\u1E1A": "E",
      "\u0190": "E",
      "\u018E": "E",
      "\u24BB": "F",
      "\uFF26": "F",
      "\u1E1E": "F",
      "\u0191": "F",
      "\uA77B": "F",
      "\u24BC": "G",
      "\uFF27": "G",
      "\u01F4": "G",
      "\u011C": "G",
      "\u1E20": "G",
      "\u011E": "G",
      "\u0120": "G",
      "\u01E6": "G",
      "\u0122": "G",
      "\u01E4": "G",
      "\u0193": "G",
      "\uA7A0": "G",
      "\uA77D": "G",
      "\uA77E": "G",
      "\u24BD": "H",
      "\uFF28": "H",
      "\u0124": "H",
      "\u1E22": "H",
      "\u1E26": "H",
      "\u021E": "H",
      "\u1E24": "H",
      "\u1E28": "H",
      "\u1E2A": "H",
      "\u0126": "H",
      "\u2C67": "H",
      "\u2C75": "H",
      "\uA78D": "H",
      "\u24BE": "I",
      "\uFF29": "I",
      "\u00CC": "I",
      "\u00CD": "I",
      "\u00CE": "I",
      "\u0128": "I",
      "\u012A": "I",
      "\u012C": "I",
      "\u0130": "I",
      "\u00CF": "I",
      "\u1E2E": "I",
      "\u1EC8": "I",
      "\u01CF": "I",
      "\u0208": "I",
      "\u020A": "I",
      "\u1ECA": "I",
      "\u012E": "I",
      "\u1E2C": "I",
      "\u0197": "I",
      "\u24BF": "J",
      "\uFF2A": "J",
      "\u0134": "J",
      "\u0248": "J",
      "\u24C0": "K",
      "\uFF2B": "K",
      "\u1E30": "K",
      "\u01E8": "K",
      "\u1E32": "K",
      "\u0136": "K",
      "\u1E34": "K",
      "\u0198": "K",
      "\u2C69": "K",
      "\uA740": "K",
      "\uA742": "K",
      "\uA744": "K",
      "\uA7A2": "K",
      "\u24C1": "L",
      "\uFF2C": "L",
      "\u013F": "L",
      "\u0139": "L",
      "\u013D": "L",
      "\u1E36": "L",
      "\u1E38": "L",
      "\u013B": "L",
      "\u1E3C": "L",
      "\u1E3A": "L",
      "\u0141": "L",
      "\u023D": "L",
      "\u2C62": "L",
      "\u2C60": "L",
      "\uA748": "L",
      "\uA746": "L",
      "\uA780": "L",
      "\u01C7": "LJ",
      "\u01C8": "Lj",
      "\u24C2": "M",
      "\uFF2D": "M",
      "\u1E3E": "M",
      "\u1E40": "M",
      "\u1E42": "M",
      "\u2C6E": "M",
      "\u019C": "M",
      "\u24C3": "N",
      "\uFF2E": "N",
      "\u01F8": "N",
      "\u0143": "N",
      "\u00D1": "N",
      "\u1E44": "N",
      "\u0147": "N",
      "\u1E46": "N",
      "\u0145": "N",
      "\u1E4A": "N",
      "\u1E48": "N",
      "\u0220": "N",
      "\u019D": "N",
      "\uA790": "N",
      "\uA7A4": "N",
      "\u01CA": "NJ",
      "\u01CB": "Nj",
      "\u24C4": "O",
      "\uFF2F": "O",
      "\u00D2": "O",
      "\u00D3": "O",
      "\u00D4": "O",
      "\u1ED2": "O",
      "\u1ED0": "O",
      "\u1ED6": "O",
      "\u1ED4": "O",
      "\u00D5": "O",
      "\u1E4C": "O",
      "\u022C": "O",
      "\u1E4E": "O",
      "\u014C": "O",
      "\u1E50": "O",
      "\u1E52": "O",
      "\u014E": "O",
      "\u022E": "O",
      "\u0230": "O",
      "\u00D6": "O",
      "\u022A": "O",
      "\u1ECE": "O",
      "\u0150": "O",
      "\u01D1": "O",
      "\u020C": "O",
      "\u020E": "O",
      "\u01A0": "O",
      "\u1EDC": "O",
      "\u1EDA": "O",
      "\u1EE0": "O",
      "\u1EDE": "O",
      "\u1EE2": "O",
      "\u1ECC": "O",
      "\u1ED8": "O",
      "\u01EA": "O",
      "\u01EC": "O",
      "\u00D8": "O",
      "\u01FE": "O",
      "\u0186": "O",
      "\u019F": "O",
      "\uA74A": "O",
      "\uA74C": "O",
      "\u01A2": "OI",
      "\uA74E": "OO",
      "\u0222": "OU",
      "\u24C5": "P",
      "\uFF30": "P",
      "\u1E54": "P",
      "\u1E56": "P",
      "\u01A4": "P",
      "\u2C63": "P",
      "\uA750": "P",
      "\uA752": "P",
      "\uA754": "P",
      "\u24C6": "Q",
      "\uFF31": "Q",
      "\uA756": "Q",
      "\uA758": "Q",
      "\u024A": "Q",
      "\u24C7": "R",
      "\uFF32": "R",
      "\u0154": "R",
      "\u1E58": "R",
      "\u0158": "R",
      "\u0210": "R",
      "\u0212": "R",
      "\u1E5A": "R",
      "\u1E5C": "R",
      "\u0156": "R",
      "\u1E5E": "R",
      "\u024C": "R",
      "\u2C64": "R",
      "\uA75A": "R",
      "\uA7A6": "R",
      "\uA782": "R",
      "\u24C8": "S",
      "\uFF33": "S",
      "\u1E9E": "S",
      "\u015A": "S",
      "\u1E64": "S",
      "\u015C": "S",
      "\u1E60": "S",
      "\u0160": "S",
      "\u1E66": "S",
      "\u1E62": "S",
      "\u1E68": "S",
      "\u0218": "S",
      "\u015E": "S",
      "\u2C7E": "S",
      "\uA7A8": "S",
      "\uA784": "S",
      "\u24C9": "T",
      "\uFF34": "T",
      "\u1E6A": "T",
      "\u0164": "T",
      "\u1E6C": "T",
      "\u021A": "T",
      "\u0162": "T",
      "\u1E70": "T",
      "\u1E6E": "T",
      "\u0166": "T",
      "\u01AC": "T",
      "\u01AE": "T",
      "\u023E": "T",
      "\uA786": "T",
      "\uA728": "TZ",
      "\u24CA": "U",
      "\uFF35": "U",
      "\u00D9": "U",
      "\u00DA": "U",
      "\u00DB": "U",
      "\u0168": "U",
      "\u1E78": "U",
      "\u016A": "U",
      "\u1E7A": "U",
      "\u016C": "U",
      "\u00DC": "U",
      "\u01DB": "U",
      "\u01D7": "U",
      "\u01D5": "U",
      "\u01D9": "U",
      "\u1EE6": "U",
      "\u016E": "U",
      "\u0170": "U",
      "\u01D3": "U",
      "\u0214": "U",
      "\u0216": "U",
      "\u01AF": "U",
      "\u1EEA": "U",
      "\u1EE8": "U",
      "\u1EEE": "U",
      "\u1EEC": "U",
      "\u1EF0": "U",
      "\u1EE4": "U",
      "\u1E72": "U",
      "\u0172": "U",
      "\u1E76": "U",
      "\u1E74": "U",
      "\u0244": "U",
      "\u24CB": "V",
      "\uFF36": "V",
      "\u1E7C": "V",
      "\u1E7E": "V",
      "\u01B2": "V",
      "\uA75E": "V",
      "\u0245": "V",
      "\uA760": "VY",
      "\u24CC": "W",
      "\uFF37": "W",
      "\u1E80": "W",
      "\u1E82": "W",
      "\u0174": "W",
      "\u1E86": "W",
      "\u1E84": "W",
      "\u1E88": "W",
      "\u2C72": "W",
      "\u24CD": "X",
      "\uFF38": "X",
      "\u1E8A": "X",
      "\u1E8C": "X",
      "\u24CE": "Y",
      "\uFF39": "Y",
      "\u1EF2": "Y",
      "\u00DD": "Y",
      "\u0176": "Y",
      "\u1EF8": "Y",
      "\u0232": "Y",
      "\u1E8E": "Y",
      "\u0178": "Y",
      "\u1EF6": "Y",
      "\u1EF4": "Y",
      "\u01B3": "Y",
      "\u024E": "Y",
      "\u1EFE": "Y",
      "\u24CF": "Z",
      "\uFF3A": "Z",
      "\u0179": "Z",
      "\u1E90": "Z",
      "\u017B": "Z",
      "\u017D": "Z",
      "\u1E92": "Z",
      "\u1E94": "Z",
      "\u01B5": "Z",
      "\u0224": "Z",
      "\u2C7F": "Z",
      "\u2C6B": "Z",
      "\uA762": "Z",
      "\u24D0": "a",
      "\uFF41": "a",
      "\u1E9A": "a",
      "\u00E0": "a",
      "\u00E1": "a",
      "\u00E2": "a",
      "\u1EA7": "a",
      "\u1EA5": "a",
      "\u1EAB": "a",
      "\u1EA9": "a",
      "\u00E3": "a",
      "\u0101": "a",
      "\u0103": "a",
      "\u1EB1": "a",
      "\u1EAF": "a",
      "\u1EB5": "a",
      "\u1EB3": "a",
      "\u0227": "a",
      "\u01E1": "a",
      "\u00E4": "a",
      "\u01DF": "a",
      "\u1EA3": "a",
      "\u00E5": "a",
      "\u01FB": "a",
      "\u01CE": "a",
      "\u0201": "a",
      "\u0203": "a",
      "\u1EA1": "a",
      "\u1EAD": "a",
      "\u1EB7": "a",
      "\u1E01": "a",
      "\u0105": "a",
      "\u2C65": "a",
      "\u0250": "a",
      "\uA733": "aa",
      "\u00E6": "ae",
      "\u01FD": "ae",
      "\u01E3": "ae",
      "\uA735": "ao",
      "\uA737": "au",
      "\uA739": "av",
      "\uA73B": "av",
      "\uA73D": "ay",
      "\u24D1": "b",
      "\uFF42": "b",
      "\u1E03": "b",
      "\u1E05": "b",
      "\u1E07": "b",
      "\u0180": "b",
      "\u0183": "b",
      "\u0253": "b",
      "\u24D2": "c",
      "\uFF43": "c",
      "\u0107": "c",
      "\u0109": "c",
      "\u010B": "c",
      "\u010D": "c",
      "\u00E7": "c",
      "\u1E09": "c",
      "\u0188": "c",
      "\u023C": "c",
      "\uA73F": "c",
      "\u2184": "c",
      "\u24D3": "d",
      "\uFF44": "d",
      "\u1E0B": "d",
      "\u010F": "d",
      "\u1E0D": "d",
      "\u1E11": "d",
      "\u1E13": "d",
      "\u1E0F": "d",
      "\u0111": "d",
      "\u018C": "d",
      "\u0256": "d",
      "\u0257": "d",
      "\uA77A": "d",
      "\u01F3": "dz",
      "\u01C6": "dz",
      "\u24D4": "e",
      "\uFF45": "e",
      "\u00E8": "e",
      "\u00E9": "e",
      "\u00EA": "e",
      "\u1EC1": "e",
      "\u1EBF": "e",
      "\u1EC5": "e",
      "\u1EC3": "e",
      "\u1EBD": "e",
      "\u0113": "e",
      "\u1E15": "e",
      "\u1E17": "e",
      "\u0115": "e",
      "\u0117": "e",
      "\u00EB": "e",
      "\u1EBB": "e",
      "\u011B": "e",
      "\u0205": "e",
      "\u0207": "e",
      "\u1EB9": "e",
      "\u1EC7": "e",
      "\u0229": "e",
      "\u1E1D": "e",
      "\u0119": "e",
      "\u1E19": "e",
      "\u1E1B": "e",
      "\u0247": "e",
      "\u025B": "e",
      "\u01DD": "e",
      "\u24D5": "f",
      "\uFF46": "f",
      "\u1E1F": "f",
      "\u0192": "f",
      "\uA77C": "f",
      "\u24D6": "g",
      "\uFF47": "g",
      "\u01F5": "g",
      "\u011D": "g",
      "\u1E21": "g",
      "\u011F": "g",
      "\u0121": "g",
      "\u01E7": "g",
      "\u0123": "g",
      "\u01E5": "g",
      "\u0260": "g",
      "\uA7A1": "g",
      "\u1D79": "g",
      "\uA77F": "g",
      "\u24D7": "h",
      "\uFF48": "h",
      "\u0125": "h",
      "\u1E23": "h",
      "\u1E27": "h",
      "\u021F": "h",
      "\u1E25": "h",
      "\u1E29": "h",
      "\u1E2B": "h",
      "\u1E96": "h",
      "\u0127": "h",
      "\u2C68": "h",
      "\u2C76": "h",
      "\u0265": "h",
      "\u0195": "hv",
      "\u24D8": "i",
      "\uFF49": "i",
      "\u00EC": "i",
      "\u00ED": "i",
      "\u00EE": "i",
      "\u0129": "i",
      "\u012B": "i",
      "\u012D": "i",
      "\u00EF": "i",
      "\u1E2F": "i",
      "\u1EC9": "i",
      "\u01D0": "i",
      "\u0209": "i",
      "\u020B": "i",
      "\u1ECB": "i",
      "\u012F": "i",
      "\u1E2D": "i",
      "\u0268": "i",
      "\u0131": "i",
      "\u24D9": "j",
      "\uFF4A": "j",
      "\u0135": "j",
      "\u01F0": "j",
      "\u0249": "j",
      "\u24DA": "k",
      "\uFF4B": "k",
      "\u1E31": "k",
      "\u01E9": "k",
      "\u1E33": "k",
      "\u0137": "k",
      "\u1E35": "k",
      "\u0199": "k",
      "\u2C6A": "k",
      "\uA741": "k",
      "\uA743": "k",
      "\uA745": "k",
      "\uA7A3": "k",
      "\u24DB": "l",
      "\uFF4C": "l",
      "\u0140": "l",
      "\u013A": "l",
      "\u013E": "l",
      "\u1E37": "l",
      "\u1E39": "l",
      "\u013C": "l",
      "\u1E3D": "l",
      "\u1E3B": "l",
      "\u017F": "l",
      "\u0142": "l",
      "\u019A": "l",
      "\u026B": "l",
      "\u2C61": "l",
      "\uA749": "l",
      "\uA781": "l",
      "\uA747": "l",
      "\u01C9": "lj",
      "\u24DC": "m",
      "\uFF4D": "m",
      "\u1E3F": "m",
      "\u1E41": "m",
      "\u1E43": "m",
      "\u0271": "m",
      "\u026F": "m",
      "\u24DD": "n",
      "\uFF4E": "n",
      "\u01F9": "n",
      "\u0144": "n",
      "\u00F1": "n",
      "\u1E45": "n",
      "\u0148": "n",
      "\u1E47": "n",
      "\u0146": "n",
      "\u1E4B": "n",
      "\u1E49": "n",
      "\u019E": "n",
      "\u0272": "n",
      "\u0149": "n",
      "\uA791": "n",
      "\uA7A5": "n",
      "\u01CC": "nj",
      "\u24DE": "o",
      "\uFF4F": "o",
      "\u00F2": "o",
      "\u00F3": "o",
      "\u00F4": "o",
      "\u1ED3": "o",
      "\u1ED1": "o",
      "\u1ED7": "o",
      "\u1ED5": "o",
      "\u00F5": "o",
      "\u1E4D": "o",
      "\u022D": "o",
      "\u1E4F": "o",
      "\u014D": "o",
      "\u1E51": "o",
      "\u1E53": "o",
      "\u014F": "o",
      "\u022F": "o",
      "\u0231": "o",
      "\u00F6": "o",
      "\u022B": "o",
      "\u1ECF": "o",
      "\u0151": "o",
      "\u01D2": "o",
      "\u020D": "o",
      "\u020F": "o",
      "\u01A1": "o",
      "\u1EDD": "o",
      "\u1EDB": "o",
      "\u1EE1": "o",
      "\u1EDF": "o",
      "\u1EE3": "o",
      "\u1ECD": "o",
      "\u1ED9": "o",
      "\u01EB": "o",
      "\u01ED": "o",
      "\u00F8": "o",
      "\u01FF": "o",
      "\u0254": "o",
      "\uA74B": "o",
      "\uA74D": "o",
      "\u0275": "o",
      "\u01A3": "oi",
      "\u0223": "ou",
      "\uA74F": "oo",
      "\u24DF": "p",
      "\uFF50": "p",
      "\u1E55": "p",
      "\u1E57": "p",
      "\u01A5": "p",
      "\u1D7D": "p",
      "\uA751": "p",
      "\uA753": "p",
      "\uA755": "p",
      "\u24E0": "q",
      "\uFF51": "q",
      "\u024B": "q",
      "\uA757": "q",
      "\uA759": "q",
      "\u24E1": "r",
      "\uFF52": "r",
      "\u0155": "r",
      "\u1E59": "r",
      "\u0159": "r",
      "\u0211": "r",
      "\u0213": "r",
      "\u1E5B": "r",
      "\u1E5D": "r",
      "\u0157": "r",
      "\u1E5F": "r",
      "\u024D": "r",
      "\u027D": "r",
      "\uA75B": "r",
      "\uA7A7": "r",
      "\uA783": "r",
      "\u24E2": "s",
      "\uFF53": "s",
      "\u00DF": "s",
      "\u015B": "s",
      "\u1E65": "s",
      "\u015D": "s",
      "\u1E61": "s",
      "\u0161": "s",
      "\u1E67": "s",
      "\u1E63": "s",
      "\u1E69": "s",
      "\u0219": "s",
      "\u015F": "s",
      "\u023F": "s",
      "\uA7A9": "s",
      "\uA785": "s",
      "\u1E9B": "s",
      "\u24E3": "t",
      "\uFF54": "t",
      "\u1E6B": "t",
      "\u1E97": "t",
      "\u0165": "t",
      "\u1E6D": "t",
      "\u021B": "t",
      "\u0163": "t",
      "\u1E71": "t",
      "\u1E6F": "t",
      "\u0167": "t",
      "\u01AD": "t",
      "\u0288": "t",
      "\u2C66": "t",
      "\uA787": "t",
      "\uA729": "tz",
      "\u24E4": "u",
      "\uFF55": "u",
      "\u00F9": "u",
      "\u00FA": "u",
      "\u00FB": "u",
      "\u0169": "u",
      "\u1E79": "u",
      "\u016B": "u",
      "\u1E7B": "u",
      "\u016D": "u",
      "\u00FC": "u",
      "\u01DC": "u",
      "\u01D8": "u",
      "\u01D6": "u",
      "\u01DA": "u",
      "\u1EE7": "u",
      "\u016F": "u",
      "\u0171": "u",
      "\u01D4": "u",
      "\u0215": "u",
      "\u0217": "u",
      "\u01B0": "u",
      "\u1EEB": "u",
      "\u1EE9": "u",
      "\u1EEF": "u",
      "\u1EED": "u",
      "\u1EF1": "u",
      "\u1EE5": "u",
      "\u1E73": "u",
      "\u0173": "u",
      "\u1E77": "u",
      "\u1E75": "u",
      "\u0289": "u",
      "\u24E5": "v",
      "\uFF56": "v",
      "\u1E7D": "v",
      "\u1E7F": "v",
      "\u028B": "v",
      "\uA75F": "v",
      "\u028C": "v",
      "\uA761": "vy",
      "\u24E6": "w",
      "\uFF57": "w",
      "\u1E81": "w",
      "\u1E83": "w",
      "\u0175": "w",
      "\u1E87": "w",
      "\u1E85": "w",
      "\u1E98": "w",
      "\u1E89": "w",
      "\u2C73": "w",
      "\u24E7": "x",
      "\uFF58": "x",
      "\u1E8B": "x",
      "\u1E8D": "x",
      "\u24E8": "y",
      "\uFF59": "y",
      "\u1EF3": "y",
      "\u00FD": "y",
      "\u0177": "y",
      "\u1EF9": "y",
      "\u0233": "y",
      "\u1E8F": "y",
      "\u00FF": "y",
      "\u1EF7": "y",
      "\u1E99": "y",
      "\u1EF5": "y",
      "\u01B4": "y",
      "\u024F": "y",
      "\u1EFF": "y",
      "\u24E9": "z",
      "\uFF5A": "z",
      "\u017A": "z",
      "\u1E91": "z",
      "\u017C": "z",
      "\u017E": "z",
      "\u1E93": "z",
      "\u1E95": "z",
      "\u01B6": "z",
      "\u0225": "z",
      "\u0240": "z",
      "\u2C6C": "z",
      "\uA763": "z",
    };
  y = G(document);
  a = (function () {
    var R = 1;
    return function () {
      return R++;
    };
  })();
  function e(U) {
    var S, T, R, V;
    if (!U || U.length < 1) {
      return U;
    }
    S = "";
    for (T = 0, R = U.length; T < R; T++) {
      V = U.charAt(T);
      S += d[V] || V;
    }
    return S;
  }
  function t(T, U) {
    var S = 0,
      R = U.length;
    for (; S < R; S = S + 1) {
      if (w(T, U[S])) {
        return S;
      }
    }
    return -1;
  }
  function P() {
    var R = G(E);
    R.appendTo("body");
    var S = {
      width: R.width() - R[0].clientWidth,
      height: R.height() - R[0].clientHeight,
    };
    R.remove();
    return S;
  }
  function w(S, R) {
    if (S === R) {
      return true;
    }
    if (S === p || R === p) {
      return false;
    }
    if (S === null || R === null) {
      return false;
    }
    if (S.constructor === String) {
      return S + "" === R + "";
    }
    if (R.constructor === String) {
      return R + "" === S + "";
    }
    return false;
  }
  function i(S, U) {
    var V, T, R;
    if (S === null || S.length < 1) {
      return [];
    }
    V = S.split(U);
    for (T = 0, R = V.length; T < R; T = T + 1) {
      V[T] = G.trim(V[T]);
    }
    return V;
  }
  function h(R) {
    return R.outerWidth(false) - R.width();
  }
  function I(S) {
    var R = "keyup-change-value";
    S.on("keydown", function () {
      if (G.data(S, R) === p) {
        G.data(S, R, S.val());
      }
    });
    S.on("keyup", function () {
      var T = G.data(S, R);
      if (T !== p && S.val() !== T) {
        G.removeData(S, R);
        S.trigger("keyup-change");
      }
    });
  }
  y.on("mousemove", function (R) {
    r.x = R.pageX;
    r.y = R.pageY;
  });
  function M(R) {
    R.on("mousemove", function (T) {
      var S = r;
      if (S === p || S.x !== T.pageX || S.y !== T.pageY) {
        G(T.target).trigger("mousemove-filtered", T);
      }
    });
  }
  function n(U, S, R) {
    R = R || p;
    var T;
    return function () {
      var V = arguments;
      window.clearTimeout(T);
      T = window.setTimeout(function () {
        S.apply(R, V);
      }, U);
    };
  }
  function v(T) {
    var R = false,
      S;
    return function () {
      if (R === false) {
        S = T();
        R = true;
      }
      return S;
    };
  }
  function o(R, T) {
    var S = n(R, function (U) {
      T.trigger("scroll-debounced", U);
    });
    T.on("scroll", function (U) {
      if (t(U.target, T.get()) >= 0) {
        S(U);
      }
    });
  }
  function L(R) {
    if (R[0] === document.activeElement) {
      return;
    }
    window.setTimeout(function () {
      var T = R[0],
        U = R.val().length,
        S;
      R.focus();
      if (R.is(":visible") && T === document.activeElement) {
        if (T.setSelectionRange) {
          T.setSelectionRange(U, U);
        } else {
          if (T.createTextRange) {
            S = T.createTextRange();
            S.collapse(false);
            S.select();
          }
        }
      }
    }, 0);
  }
  function f(R) {
    R = G(R)[0];
    var U = 0;
    var S = 0;
    if ("selectionStart" in R) {
      U = R.selectionStart;
      S = R.selectionEnd - U;
    } else {
      if ("selection" in document) {
        R.focus();
        var T = document.selection.createRange();
        S = document.selection.createRange().text.length;
        T.moveStart("character", -R.value.length);
        U = T.text.length - S;
      }
    }
    return {
      offset: U,
      length: S,
    };
  }
  function D(R) {
    R.preventDefault();
    R.stopPropagation();
  }
  function b(R) {
    R.preventDefault();
    R.stopImmediatePropagation();
  }
  function q(S) {
    if (!s) {
      var R = S[0].currentStyle || window.getComputedStyle(S[0], null);
      s = G(document.createElement("div")).css({
        position: "absolute",
        left: "-10000px",
        top: "-10000px",
        display: "none",
        fontSize: R.fontSize,
        fontFamily: R.fontFamily,
        fontStyle: R.fontStyle,
        fontWeight: R.fontWeight,
        letterSpacing: R.letterSpacing,
        textTransform: R.textTransform,
        whiteSpace: "nowrap",
      });
      s.attr("class", "select2-sizer");
      G("body").append(s);
    }
    s.text(S.val());
    return s.width();
  }
  function m(S, W, R) {
    var U,
      V = [],
      T;
    U = S.attr("class");
    if (U) {
      U = "" + U;
      G(U.split(" ")).each2(function () {
        if (this.indexOf("select2-") === 0) {
          V.push(this);
        }
      });
    }
    U = W.attr("class");
    if (U) {
      U = "" + U;
      G(U.split(" ")).each2(function () {
        if (this.indexOf("select2-") !== 0) {
          T = R(this);
          if (T) {
            V.push(T);
          }
        }
      });
    }
    S.attr("class", V.join(" "));
  }
  function x(W, V, T, R) {
    var U = e(W.toUpperCase()).indexOf(e(V.toUpperCase())),
      S = V.length;
    if (U < 0) {
      T.push(R(W));
      return;
    }
    T.push(R(W.substring(0, U)));
    T.push("<span class='select2-match'>");
    T.push(R(W.substring(U, U + S)));
    T.push("</span>");
    T.push(R(W.substring(U + S, W.length)));
  }
  function J(R) {
    var S = {
      "\\": "&#92;",
      "&": "&amp;",
      "<": "&lt;",
      ">": "&gt;",
      '"': "&quot;",
      "'": "&#39;",
      "/": "&#47;",
    };
    return String(R).replace(/[&<>"'\/\\]/g, function (T) {
      return S[T];
    });
  }
  function H(S) {
    var V,
      T = null,
      W = S.quietMillis || 100,
      U = S.url,
      R = this;
    return function (X) {
      window.clearTimeout(V);
      V = window.setTimeout(function () {
        var aa = S.data,
          Z = U,
          ac = S.transport || G.fn.select2.ajaxDefaults.transport,
          Y = {
            type: S.type || "GET",
            cache: S.cache || false,
            jsonpCallback: S.jsonpCallback || p,
            dataType: S.dataType || "json",
          },
          ab = G.extend({}, G.fn.select2.ajaxDefaults.params, Y);
        aa = aa ? aa.call(R, X.term, X.page, X.context) : null;
        Z = typeof Z === "function" ? Z.call(R, X.term, X.page, X.context) : Z;
        if (T) {
          T.abort();
        }
        if (S.params) {
          if (G.isFunction(S.params)) {
            G.extend(ab, S.params.call(R));
          } else {
            G.extend(ab, S.params);
          }
        }
        G.extend(ab, {
          url: Z,
          dataType: S.dataType,
          data: aa,
          success: function (ae) {
            var ad = S.results(ae, X.page);
            X.callback(ad);
          },
        });
        T = ac.call(R, ab);
      }, W);
    };
  }
  function K(S) {
    var V = S,
      U,
      T,
      W = function (X) {
        return "" + X.text;
      };
    if (G.isArray(V)) {
      T = V;
      V = {
        results: T,
      };
    }
    if (G.isFunction(V) === false) {
      T = V;
      V = function () {
        return T;
      };
    }
    var R = V();
    if (R.text) {
      W = R.text;
      if (!G.isFunction(W)) {
        U = R.text;
        W = function (X) {
          return X[U];
        };
      }
    }
    return function (Z) {
      var Y = Z.term,
        X = {
          results: [],
        },
        aa;
      if (Y === "") {
        Z.callback(V());
        return;
      }
      aa = function (ac, ae) {
        var ad, ab;
        ac = ac[0];
        if (ac.children) {
          ad = {};
          for (ab in ac) {
            if (ac.hasOwnProperty(ab)) {
              ad[ab] = ac[ab];
            }
          }
          ad.children = [];
          G(ac.children).each2(function (af, ag) {
            aa(ag, ad.children);
          });
          if (ad.children.length || Z.matcher(Y, W(ad), ac)) {
            ae.push(ad);
          }
        } else {
          if (Z.matcher(Y, W(ac), ac)) {
            ae.push(ac);
          }
        }
      };
      G(V().results).each2(function (ac, ab) {
        aa(ab, X.results);
      });
      Z.callback(X);
    };
  }
  function C(S) {
    var R = G.isFunction(S);
    return function (V) {
      var U = V.term,
        T = {
          results: [],
        };
      G(R ? S() : S).each(function () {
        var W = this.text !== p,
          X = W ? this.text : this;
        if (U === "" || V.matcher(U, X)) {
          T.results.push(
            W
              ? this
              : {
                  id: this,
                  text: this,
                }
          );
        }
      });
      V.callback(T);
    };
  }
  function B(R, S) {
    if (G.isFunction(R)) {
      return true;
    }
    if (!R) {
      return false;
    }
    throw new Error(S + " must be a function or a falsy value");
  }
  function F(R) {
    return G.isFunction(R) ? R() : R;
  }
  function u(R) {
    var S = 0;
    G.each(R, function (T, U) {
      if (U.children) {
        S += u(U.children);
      } else {
        S++;
      }
    });
    return S;
  }
  function g(Z, aa, X, R) {
    var S = Z,
      ab = false,
      U,
      Y,
      V,
      T,
      W;
    if (
      !R.createSearchChoice ||
      !R.tokenSeparators ||
      R.tokenSeparators.length < 1
    ) {
      return p;
    }
    while (true) {
      Y = -1;
      for (V = 0, T = R.tokenSeparators.length; V < T; V++) {
        W = R.tokenSeparators[V];
        Y = Z.indexOf(W);
        if (Y >= 0) {
          break;
        }
      }
      if (Y < 0) {
        break;
      }
      U = Z.substring(0, Y);
      Z = Z.substring(Y + W.length);
      if (U.length > 0) {
        U = R.createSearchChoice.call(this, U, aa);
        if (U !== p && U !== null && R.id(U) !== p && R.id(U) !== null) {
          ab = false;
          for (V = 0, T = aa.length; V < T; V++) {
            if (w(R.id(U), R.id(aa[V]))) {
              ab = true;
              break;
            }
          }
          if (!ab) {
            X(U);
          }
        }
      }
    }
    if (S !== Z) {
      return Z;
    }
  }
  function O(R, S) {
    var T = function () {};
    T.prototype = new R();
    T.prototype.constructor = T;
    T.prototype.parent = R.prototype;
    T.prototype = G.extend(T.prototype, S);
    return T;
  }
  Q = O(Object, {
    bind: function (S) {
      var R = this;
      return function () {
        S.apply(R, arguments);
      };
    },
    init: function (V) {
      var T,
        S,
        W = ".select2-results";
      this.opts = V = this.prepareOpts(V);
      this.id = V.id;
      if (
        V.element.data("select2") !== p &&
        V.element.data("select2") !== null
      ) {
        V.element.data("select2").destroy();
      }
      this.container = this.createContainer();
      this.containerId = "s2id_" + (V.element.attr("id") || "autogen" + a());
      this.containerSelector =
        "#" +
        this.containerId.replace(
          /([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,
          "\\$1"
        );
      this.container.attr("id", this.containerId);
      this.body = v(function () {
        return V.element.closest("body");
      });
      m(this.container, this.opts.element, this.opts.adaptContainerCssClass);
      this.container.attr("style", V.element.attr("style"));
      this.container.css(F(V.containerCss));
      this.container.addClass(F(V.containerCssClass));
      this.elementTabIndex = this.opts.element.attr("tabindex");
      this.opts.element
        .data("select2", this)
        .attr("tabindex", "-1")
        .before(this.container)
        .on("click.select2", D);
      this.container.data("select2", this);
      this.dropdown = this.container.find(".select2-drop");
      m(this.dropdown, this.opts.element, this.opts.adaptDropdownCssClass);
      this.dropdown.addClass(F(V.dropdownCssClass));
      this.dropdown.data("select2", this);
      this.dropdown.on("click", D);
      this.results = T = this.container.find(W);
      this.search = S = this.container.find("input.select2-input");
      this.queryCount = 0;
      this.resultsPage = 0;
      this.context = null;
      this.initContainer();
      this.container.on("click", D);
      M(this.results);
      this.dropdown.on(
        "mousemove-filtered touchstart touchmove touchend",
        W,
        this.bind(this.highlightUnderEvent)
      );
      o(80, this.results);
      this.dropdown.on("scroll-debounced", W, this.bind(this.loadMoreIfNeeded));
      G(this.container).on("change", ".select2-input", function (X) {
        X.stopPropagation();
      });
      G(this.dropdown).on("change", ".select2-input", function (X) {
        X.stopPropagation();
      });
      if (G.fn.mousewheel) {
        T.mousewheel(function (aa, ab, Y, X) {
          var Z = T.scrollTop();
          if (X > 0 && Z - X <= 0) {
            T.scrollTop(0);
            D(aa);
          } else {
            if (
              X < 0 &&
              T.get(0).scrollHeight - T.scrollTop() + X <= T.height()
            ) {
              T.scrollTop(T.get(0).scrollHeight - T.height());
              D(aa);
            }
          }
        });
      }
      I(S);
      S.on("keyup-change input paste", this.bind(this.updateResults));
      S.on("focus", function () {
        S.addClass("select2-focused");
      });
      S.on("blur", function () {
        S.removeClass("select2-focused");
      });
      this.dropdown.on(
        "mouseup",
        W,
        this.bind(function (X) {
          if (G(X.target).closest(".select2-result-selectable").length > 0) {
            this.highlightUnderEvent(X);
            this.selectHighlighted(X);
          }
        })
      );
      this.dropdown.on("click mouseup mousedown", function (X) {
        X.stopPropagation();
      });
      if (G.isFunction(this.opts.initSelection)) {
        this.initSelection();
        this.monitorSource();
      }
      if (V.maximumInputLength !== null) {
        this.search.attr("maxlength", V.maximumInputLength);
      }
      var U = V.element.prop("disabled");
      if (U === p) {
        U = false;
      }
      this.enable(!U);
      var R = V.element.prop("readonly");
      if (R === p) {
        R = false;
      }
      this.readonly(R);
      z = z || P();
      this.autofocus = V.element.prop("autofocus");
      V.element.prop("autofocus", false);
      if (this.autofocus) {
        this.focus();
      }
      this.nextSearchTerm = p;
    },
    destroy: function () {
      var S = this.opts.element,
        R = S.data("select2");
      this.close();
      if (this.propertyObserver) {
        delete this.propertyObserver;
        this.propertyObserver = null;
      }
      if (R !== p) {
        R.container.remove();
        R.dropdown.remove();
        S.removeClass("select2-offscreen")
          .removeData("select2")
          .off(".select2")
          .prop("autofocus", this.autofocus || false);
        if (this.elementTabIndex) {
          S.attr({
            tabindex: this.elementTabIndex,
          });
        } else {
          S.removeAttr("tabindex");
        }
        S.show();
      }
    },
    optionToData: function (R) {
      if (R.is("option")) {
        return {
          id: R.prop("value"),
          text: R.text(),
          element: R.get(),
          css: R.attr("class"),
          disabled: R.prop("disabled"),
          locked: w(R.attr("locked"), "locked") || w(R.data("locked"), true),
        };
      } else {
        if (R.is("optgroup")) {
          return {
            text: R.attr("label"),
            children: [],
            element: R.get(),
            css: R.attr("class"),
          };
        }
      }
    },
    prepareOpts: function (W) {
      var U,
        S,
        R,
        V,
        T = this;
      U = W.element;
      if (U.get(0).tagName.toLowerCase() === "select") {
        this.select = S = W.element;
      }
      if (S) {
        G.each(
          [
            "id",
            "multiple",
            "ajax",
            "query",
            "createSearchChoice",
            "initSelection",
            "data",
            "tags",
          ],
          function () {
            if (this in W) {
              throw new Error(
                "Option '" +
                  this +
                  "' is not allowed for Select2 when attached to a <select> element."
              );
            }
          }
        );
      }
      W = G.extend(
        {},
        {
          populateResults: function (X, Y, aa) {
            var Z,
              ab = this.opts.id;
            Z = function (ai, ac, ah) {
              var aj, ae, ao, al, af, an, ad, am, ak, ag;
              ai = W.sortResults(ai, ac, aa);
              for (aj = 0, ae = ai.length; aj < ae; aj = aj + 1) {
                ao = ai[aj];
                af = ao.disabled === true;
                al = !af && ab(ao) !== p;
                an = ao.children && ao.children.length > 0;
                ad = G("<li></li>");
                ad.addClass("select2-results-dept-" + ah);
                ad.addClass("select2-result");
                ad.addClass(
                  al
                    ? "select2-result-selectable"
                    : "select2-result-unselectable"
                );
                if (af) {
                  ad.addClass("select2-disabled");
                }
                if (an) {
                  ad.addClass("select2-result-with-children");
                }
                ad.addClass(T.opts.formatResultCssClass(ao));
                am = G(document.createElement("div"));
                am.addClass("select2-result-label");
                ag = W.formatResult(ao, am, aa, T.opts.escapeMarkup);
                if (ag !== p) {
                  am.html(ag);
                }
                ad.append(am);
                if (an) {
                  ak = G("<ul></ul>");
                  ak.addClass("select2-result-sub");
                  Z(ao.children, ak, ah + 1);
                  ad.append(ak);
                }
                ad.data("select2-data", ao);
                ac.append(ad);
              }
            };
            Z(Y, X, 0);
          },
        },
        G.fn.select2.defaults,
        W
      );
      if (typeof W.id !== "function") {
        R = W.id;
        W.id = function (X) {
          return X[R];
        };
      }
      if (G.isArray(W.element.data("select2Tags"))) {
        if ("tags" in W) {
          throw (
            "tags specified as both an attribute 'data-select2-tags' and in options of Select2 " +
            W.element.attr("id")
          );
        }
        W.tags = W.element.data("select2Tags");
      }
      if (S) {
        W.query = this.bind(function (ab) {
          var aa = {
              results: [],
              more: false,
            },
            Z = ab.term,
            Y,
            X,
            ac;
          ac = function (ad, af) {
            var ae;
            if (ad.is("option")) {
              if (ab.matcher(Z, ad.text(), ad)) {
                af.push(T.optionToData(ad));
              }
            } else {
              if (ad.is("optgroup")) {
                ae = T.optionToData(ad);
                ad.children().each2(function (ag, ah) {
                  ac(ah, ae.children);
                });
                if (ae.children.length > 0) {
                  af.push(ae);
                }
              }
            }
          };
          Y = U.children();
          if (this.getPlaceholder() !== p && Y.length > 0) {
            X = this.getPlaceholderOption();
            if (X) {
              Y = Y.not(X);
            }
          }
          Y.each2(function (ad, ae) {
            ac(ae, aa.results);
          });
          ab.callback(aa);
        });
        W.id = function (X) {
          return X.id;
        };
        W.formatResultCssClass = function (X) {
          return X.css;
        };
      } else {
        if (!("query" in W)) {
          if ("ajax" in W) {
            V = W.element.data("ajax-url");
            if (V && V.length > 0) {
              W.ajax.url = V;
            }
            W.query = H.call(W.element, W.ajax);
          } else {
            if ("data" in W) {
              W.query = K(W.data);
            } else {
              if ("tags" in W) {
                W.query = C(W.tags);
                if (W.createSearchChoice === p) {
                  W.createSearchChoice = function (X) {
                    return {
                      id: G.trim(X),
                      text: G.trim(X),
                    };
                  };
                }
                if (W.initSelection === p) {
                  W.initSelection = function (X, Z) {
                    var Y = [];
                    G(i(X.val(), W.separator)).each(function () {
                      var ab = {
                          id: this,
                          text: this,
                        },
                        aa = W.tags;
                      if (G.isFunction(aa)) {
                        aa = aa();
                      }
                      G(aa).each(function () {
                        if (w(this.id, ab.id)) {
                          ab = this;
                          return false;
                        }
                      });
                      Y.push(ab);
                    });
                    Z(Y);
                  };
                }
              }
            }
          }
        }
      }
      if (typeof W.query !== "function") {
        throw "query function not defined for Select2 " + W.element.attr("id");
      }
      return W;
    },
    monitorSource: function () {
      var S = this.opts.element,
        T,
        R;
      S.on(
        "change.select2",
        this.bind(function (U) {
          if (this.opts.element.data("select2-change-triggered") !== true) {
            this.initSelection();
          }
        })
      );
      T = this.bind(function () {
        var V = S.prop("disabled");
        if (V === p) {
          V = false;
        }
        this.enable(!V);
        var U = S.prop("readonly");
        if (U === p) {
          U = false;
        }
        this.readonly(U);
        m(this.container, this.opts.element, this.opts.adaptContainerCssClass);
        this.container.addClass(F(this.opts.containerCssClass));
        m(this.dropdown, this.opts.element, this.opts.adaptDropdownCssClass);
        this.dropdown.addClass(F(this.opts.dropdownCssClass));
      });
      S.on("propertychange.select2", T);
      if (this.mutationCallback === p) {
        this.mutationCallback = function (U) {
          U.forEach(T);
        };
      }
      R =
        window.MutationObserver ||
        window.WebKitMutationObserver ||
        window.MozMutationObserver;
      if (R !== p) {
        if (this.propertyObserver) {
          delete this.propertyObserver;
          this.propertyObserver = null;
        }
        this.propertyObserver = new R(this.mutationCallback);
        this.propertyObserver.observe(S.get(0), {
          attributes: true,
          subtree: false,
        });
      }
    },
    triggerSelect: function (S) {
      var R = G.Event("select2-selecting", {
        val: this.id(S),
        object: S,
      });
      this.opts.element.trigger(R);
      return !R.isDefaultPrevented();
    },
    triggerChange: function (R) {
      R = R || {};
      R = G.extend({}, R, {
        type: "change",
        val: this.val(),
      });
      this.opts.element.data("select2-change-triggered", true);
      this.opts.element.trigger(R);
      this.opts.element.data("select2-change-triggered", false);
      this.opts.element.click();
      if (this.opts.blurOnChange) {
        this.opts.element.blur();
      }
    },
    isInterfaceEnabled: function () {
      return this.enabledInterface === true;
    },
    enableInterface: function () {
      var R = this._enabled && !this._readonly,
        S = !R;
      if (R === this.enabledInterface) {
        return false;
      }
      this.container.toggleClass("select2-container-disabled", S);
      this.close();
      this.enabledInterface = R;
      return true;
    },
    enable: function (R) {
      if (R === p) {
        R = true;
      }
      if (this._enabled === R) {
        return;
      }
      this._enabled = R;
      this.opts.element.prop("disabled", !R);
      this.enableInterface();
    },
    disable: function () {
      this.enable(false);
    },
    readonly: function (R) {
      if (R === p) {
        R = false;
      }
      if (this._readonly === R) {
        return false;
      }
      this._readonly = R;
      this.opts.element.prop("readonly", R);
      this.enableInterface();
      return true;
    },
    opened: function () {
      return this.container.hasClass("select2-dropdown-open");
    },
    positionDropdown: function () {
      var T = this.dropdown,
        W = this.container.offset(),
        af = this.container.outerHeight(false),
        ag = this.container.outerWidth(false),
        ab = T.outerHeight(false),
        ad = G(window),
        ak = ad.width(),
        Z = ad.height(),
        S = ad.scrollLeft() + ak,
        aj = ad.scrollTop() + Z,
        U = W.top + af,
        ah = W.left,
        R = U + ab <= aj,
        Y = W.top - ab >= this.body().scrollTop(),
        ac = T.outerWidth(false),
        am = ah + ac <= S,
        al = T.hasClass("select2-drop-above"),
        X,
        ai,
        V,
        aa,
        ae;
      if (al) {
        ai = true;
        if (!Y && R) {
          V = true;
          ai = false;
        }
      } else {
        ai = false;
        if (!R && Y) {
          V = true;
          ai = true;
        }
      }
      if (V) {
        T.hide();
        W = this.container.offset();
        af = this.container.outerHeight(false);
        ag = this.container.outerWidth(false);
        ab = T.outerHeight(false);
        S = ad.scrollLeft() + ak;
        aj = ad.scrollTop() + Z;
        U = W.top + af;
        ah = W.left;
        ac = T.outerWidth(false);
        am = ah + ac <= S;
        T.show();
      }
      if (this.opts.dropdownAutoWidth) {
        ae = G(".select2-results", T)[0];
        T.addClass("select2-drop-auto-width");
        T.css("width", "");
        ac =
          T.outerWidth(false) +
          (ae.scrollHeight === ae.clientHeight ? 0 : z.width);
        ac > ag ? (ag = ac) : (ac = ag);
        am = ah + ac <= S;
      } else {
        this.container.removeClass("select2-drop-auto-width");
      }
      if (this.body().css("position") !== "static") {
        X = this.body().offset();
        U -= X.top;
        ah -= X.left;
      }
      if (!am) {
        ah = W.left + ag - ac;
      }
      aa = {
        left: ah,
        width: ag,
      };
      if (ai) {
        aa.bottom = Z - W.top;
        aa.top = "auto";
        this.container.addClass("select2-drop-above");
        T.addClass("select2-drop-above");
      } else {
        aa.top = U;
        aa.bottom = "auto";
        this.container.removeClass("select2-drop-above");
        T.removeClass("select2-drop-above");
      }
      aa = G.extend(aa, F(this.opts.dropdownCss));
      T.css(aa);
    },
    shouldOpen: function () {
      var R;
      if (this.opened()) {
        return false;
      }
      if (this._enabled === false || this._readonly === true) {
        return false;
      }
      R = G.Event("select2-opening");
      this.opts.element.trigger(R);
      return !R.isDefaultPrevented();
    },
    clearDropdownAlignmentPreference: function () {
      this.container.removeClass("select2-drop-above");
      this.dropdown.removeClass("select2-drop-above");
    },
    open: function () {
      if (!this.shouldOpen()) {
        return false;
      }
      this.opening();
      return true;
    },
    opening: function () {
      var W = this.containerId,
        R = "scroll." + W,
        U = "resize." + W,
        T = "orientationchange." + W,
        S;
      this.container
        .addClass("select2-dropdown-open")
        .addClass("select2-container-active");
      this.clearDropdownAlignmentPreference();
      if (this.dropdown[0] !== this.body().children().last()[0]) {
        this.dropdown.detach().appendTo(this.body());
      }
      S = G("#select2-drop-mask");
      if (S.length == 0) {
        S = G(document.createElement("div"));
        S.attr("id", "select2-drop-mask").attr("class", "select2-drop-mask");
        S.hide();
        S.appendTo(this.body());
        S.on("mousedown touchstart click", function (Y) {
          var Z = G("#select2-drop"),
            X;
          if (Z.length > 0) {
            X = Z.data("select2");
            if (X.opts.selectOnBlur) {
              X.selectHighlighted({
                noFocus: true,
              });
            }
            X.close({
              focus: true,
            });
            Y.preventDefault();
            Y.stopPropagation();
          }
        });
      }
      if (this.dropdown.prev()[0] !== S[0]) {
        this.dropdown.before(S);
      }
      G("#select2-drop").removeAttr("id");
      this.dropdown.attr("id", "select2-drop");
      S.show();
      this.positionDropdown();
      this.dropdown.show();
      this.positionDropdown();
      this.dropdown.addClass("select2-drop-active");
      var V = this;
      this.container
        .parents()
        .add(window)
        .each(function () {
          G(this).on(U + " " + R + " " + T, function (X) {
            V.positionDropdown();
          });
        });
    },
    close: function () {
      if (!this.opened()) {
        return;
      }
      var U = this.containerId,
        R = "scroll." + U,
        T = "resize." + U,
        S = "orientationchange." + U;
      this.container
        .parents()
        .add(window)
        .each(function () {
          G(this).off(R).off(T).off(S);
        });
      this.clearDropdownAlignmentPreference();
      G("#select2-drop-mask").hide();
      this.dropdown.removeAttr("id");
      this.dropdown.hide();
      this.container
        .removeClass("select2-dropdown-open")
        .removeClass("select2-container-active");
      this.results.empty();
      this.search.removeClass("select2-active");
      this.opts.element.trigger(G.Event("select2-close"));
    },
    externalSearch: function (R) {
      this.open();
      this.search.val(R);
      this.updateResults(false);
    },
    clearSearch: function () {},
    getMaximumSelectionSize: function () {
      return F(this.opts.maximumSelectionSize);
    },
    ensureHighlightVisible: function () {
      var U = this.results,
        T,
        R,
        Y,
        X,
        V,
        W,
        S;
      R = this.highlight();
      if (R < 0) {
        return;
      }
      if (R == 0) {
        U.scrollTop(0);
        return;
      }
      T = this.findHighlightableChoices().find(".select2-result-label");
      Y = G(T[R]);
      X = Y.offset().top + Y.outerHeight(true);
      if (R === T.length - 1) {
        S = U.find("li.select2-more-results");
        if (S.length > 0) {
          X = S.offset().top + S.outerHeight(true);
        }
      }
      V = U.offset().top + U.outerHeight(true);
      if (X > V) {
        U.scrollTop(U.scrollTop() + (X - V));
      }
      W = Y.offset().top - U.offset().top;
      if (W < 0 && Y.css("display") != "none") {
        U.scrollTop(U.scrollTop() + W);
      }
    },
    findHighlightableChoices: function () {
      return this.results.find(
        ".select2-result-selectable:not(.select2-disabled, .select2-selected)"
      );
    },
    moveHighlight: function (U) {
      var T = this.findHighlightableChoices(),
        S = this.highlight();
      while (S > -1 && S < T.length) {
        S += U;
        var R = G(T[S]);
        if (
          R.hasClass("select2-result-selectable") &&
          !R.hasClass("select2-disabled") &&
          !R.hasClass("select2-selected")
        ) {
          this.highlight(S);
          break;
        }
      }
    },
    highlight: function (S) {
      var U = this.findHighlightableChoices(),
        R,
        T;
      if (arguments.length === 0) {
        return t(U.filter(".select2-highlighted")[0], U.get());
      }
      if (S >= U.length) {
        S = U.length - 1;
      }
      if (S < 0) {
        S = 0;
      }
      this.removeHighlight();
      R = G(U[S]);
      R.addClass("select2-highlighted");
      this.ensureHighlightVisible();
      T = R.data("select2-data");
      if (T) {
        this.opts.element.trigger({
          type: "select2-highlight",
          val: this.id(T),
          choice: T,
        });
      }
    },
    removeHighlight: function () {
      this.results
        .find(".select2-highlighted")
        .removeClass("select2-highlighted");
    },
    countSelectableResults: function () {
      return this.findHighlightableChoices().length;
    },
    highlightUnderEvent: function (S) {
      var R = G(S.target).closest(".select2-result-selectable");
      if (R.length > 0 && !R.is(".select2-highlighted")) {
        var T = this.findHighlightableChoices();
        this.highlight(T.index(R));
      } else {
        if (R.length == 0) {
          this.removeHighlight();
        }
      }
    },
    loadMoreIfNeeded: function () {
      var V = this.results,
        U = V.find("li.select2-more-results"),
        X,
        W = this.resultsPage + 1,
        R = this,
        T = this.search.val(),
        S = this.context;
      if (U.length === 0) {
        return;
      }
      X = U.offset().top - V.offset().top - V.height();
      if (X <= this.opts.loadMorePadding) {
        U.addClass("select2-active");
        this.opts.query({
          element: this.opts.element,
          term: T,
          page: W,
          context: S,
          matcher: this.opts.matcher,
          callback: this.bind(function (Y) {
            if (!R.opened()) {
              return;
            }
            R.opts.populateResults.call(this, V, Y.results, {
              term: T,
              page: W,
              context: S,
            });
            R.postprocessResults(Y, false, false);
            if (Y.more === true) {
              U.detach()
                .appendTo(V)
                .text(R.opts.formatLoadMore(W + 1));
              window.setTimeout(function () {
                R.loadMoreIfNeeded();
              }, 10);
            } else {
              U.remove();
            }
            R.positionDropdown();
            R.resultsPage = W;
            R.context = Y.context;
            this.opts.element.trigger({
              type: "select2-loaded",
              items: Y,
            });
          }),
        });
      }
    },
    tokenize: function () {},
    updateResults: function (aa) {
      var af = this.search,
        Y = this.results,
        R = this.opts,
        X,
        ad = this,
        ab,
        W = af.val(),
        U = G.data(this.container, "select2-last-term"),
        ac;
      Y.removeClass("select2-parent-no-results");
      if (aa !== true && U && w(W, U)) {
        return;
      }
      G.data(this.container, "select2-last-term", W);
      if (aa !== true && (this.showSearchInput === false || !this.opened())) {
        return;
      }
      function Z() {
        af.removeClass("select2-active");
        ad.positionDropdown();
      }
      function T(ag) {
        if (typeof ag == "string") {
          Y.html(ag);
        } else {
          Y.append(ag);
        }
        Z();
      }
      ac = ++this.queryCount;
      var V = this.getMaximumSelectionSize();
      if (V >= 1) {
        X = this.data();
        if (
          G.isArray(X) &&
          X.length >= V &&
          B(R.formatSelectionTooBig, "formatSelectionTooBig")
        ) {
          T(
            "<li class='select2-selection-limit'>" +
              R.formatSelectionTooBig(V) +
              "</li>"
          );
          return;
        }
      }
      if (af.val().length < R.minimumInputLength) {
        if (B(R.formatInputTooShort, "formatInputTooShort")) {
          var ae = R.formatInputTooShort(af.val(), R.minimumInputLength);
          var S = G("<span>").append(ae);
          Y.empty();
          Y.addClass("select2-parent-no-results");
          T(G("<li class='select2-no-results'>").append(S));
        } else {
          T("");
        }
        if (aa && this.showSearch) {
          this.showSearch(true);
        }
        return;
      }
      if (R.maximumInputLength && af.val().length > R.maximumInputLength) {
        if (B(R.formatInputTooLong, "formatInputTooLong")) {
          T(
            "<li class='select2-no-results'>" +
              R.formatInputTooLong(af.val(), R.maximumInputLength) +
              "</li>"
          );
        } else {
          T("");
        }
        return;
      }
      if (R.formatSearching && this.findHighlightableChoices().length === 0) {
        T("<li class='select2-searching'>" + R.formatSearching() + "</li>");
      }
      af.addClass("select2-active");
      this.removeHighlight();
      ab = this.tokenize();
      if (ab != p && ab != null) {
        af.val(ab);
      }
      this.resultsPage = 1;
      R.query({
        element: R.element,
        term: af.val(),
        page: this.resultsPage,
        context: null,
        matcher: R.matcher,
        callback: this.bind(function (ah) {
          var ag;
          if (ac != this.queryCount) {
            return;
          }
          if (!this.opened()) {
            this.search.removeClass("select2-active");
            return;
          }
          this.context = ah.context === p ? null : ah.context;
          if (this.opts.createSearchChoice && af.val() !== "") {
            ag = this.opts.createSearchChoice.call(ad, af.val(), ah.results);
            if (
              ag !== p &&
              ag !== null &&
              ad.id(ag) !== p &&
              ad.id(ag) !== null
            ) {
              if (
                G(ah.results).filter(function () {
                  return w(ad.id(this), ad.id(ag));
                }).length === 0
              ) {
                ah.results.unshift(ag);
              }
            }
          }
          if (
            ah.results.length === 0 &&
            B(R.formatNoMatches, "formatNoMatches")
          ) {
            T(
              "<li class='select2-no-results'>" +
                R.formatNoMatches(af.val()) +
                "</li>"
            );
            return;
          }
          Y.empty();
          ad.opts.populateResults.call(this, Y, ah.results, {
            term: af.val(),
            page: this.resultsPage,
            context: null,
          });
          if (ah.more === true && B(R.formatLoadMore, "formatLoadMore")) {
            Y.append(
              "<li class='select2-more-results'>" +
                ad.opts.escapeMarkup(R.formatLoadMore(this.resultsPage)) +
                "</li>"
            );
            window.setTimeout(function () {
              ad.loadMoreIfNeeded();
            }, 10);
          }
          this.postprocessResults(ah, aa);
          Z();
          this.opts.element.trigger({
            type: "select2-loaded",
            items: ah,
          });
        }),
      });
    },
    cancel: function () {
      this.close();
    },
    blur: function () {
      if (this.opts.selectOnBlur) {
        this.selectHighlighted({
          noFocus: true,
        });
      }
      this.close();
      this.container.removeClass("select2-container-active");
      if (this.search[0] === document.activeElement) {
        this.search.blur();
      }
      this.clearSearch();
      this.selection
        .find(".select2-search-choice-focus")
        .removeClass("select2-search-choice-focus");
    },
    focusSearch: function () {
      L(this.search);
    },
    selectHighlighted: function (S) {
      var R = this.highlight(),
        T = this.results.find(".select2-highlighted"),
        U = T.closest(".select2-result").data("select2-data");
      if (U) {
        this.highlight(R);
        this.onSelect(U, S);
        return U;
      } else {
        if (S && S.noFocus) {
          this.close();
        }
      }
    },
    getPlaceholder: function () {
      var R;
      return (
        this.opts.element.attr("placeholder") ||
        this.opts.element.attr("data-placeholder") ||
        this.opts.element.data("placeholder") ||
        this.opts.placeholder ||
        ((R = this.getPlaceholderOption()) !== p ? R.text() : p)
      );
    },
    getPlaceholderOption: function () {
      if (this.select) {
        var R = this.select.children("option").first();
        if (this.opts.placeholderOption !== p) {
          return (
            (this.opts.placeholderOption === "first" && R) ||
            (typeof this.opts.placeholderOption === "function" &&
              this.opts.placeholderOption(this.select))
          );
        } else {
          if (R.text() === "" && R.val() === "") {
            return R;
          }
        }
      }
    },
    initContainerWidth: function () {
      function S() {
        var X, V, Y, W, U, T;
        if (this.opts.width === "off") {
          return null;
        } else {
          if (this.opts.width === "element") {
            return this.opts.element.outerWidth(false) === 0
              ? "auto"
              : this.opts.element.outerWidth(false) + "px";
          } else {
            if (this.opts.width === "copy" || this.opts.width === "resolve") {
              X = this.opts.element.attr("style");
              if (X !== p) {
                V = X.split(";");
                for (W = 0, U = V.length; W < U; W = W + 1) {
                  T = V[W].replace(/\s/g, "");
                  Y = T.match(
                    /^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i
                  );
                  if (Y !== null && Y.length >= 1) {
                    return Y[1];
                  }
                }
              }
              if (this.opts.width === "resolve") {
                X = this.opts.element.css("width");
                if (X.indexOf("%") > 0) {
                  return X;
                }
                return this.opts.element.outerWidth(false) === 0
                  ? "auto"
                  : this.opts.element.outerWidth(false) + "px";
              }
              return null;
            } else {
              if (G.isFunction(this.opts.width)) {
                return this.opts.width();
              } else {
                return this.opts.width;
              }
            }
          }
        }
      }
      var R = S.call(this);
      if (R !== null) {
        this.container.css("width", R);
      }
    },
  });
  A = O(Q, {
    createContainer: function () {
      var R = G(document.createElement("div"))
        .attr({
          class: "select2-container",
        })
        .html(
          [
            "<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>",
            "   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>",
            "   <span class='select2-arrow'><b></b></span>",
            "</a>",
            "<input class='select2-focusser select2-offscreen' type='text'/>",
            "<div class='select2-drop select2-display-none'>",
            "   <div class='select2-search'>",
            "       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>",
            "   </div>",
            "   <ul class='select2-results'>",
            "   </ul>",
            "</div>",
          ].join("")
        );
      return R;
    },
    enableInterface: function () {
      if (this.parent.enableInterface.apply(this, arguments)) {
        this.focusser.prop("disabled", !this.isInterfaceEnabled());
      }
    },
    opening: function () {
      var T, S, R;
      if (this.opts.minimumResultsForSearch >= 0) {
        this.showSearch(true);
      }
      this.parent.opening.apply(this, arguments);
      if (this.showSearchInput !== false) {
        this.search.val(this.focusser.val());
      }
      this.search.focus();
      T = this.search.get(0);
      if (T.createTextRange) {
        S = T.createTextRange();
        S.collapse(false);
        S.select();
      } else {
        if (T.setSelectionRange) {
          R = this.search.val().length;
          T.setSelectionRange(R, R);
        }
      }
      if (this.search.val() === "") {
        if (this.nextSearchTerm != p) {
          this.search.val(this.nextSearchTerm);
          this.search.select();
        }
      }
      this.focusser.prop("disabled", true).val("");
      this.updateResults(true);
      this.opts.element.trigger(G.Event("select2-open"));
    },
    close: function (R) {
      if (!this.opened()) {
        return;
      }
      this.parent.close.apply(this, arguments);
      R = R || {
        focus: true,
      };
      this.focusser.removeAttr("disabled");
      if (R.focus) {
        this.focusser.focus();
      }
    },
    focus: function () {
      if (this.opened()) {
        this.close();
      } else {
        this.focusser.removeAttr("disabled");
        this.focusser.focus();
      }
    },
    isFocused: function () {
      return this.container.hasClass("select2-container-active");
    },
    cancel: function () {
      this.parent.cancel.apply(this, arguments);
      this.focusser.removeAttr("disabled");
      this.focusser.focus();
    },
    destroy: function () {
      G("label[for='" + this.focusser.attr("id") + "']").attr(
        "for",
        this.opts.element.attr("id")
      );
      this.parent.destroy.apply(this, arguments);
    },
    initContainer: function () {
      var S,
        R = this.container,
        T = this.dropdown;
      if (this.opts.minimumResultsForSearch < 0) {
        this.showSearch(false);
      } else {
        this.showSearch(true);
      }
      this.selection = S = R.find(".select2-choice");
      this.focusser = R.find(".select2-focusser");
      this.focusser.attr("id", "s2id_autogen" + a());
      G("label[for='" + this.opts.element.attr("id") + "']").attr(
        "for",
        this.focusser.attr("id")
      );
      this.focusser.attr("tabindex", this.elementTabIndex);
      this.search.on(
        "keydown",
        this.bind(function (U) {
          if (!this.isInterfaceEnabled()) {
            return;
          }
          if (U.which === N.PAGE_UP || U.which === N.PAGE_DOWN) {
            D(U);
            return;
          }
          switch (U.which) {
            case N.UP:
            case N.DOWN:
              this.moveHighlight(U.which === N.UP ? -1 : 1);
              D(U);
              return;
            case N.ENTER:
              this.selectHighlighted();
              D(U);
              return;
            case N.TAB:
              this.selectHighlighted({
                noFocus: true,
              });
              return;
            case N.ESC:
              this.cancel(U);
              D(U);
              return;
          }
        })
      );
      this.search.on(
        "blur",
        this.bind(function (U) {
          if (document.activeElement === this.body().get(0)) {
            window.setTimeout(
              this.bind(function () {
                this.search.focus();
              }),
              0
            );
          }
        })
      );
      this.focusser.on(
        "keydown",
        this.bind(function (U) {
          if (!this.isInterfaceEnabled()) {
            return;
          }
          if (
            U.which === N.TAB ||
            N.isControl(U) ||
            N.isFunctionKey(U) ||
            U.which === N.ESC
          ) {
            return;
          }
          if (this.opts.openOnEnter === false && U.which === N.ENTER) {
            D(U);
            return;
          }
          if (
            U.which == N.DOWN ||
            U.which == N.UP ||
            (U.which == N.ENTER && this.opts.openOnEnter)
          ) {
            if (U.altKey || U.ctrlKey || U.shiftKey || U.metaKey) {
              return;
            }
            this.open();
            D(U);
            return;
          }
          if (U.which == N.DELETE || U.which == N.BACKSPACE) {
            if (this.opts.allowClear) {
              this.clear();
            }
            D(U);
            return;
          }
        })
      );
      I(this.focusser);
      this.focusser.on(
        "keyup-change input",
        this.bind(function (U) {
          if (this.opts.minimumResultsForSearch >= 0) {
            U.stopPropagation();
            if (this.opened()) {
              return;
            }
            this.open();
          }
        })
      );
      S.on(
        "mousedown",
        "abbr",
        this.bind(function (U) {
          if (!this.isInterfaceEnabled()) {
            return;
          }
          this.clear();
          b(U);
          this.close();
          this.selection.focus();
        })
      );
      S.on(
        "mousedown",
        this.bind(function (U) {
          if (!this.container.hasClass("select2-container-active")) {
            this.opts.element.trigger(G.Event("select2-focus"));
          }
          if (this.opened()) {
            this.close();
          } else {
            if (this.isInterfaceEnabled()) {
              this.open();
            }
          }
          D(U);
        })
      );
      T.on(
        "mousedown",
        this.bind(function () {
          this.search.focus();
        })
      );
      S.on(
        "focus",
        this.bind(function (U) {
          D(U);
        })
      );
      this.focusser
        .on(
          "focus",
          this.bind(function () {
            if (!this.container.hasClass("select2-container-active")) {
              this.opts.element.trigger(G.Event("select2-focus"));
            }
            this.container.addClass("select2-container-active");
          })
        )
        .on(
          "blur",
          this.bind(function () {
            if (!this.opened()) {
              this.container.removeClass("select2-container-active");
              this.opts.element.trigger(G.Event("select2-blur"));
            }
          })
        );
      this.search.on(
        "focus",
        this.bind(function () {
          if (!this.container.hasClass("select2-container-active")) {
            this.opts.element.trigger(G.Event("select2-focus"));
          }
          this.container.addClass("select2-container-active");
        })
      );
      this.initContainerWidth();
      this.opts.element.addClass("select2-offscreen");
      this.setPlaceholder();
    },
    clear: function (T) {
      var U = this.selection.data("select2-data");
      if (U) {
        var S = G.Event("select2-clearing");
        this.opts.element.trigger(S);
        if (S.isDefaultPrevented()) {
          return;
        }
        var R = this.getPlaceholderOption();
        this.opts.element.val(R ? R.val() : "");
        this.selection.find(".select2-chosen").empty();
        this.selection.removeData("select2-data");
        this.setPlaceholder();
        if (T !== false) {
          this.opts.element.trigger({
            type: "select2-removed",
            val: this.id(U),
            choice: U,
          });
          this.triggerChange({
            removed: U,
          });
        }
      }
    },
    initSelection: function () {
      var S;
      if (this.isPlaceholderOptionSelected()) {
        this.updateSelection(null);
        this.close();
        this.setPlaceholder();
      } else {
        var R = this;
        this.opts.initSelection.call(null, this.opts.element, function (T) {
          if (T !== p && T !== null) {
            R.updateSelection(T);
            R.close();
            R.setPlaceholder();
          }
        });
      }
    },
    isPlaceholderOptionSelected: function () {
      var R;
      if (!this.getPlaceholder()) {
        return false;
      }
      return (
        ((R = this.getPlaceholderOption()) !== p && R.prop("selected")) ||
        this.opts.element.val() === "" ||
        this.opts.element.val() === p ||
        this.opts.element.val() === null
      );
    },
    prepareOpts: function () {
      var S = this.parent.prepareOpts.apply(this, arguments),
        R = this;
      if (S.element.get(0).tagName.toLowerCase() === "select") {
        S.initSelection = function (T, V) {
          var U = T.find("option").filter(function () {
            return this.selected;
          });
          V(R.optionToData(U));
        };
      } else {
        if ("data" in S) {
          S.initSelection =
            S.initSelection ||
            function (U, W) {
              var V = U.val();
              var T = null;
              S.query({
                matcher: function (X, aa, Y) {
                  var Z = w(V, S.id(Y));
                  if (Z) {
                    T = Y;
                  }
                  return Z;
                },
                callback: !G.isFunction(W)
                  ? G.noop
                  : function () {
                      W(T);
                    },
              });
            };
        }
      }
      return S;
    },
    getPlaceholder: function () {
      if (this.select) {
        if (this.getPlaceholderOption() === p) {
          return p;
        }
      }
      return this.parent.getPlaceholder.apply(this, arguments);
    },
    setPlaceholder: function () {
      var R = this.getPlaceholder();
      if (this.isPlaceholderOptionSelected() && R !== p) {
        if (this.select && this.getPlaceholderOption() === p) {
          return;
        }
        this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(R));
        this.selection.addClass("select2-default");
        this.container.removeClass("select2-allowclear");
      }
    },
    postprocessResults: function (W, S, V) {
      var U = 0,
        R = this,
        X = true;
      this.findHighlightableChoices().each2(function (Y, Z) {
        if (w(R.id(Z.data("select2-data")), R.opts.element.val())) {
          U = Y;
          return false;
        }
      });
      if (V !== false) {
        if (S === true && U >= 0) {
          this.highlight(U);
        } else {
          this.highlight(0);
        }
      }
      if (S === true) {
        var T = this.opts.minimumResultsForSearch;
        if (T >= 0) {
          this.showSearch(u(W.results) >= T);
        }
      }
    },
    showSearch: function (R) {
      if (this.showSearchInput === R) {
        return;
      }
      this.showSearchInput = R;
      this.dropdown
        .find(".select2-search")
        .toggleClass("select2-search-hidden", !R);
      this.dropdown
        .find(".select2-search")
        .toggleClass("select2-offscreen", !R);
      G(this.dropdown, this.container).toggleClass("select2-with-searchbox", R);
    },
    onSelect: function (T, S) {
      if (!this.triggerSelect(T)) {
        return;
      }
      var R = this.opts.element.val(),
        U = this.data();
      this.opts.element.val(this.id(T));
      this.updateSelection(T);
      this.opts.element.trigger({
        type: "select2-selected",
        val: this.id(T),
        choice: T,
      });
      this.nextSearchTerm = this.opts.nextSearchTerm(T, this.search.val());
      this.close();
      if (!S || !S.noFocus) {
        this.focusser.focus();
      }
      if (!w(R, this.id(T))) {
        this.triggerChange({
          added: T,
          removed: U,
        });
      }
    },
    updateSelection: function (U) {
      var S = this.selection.find(".select2-chosen"),
        T,
        R;
      this.selection.data("select2-data", U);
      S.empty();
      if (U !== null) {
        T = this.opts.formatSelection(U, S, this.opts.escapeMarkup);
      }
      if (T !== p) {
        S.append(T);
      }
      R = this.opts.formatSelectionCssClass(U, S);
      if (R !== p) {
        S.addClass(R);
      }
      this.selection.removeClass("select2-default");
      if (this.opts.allowClear && this.getPlaceholder() !== p) {
        this.container.addClass("select2-allowclear");
      }
    },
    val: function () {
      var V,
        S = false,
        T = null,
        R = this,
        U = this.data();
      if (arguments.length === 0) {
        return this.opts.element.val();
      }
      V = arguments[0];
      if (arguments.length > 1) {
        S = arguments[1];
      }
      if (this.select) {
        this.select
          .val(V)
          .find("option")
          .filter(function () {
            return this.selected;
          })
          .each2(function (W, X) {
            T = R.optionToData(X);
            return false;
          });
        this.updateSelection(T);
        this.setPlaceholder();
        if (S) {
          this.triggerChange({
            added: T,
            removed: U,
          });
        }
      } else {
        if (!V && V !== 0) {
          this.clear(S);
          return;
        }
        if (this.opts.initSelection === p) {
          throw new Error(
            "cannot call val() if initSelection() is not defined"
          );
        }
        this.opts.element.val(V);
        this.opts.initSelection(this.opts.element, function (W) {
          R.opts.element.val(!W ? "" : R.id(W));
          R.updateSelection(W);
          R.setPlaceholder();
          if (S) {
            R.triggerChange({
              added: W,
              removed: U,
            });
          }
        });
      }
    },
    clearSearch: function () {
      this.search.val("");
      this.focusser.val("");
    },
    data: function (T) {
      var S,
        R = false;
      if (arguments.length === 0) {
        S = this.selection.data("select2-data");
        if (S == p) {
          S = null;
        }
        return S;
      } else {
        if (arguments.length > 1) {
          R = arguments[1];
        }
        if (!T) {
          this.clear(R);
        } else {
          S = this.data();
          this.opts.element.val(!T ? "" : this.id(T));
          this.updateSelection(T);
          if (R) {
            this.triggerChange({
              added: T,
              removed: S,
            });
          }
        }
      }
    },
  });
  c = O(Q, {
    createContainer: function () {
      var R = G(document.createElement("div"))
        .attr({
          class: "select2-container select2-container-multi",
        })
        .html(
          [
            "<ul class='select2-choices'>",
            "  <li class='select2-search-field'>",
            "    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>",
            "  </li>",
            "</ul>",
            "<div class='select2-drop select2-drop-multi select2-display-none'>",
            "   <ul class='select2-results'>",
            "   </ul>",
            "</div>",
          ].join("")
        );
      return R;
    },
    prepareOpts: function () {
      var S = this.parent.prepareOpts.apply(this, arguments),
        R = this;
      if (S.element.get(0).tagName.toLowerCase() === "select") {
        S.initSelection = function (T, V) {
          var U = [];
          T.find("option")
            .filter(function () {
              return this.selected;
            })
            .each2(function (W, X) {
              U.push(R.optionToData(X));
            });
          V(U);
        };
      } else {
        if ("data" in S) {
          S.initSelection =
            S.initSelection ||
            function (T, W) {
              var U = i(T.val(), S.separator);
              var V = [];
              S.query({
                matcher: function (X, aa, Y) {
                  var Z = G.grep(U, function (ab) {
                    return w(ab, S.id(Y));
                  }).length;
                  if (Z) {
                    V.push(Y);
                  }
                  return Z;
                },
                callback: !G.isFunction(W)
                  ? G.noop
                  : function () {
                      var X = [];
                      for (var aa = 0; aa < U.length; aa++) {
                        var ab = U[aa];
                        for (var Z = 0; Z < V.length; Z++) {
                          var Y = V[Z];
                          if (w(ab, S.id(Y))) {
                            X.push(Y);
                            V.splice(Z, 1);
                            break;
                          }
                        }
                      }
                      W(X);
                    },
              });
            };
        }
      }
      return S;
    },
    selectChoice: function (R) {
      var S = this.container.find(".select2-search-choice-focus");
      if (S.length && R && R[0] == S[0]) {
      } else {
        if (S.length) {
          this.opts.element.trigger("choice-deselected", S);
        }
        S.removeClass("select2-search-choice-focus");
        if (R && R.length) {
          this.close();
          R.addClass("select2-search-choice-focus");
          this.opts.element.trigger("choice-selected", R);
        }
      }
    },
    destroy: function () {
      G("label[for='" + this.search.attr("id") + "']").attr(
        "for",
        this.opts.element.attr("id")
      );
      this.parent.destroy.apply(this, arguments);
    },
    initContainer: function () {
      var R = ".select2-choices",
        S;
      this.searchContainer = this.container.find(".select2-search-field");
      this.selection = S = this.container.find(R);
      var T = this;
      this.selection.on(
        "click",
        ".select2-search-choice:not(.select2-locked)",
        function (U) {
          T.search[0].focus();
          T.selectChoice(G(this));
        }
      );
      this.search.attr("id", "s2id_autogen" + a());
      G("label[for='" + this.opts.element.attr("id") + "']").attr(
        "for",
        this.search.attr("id")
      );
      this.search.on(
        "input paste",
        this.bind(function () {
          if (!this.isInterfaceEnabled()) {
            return;
          }
          if (!this.opened()) {
            this.open();
          }
        })
      );
      this.search.attr("tabindex", this.elementTabIndex);
      this.keydowns = 0;
      this.search.on(
        "keydown",
        this.bind(function (Z) {
          if (!this.isInterfaceEnabled()) {
            return;
          }
          ++this.keydowns;
          var W = S.find(".select2-search-choice-focus");
          var X = W.prev(".select2-search-choice:not(.select2-locked)");
          var V = W.next(".select2-search-choice:not(.select2-locked)");
          var aa = f(this.search);
          if (
            W.length &&
            (Z.which == N.LEFT ||
              Z.which == N.RIGHT ||
              Z.which == N.BACKSPACE ||
              Z.which == N.DELETE ||
              Z.which == N.ENTER)
          ) {
            var U = W;
            if (Z.which == N.LEFT && X.length) {
              U = X;
            } else {
              if (Z.which == N.RIGHT) {
                U = V.length ? V : null;
              } else {
                if (Z.which === N.BACKSPACE) {
                  this.unselect(W.first());
                  this.search.width(10);
                  U = X.length ? X : V;
                } else {
                  if (Z.which == N.DELETE) {
                    this.unselect(W.first());
                    this.search.width(10);
                    U = V.length ? V : null;
                  } else {
                    if (Z.which == N.ENTER) {
                      U = null;
                    }
                  }
                }
              }
            }
            this.selectChoice(U);
            D(Z);
            if (!U || !U.length) {
              this.open();
            }
            return;
          } else {
            if (
              ((Z.which === N.BACKSPACE && this.keydowns == 1) ||
                Z.which == N.LEFT) &&
              aa.offset == 0 &&
              !aa.length
            ) {
              this.selectChoice(
                S.find(".select2-search-choice:not(.select2-locked)").last()
              );
              D(Z);
              return;
            } else {
              this.selectChoice(null);
            }
          }
          if (this.opened()) {
            switch (Z.which) {
              case N.UP:
              case N.DOWN:
                this.moveHighlight(Z.which === N.UP ? -1 : 1);
                D(Z);
                return;
              case N.ENTER:
                var Y = this.selectHighlighted();
                if (
                  Y == null ||
                  (G(".select2-parent-no-results").length == 0 &&
                    Y.isControl == true) ||
                  window.searchView.isOpeningBibleList == true
                ) {
                  window.searchView.isOpeningBibleList = false;
                  D(Z);
                }
                return;
              case N.TAB:
                if (this.opened()) {
                  D(Z);
                }
                this.selectHighlighted({
                  noFocus: true,
                });
                this.close();
                return;
              case N.ESC:
                this.cancel(Z);
                D(Z);
                return;
            }
          }
          if (
            Z.which === N.TAB ||
            N.isControl(Z) ||
            N.isFunctionKey(Z) ||
            Z.which === N.BACKSPACE ||
            Z.which === N.ESC
          ) {
            return;
          }
          if (Z.which === N.ENTER) {
            if (this.opts.openOnEnter === false) {
              return;
            } else {
              if (Z.altKey || Z.ctrlKey || Z.shiftKey || Z.metaKey) {
                return;
              }
            }
          }
          this.open();
          if (Z.which === N.PAGE_UP || Z.which === N.PAGE_DOWN) {
            D(Z);
          }
          if (Z.which === N.ENTER) {
            D(Z);
          }
        })
      );
      this.search.on(
        "keyup",
        this.bind(function (U) {
          this.keydowns = 0;
          this.resizeSearch();
          if (U.keyCode == N.ESC && !this.opened()) {
            this.clearSearch();
          }
        })
      );
      this.search.on(
        "blur",
        this.bind(function (U) {
          this.container.removeClass("select2-container-active");
          this.search.removeClass("select2-focused");
          this.selectChoice(null);
          if (!this.opened()) {
            this.clearSearch();
          }
          U.stopImmediatePropagation();
          this.opts.element.trigger(G.Event("select2-blur"));
        })
      );
      this.container.on(
        "click",
        R,
        this.bind(function (U) {
          if (!this.isInterfaceEnabled()) {
            return;
          }
          if (G(U.target).closest(".select2-search-choice").length > 0) {
            return;
          }
          this.selectChoice(null);
          this.clearPlaceholder();
          if (!this.container.hasClass("select2-container-active")) {
            this.opts.element.trigger(G.Event("select2-focus"));
          }
          this.open();
          this.focusSearch();
          U.preventDefault();
        })
      );
      this.container.on(
        "focus",
        R,
        this.bind(function () {
          if (!this.isInterfaceEnabled()) {
            return;
          }
          if (!this.container.hasClass("select2-container-active")) {
            this.opts.element.trigger(G.Event("select2-focus"));
          }
          this.container.addClass("select2-container-active");
          this.dropdown.addClass("select2-drop-active");
          this.clearPlaceholder();
        })
      );
      this.initContainerWidth();
      this.opts.element.addClass("select2-offscreen");
      this.clearSearch();
    },
    enableInterface: function () {
      if (this.parent.enableInterface.apply(this, arguments)) {
        this.search.prop("disabled", !this.isInterfaceEnabled());
      }
    },
    initSelection: function () {
      var S;
      if (this.opts.element.val() === "" && this.opts.element.text() === "") {
        this.updateSelection([]);
        this.close();
        this.clearSearch();
      }
      if (this.select || this.opts.element.val() !== "") {
        var R = this;
        this.opts.initSelection.call(null, this.opts.element, function (T) {
          if (T !== p && T !== null) {
            R.updateSelection(T);
            R.close();
            R.clearSearch();
          }
        });
      }
    },
    clearSearch: function () {
      var S = this.getPlaceholder(),
        R = this.getMaxSearchWidth();
      if (
        S !== p &&
        this.getVal().length === 0 &&
        this.search.hasClass("select2-focused") === false
      ) {
        this.search.val(S).addClass("select2-default");
        this.search.width(R > 0 ? R : this.container.css("width"));
      } else {
        this.search.val("").width(10);
      }
    },
    clearPlaceholder: function () {
      if (this.search.hasClass("select2-default")) {
        this.search.val("").removeClass("select2-default");
      }
    },
    opening: function () {
      this.clearPlaceholder();
      this.resizeSearch();
      this.parent.opening.apply(this, arguments);
      this.focusSearch();
      this.updateResults(true);
      this.search.focus();
      this.opts.element.trigger(G.Event("select2-open"));
    },
    close: function () {
      if (!this.opened()) {
        return;
      }
      this.parent.close.apply(this, arguments);
    },
    focus: function () {
      this.close();
      this.search.focus();
    },
    isFocused: function () {
      return this.search.hasClass("select2-focused");
    },
    updateSelection: function (U) {
      var T = [],
        S = [],
        R = this;
      G(U).each(function () {
        if (t(R.id(this), T) < 0) {
          T.push(R.id(this));
          S.push(this);
        }
      });
      U = S;
      this.selection.find(".select2-search-choice").remove();
      G(U).each(function () {
        R.addSelectedChoice(this);
      });
      R.postprocessResults();
    },
    tokenize: function () {
      var R = this.search.val();
      R = this.opts.tokenizer.call(
        this,
        R,
        this.data(),
        this.bind(this.onSelect),
        this.opts
      );
      if (R != null && R != p) {
        this.search.val(R);
        if (R.length > 0) {
          this.open();
        }
      }
    },
    onSelect: function (S, R) {
      if (!this.triggerSelect(S)) {
        return;
      }
      this.addSelectedChoice(S);
      this.opts.element.trigger({
        type: "selected",
        val: this.id(S),
        choice: S,
      });
      if (this.select || !this.opts.closeOnSelect) {
        this.postprocessResults(S, false, this.opts.closeOnSelect === true);
      }
      if (this.opts.closeOnSelect) {
        this.close();
        this.search.width(10);
      } else {
        if (this.countSelectableResults() > 0) {
          this.search.width(10);
          this.resizeSearch();
          if (
            this.getMaximumSelectionSize() > 0 &&
            this.val().length >= this.getMaximumSelectionSize()
          ) {
            this.updateResults(true);
          }
          this.positionDropdown();
        } else {
          this.close();
          this.search.width(10);
        }
      }
      this.triggerChange({
        added: S,
      });
      if (!R || !R.noFocus) {
        this.focusSearch();
      }
    },
    cancel: function () {
      this.close();
      this.focusSearch();
    },
    addSelectedChoice: function (V) {
      var X = !V.locked,
        T = G(
          "<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"
        ),
        Y = G(
          "<li class='select2-search-choice select2-locked'><div></div></li>"
        );
      var U = X ? T : Y,
        R = this.id(V),
        S = this.getVal(),
        W,
        Z;
      W = this.opts.formatSelection(V, U.find("div"), this.opts.escapeMarkup);
      if (W != p) {
        U.find("div").replaceWith("<div>" + W + "</div>");
      }
      Z = this.opts.formatSelectionCssClass(V, U.find("div"));
      if (Z != p) {
        U.addClass(Z);
      }
      if (X) {
        U.find(".select2-search-choice-close")
          .on("mousedown", D)
          .on(
            "click dblclick",
            this.bind(function (aa) {
              if (!this.isInterfaceEnabled()) {
                return;
              }
              G(aa.target)
                .closest(".select2-search-choice")
                .fadeOut(
                  "fast",
                  this.bind(function () {
                    this.unselect(G(aa.target));
                    this.selection
                      .find(".select2-search-choice-focus")
                      .removeClass("select2-search-choice-focus");
                    this.close();
                    this.focusSearch();
                  })
                )
                .dequeue();
              D(aa);
            })
          )
          .on(
            "focus",
            this.bind(function () {
              if (!this.isInterfaceEnabled()) {
                return;
              }
              this.container.addClass("select2-container-active");
              this.dropdown.addClass("select2-drop-active");
            })
          );
      }
      U.data("select2-data", V);
      U.insertBefore(this.searchContainer);
      S.push(R);
      this.setVal(S);
    },
    unselect: function (T) {
      var V = this.getVal(),
        U,
        S;
      T = T.closest(".select2-search-choice");
      if (T.length === 0) {
        throw "Invalid argument: " + T + ". Must be .select2-search-choice";
      }
      U = T.data("select2-data");
      if (!U) {
        return;
      }
      while ((S = t(this.id(U), V)) >= 0) {
        V.splice(S, 1);
        this.setVal(V);
        if (this.select) {
          this.postprocessResults();
        }
      }
      var R = G.Event("select2-removing");
      R.val = this.id(U);
      R.choice = U;
      this.opts.element.trigger(R);
      if (R.isDefaultPrevented()) {
        return;
      }
      T.remove();
      this.opts.element.trigger({
        type: "select2-removed",
        val: this.id(U),
        choice: U,
      });
      this.triggerChange({
        removed: U,
      });
    },
    postprocessResults: function (V, S, U) {
      var W = this.getVal(),
        X = this.results.find(".select2-result"),
        T = this.results.find(".select2-result-with-children"),
        R = this;
      X.each2(function (Z, Y) {
        var aa = R.id(Y.data("select2-data"));
        if (t(aa, W) >= 0) {
          Y.addClass("select2-selected");
          Y.find(".select2-result-selectable").addClass("select2-selected");
        }
      });
      T.each2(function (Z, Y) {
        if (
          !Y.is(".select2-result-selectable") &&
          Y.find(".select2-result-selectable:not(.select2-selected)").length ===
            0
        ) {
          Y.addClass("select2-selected");
        }
      });
      if (this.highlight() == -1 && U !== false) {
        R.highlight(0);
      }
      if (
        !this.opts.createSearchChoice &&
        !X.filter(".select2-result:not(.select2-selected)").length > 0
      ) {
        if (
          !V ||
          (V &&
            !V.more &&
            this.results.find(".select2-no-results").length === 0)
        ) {
          if (B(R.opts.formatNoMatches, "formatNoMatches")) {
            this.results.append(
              "<li class='select2-no-results'>" +
                R.opts.formatNoMatches(R.search.val()) +
                "</li>"
            );
          }
        }
      }
    },
    getMaxSearchWidth: function () {
      return this.selection.width() - h(this.search);
    },
    resizeSearch: function () {
      var W,
        U,
        T,
        R,
        S,
        V = h(this.search);
      W = q(this.search) + 10;
      U = this.search.offset().left;
      T = this.selection.width();
      R = this.selection.offset().left;
      S = T - (U - R) - V;
      if (S < W) {
        S = T - V;
      }
      if (S < 40) {
        S = T - V;
      }
      if (S <= 0) {
        S = W;
      }
      this.search.width(Math.floor(S));
    },
    getVal: function () {
      var R;
      if (this.select) {
        R = this.select.val();
        return R === null ? [] : R;
      } else {
        R = this.opts.element.val();
        return i(R, this.opts.separator);
      }
    },
    setVal: function (S) {
      var R;
      if (this.select) {
        this.select.val(S);
      } else {
        R = [];
        G(S).each(function () {
          if (t(this, R) < 0) {
            R.push(this);
          }
        });
        this.opts.element.val(
          R.length === 0 ? "" : R.join(this.opts.separator)
        );
      }
    },
    buildChangeDetails: function (R, U) {
      var U = U.slice(0),
        R = R.slice(0);
      for (var T = 0; T < U.length; T++) {
        for (var S = 0; S < R.length; S++) {
          if (w(this.opts.id(U[T]), this.opts.id(R[S]))) {
            U.splice(T, 1);
            if (T > 0) {
              T--;
            }
            R.splice(S, 1);
            S--;
          }
        }
      }
      return {
        added: U,
        removed: R,
      };
    },
    val: function (U, S) {
      var T,
        R = this;
      if (arguments.length === 0) {
        return this.getVal();
      }
      T = this.data();
      if (!T.length) {
        T = [];
      }
      if (!U && U !== 0) {
        this.opts.element.val("");
        this.updateSelection([]);
        this.clearSearch();
        if (S) {
          this.triggerChange({
            added: this.data(),
            removed: T,
          });
        }
        return;
      }
      this.setVal(U);
      if (this.select) {
        this.opts.initSelection(this.select, this.bind(this.updateSelection));
        if (S) {
          this.triggerChange(this.buildChangeDetails(T, this.data()));
        }
      } else {
        if (this.opts.initSelection === p) {
          throw new Error(
            "val() cannot be called if initSelection() is not defined"
          );
        }
        this.opts.initSelection(this.opts.element, function (W) {
          var V = G.map(W, R.id);
          R.setVal(V);
          R.updateSelection(W);
          R.clearSearch();
          if (S) {
            R.triggerChange(R.buildChangeDetails(T, R.data()));
          }
        });
      }
      this.clearSearch();
    },
    onSortStart: function () {
      if (this.select) {
        throw new Error(
          "Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead."
        );
      }
      this.search.width(0);
      this.searchContainer.hide();
    },
    onSortEnd: function () {
      var S = [],
        R = this;
      this.searchContainer.show();
      this.searchContainer.appendTo(this.searchContainer.parent());
      this.resizeSearch();
      this.selection.find(".select2-search-choice").each(function () {
        S.push(R.opts.id(G(this).data("select2-data")));
      });
      this.setVal(S);
      this.triggerChange();
    },
    data: function (T, U) {
      var S = this,
        V,
        R;
      if (arguments.length === 0) {
        return this.selection
          .find(".select2-search-choice")
          .map(function () {
            return G(this).data("select2-data");
          })
          .get();
      } else {
        R = this.data();
        if (!T) {
          T = [];
        }
        V = G.map(T, function (W) {
          return S.opts.id(W);
        });
        this.setVal(V);
        this.updateSelection(T);
        this.clearSearch();
        if (U) {
          this.triggerChange(this.buildChangeDetails(R, this.data()));
        }
      }
    },
  });
  G.fn.select2 = function () {
    var W = Array.prototype.slice.call(arguments, 0),
      S,
      V,
      R,
      Y,
      aa,
      Z = [
        "val",
        "destroy",
        "opened",
        "open",
        "close",
        "focus",
        "isFocused",
        "container",
        "dropdown",
        "onSortStart",
        "onSortEnd",
        "enable",
        "disable",
        "readonly",
        "positionDropdown",
        "data",
        "search",
      ],
      X = ["opened", "isFocused", "container", "dropdown"],
      T = ["val", "data"],
      U = {
        search: "externalSearch",
      };
    this.each(function () {
      if (W.length === 0 || typeof W[0] === "object") {
        S = W.length === 0 ? {} : G.extend({}, W[0]);
        S.element = G(this);
        if (S.element.get(0).tagName.toLowerCase() === "select") {
          aa = S.element.prop("multiple");
        } else {
          aa = S.multiple || false;
          if ("tags" in S) {
            S.multiple = aa = true;
          }
        }
        V = aa ? new c() : new A();
        V.init(S);
      } else {
        if (typeof W[0] === "string") {
          if (t(W[0], Z) < 0) {
            throw "Unknown method: " + W[0];
          }
          Y = p;
          V = G(this).data("select2");
          if (V === p) {
            return;
          }
          R = W[0];
          if (R === "container") {
            Y = V.container;
          } else {
            if (R === "dropdown") {
              Y = V.dropdown;
            } else {
              if (U[R]) {
                R = U[R];
              }
              Y = V[R].apply(V, W.slice(1));
            }
          }
          if (t(W[0], X) >= 0 || (t(W[0], T) && W.length == 1)) {
            return false;
          }
        } else {
          throw "Invalid arguments to select2 plugin: " + W;
        }
      }
    });
    return Y === p ? this : Y;
  };
  G.fn.select2.defaults = {
    width: "copy",
    loadMorePadding: 0,
    closeOnSelect: true,
    openOnEnter: true,
    containerCss: {},
    dropdownCss: {},
    containerCssClass: "",
    dropdownCssClass: "",
    formatResult: function (S, T, V, R) {
      var U = [];
      x(S.text, V.term, U, R);
      return U.join("");
    },
    formatSelection: function (T, S, R) {
      return T ? R(T.text) : p;
    },
    sortResults: function (S, R, T) {
      return S;
    },
    formatResultCssClass: function (R) {
      return p;
    },
    formatSelectionCssClass: function (S, R) {
      return p;
    },
    formatNoMatches: function () {
      return "No matches found";
    },
    formatInputTooShort: function (R, S) {
      var T = S - R.length;
      return "Please enter " + T + " more character" + (T == 1 ? "" : "s");
    },
    formatInputTooLong: function (S, R) {
      var T = S.length - R;
      return "Please delete " + T + " character" + (T == 1 ? "" : "s");
    },
    formatSelectionTooBig: function (R) {
      return "You can only select " + R + " item" + (R == 1 ? "" : "s");
    },
    formatLoadMore: function (R) {
      return "Loading more results...";
    },
    formatSearching: function () {
      return "Searching...";
    },
    minimumResultsForSearch: 0,
    minimumInputLength: 0,
    maximumInputLength: null,
    maximumSelectionSize: 0,
    id: function (R) {
      return R.id;
    },
    matcher: function (R, S) {
      return (
        e("" + S)
          .toUpperCase()
          .indexOf(e("" + R).toUpperCase()) >= 0
      );
    },
    separator: ",",
    tokenSeparators: [],
    tokenizer: g,
    escapeMarkup: J,
    blurOnChange: false,
    selectOnBlur: false,
    adaptContainerCssClass: function (R) {
      return R;
    },
    adaptDropdownCssClass: function (R) {
      return null;
    },
    nextSearchTerm: function (R, S) {
      return p;
    },
  };
  G.fn.select2.ajaxDefaults = {
    transport: G.ajax,
    params: {
      type: "GET",
      cache: false,
      dataType: "json",
    },
  };
  window.Select2 = {
    query: {
      ajax: H,
      local: K,
      tags: C,
    },
    util: {
      debounce: n,
      markMatch: x,
      escapeMarkup: J,
      stripDiacritics: e,
    },
    class: {
      abstract: Q,
      single: A,
      multi: c,
    },
  };
})(jQuery);
(function (c) {
  var b,
    a = c();
  c.fn.sortable = function (d) {
    var e = String(d);
    d = c.extend(
      {
        connectWith: false,
      },
      d
    );
    return this.each(function () {
      if (/^enable|disable|destroy$/.test(e)) {
        var f = c(this)
          .children(c(this).data("items"))
          .attr("draggable", e == "enable");
        if (e == "destroy") {
          f.add(this)
            .removeData("connectWith items")
            .off(
              "dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"
            );
        }
        return;
      }
      var h,
        g,
        f = c(this).children(d.items);
      var i = c(
        "<" +
          (/^ul|ol$/i.test(this.tagName) ? "li" : "div") +
          ' class="sortable-placeholder">'
      );
      f.find(d.handle)
        .mousedown(function () {
          h = true;
        })
        .mouseup(function () {
          h = false;
        });
      c(this).data("items", d.items);
      a = a.add(i);
      if (d.connectWith) {
        c(d.connectWith).add(this).data("connectWith", d.connectWith);
      }
      f.attr("draggable", "true")
        .on("dragstart.h5s", function (n) {
          if (d.handle && !h) {
            return false;
          }
          h = false;
          var m = n.originalEvent.dataTransfer;
          m.effectAllowed = "move";
          m.setData("Text", "dummy");
          g = (b = c(this)).addClass("sortable-dragging").index();
        })
        .on("dragend.h5s", function () {
          if (!b) {
            return;
          }
          b.removeClass("sortable-dragging").show();
          a.detach();
          if (g != b.index()) {
            b.parent().trigger("sortupdate", {
              item: b,
            });
          }
          b = null;
        })
        .not("a[href], img")
        .on("selectstart.h5s", function () {
          this.dragDrop && this.dragDrop();
          return false;
        })
        .end()
        .add([this, i])
        .on("dragover.h5s dragenter.h5s drop.h5s", function (m) {
          if (!f.is(b) && d.connectWith !== c(b).parent().data("connectWith")) {
            return true;
          }
          if (m.type == "drop") {
            m.stopPropagation();
            a.filter(":visible").after(b);
            b.trigger("dragend.h5s");
            return false;
          }
          m.preventDefault();
          m.originalEvent.dataTransfer.dropEffect = "move";
          if (f.is(this)) {
            if (d.forcePlaceholderSize) {
              i.height(b.outerHeight());
            }
            b.hide();
            c(this)[i.index() < c(this).index() ? "after" : "before"](i);
            a.not(i).detach();
          } else {
            if (!a.is(this) && !c(this).children(d.items).length) {
              a.detach();
              c(this).append(i);
            }
          }
          return false;
        });
    });
  };
})(jQuery);
var requirejs, require, define;
(function (Z) {
  function H(b) {
    return "[object Function]" === L.call(b);
  }
  function I(b) {
    return "[object Array]" === L.call(b);
  }
  function y(b, c) {
    if (b) {
      var e;
      for (e = 0; e < b.length && (!b[e] || !c(b[e], e, b)); e += 1) {}
    }
  }
  function M(b, c) {
    if (b) {
      var e;
      for (e = b.length - 1; -1 < e && (!b[e] || !c(b[e], e, b)); e -= 1) {}
    }
  }
  function t(b, c) {
    return ga.call(b, c);
  }
  function l(b, c) {
    return t(b, c) && b[c];
  }
  function F(b, c) {
    for (var e in b) {
      if (t(b, e) && c(b[e], e)) {
        break;
      }
    }
  }
  function Q(b, c, e, h) {
    c &&
      F(c, function (c, j) {
        if (e || !t(b, j)) {
          h && "string" !== typeof c
            ? (b[j] || (b[j] = {}), Q(b[j], c, e, h))
            : (b[j] = c);
        }
      });
    return b;
  }
  function u(b, c) {
    return function () {
      return c.apply(b, arguments);
    };
  }
  function aa(b) {
    throw b;
  }
  function ba(b) {
    if (!b) {
      return b;
    }
    var c = Z;
    y(b.split("."), function (b) {
      c = c[b];
    });
    return c;
  }
  function A(b, c, e, h) {
    c = Error(c + "\nhttp://requirejs.org/docs/errors.html#" + b);
    c.requireType = b;
    c.requireModules = h;
    e && (c.originalError = e);
    return c;
  }
  function ha(b) {
    function c(a, f, b) {
      var d,
        m,
        c,
        g,
        e,
        h,
        j,
        i = f && f.split("/");
      d = i;
      var n = k.map,
        p = n && n["*"];
      if (a && "." === a.charAt(0)) {
        if (f) {
          d = l(k.pkgs, f) ? (i = [f]) : i.slice(0, i.length - 1);
          f = a = d.concat(a.split("/"));
          for (d = 0; f[d]; d += 1) {
            if (((m = f[d]), "." === m)) {
              f.splice(d, 1), (d -= 1);
            } else {
              if (".." === m) {
                if (1 === d && (".." === f[2] || ".." === f[0])) {
                  break;
                } else {
                  0 < d && (f.splice(d - 1, 2), (d -= 2));
                }
              }
            }
          }
          d = l(k.pkgs, (f = a[0]));
          a = a.join("/");
          d && a === f + "/" + d.main && (a = f);
        } else {
          0 === a.indexOf("./") && (a = a.substring(2));
        }
      }
      if (b && n && (i || p)) {
        f = a.split("/");
        for (d = f.length; 0 < d; d -= 1) {
          c = f.slice(0, d).join("/");
          if (i) {
            for (m = i.length; 0 < m; m -= 1) {
              if ((b = l(n, i.slice(0, m).join("/")))) {
                if ((b = l(b, c))) {
                  g = b;
                  e = d;
                  break;
                }
              }
            }
          }
          if (g) {
            break;
          }
          !h && p && l(p, c) && ((h = l(p, c)), (j = d));
        }
        !g && h && ((g = h), (e = j));
        g && (f.splice(0, e, g), (a = f.join("/")));
      }
      return a;
    }
    function e(a) {
      z &&
        y(document.getElementsByTagName("script"), function (f) {
          if (
            f.getAttribute("data-requiremodule") === a &&
            f.getAttribute("data-requirecontext") === i.contextName
          ) {
            return f.parentNode.removeChild(f), !0;
          }
        });
    }
    function h(a) {
      var f = l(k.paths, a);
      if (f && I(f) && 1 < f.length) {
        return f.shift(), i.require.undef(a), i.require([a]), !0;
      }
    }
    function $(a) {
      var f,
        b = a ? a.indexOf("!") : -1;
      -1 < b && ((f = a.substring(0, b)), (a = a.substring(b + 1, a.length)));
      return [f, a];
    }
    function n(a, f, b, d) {
      var m,
        B,
        g = null,
        e = f ? f.name : null,
        h = a,
        j = !0,
        k = "";
      a || ((j = !1), (a = "_@r" + (L += 1)));
      a = $(a);
      g = a[0];
      a = a[1];
      g && ((g = c(g, e, d)), (B = l(r, g)));
      a &&
        (g
          ? (k =
              B && B.normalize
                ? B.normalize(a, function (a) {
                    return c(a, e, d);
                  })
                : c(a, e, d))
          : ((k = c(a, e, d)),
            (a = $(k)),
            (g = a[0]),
            (k = a[1]),
            (b = !0),
            (m = i.nameToUrl(k))));
      b = g && !B && !b ? "_unnormalized" + (M += 1) : "";
      return {
        prefix: g,
        name: k,
        parentMap: f,
        unnormalized: !!b,
        url: m,
        originalName: h,
        isDefine: j,
        id: (g ? g + "!" + k : k) + b,
      };
    }
    function q(a) {
      var f = a.id,
        b = l(p, f);
      b || (b = p[f] = new i.Module(a));
      return b;
    }
    function s(a, f, b) {
      var d = a.id,
        m = l(p, d);
      if (t(r, d) && (!m || m.defineEmitComplete)) {
        "defined" === f && b(r[d]);
      } else {
        if (((m = q(a)), m.error && "error" === f)) {
          b(m.error);
        } else {
          m.on(f, b);
        }
      }
    }
    function v(a, f) {
      var b = a.requireModules,
        d = !1;
      if (f) {
        f(a);
      } else {
        if (
          (y(b, function (f) {
            if ((f = l(p, f))) {
              (f.error = a), f.events.error && ((d = !0), f.emit("error", a));
            }
          }),
          !d)
        ) {
          j.onError(a);
        }
      }
    }
    function w() {
      R.length && (ia.apply(G, [G.length - 1, 0].concat(R)), (R = []));
    }
    function x(a) {
      delete p[a];
      delete T[a];
    }
    function E(a, f, b) {
      var d = a.map.id;
      a.error
        ? a.emit("error", a.error)
        : ((f[d] = !0),
          y(a.depMaps, function (d, c) {
            var g = d.id,
              e = l(p, g);
            e &&
              !a.depMatched[c] &&
              !b[g] &&
              (l(f, g) ? (a.defineDep(c, r[g]), a.check()) : E(e, f, b));
          }),
          (b[d] = !0));
    }
    function C() {
      var a,
        f,
        b,
        d,
        m =
          (b = 1000 * k.waitSeconds) && i.startTime + b < new Date().getTime(),
        c = [],
        g = [],
        j = !1,
        l = !0;
      if (!U) {
        U = !0;
        F(T, function (b) {
          a = b.map;
          f = a.id;
          if (b.enabled && (a.isDefine || g.push(b), !b.error)) {
            if (!b.inited && m) {
              h(f) ? (j = d = !0) : (c.push(f), e(f));
            } else {
              if (
                !b.inited &&
                b.fetched &&
                a.isDefine &&
                ((j = !0), !a.prefix)
              ) {
                return (l = !1);
              }
            }
          }
        });
        if (m && c.length) {
          return (
            (b = A("timeout", "Load timeout for modules: " + c, null, c)),
            (b.contextName = i.contextName),
            v(b)
          );
        }
        l &&
          y(g, function (a) {
            E(a, {}, {});
          });
        if ((!m || d) && j) {
          if ((z || da) && !V) {
            V = setTimeout(function () {
              V = 0;
              C();
            }, 50);
          }
        }
        U = !1;
      }
    }
    function D(a) {
      t(r, a[0]) || q(n(a[0], null, !0)).init(a[1], a[2]);
    }
    function J(a) {
      var a = a.currentTarget || a.srcElement,
        b = i.onScriptLoad;
      a.detachEvent && !W
        ? a.detachEvent("onreadystatechange", b)
        : a.removeEventListener("load", b, !1);
      b = i.onScriptError;
      (!a.detachEvent || W) && a.removeEventListener("error", b, !1);
      return {
        node: a,
        id: a && a.getAttribute("data-requiremodule"),
      };
    }
    function K() {
      var a;
      for (w(); G.length; ) {
        a = G.shift();
        if (null === a[0]) {
          return v(
            A(
              "mismatch",
              "Mismatched anonymous define() module: " + a[a.length - 1]
            )
          );
        }
        D(a);
      }
    }
    var U,
      X,
      i,
      N,
      V,
      k = {
        waitSeconds: 7,
        baseUrl: "./",
        paths: {},
        pkgs: {},
        shim: {},
        config: {},
      },
      p = {},
      T = {},
      Y = {},
      G = [],
      r = {},
      S = {},
      L = 1,
      M = 1;
    N = {
      require: function (a) {
        return a.require ? a.require : (a.require = i.makeRequire(a.map));
      },
      exports: function (a) {
        a.usingExports = !0;
        if (a.map.isDefine) {
          return a.exports ? a.exports : (a.exports = r[a.map.id] = {});
        }
      },
      module: function (a) {
        return a.module
          ? a.module
          : (a.module = {
              id: a.map.id,
              uri: a.map.url,
              config: function () {
                var b = l(k.pkgs, a.map.id);
                return (
                  (b
                    ? l(k.config, a.map.id + "/" + b.main)
                    : l(k.config, a.map.id)) || {}
                );
              },
              exports: r[a.map.id],
            });
      },
    };
    X = function (a) {
      this.events = l(Y, a.id) || {};
      this.map = a;
      this.shim = l(k.shim, a.id);
      this.depExports = [];
      this.depMaps = [];
      this.depMatched = [];
      this.pluginMaps = {};
      this.depCount = 0;
    };
    X.prototype = {
      init: function (a, b, c, d) {
        d = d || {};
        if (!this.inited) {
          this.factory = b;
          if (c) {
            this.on("error", c);
          } else {
            this.events.error &&
              (c = u(this, function (a) {
                this.emit("error", a);
              }));
          }
          this.depMaps = a && a.slice(0);
          this.errback = c;
          this.inited = !0;
          this.ignore = d.ignore;
          d.enabled || this.enabled ? this.enable() : this.check();
        }
      },
      defineDep: function (a, b) {
        this.depMatched[a] ||
          ((this.depMatched[a] = !0),
          (this.depCount -= 1),
          (this.depExports[a] = b));
      },
      fetch: function () {
        if (!this.fetched) {
          this.fetched = !0;
          i.startTime = new Date().getTime();
          var a = this.map;
          if (this.shim) {
            i.makeRequire(this.map, {
              enableBuildCallback: !0,
            })(
              this.shim.deps || [],
              u(this, function () {
                return a.prefix ? this.callPlugin() : this.load();
              })
            );
          } else {
            return a.prefix ? this.callPlugin() : this.load();
          }
        }
      },
      load: function () {
        var a = this.map.url;
        S[a] || ((S[a] = !0), i.load(this.map.id, a));
      },
      check: function () {
        if (this.enabled && !this.enabling) {
          var a,
            b,
            c = this.map.id;
          b = this.depExports;
          var d = this.exports,
            m = this.factory;
          if (this.inited) {
            if (this.error) {
              this.emit("error", this.error);
            } else {
              if (!this.defining) {
                this.defining = !0;
                if (1 > this.depCount && !this.defined) {
                  if (H(m)) {
                    if (
                      (this.events.error && this.map.isDefine) ||
                      j.onError !== aa
                    ) {
                      try {
                        d = i.execCb(c, m, b, d);
                      } catch (e) {
                        a = e;
                      }
                    } else {
                      d = i.execCb(c, m, b, d);
                    }
                    this.map.isDefine &&
                      ((b = this.module) &&
                      void 0 !== b.exports &&
                      b.exports !== this.exports
                        ? (d = b.exports)
                        : void 0 === d &&
                          this.usingExports &&
                          (d = this.exports));
                    if (a) {
                      return (
                        (a.requireMap = this.map),
                        (a.requireModules = this.map.isDefine
                          ? [this.map.id]
                          : null),
                        (a.requireType = this.map.isDefine
                          ? "define"
                          : "require"),
                        v((this.error = a))
                      );
                    }
                  } else {
                    d = m;
                  }
                  this.exports = d;
                  if (
                    this.map.isDefine &&
                    !this.ignore &&
                    ((r[c] = d), j.onResourceLoad)
                  ) {
                    j.onResourceLoad(i, this.map, this.depMaps);
                  }
                  x(c);
                  this.defined = !0;
                }
                this.defining = !1;
                this.defined &&
                  !this.defineEmitted &&
                  ((this.defineEmitted = !0),
                  this.emit("defined", this.exports),
                  (this.defineEmitComplete = !0));
              }
            }
          } else {
            this.fetch();
          }
        }
      },
      callPlugin: function () {
        var a = this.map,
          b = a.id,
          e = n(a.prefix);
        this.depMaps.push(e);
        s(
          e,
          "defined",
          u(this, function (d) {
            var m, e;
            e = this.map.name;
            var g = this.map.parentMap ? this.map.parentMap.name : null,
              h = i.makeRequire(a.parentMap, {
                enableBuildCallback: !0,
              });
            if (this.map.unnormalized) {
              if (
                (d.normalize &&
                  (e =
                    d.normalize(e, function (a) {
                      return c(a, g, !0);
                    }) || ""),
                (d = n(a.prefix + "!" + e, this.map.parentMap)),
                s(
                  d,
                  "defined",
                  u(this, function (a) {
                    this.init(
                      [],
                      function () {
                        return a;
                      },
                      null,
                      {
                        enabled: !0,
                        ignore: !0,
                      }
                    );
                  })
                ),
                (e = l(p, d.id)))
              ) {
                this.depMaps.push(d);
                if (this.events.error) {
                  e.on(
                    "error",
                    u(this, function (a) {
                      this.emit("error", a);
                    })
                  );
                }
                e.enable();
              }
            } else {
              (m = u(this, function (a) {
                this.init(
                  [],
                  function () {
                    return a;
                  },
                  null,
                  {
                    enabled: !0,
                  }
                );
              })),
                (m.error = u(this, function (a) {
                  this.inited = !0;
                  this.error = a;
                  a.requireModules = [b];
                  F(p, function (a) {
                    0 === a.map.id.indexOf(b + "_unnormalized") && x(a.map.id);
                  });
                  v(a);
                })),
                (m.fromText = u(this, function (d, c) {
                  var e = a.name,
                    g = n(e),
                    B = O;
                  c && (d = c);
                  B && (O = !1);
                  q(g);
                  t(k.config, b) && (k.config[e] = k.config[b]);
                  try {
                    j.exec(d);
                  } catch (ca) {
                    return v(
                      A(
                        "fromtexteval",
                        "fromText eval for " + b + " failed: " + ca,
                        ca,
                        [b]
                      )
                    );
                  }
                  B && (O = !0);
                  this.depMaps.push(g);
                  i.completeLoad(e);
                  h([e], m);
                })),
                d.load(a.name, h, m, k);
            }
          })
        );
        i.enable(e, this);
        this.pluginMaps[e.id] = e;
      },
      enable: function () {
        T[this.map.id] = this;
        this.enabling = this.enabled = !0;
        y(
          this.depMaps,
          u(this, function (a, b) {
            var c, d;
            if ("string" === typeof a) {
              a = n(
                a,
                this.map.isDefine ? this.map : this.map.parentMap,
                !1,
                !this.skipMap
              );
              this.depMaps[b] = a;
              if ((c = l(N, a.id))) {
                this.depExports[b] = c(this);
                return;
              }
              this.depCount += 1;
              s(
                a,
                "defined",
                u(this, function (a) {
                  this.defineDep(b, a);
                  this.check();
                })
              );
              this.errback && s(a, "error", u(this, this.errback));
            }
            c = a.id;
            d = p[c];
            !t(N, c) && d && !d.enabled && i.enable(a, this);
          })
        );
        F(
          this.pluginMaps,
          u(this, function (a) {
            var b = l(p, a.id);
            b && !b.enabled && i.enable(a, this);
          })
        );
        this.enabling = !1;
        this.check();
      },
      on: function (a, b) {
        var c = this.events[a];
        c || (c = this.events[a] = []);
        c.push(b);
      },
      emit: function (a, b) {
        y(this.events[a], function (a) {
          a(b);
        });
        "error" === a && delete this.events[a];
      },
    };
    i = {
      config: k,
      contextName: b,
      registry: p,
      defined: r,
      urlFetched: S,
      defQueue: G,
      Module: X,
      makeModuleMap: n,
      nextTick: j.nextTick,
      onError: v,
      configure: function (a) {
        a.baseUrl &&
          "/" !== a.baseUrl.charAt(a.baseUrl.length - 1) &&
          (a.baseUrl += "/");
        var b = k.pkgs,
          c = k.shim,
          d = {
            paths: !0,
            config: !0,
            map: !0,
          };
        F(a, function (a, b) {
          d[b]
            ? "map" === b
              ? (k.map || (k.map = {}), Q(k[b], a, !0, !0))
              : Q(k[b], a, !0)
            : (k[b] = a);
        });
        a.shim &&
          (F(a.shim, function (a, b) {
            I(a) &&
              (a = {
                deps: a,
              });
            if ((a.exports || a.init) && !a.exportsFn) {
              a.exportsFn = i.makeShimExports(a);
            }
            c[b] = a;
          }),
          (k.shim = c));
        a.packages &&
          (y(a.packages, function (a) {
            a =
              "string" === typeof a
                ? {
                    name: a,
                  }
                : a;
            b[a.name] = {
              name: a.name,
              location: a.location || a.name,
              main: (a.main || "main").replace(ja, "").replace(ea, ""),
            };
          }),
          (k.pkgs = b));
        F(p, function (a, b) {
          !a.inited && !a.map.unnormalized && (a.map = n(b));
        });
        if (a.deps || a.callback) {
          i.require(a.deps || [], a.callback);
        }
      },
      makeShimExports: function (a) {
        return function () {
          var b;
          a.init && (b = a.init.apply(Z, arguments));
          return b || (a.exports && ba(a.exports));
        };
      },
      makeRequire: function (a, f) {
        function h(d, c, e) {
          var g, k;
          f.enableBuildCallback && c && H(c) && (c.__requireJsBuild = !0);
          if ("string" === typeof d) {
            if (H(c)) {
              return v(A("requireargs", "Invalid require call"), e);
            }
            if (a && t(N, d)) {
              return N[d](p[a.id]);
            }
            if (j.get) {
              return j.get(i, d, a, h);
            }
            g = n(d, a, !1, !0);
            g = g.id;
            return !t(r, g)
              ? v(
                  A(
                    "notloaded",
                    'Module name "' +
                      g +
                      '" has not been loaded yet for context: ' +
                      b +
                      (a ? "" : ". Use require([])")
                  )
                )
              : r[g];
          }
          K();
          i.nextTick(function () {
            K();
            k = q(n(null, a));
            k.skipMap = f.skipMap;
            k.init(d, c, e, {
              enabled: !0,
            });
            C();
          });
          return h;
        }
        f = f || {};
        Q(h, {
          isBrowser: z,
          toUrl: function (b) {
            var f,
              e = b.lastIndexOf("."),
              g = b.split("/")[0];
            if (-1 !== e && (!("." === g || ".." === g) || 1 < e)) {
              (f = b.substring(e, b.length)), (b = b.substring(0, e));
            }
            return i.nameToUrl(c(b, a && a.id, !0), f, !0);
          },
          defined: function (b) {
            return t(r, n(b, a, !1, !0).id);
          },
          specified: function (b) {
            b = n(b, a, !1, !0).id;
            return t(r, b) || t(p, b);
          },
        });
        a ||
          (h.undef = function (b) {
            w();
            var c = n(b, a, !0),
              f = l(p, b);
            e(b);
            delete r[b];
            delete S[c.url];
            delete Y[b];
            f && (f.events.defined && (Y[b] = f.events), x(b));
          });
        return h;
      },
      enable: function (a) {
        l(p, a.id) && q(a).enable();
      },
      completeLoad: function (a) {
        var b,
          c,
          d = l(k.shim, a) || {},
          e = d.exports;
        for (w(); G.length; ) {
          c = G.shift();
          if (null === c[0]) {
            c[0] = a;
            if (b) {
              break;
            }
            b = !0;
          } else {
            c[0] === a && (b = !0);
          }
          D(c);
        }
        c = l(p, a);
        if (!b && !t(r, a) && c && !c.inited) {
          if (k.enforceDefine && (!e || !ba(e))) {
            return h(a)
              ? void 0
              : v(A("nodefine", "No define call for " + a, null, [a]));
          }
          D([a, d.deps || [], d.exportsFn]);
        }
        C();
      },
      nameToUrl: function (a, b, c) {
        var d, e, h, g, i, n;
        if (j.jsExtRegExp.test(a)) {
          g = a + (b || "");
        } else {
          d = k.paths;
          e = k.pkgs;
          g = a.split("/");
          for (i = g.length; 0 < i; i -= 1) {
            if (((n = g.slice(0, i).join("/")), (h = l(e, n)), (n = l(d, n)))) {
              I(n) && (n = n[0]);
              g.splice(0, i, n);
              break;
            } else {
              if (h) {
                a = a === h.name ? h.location + "/" + h.main : h.location;
                g.splice(0, i, a);
                break;
              }
            }
          }
          g = g.join("/");
          g += b || (/^data\:|\?/.test(g) || c ? "" : ".js");
          g =
            ("/" === g.charAt(0) || g.match(/^[\w\+\.\-]+:/) ? "" : k.baseUrl) +
            g;
        }
        return k.urlArgs
          ? g + ((-1 === g.indexOf("?") ? "?" : "&") + k.urlArgs)
          : g;
      },
      load: function (a, b) {
        j.load(i, a, b);
      },
      execCb: function (a, b, c, d) {
        return b.apply(d, c);
      },
      onScriptLoad: function (a) {
        if (
          "load" === a.type ||
          ka.test((a.currentTarget || a.srcElement).readyState)
        ) {
          (P = null), (a = J(a)), i.completeLoad(a.id);
        }
      },
      onScriptError: function (a) {
        var b = J(a);
        if (!h(b.id)) {
          return v(A("scripterror", "Script error for: " + b.id, a, [b.id]));
        }
      },
    };
    i.require = i.makeRequire();
    return i;
  }
  var j,
    w,
    x,
    C,
    J,
    D,
    P,
    K,
    q,
    fa,
    la = /(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,
    ma = /[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,
    ea = /\.js$/,
    ja = /^\.\//;
  w = Object.prototype;
  var L = w.toString,
    ga = w.hasOwnProperty,
    ia = Array.prototype.splice,
    z = !!(
      "undefined" !== typeof window &&
      "undefined" !== typeof navigator &&
      window.document
    ),
    da = !z && "undefined" !== typeof importScripts,
    ka =
      z && "PLAYSTATION 3" === navigator.platform
        ? /^complete$/
        : /^(complete|loaded)$/,
    W = "undefined" !== typeof opera && "[object Opera]" === opera.toString(),
    E = {},
    s = {},
    R = [],
    O = !1;
  if ("undefined" === typeof define) {
    if ("undefined" !== typeof requirejs) {
      if (H(requirejs)) {
        return;
      }
      s = requirejs;
      requirejs = void 0;
    }
    "undefined" !== typeof require &&
      !H(require) &&
      ((s = require), (require = void 0));
    j = requirejs = function (b, c, e, h) {
      var q,
        n = "_";
      !I(b) &&
        "string" !== typeof b &&
        ((q = b), I(c) ? ((b = c), (c = e), (e = h)) : (b = []));
      q && q.context && (n = q.context);
      (h = l(E, n)) || (h = E[n] = j.s.newContext(n));
      q && h.configure(q);
      return h.require(b, c, e);
    };
    j.config = function (b) {
      return j(b);
    };
    j.nextTick =
      "undefined" !== typeof setTimeout
        ? function (b) {
            setTimeout(b, 4);
          }
        : function (b) {
            b();
          };
    require || (require = j);
    j.version = "2.1.9";
    j.jsExtRegExp = /^\/|:|\?|\.js$/;
    j.isBrowser = z;
    w = j.s = {
      contexts: E,
      newContext: ha,
    };
    j({});
    y(["toUrl", "undef", "defined", "specified"], function (b) {
      j[b] = function () {
        var c = E._;
        return c.require[b].apply(c, arguments);
      };
    });
    if (
      z &&
      ((x = w.head = document.getElementsByTagName("head")[0]),
      (C = document.getElementsByTagName("base")[0]))
    ) {
      x = w.head = C.parentNode;
    }
    j.onError = aa;
    j.createNode = function (b) {
      var c = b.xhtml
        ? document.createElementNS(
            "http://www.w3.org/1999/xhtml",
            "html:script"
          )
        : document.createElement("script");
      c.type = b.scriptType || "text/javascript";
      c.charset = "utf-8";
      c.async = !0;
      return c;
    };
    j.load = function (b, c, e) {
      var h = (b && b.config) || {};
      if (z) {
        return (
          (h = j.createNode(h, c, e)),
          h.setAttribute("data-requirecontext", b.contextName),
          h.setAttribute("data-requiremodule", c),
          h.attachEvent &&
          !(
            h.attachEvent.toString &&
            0 > h.attachEvent.toString().indexOf("[native code")
          ) &&
          !W
            ? ((O = !0), h.attachEvent("onreadystatechange", b.onScriptLoad))
            : (h.addEventListener("load", b.onScriptLoad, !1),
              h.addEventListener("error", b.onScriptError, !1)),
          (h.src = e),
          (K = h),
          C ? x.insertBefore(h, C) : x.appendChild(h),
          (K = null),
          h
        );
      }
      if (da) {
        try {
          importScripts(e), b.completeLoad(c);
        } catch (l) {
          b.onError(
            A(
              "importscripts",
              "importScripts failed for " + c + " at " + e,
              l,
              [c]
            )
          );
        }
      }
    };
    z &&
      !s.skipDataMain &&
      M(document.getElementsByTagName("script"), function (b) {
        x || (x = b.parentNode);
        if ((J = b.getAttribute("data-main"))) {
          return (
            (q = J),
            s.baseUrl ||
              ((D = q.split("/")),
              (q = D.pop()),
              (fa = D.length ? D.join("/") + "/" : "./"),
              (s.baseUrl = fa)),
            (q = q.replace(ea, "")),
            j.jsExtRegExp.test(q) && (q = J),
            (s.deps = s.deps ? s.deps.concat(q) : [q]),
            !0
          );
        }
      });
    define = function (b, c, e) {
      var h, j;
      "string" !== typeof b && ((e = c), (c = b), (b = null));
      I(c) || ((e = c), (c = null));
      !c &&
        H(e) &&
        ((c = []),
        e.length &&
          (e
            .toString()
            .replace(la, "")
            .replace(ma, function (b, e) {
              c.push(e);
            }),
          (c = (
            1 === e.length ? ["require"] : ["require", "exports", "module"]
          ).concat(c))));
      if (O) {
        if (!(h = K)) {
          (P && "interactive" === P.readyState) ||
            M(document.getElementsByTagName("script"), function (b) {
              if ("interactive" === b.readyState) {
                return (P = b);
              }
            }),
            (h = P);
        }
        h &&
          (b || (b = h.getAttribute("data-requiremodule")),
          (j = E[h.getAttribute("data-requirecontext")]));
      }
      (j ? j.defQueue : R).push([b, c, e]);
    };
    define.amd = {
      jQuery: !0,
    };
    j.exec = function (b) {
      return eval(b);
    };
    j(s);
  }
})(this);
TTL_DAY = 86400000;
requirejs.config({
  waitSeconds: 15000,
  paths: {
    sidebar: ["js/step.sidebar-25.10.6.min"],
    quick_lexicon: ["js/step.quick-lexicon-25.10.6.min"],
    qtip: ["js/step.qtip-25.10.6.min"],
    view_help_menu: ["js/step.help-menu-25.10.6.min"],
    drag: ["js/step.draggabilly-25.10.6.min"],
    menu_extras: ["js/step.menu_extras-25.10.6.min"],
    html2canvas: ["js/step.html2canvas-25.10.6.min"],
    search: ["js/step.search-25.10.6.min"],
  },
});
jQuery.cookie = function (b, m, p) {
  if (typeof m != "undefined") {
    p = p || {};
    if (m === null) {
      m = "";
      p.expires = -1;
    }
    var e = "";
    if (!p.expires) {
      p.expires = 90;
    }
    if (p.expires && (typeof p.expires == "number" || p.expires.toUTCString)) {
      var f;
      if (typeof p.expires == "number") {
        f = new Date();
        f.setTime(f.getTime() + p.expires * 24 * 60 * 60 * 1000);
      } else {
        f = p.expires;
      }
      e = "; expires=" + f.toUTCString();
    }
    var o = p.path ? "; path=" + p.path : "";
    var g = p.domain ? "; domain=" + p.domain : "";
    var a = p.secure ? "; secure" : "";
    document.cookie = [b, "=", encodeURIComponent(m), e, o, g, a].join("");
    return m;
  } else {
    var d = null;
    if (document.cookie && document.cookie != "") {
      var n = document.cookie.split(";");
      for (var h = 0; h < n.length; h++) {
        var c = jQuery.trim(n[h]);
        if (c.substring(0, b.length + 1) == b + "=") {
          d = decodeURIComponent(c.substring(b.length + 1));
          break;
        }
      }
    }
    return d;
  }
};
jQuery.fn.sortElements = (function () {
  var a = [].sort;
  return function (c, d) {
    d =
      d ||
      function () {
        return this;
      };
    var b = this.map(function () {
      var f = d.call(this),
        e = f.parentNode,
        g = e.insertBefore(document.createTextNode(""), f.nextSibling);
      return function () {
        if (e === this) {
          throw new Error(
            "You can't sort elements if any one is a descendant of another."
          );
        }
        e.insertBefore(this, g);
        e.removeChild(g);
      };
    });
    return a.call(this, c).each(function (e) {
      b[e].call(d.call(this));
    });
  };
})();
VERSION = "version";
REFERENCE = "reference";
LIMIT = "limit";
TEXT_SEARCH = "text";
EXAMPLE_DATA = "examples";
SYNTAX = "syntax";
GREEK_MEANINGS = "greekMeanings";
GREEK = "greek";
HEBREW_MEANINGS = "hebrewMeanings";
HEBREW = "hebrew";
NAMES = "names";
STRONG_NUMBER = "strong";
MEANINGS = "meanings";
SUBJECT_SEARCH = "subject";
NAVE_SEARCH = "nave";
NAVE_SEARCH_EXTENDED = "xnave";
TOPIC_BY_REF = "topicref";
RELATED_VERSES = "relatedrefs";
EXACT_FORM = "exactForm";
REF_VERSION = "ESV";
VOCAB_SORT = "VOCABULARY";
ORIGINAL_SPELLING_SORT = "ORIGINAL_SPELLING";
SCRIPTURE_SORT = "SCRIPTURE";
KEY_PAUSE = 200;
MOUSE_PAUSE = 450;
TOUCH_DURATION = 50;
TOUCH_CANCELLATION_TIME = 150;
DS_VERSIONS = "allVersions";
URL_SEPARATOR = "@";
if (typeof STEP_SERVER_BASE_URL === "undefined") {
  STEP_SERVER_BASE_URL = "rest/";
} else {
  if (STEP_SERVER_BASE_URL.indexOf("https://") == 0) {
    var parts = STEP_SERVER_BASE_URL.substr(8).split(".");
    if (
      parts.length >= 4 &&
      parts[1] === "api" &&
      parts[2] === "stepbible" &&
      parts[3].indexOf("org/rest/") == 0
    ) {
      $.getJSON(
        STEP_SERVER_BASE_URL.substring(0, STEP_SERVER_BASE_URL.length - 5) +
          "test/short.json",
        function () {}
      ).fail(function () {
        STEP_SERVER_BASE_URL = "rest/";
        updateVars();
      });
    }
  }
}
updateVars();
function changeBaseURL() {
  if (STEP_SERVER_BASE_URL.indexOf("https://") == 0) {
    var a = STEP_SERVER_BASE_URL.substr(8).split(".");
    if (
      a.length >= 4 &&
      a[1] === "api" &&
      a[2] === "stepbible" &&
      a[3].indexOf("org") == 0
    ) {
      STEP_SERVER_BASE_URL = "https://www.stepbible.org/rest/";
      updateVars();
      return true;
    }
  }
  return false;
}
function updateVars() {
  BOOKMARKS_GET = STEP_SERVER_BASE_URL + "favourites/getBookmarks";
  BOOKMARKS_ADD = STEP_SERVER_BASE_URL + "favourites/addBookmark/";
  HISTORY_GET = STEP_SERVER_BASE_URL + "favourites/getHistory/";
  HISTORY_ADD = STEP_SERVER_BASE_URL + "favourites/addHistory/";
  ALTERNATIVE_TRANSLATIONS =
    STEP_SERVER_BASE_URL + "alternativeTranslations/get/";
  ANALYSIS_STATS = STEP_SERVER_BASE_URL + "analysis/analyseStats/";
  BIBLE_GET_MODULES = STEP_SERVER_BASE_URL + "bible/getModules/";
  BIBLE_GET_BIBLE_TEXT = STEP_SERVER_BASE_URL + "bible/getBibleText/";
  BIBLE_GET_FEATURES = STEP_SERVER_BASE_URL + "bible/getFeatures/";
  BIBLE_GET_ALL_FEATURES = STEP_SERVER_BASE_URL + "bible/getAllFeatures/";
  BIBLE_GET_BIBLE_BOOK_NAMES =
    STEP_SERVER_BASE_URL + "bible/getBibleBookNames/";
  BIBLE_GET_NEXT_CHAPTER = STEP_SERVER_BASE_URL + "bible/getNextChapter/";
  BIBLE_GET_PREVIOUS_CHAPTER =
    STEP_SERVER_BASE_URL + "bible/getPreviousChapter/";
  BIBLE_CONVERT_VERSIFICATION =
    STEP_SERVER_BASE_URL + "bible/convertReferenceForBook/";
  BIBLE_GET_BY_NUMBER = STEP_SERVER_BASE_URL + "bible/getBibleByVerseNumber/";
  BIBLE_GET_KEY_INFO = STEP_SERVER_BASE_URL + "bible/getKeyInfo/";
  BIBLE_EXPAND_TO_CHAPTER = STEP_SERVER_BASE_URL + "bible/expandKeyToChapter/";
  BIBLE_GET_STRONGS_AND_SUBJECTS =
    STEP_SERVER_BASE_URL + "bible/getStrongNumbersAndSubjects/";
  DICTIONARY_GET_BY_HEADWORD =
    STEP_SERVER_BASE_URL + "dictionary/lookupDictionaryByHeadword/";
  DICTIONARY_SEARCH_BY_HEADWORD =
    STEP_SERVER_BASE_URL + "dictionary/searchDictionaryByHeadword/";
  MODULE_GET_ALL_MODULES = STEP_SERVER_BASE_URL + "module/getAllModules/";
  MODULE_GET_ALL_INSTALLABLE_MODULES =
    STEP_SERVER_BASE_URL + "module/getAllInstallableModules/";
  MODULE_GET_INFO = STEP_SERVER_BASE_URL + "module/getInfo/";
  MODULE_GET_QUICK_INFO = STEP_SERVER_BASE_URL + "module/getQuickInfo/";
  MODULE_ADD_DIRECTORY_INSTALLER =
    STEP_SERVER_BASE_URL + "module/addDirectoryInstaller";
  SETUP_INSTALL_FIRST_TIME = STEP_SERVER_BASE_URL + "setup/installFirstTime/";
  SETUP_GET_PROGRESS = STEP_SERVER_BASE_URL + "setup/getProgress/";
  SETUP_IS_COMPLETE = STEP_SERVER_BASE_URL + "setup/isInstallationComplete/";
  SETUP_GET_INSTALLERS = STEP_SERVER_BASE_URL + "setup/getInstallers";
  SETUP_INSTALL_BIBLE = STEP_SERVER_BASE_URL + "setup/installBible/";
  SETUP_PROGRESS_INSTALL =
    STEP_SERVER_BASE_URL + "setup/getProgressOnInstallation/";
  SETUP_PROGRESS_INDEX = STEP_SERVER_BASE_URL + "setup/getProgressOnIndexing/";
  SETUP_REMOVE_MODULE = STEP_SERVER_BASE_URL + "setup/removeModule/";
  SETUP_REINDEX = STEP_SERVER_BASE_URL + "setup/reIndex/";
  SEARCH_MASTER = STEP_SERVER_BASE_URL + "search/masterSearch/";
  SEARCH_AUTO_SUGGESTIONS = STEP_SERVER_BASE_URL + "search/suggest/";
  SEARCH_DEFAULT = STEP_SERVER_BASE_URL + "search/search/";
  SEARCH_ESTIMATES = STEP_SERVER_BASE_URL + "search/estimateSearch/";
  SEARCH_SUGGESTIONS = STEP_SERVER_BASE_URL + "search/getExactForms/";
  SUBJECT_SUGGESTION = STEP_SERVER_BASE_URL + "search/autocompleteSubject/";
  SUBJECT_VERSES = STEP_SERVER_BASE_URL + "search/getSubjectVerses/";
  SUPPORT_CREATE = STEP_SERVER_BASE_URL + "support/createRequest/";
  TIMELINE_GET_EVENTS = STEP_SERVER_BASE_URL + "timeline/getEvents/";
  TIMELINE_GET_EVENTS_IN_PERIOD =
    STEP_SERVER_BASE_URL + "timeline/getEventsInPeriod/";
  TIMELINE_GET_EVENTS_FROM_REFERENCE =
    STEP_SERVER_BASE_URL + "timeline/getEventsFromReference/";
  TIMELINE_GET_CONFIGURATION =
    STEP_SERVER_BASE_URL + "timeline/getTimelineConfiguration";
  TIMELINE_GET_EVENT_INFO =
    STEP_SERVER_BASE_URL + "timeline/getEventInformation/";
  GEOGRAPHY_GET_PLACES = STEP_SERVER_BASE_URL + "geography/getPlaces/";
  USER_CHECK = STEP_SERVER_BASE_URL + "user/checkValidUser/";
  NOTES_BASE = STEP_SERVER_BASE_URL + "notes/notes";
}
(function (a) {
  String.prototype.startsWith = function (b) {
    var c = b.replace("+", "\\+");
    return this.match("^" + step.util.uH(c)) === b;
  };
  a.extend({
    getSafe: function (c, n, h, m, b, f) {
      if (a.isFunction(n)) {
        h = n;
      } else {
        if (n == undefined) {
          n = [];
        } else {
          for (var e = 0; e < n.length; e++) {
            if (n[e] != undefined) {
              c += n[e];
            }
            if (e < n.length - 1) {
              c += "/";
            }
          }
        }
      }
      step.util.uvA++;
      step.util.uG();
      var d = step.state.language();
      var g = step.util.uO(d) ? "" : "?lang=" + d;
      if (c.indexOf("|") > -1) {
        c = c.replace(/\|/g, "@");
      }
      if (c.indexOf("@@") > -1) {
        c = c.replace(/@@/g, "@");
      }
      return a
        .get(c + g, function (o, q, i) {
          if (step.state.responseLanguage == undefined) {
            var p = i.getResponseHeader("step-language");
            if (!step.util.uO(p)) {
              step.state.responseLanguage = p;
            }
          }
          step.util.uvA--;
          step.util.uG();
          if (o && o.errorMessage) {
            if (f) {
              f();
            }
            if (o.operation) {
              a.shout(o.operation.replace(/_/g, "-").toLowerCase(), {
                message: o.errorMessage,
                callback: function () {
                  a.getSafe(c, h);
                },
              });
            } else {
              if (m != undefined) {
                step.util.MP(o.errorMessage, b, m);
              } else {
                step.util.uN(o.errorMessage);
              }
            }
          } else {
            if (h) {
              h(o);
            }
            step.readyToShowPassageSelect = true;
          }
        })
        .error(function () {
          changeBaseURL();
        });
    },
    getPassageSafe: function (b) {
      return this.getSafe(b.url, b.args, b.callback, b.passageId, b.level);
    },
    getUrlVars: function () {
      var f = [],
        e;
      var d = window.location.href;
      if (typeof d !== "string") {
        return f;
      }
      d = d.replace(/%7C/g, URL_SEPARATOR).replace(/\|/g, "@");
      var b = d.slice(d.indexOf("?") + 1).split("&");
      for (var c = 0; c < b.length; c++) {
        e = b[c].split("=");
        f.push(e[0]);
        if (e[1]) {
          f[e[0]] = e.slice(1).join("=").split("#")[0];
        }
      }
      return f;
    },
    getUrlVar: function (b) {
      return a.getUrlVars()[b];
    },
    isChrome: function () {
      return /chrom(e|ium)/.test(navigator.userAgent.toLowerCase());
    },
  });
})(jQuery);
window.step = window.step || {};
step.util = {
  uvA: 0,
  uvB: {},
  uvC: [
    "ESV",
    "KJV",
    "NASB2020",
    "BSB",
    "HCSB",
    "RV_TH",
    "WEB_TH",
    "ASV-TH",
    "CHIUN",
    "CHIUNS",
    "NASB1995",
    "RWEBSTER",
    "SPABES2018EB",
    "ARASVD",
  ],
  uvD: [
    "SBLG_TH",
    "THGNT",
    "TR",
    "BYZ",
    "WHNU",
    "ELZEVIR",
    "ANTONIADES",
    "KHMKCB",
  ],
  uvE: ["LXX_TH"],
  uvF: ["ABEN", "ABGK"],
  uvG: ["THOT", "OSHB", "SP", "SPMT"],
  uvH: [
    "defaultDStrong",
    "count",
    "strongNumber",
    "stepGloss",
    "stepTransliteration",
    "_es_Gloss",
    "_zh_Gloss",
    "_zh_tw_Gloss",
    "shortDef",
    "mediumDef",
    "lsjDefs",
    "_es_Definition",
    "_vi_Definition",
    "_zh_Definition",
    "_zh_tw_Definition",
    "accentedUnicode",
    "rawRelatedNumbers",
    "relatedNos",
    "_stepDetailLexicalTag",
    "_step_Link",
    "_step_Type",
    "_searchResultRange",
    "freqList",
    "shortDefMounce",
    "briefDef",
  ],
  MX: function (e, d) {
    var c = e.d;
    var f = e.v[d];
    var a = {};
    a.grouped = false;
    a.maxReached = false;
    var b = {};
    b.popularity = f[1];
    b.strongNumber = this.uq(f, 2, c);
    b.gloss = this.uq(f, 3, c);
    b.stepTransliteration = this.uq(f, 4, c);
    b._es_Gloss = this.uq(f, 5, c);
    b._zh_Gloss = this.uq(f, 6, c);
    b._zh_tw_Gloss = this.uq(f, 7, c);
    b.matchingForm = this.uq(f, 15, c);
    b._detailLexicalTag = this.uq(f, 18, c);
    b.type = this.uq(f, 20, c);
    b._searchResultRange = this.uq(f, 21, c);
    b.popularityList = this.uq(f, 22, c);
    b.briefDef = this.uq(f, 24, c);
    a.suggestion = b;
    return a;
  },
  uq: function (c, b, a) {
    return b != 1 && Number.isInteger(c[b]) ? a[c[b]] : c[b];
  },
  u7: function (n, g) {
    var f = [
      "strongNumber",
      "gloss",
      "_es_Gloss",
      "_zh_Gloss",
      "_zh_tw_Gloss",
      "stepTransliteration",
      "matchingForm",
      "_searchResultRange",
      "_km_Gloss",
      "briefDef",
    ];
    var i = n.d;
    var b = n.r;
    var m = n.v[g];
    var h = {};
    for (var e = 1; e < step.util.uvH.length; e++) {
      if (m[e] === "") {
        continue;
      }
      if (step.util.uvH[e] === "relatedNos") {
        var a = [];
        relatedNumbersArray = m[e];
        if (Array.isArray(relatedNumbersArray)) {
          for (var d = 0; d < relatedNumbersArray.length; d++) {
            var p = b[m[e][d]];
            var o = {};
            for (var c = 0; c < f.length; c++) {
              if (p[c] !== "") {
                if (Number.isInteger(p[c])) {
                  o[f[c]] = i[p[c]];
                } else {
                  o[f[c]] = p[c];
                }
              }
            }
            a.push(o);
          }
          h[step.util.uvH[e]] = a;
        }
      } else {
        h[step.util.uvH[e]] =
          Number.isInteger(m[e]) && step.util.uvH[e] !== "count"
            ? i[m[e]]
            : m[e];
      }
    }
    return h;
  },
  uA: function (p, n, e, o, c, h) {
    var m = h.split(",");
    for (var g = 0; g < m.length; g++) {
      m[g] = step.util.uk(m[g]);
    }
    for (var g = 0; g < p.length; g++) {
      var b = "";
      if (typeof n[g + e] === "string" && n[g + e] !== "") {
        var d = p[g];
        if (d === "SBLG_TH") {
          d = "SBLG";
        } else {
          if (d === "LXX_TH") {
            d = "LXX";
          } else {
            if (d === "OSHB") {
              d = "OHB";
            }
          }
        }
        b += "<br>" + d + ": ";
        var a = n[g + e].split("@");
        var f = p[g].split("@")[0];
        b +=
          "<a target='_blank' href='?q=version=" +
          d.split("@")[0] +
          URL_SEPARATOR +
          "strong=" +
          o;
        if (p[g].endsWith("@NT")) {
          b += URL_SEPARATOR + "reference=Matt-Rev";
        } else {
          if (p[g].endsWith("@OT")) {
            b += URL_SEPARATOR + "reference=Gen-Mal";
          }
        }
        if (window.location.href.indexOf("debug") > -1) {
          b += "&debug";
        }
        b += "'>" + a[0] + "x in ";
        if (a.length == 2) {
          b += a[1] + " verses";
        } else {
          b += a[0] + " verses";
        }
        b += "</a>";
      }
      if (m.indexOf(f) > -1) {
        c[0] += b;
      } else {
        if ("ESV,NASB2020,SBLG_TH,LXX_TH,THOT".indexOf(f) > -1) {
          c[1] += b;
        } else {
          c[2] += b;
        }
      }
    }
    return c;
  },
  uB: function () {
    if ($(".detailFreqList:visible").length > 0) {
      $(".detailFreqList").hide();
      $(".freqListSelect").text(__s.more + " ...");
      $(".freqListSelectIcon")
        .removeClass("glyphicon-triangle-bottom")
        .addClass("glyphicon-triangle-right");
    } else {
      $(".detailFreqList").show();
      $(".freqListSelect").text(__s.less + " ...");
      $(".freqListSelectIcon")
        .removeClass("glyphicon-triangle-right")
        .addClass("glyphicon-triangle-bottom");
    }
  },
  uE: function (f, h, d, b, e) {
    var g = ["", "", ""];
    if (d !== "") {
      g[0] = "<span style='font-size:12px' class='";
      if (f.substring(0, 1) === "H") {
        g[0] += "hbFontSmall";
      } else {
        g[0] += "unicodeFont";
      }
      g[0] +=
        "'>" +
        d +
        "</span> (<span class='transliteration'>" +
        b +
        "</span>) " +
        f;
    }
    g = step.util.uA(step.util.uvC, h, 0, f, g, e);
    if (f.substring(0, 1) === "H") {
      g = step.util.uA(step.util.uvG, h, step.util.uvC.length, f, g, e);
    } else {
      g = step.util.uA(
        step.util.uvD,
        h,
        step.util.uvC.length + step.util.uvG.length,
        f,
        g,
        e
      );
      g = step.util.uA(
        step.util.uvE,
        h,
        step.util.uvC.length + step.util.uvG.length + step.util.uvD.length,
        f,
        g,
        e
      );
      for (var c = 0; c < step.util.uvF.length; c++) {
        g = step.util.uA(
          [step.util.uvF[c] + "@OT"],
          h,
          step.util.uvC.length +
            step.util.uvG.length +
            step.util.uvD.length +
            step.util.uvE.length +
            c * 2,
          f,
          g,
          e
        );
        g = step.util.uA(
          [step.util.uvF[c] + "@NT"],
          h,
          step.util.uvC.length +
            step.util.uvG.length +
            step.util.uvD.length +
            step.util.uvE.length +
            c * 2 +
            1,
          f,
          g,
          e
        );
      }
    }
    if (d === "" && g[0].indexOf("<br>") == 0) {
      g[0] = g[0].substring(4);
    }
    if (g[0] === "") {
      if (g[1] === "") {
        g[0] = g[2];
        g[2] = "";
      } else {
        if (g[1].indexOf("<br>") == 0) {
          g[1] = g[1].substring(4);
        }
      }
    }
    var a =
      "<span>" +
      __s.frequencies_vary +
      " </span><a href='https://docs.google.com/document/d/1PE_39moIX8dyQdfdiXUS5JkyuzCGnXrVhqBM87ePNqA/preview#bookmark=id.11g1a0zd07wd' target='_blank'>(" +
      __s.why +
      ")</a><br>" +
      g[0] +
      g[1];
    if (g[2] !== "") {
      a +=
        "<br><a onClick='step.util.uB()'><span class='freqListSelect'>More ...</span><i class='freqListSelectIcon glyphicon glyphicon-triangle-right'></i></a><span class='detailFreqList' style='display:none'>" +
        g[2] +
        "</span>";
    }
    return a;
  },
  uF: function (c) {
    if (c === "") {
      return false;
    }
    if (c.indexOf("lemma") > -1) {
      return true;
    }
    c = c.substring(0, 5);
    if (c.substring(0, 1) === "H") {
      if (c.substring(1, 2) === "9") {
        return true;
      }
      var a =
        "H0000,H0408,H0413,H0428,H0518,H0505,H0834,H0834,H0853,H0996,H1571,H1768,H1961,H1992,H2088,H3588,H3651,H3967,H4480,H5704,H5705,H5921,H5922,H5973,H6240,H8033,";
      if (a.indexOf(c + ",") > -1) {
        return true;
      }
    } else {
      var b =
        "G0000,G1063,G1161,G1473,G1565,G1699,G2532,G3588,G3739,G3748,G3754,G3778,G4674,G5100,G5101,G0846,G1438,G1683,G1691,G1698,G1700,G2228,G2248,G2249,G2254,G2257,G2504,G3165,G3427,G3450,G4571,G4671,G4675,G4771,G5023,G5026,G5037,G5124,G5126,G5127,G5129,G5209,G5210,G5213,G5216,";
      if (b.indexOf(c + ",") > -1) {
        return true;
      }
    }
    return false;
  },
  uD: function (c, e, d, f, b) {
    c = c || "";
    if (d !== "") {
      d = " " + d;
    }
    if (step.util.uF(c)) {
      $(e + "='" + c + "']" + d, f).addClass(b);
      $(e + "^='" + c + " ']" + d, f).addClass(b);
    } else {
      $(e + "*='" + c + "']" + d, f).addClass(b);
    }
    var a = c.replace(/[a-zA-Z]$/, "").replace(/\!$/, "");
    if (a !== c) {
      $(e + "*='" + c + "']" + d, f).addClass(b);
      $(e + "*='" + a + "']" + d, f).addClass(b);
    }
  },
  uG: function () {
    var a = step.util.uc(step.util.uP());
    if (this.uvA > 0) {
      a.addClass("waiting");
    } else {
      $(".passageContainer").removeClass("waiting");
    }
  },
  uH: function (a) {
    return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
  },
  S4: function () {
    return (((1 + Math.random()) * 65536) | 0).toString(16).substring(1);
  },
  guid: function () {
    return (
      this.S4() +
      this.S4() +
      "-" +
      this.S4() +
      "-" +
      this.S4() +
      "-" +
      this.S4() +
      "-" +
      this.S4() +
      this.S4() +
      this.S4()
    );
  },
  squashErrors: function (a) {
    $("#errorContainer").remove();
    if (a) {
      a.trigger("squashErrors");
    }
  },
  uJ: function (d, c, a) {
    var b = document.createElement("div");
    b.setAttribute("id", "tmpStepAlert");
    var e = a ? "bottom" : "top";
    b.setAttribute(
      "style",
      "z-index:99999;text-align:center;position:absolute;" +
        e +
        ":15%;left:10%;right:10%;background-color:#ffffcc;color:black;font-size:20px;"
    );
    b.innerHTML =
      d +
      "<div style='font-size:12px'>This message will go away in " +
      c +
      " seconds.</div>";
    setTimeout(function () {
      b.innerHTML =
        d +
        "<div style='font-size:12px'>This message will go away in " +
        Math.ceil(c * 0.666) +
        " seconds.</div>";
      setTimeout(function () {
        b.innerHTML =
          d +
          "<div style='font-size:12px'>This message will go away in " +
          Math.ceil(c * 0.333) +
          " second.</div>";
        setTimeout(function () {
          b.parentNode.removeChild(b);
        }, c * 333);
      }, c * 333);
    }, c * 333);
    document.body.appendChild(b);
  },
  uL: function (b, d) {
    var a = step.settings.get(b);
    if (!a || b.indexOf("kjv_verb") == 0) {
      var c = {};
      c[b] = true;
      step.settings.save(c);
      this.MP(__s[b], d);
    }
  },
  MP: function (d, e, b, c, a) {
    if (e === "error") {
      e = "danger";
    } else {
      if (e == undefined) {
        e = "info";
      }
    }
    if (b == null) {
      b = step.passages.at(0).get("passageId");
    }
    step.passages
      .findWhere({
        passageId: b,
      })
      .trigger("raiseMessage", {
        message: d,
        level: e,
        silent: a,
      });
  },
  uN: function (a) {
    this.MP(a, "danger");
  },
  uO: function (a) {
    if (a == null) {
      return true;
    }
    if (!_.isString(a)) {
      return false;
    }
    return a.match(/^\s*$/g) != null;
  },
  uP: function (b) {
    var a = false;
    var f = $(".passageContainer.active");
    var d;
    if (f.length == 0) {
      f = $(".passageContainer:first");
      d = b = parseInt(f.attr("passage-id"));
      a = true;
    } else {
      d = parseInt(f.attr("passage-id"));
    }
    if (typeof b === "string") {
      b = parseInt(b);
    }
    if ((b !== null && b !== undefined && b != d) || a) {
      var c = $(".passageContainer");
      c.filter(".active").removeClass("active");
      var e = step.passages.findWhere({
        passageId: b,
      });
      if (e == null) {
        var i = step.passages
          .findWhere({
            passageId: d,
          })
          .clone();
        i.id = null;
        step.passages.add(i);
        i.save(
          {
            passageId: b,
            createSilently: true,
            linked: null,
          },
          {
            silent: true,
          }
        );
      } else {
        e.trigger("sync-update", e);
        step.router.mB(e.get("urlFragment"));
      }
      var g = step.util.uc(b);
      g.addClass("active");
      var h = step.util.uQ().get("options");
      if (
        typeof h === "string" &&
        h.indexOf("C") > -1 &&
        g.find(".passageContent").length > 0
      ) {
        $("#colorgrammar-icon").show();
        $("#sideBargenderNumClrs").show();
        $("#colorAdvancedConfig").show();
        $("#noColorGrammar").hide();
        step.util.MQ();
      } else {
        $("#colorgrammar-icon").hide();
        $("#colorAdvancedConfig").hide();
        $("#sideBargenderNumClrs").hide();
        $("#noColorGrammar").show();
        $("#sideBarVerbClrs").hide();
        $("#sideBarHVerbClrs").hide();
      }
      return b;
    }
    return d;
  },
  uQ: function () {
    return step.passages.findWhere({
      passageId: this.uP(),
    });
  },
  uR: function (a, b, o, d, n, e, p) {
    var h = d.toDataURL(n);
    h = h.replace("data:" + n + ";base64,", "");
    var q = new XMLHttpRequest();
    q.open("POST", a, true);
    var c = "--step-form-data123456";
    var m = "--" + c;
    q.setRequestHeader(
      "Content-Type",
      "multipart/form-data; charset=UTF-8; boundary=" + c
    );
    var f = [];
    for (var g = 0; g < e.length; g++) {
      f.push(m);
      f.push('Content-Disposition: form-data; name="' + e[g].key + '"');
      f.push("");
      f.push(e[g].value);
    }
    f.push(m);
    f.push(
      'Content-Disposition: form-data; name="' + b + '"; filename="' + o + '"'
    );
    f.push("");
    f.push(h);
    f.push(m + "--");
    f.push("");
    q.onreadystatechange = function () {
      if (q.readyState == 4) {
        if (q.status == 200 && q.response === "") {
          p(true);
        } else {
          p(false);
        }
      }
    };
    q.send(f.join("\r\n"));
  },
  uS: function (c) {
    if (!c) {
      c = $(".column");
    }
    var a =
      "col-sm-12 col-sm-6 col-sm-4 col-sm-3 col-sm-5columns col-sm-2 col-sm-7columns col-sm-8columns col-sm-9columns col-sm-10columns col-sm-11columns col-sm-1";
    c.removeClass(a);
    var d;
    switch (c.size()) {
      case 1:
        d = "col-sm-12";
        break;
      case 2:
        d = "col-sm-6";
        break;
      case 3:
        d = "col-sm-4";
        break;
      case 4:
        d = "col-sm-3";
        break;
      case 5:
        d = "col-sm-5columns";
        break;
      case 6:
        d = "col-sm-2";
        break;
      case 7:
        d = "col-sm-7columns";
        break;
      case 8:
        d = "col-sm-8columns";
        break;
      case 9:
        d = "col-sm-9columns";
        break;
      case 10:
        d = "col-sm-10columns";
        break;
      case 11:
        d = "col-sm-11columns";
        break;
      case 12:
        d = "col-sm-1";
        break;
      default:
        d = "col-sm-1";
        if (!step.settings.get("tooManyPanelsWarning")) {
          step.util.MP(__s.too_many_panels_notice);
          step.settings.save(
            {
              tooManyPanelsWarning: true,
            },
            {
              silent: true,
            }
          );
        }
        break;
    }
    c.addClass(d);
    var b = $(".passageContainer.active").height();
    if (typeof b === "number") {
      b -= 60;
      b += "px";
    } else {
      b = "85vh";
    }
    $("#lexicon").height(b);
    $("#analysis").height(b);
    $("#history").height(b);
    $("#help").height(b);
  },
  uT: function (a) {
    if (a[0].substr(0, 2) === "t=") {
      a[0] = a[0].substr(2);
    }
  },
  uU: function () {
    $(".passageContainer[passage-id]").each(function () {
      var a = step.passages.findWhere({
        passageId: parseInt($(this).attr("passage-id")),
      });
      if (a) {
        a.save(
          {
            position: $(this).parent().index(),
          },
          {
            silent: true,
          }
        );
      }
    });
  },
  uV: function (c) {
    var b = $(".column").not(".examplesColumn");
    var a = $(".examplesContainer");
    if (a.parent().hasClass("column") && b.length > 0) {
      a.parent().remove();
    } else {
      if (c) {
        $(".examplescolumn").remove();
      }
    }
    this.uS();
  },
  uW: function (a) {
    this.uP(a);
    this.uY(true);
  },
  uX: function (d, e, h, g, i) {
    if (!step.touchDevice || step.touchWideDevice) {
      this.uW(d);
      var b = step.util.uQ();
      if (g) {
        g(b);
      }
      b.save(
        {
          targetLocation: e,
        },
        {
          silent: true,
        }
      );
    }
    var c = e.substr(0, e.lastIndexOf("."));
    if (step.util.uO(c)) {
      c = e;
    }
    if (c.substr(c.indexOf(".") + 1) === "1") {
      var f = c.substr(0, c.indexOf("."));
      var a = step.passageSelect.pF(f);
      if (a == 1) {
        c = f;
      }
    }
    step.router.mC("reference=" + c, h, null, null, true);
    if (i) {
      i.stopPropagation();
    }
  },
  uY: function (a, g) {
    var n = this.uQ();
    if (a) {
      if (n.get("linked") !== null) {
        step.util.uP(n.get("linked"));
        return;
      }
    } else {
      var d = n.get("linked");
      if (d) {
        step.util.ua(d);
      }
    }
    var h = $("#columnHolder");
    var e = h.find(".column").not(".examplesColumn");
    var b = e.has(".passageContainer.active");
    var f = b.clone();
    var i;
    if (!g) {
      i =
        parseInt(
          step.passages
            .max(function (o) {
              return parseInt(o.get("passageId"));
            })
            .get("passageId")
        ) + 1;
    } else {
      i = g.get("passageId");
    }
    f.find(".passageContainer")
      .attr("passage-id", i)
      .find(".passageContent")
      .remove();
    f.find(".argSelect").remove();
    f.find(".select-reference")
      .text(__s.short_title_for_ref + ":")
      .attr("onclick", "step.util.up(" + i + ")");
    f.find(".select-search")
      .html(
        '<i style="font-size:12px" class="find glyphicon glyphicon-search"></i>'
      )
      .attr("onclick", "step.util.ur(" + i + ")");
    f.find(".select-filter").remove();
    f.find(".resultsLabel").html("");
    f.find(".infoIcon").attr("title", "").data("content", "").hide();
    f.find(".popover").remove();
    var c = e.add(f);
    this.uS(c);
    f.insertAfter(b);
    if (a) {
      var m = $(
        "<span class='glyphicon glyphicon-arrow-right linkPanel'></span>"
      )
        .attr("title", __s.panels_linked)
        .click(function () {
          step.util.ua(i);
        });
      f.find(".passageContainer").append(m);
      n.save(
        {
          linked: i,
        },
        {
          silent: true,
        }
      );
    }
    this.uV();
    step.util.uP(i);
    new PassageMenuView({
      model: step.util.uQ(),
    });
    Backbone.Events.trigger("columnsChanged", {});
    return i;
  },
  uZ: function (c) {
    var a = step.passages.findWhere({
      passageId: c,
    });
    var d = a.get("linked");
    a.save(
      {
        linked: null,
      },
      {
        silent: true,
      }
    );
    if (d != null) {
      var b = step.passages.findWhere({
        passageId: d,
      });
      if (b != null) {
        step.util.uc(b.get("passageId")).find(".linkPanel").remove();
      }
    }
  },
  ua: function (c) {
    var d = step.passages.where({
      linked: c,
    });
    var b = [];
    for (var a = 0; a < d.length; a++) {
      b.push(d[a].get("passageId"));
      d[a].save(
        {
          linked: null,
        },
        {
          silent: true,
        }
      );
    }
    step.util.uc(c).find(".linkPanel").remove();
    return b;
  },
  uc: function (a) {
    if (!this._passageContainers) {
      this._passageContainers = {};
    }
    if (isNaN(parseInt(a))) {
      return $(a).closest(".passageContainer");
    }
    var b = $(".passageContainer[passage-id = " + a + "]");
    return b;
  },
  clearTimeout: function (b) {
    var a = this.uvB[b];
    if (a == undefined) {
      this.uvB[b] = a = 0;
    }
    clearTimeout(a);
  },
  delay: function (d, a, b) {
    var c = 0;
    if (b) {
      this.clearTimeout(b);
      if (d) {
        this.uvB[b] = setTimeout(d, a);
      }
    } else {
      clearTimeout(c);
      c = setTimeout(d, a);
    }
  },
  MR: function (a, c, e, b) {
    if (e > 8) {
      return;
    }
    var d = $(a);
    if (d.length > 0) {
      if (step.userLanguageCode === "ar") {
        d.css("direction", "rtl");
      }
      if (b) {
        d.html(c);
        if (a.indexOf("quick") > -1) {
          $("#quickLexicon").show();
          step.util.clearTimeout("showQuickLexicon");
        }
      } else {
        d.text(c);
      }
    } else {
      step.util.delay(
        function () {
          step.util.MR(a, c, e + 1, b);
        },
        120,
        a.substring(1)
      );
    }
  },
  ug: function (c, f) {
    var i = [
      "defaultfont",
      "hbFont",
      "unicodeFont",
      "arabicFont",
      "burmeseFont",
      "chineseFont",
      "copticFont",
      "farsiFont",
      "khmerFont",
      "syriacFont",
    ];
    var g = c.get("passageId");
    var c = step.passages.findWhere({
      passageId: g,
    });
    var a = c.attributes.id;
    var h = false;
    for (var d = 0; d < i.length; d++) {
      var e = "panel_" + a + "_font_" + i[d];
      var m = step[e];
      if (m && m != 0) {
        h = true;
        if (i[d] === "defaultfont" || $(f).hasClass(i[d])) {
          f.css("font-size", m);
        }
        var b = f.find("." + i[d]);
        if (b.length > 0) {
          b.css("font-size", m);
        }
      }
    }
    if (!h) {
      for (var d = 0; d < i.length; d++) {
        var m = step.settings.get(i[d]);
        if (m && m != 0) {
          if (i[d] === "defaultfont" || $(f).hasClass(i[d])) {
            f.css("font-size", m);
          }
          var b = f.find("." + i[d]);
          if (b.length > 0) {
            b.css("font-size", m);
          }
        }
      }
    }
  },
  uh: function (h, t, m) {
    var u = h;
    var n = 0;
    var v = "";
    var g;
    if (typeof m === "number") {
      var d = step.passages.findWhere({
        passageId: m,
      });
      v = d.attributes.id;
      u = "panel_" + v + "_font_" + h;
      g = $(".passageContentHolder", step.util.uc(m));
    } else {
      g = $(".passageContentHolder", step.util.uc(".passageOptionsGroup"));
    }
    var o = [
      "hbFont",
      "unicodeFont",
      "arabicFont",
      "burmeseFont",
      "chineseFont",
      "copticFont",
      "farsiFont",
      "khmerFont",
      "syriacFont",
    ];
    n = step.util.uj(h, m, g);
    if (n > 0) {
      for (var q = 0; q < g.length; q++) {
        var b = {};
        if (h === "defaultfont") {
          for (var p = 0; p < o.length; p++) {
            var r = step.util.ui(o[p], g[q]);
            if (r > 0) {
              b[o[p]] = r;
            }
          }
        }
        if (n > 0) {
          var c = n + t;
          if (typeof m === "number") {
            step[u] = c;
          } else {
            var f = {};
            f[u] = c;
            step.settings.save(f);
          }
          if (h === "defaultfont") {
            $(g[q]).css("font-size", c);
            for (var s in b) {
              if (typeof m === "number") {
                step["panel_" + v + "_font_" + s] = b[s];
              }
              $(g[q])
                .find("." + s)
                .css("font-size", b[s]);
            }
          } else {
            if ($(g[q]).hasClass(h)) {
              $(g[q]).css("font-size", c);
            }
            $(g[q])
              .find("." + h)
              .css("font-size", c);
          }
          $("#" + h + "Btn")
            .find("." + h)
            .css("font-size", c);
          $("#" + h + "Size").text("(" + c + "px)");
          if (typeof m === "undefined") {
            for (var e in step) {
              if (e.startsWith("panel_") && e.indexOf("_font_" + h) > -1) {
                delete step[e];
              }
            }
          }
          var a = step.passage.pA(g[q]);
          var d = step.passages.findWhere({
            passageId: a,
          });
          d.trigger("font:change");
        }
      }
    } else {
      console.log(
        "cannot find current font size so cannot change the font size"
      );
    }
  },
  ui: function (e, d) {
    if (e === "defaultfont") {
      var c = $(d).attr("class").split(" ");
      for (var b = 0; b < c.length; b++) {
        var f = c[b].indexOf("Font");
        if (f >= 2 && f + 4 == c[b].length) {
          return 0;
        }
      }
      return parseInt($(d).css("font-size"));
    } else {
      var a = $(d).find("." + e);
      if (a.length > 0) {
        return parseInt(a.css("font-size"));
      } else {
        if ($(d).hasClass(e)) {
          return parseInt($(d).css("font-size"));
        }
      }
    }
    return 0;
  },
  uj: function (c, b, a) {
    var n = 0;
    if (typeof a === "undefined") {
      a =
        typeof b === "number"
          ? $(".passageContentHolder", step.util.uc(b))
          : $(".passageContentHolder", step.util.uc(".passageOptionsGroup"));
    }
    if (typeof b === "number") {
      n = step.util.ui(c, a[0]);
    } else {
      var m = [];
      for (var h in step) {
        if (h.startsWith("panel_")) {
          var g = h.indexOf("_font_" + c);
          if (g > -1) {
            tmpPanelId = h.substr(6, g - 6);
            m.push(tmpPanelId);
          }
        }
      }
      var e = 0;
      for (var f = 0; f < a.length; f++) {
        var d = step.passages.findWhere({
          passageId: step.passage.pA(a[f]),
        }).attributes.id;
        var p = m.indexOf(d) > -1;
        var o = step.util.ui(c, a[f]);
        if (o > 0) {
          if (p) {
            e = o;
          } else {
            n = o;
            break;
          }
        }
      }
      if (n == 0) {
        n = e;
      }
    }
    return n;
  },
  ul: function (a) {
    if (a == null) {
      return "";
    }
    return a.replace(/"/g, '\\"');
  },
  um: function (g, h, p) {
    var n = new RegExp("version=" + g, "ig");
    var c = h.get("args");
    var f = c.replace(n, "");
    f = "version=" + g + URL_SEPARATOR + f;
    f = f
      .replace(/@@/g, URL_SEPARATOR)
      .replace(/@$/, "")
      .replace(/\|\|/g, URL_SEPARATOR)
      .replace(/\|$/, "");
    var d = (f || "").match(/version=[a-zA-Z0-9]+/gi) || [];
    var o = [];
    for (var m = 0; m < d.length; m++) {
      var e = d[m].substring("version=".length);
      o.push(e);
    }
    var a = o[0];
    var b = o.slice(1);
    if (!step.util.uK(g, h, b)) {
      return;
    }
    h.save(
      {
        args: f,
        masterVersion: a,
        otherVersions: b,
      },
      {
        silent: p,
      }
    );
  },
  ui: {
    iA: function (a) {
      return (
        '<span" class="glyphicon glyphicon-ok ' +
        a +
        '" style="color:var(--clrText);background:var(--clrBackground)"></span>'
      );
    },
    iB: function (e, b, a, d) {
      if (!isNaN(d) && d < 800 && typeof a === "string") {
        if (a === "bible") {
          return e.split(/,/)[0].split(/ /)[0];
        } else {
          if (a === "search") {
            return " ";
          }
        }
      }
      if (e.length <= b) {
        return e;
      }
      var c = e.substr(0, b).lastIndexOf(",");
      c = Math.max(c, e.substr(0, b).lastIndexOf(" AND "));
      c = Math.max(c, e.substr(0, b).lastIndexOf(" OR "));
      c = Math.max(c, e.substr(0, b).lastIndexOf(" NOT "));
      if (c < 5) {
        c = b;
      }
      return e.substr(0, c) + "...";
    },
    iC: function (A, q, s) {
      if (!q) {
        q = $("<span>");
        if (!A) {
          return q.html();
        }
      }
      $("#quickLexicon").hide();
      $(".versePopup").hide();
      var D =
        _.where(A, {
          tokenType: VERSION,
        }) > 1;
      var o = "";
      var x = "";
      var n = "";
      var u = false;
      var g = "";
      var r = [];
      for (var w = 0; w < A.length; w++) {
        if (!A[w].itemType) {
          A[w].itemType = A[w].tokenType;
        }
        if (A[w].itemType === "searchJoins") {
          r = A[w].token.split(",");
        }
      }
      var c = 0;
      var d = false;
      for (var w = 0; w < A.length; w++) {
        if (!A[w].itemType) {
          A[w].itemType = A[w].tokenType;
        }
        var C = A[w].itemType;
        if (C === VERSION) {
          A[w].item = A[w].enhancedTokenInfo;
          if (x.length > 0) {
            x += ", ";
          }
          x +=
            A[w].item.shortInitials.length > 0
              ? step.util.ul(A[w].item.shortInitials)
              : step.util.ul(A[w].token);
          if (o === "") {
            o = x;
          }
          D = false;
        } else {
          if (C === REFERENCE) {
            A[w].item = A[w].enhancedTokenInfo;
            if (n.length > 0) {
              n += ", ";
            }
            n +=
              A[w].item.shortName.length > 0
                ? step.util.ul(A[w].item.shortName)
                : step.util.ul(A[w].token);
          } else {
            if (
              C === SYNTAX ||
              C === STRONG_NUMBER ||
              C === TEXT_SEARCH ||
              C === SUBJECT_SEARCH ||
              C === NAVE_SEARCH ||
              C === NAVE_SEARCH_EXTENDED ||
              C === GREEK ||
              C === HEBREW ||
              C === GREEK_MEANINGS ||
              C === HEBREW_MEANINGS ||
              C === MEANINGS
            ) {
              u = true;
              var y = $(step.util.ui.iD(A[w], D)).text();
              if (y.length > 0) {
                c++;
                if (c > 1 && g.length > 0) {
                  if (r.length >= c - 1) {
                    g += " " + r[c - 2] + " ";
                  } else {
                    if (!d) {
                      g += ", ";
                    }
                  }
                  d = false;
                }
                if (C === SYNTAX) {
                  var m = A[w].token
                    .replace(/\(\s+/g, "(")
                    .replace(/\s+\)/g, ")")
                    .split(" ");
                  step.util.uT(m);
                  if (
                    m.length == 1 &&
                    m[0].search(
                      /\s*(\(*)\s*strong:([GH]\d{1,5}[A-Za-z]?)\s*(\)*)/
                    ) > -1
                  ) {
                    var v = RegExp.$1;
                    var B = RegExp.$2;
                    var f = RegExp.$3;
                    var t = step.util.ue(B, o)[1];
                    if (t === "") {
                      t = B;
                    }
                    g += v + "<i>" + t + "</i>" + f;
                  } else {
                    console.log("unknown syntax search 1: " + m);
                  }
                } else {
                  if (C === GREEK_MEANINGS || C === HEBREW_MEANINGS) {
                    var h = "<i>" + y + "</i>";
                    if (g.indexOf(h) == -1) {
                      g += h;
                    } else {
                      d = true;
                    }
                  } else {
                    if (
                      C === SUBJECT_SEARCH ||
                      C === NAVE_SEARCH ||
                      C === NAVE_SEARCH_EXTENDED
                    ) {
                      g += y.toUpperCase();
                    } else {
                      if (C === MEANINGS) {
                        g += "~" + y;
                      } else {
                        g += y;
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      var b = $(".passageContainer.active").width();
      if (u) {
        b -= 45;
      }
      if (b < 400) {
        $("#thumbsup").hide();
      }
      var a = Math.floor(Math.max(0, b - 220) / 9);
      if (!u) {
        if (x.length + n.length + g.length <= a - 9 && n === "Gen 1") {
          n = __s.short_title_for_ref + ": " + n;
        } else {
          if (n.length == 0) {
            n = __s.short_title_for_ref + ":";
          }
        }
      } else {
        a -= 5;
        if (n.length == 0) {
          a -= 5;
        }
      }
      if (s === "span") {
        x = step.util.ui.iB(x, 16);
        n = step.util.ui.iB(n, 24);
        g = step.util.ui.iB(g, 24);
      } else {
        if (x.length + n.length + g.length > a) {
          x = step.util.ui.iB(x, 16, "bible", b);
          if (x.length + n.length + g.length > a) {
            n = step.util.ui.iB(n, 24);
            if (x.length + n.length + g.length > a) {
              g = step.util.ui.iB(g, 24, "search", b);
              var p = x.length + n.length + g.length;
              if (p > a) {
                x = step.util.ui.iB(
                  x,
                  Math.max(4, x.length - (p - a)),
                  "bible",
                  b
                );
                p = x.length + n.length + g.length;
                if (p > a) {
                  n = step.util.ui.iB(n, Math.max(6, n.length - (a - p)));
                  p = x.length + n.length + g.length;
                  if (p > a) {
                    g = step.util.ui.iB(
                      g,
                      Math.max(6, g.length - (a - p)),
                      "search",
                      b
                    );
                  }
                }
              }
            }
          }
        }
      }
      var e = "";
      if (u) {
        g = g.replace(/ AND /g, "<sub> and </sub>");
        g = g.replace(/ OR /g, "<sub> or </sub>");
        g = g.replace(/ NOT /g, "<sub> not </sub>");
        if (n.length > 0) {
          e = n;
          n = "";
        }
      }
      if (n.length == 0) {
        n = __s.short_title_for_ref + ":";
      }
      if (s === "button") {
        if (x.length > 0) {
          q.append(
            '<button type="button" onclick="step.util.uy()" title="' +
              __s.click_translation +
              '" class="select-' +
              VERSION +
              ' stepButtonTriangle">' +
              x +
              '</button><span class="separator-' +
              VERSION +
              '">&nbsp;</span>'
          );
        }
        var z = step.util.uP();
        q.append(
          '<button type="button" onclick="step.util.up(' +
            z +
            ')" title="' +
            __s.click_passage +
            '" class="select-' +
            REFERENCE +
            ' stepButtonTriangle">' +
            n +
            '</button><span class="separator-' +
            REFERENCE +
            '">&nbsp;</span>'
        );
        q.append(
          '<button type="button" onclick="step.util.ur(' +
            z +
            ')" title="' +
            __s.click_search +
            '" class="select-search stepButtonTriangle"><i style="font-size:10px" class="find glyphicon glyphicon-search"></i>&nbsp;' +
            g +
            "</button>"
        );
        g = g.trim();
        if (g !== "") {
          q.append(
            '<button type="button" onclick="step.util.ur(' +
              z +
              ',\'range_update\')" title="Search range" class="select-filter stepButtonTriangle"><i style="font-size:10px" class="find glyphicon glyphicon-filter"></i>&nbsp;' +
              e +
              "</button>"
          );
        }
      } else {
        if (s === "span") {
          if (x.length > 0) {
            q.append(
              '<span title="' +
                __s.click_translation +
                '" class="argSumSpan">' +
                x +
                "</span>"
            );
          }
          if (n !== "Ref:") {
            if (n === "Ref: Gen 1") {
              n = "Gen 1";
            }
            q.append(
              '<span title="' +
                __s.click_passage +
                '" class="argSumSpan">|&nbsp;' +
                n +
                "</span>"
            );
          }
          if (g !== "") {
            q.append(
              '|<span title="' +
                __s.click_search +
                '" class="argSumSpan"><i style="font-size:12px" class="find glyphicon glyphicon-search"></i>&nbsp;' +
                g +
                "</span>"
            );
          }
          return q.html();
        }
      }
    },
    iD: function (b, a) {
      b.itemType = b.tokenType;
      b.item = b.enhancedTokenInfo;
      if (b.itemType === STRONG_NUMBER) {
        if (b.item) {
          b.itemType =
            (b.item.strongNumber || " ")[0] === "G"
              ? GREEK_MEANINGS
              : HEBREW_MEANINGS;
        }
      } else {
        if (b.itemType === NAVE_SEARCH_EXTENDED || b.itemType === NAVE_SEARCH) {
          b.itemType = SUBJECT_SEARCH;
        }
      }
      return (
        '<span class="argSelect select-' +
        b.itemType +
        '">' +
        this.iF(b, a) +
        "</span>"
      );
    },
    iE: function (c, a) {
      var b;
      switch (c) {
        case VERSION:
          b = __s.translation_commentary;
          break;
        case GREEK:
          b = __s.search_greek;
          break;
        case GREEK_MEANINGS:
          b = row = __s.search_greek_meaning;
          break;
        case HEBREW:
          b = __s.search_hebrew;
          break;
        case HEBREW_MEANINGS:
          b = __s.search_hebrew_meaning;
          break;
        case REFERENCE:
          b = __s.bible_reference;
          break;
        case SUBJECT_SEARCH:
          b = __s.search_topic;
          break;
        case MEANINGS:
          b = __s.search_meaning;
          break;
        case SYNTAX:
          b = __s.query_syntax;
          break;
        case EXACT_FORM:
          b = __s.exact_form;
          break;
        case TEXT_SEARCH:
          b = __s.search_text;
          break;
        case RELATED_VERSES:
          b = __s.verse_related;
          break;
        case TOPIC_BY_REF:
          b = __s.related_by_topic;
          break;
      }
      return a ? "[" + b + "]" : '<span class="source">[' + b + "]</span>";
    },
    iF: function (g, b) {
      if (!g.item) {
        return "";
      }
      var i;
      var e = step.util;
      var a = this.iE(g.itemType, true) + " ";
      switch (g.itemType) {
        case REFERENCE:
          return (
            '<div class="referenceItem" title="' +
            a +
            e.ul(g.item.fullName) +
            '" data-item-type="' +
            g.itemType +
            '" data-select-id="' +
            e.ul(g.item.osisID) +
            '">' +
            g.item.shortName +
            "</div>"
          );
        case VERSION:
          var c = "";
          var d = "";
          if (g.item != undefined) {
            if (g.item.shortInitials !== undefined) {
              c = g.item.shortInitials;
              var h = g.item.initials;
              if (step.keyedVersions[h] === undefined) {
                h = h.toUpperCase();
              }
              if (step.keyedVersions[h] === undefined) {
                d = step.keyedVersions[h].name;
              } else {
                if (step.keyedVersions[c] !== undefined) {
                  d = step.keyedVersions[c].name;
                }
              }
            }
          }
          i =
            '<div class="versionItem ' +
            (b ? "masterVersion" : "") +
            '" title="' +
            a +
            e.ul(c + " - " + d) +
            (b ? "\n" + __s.master_version_info : "") +
            '" data-item-type="' +
            g.itemType +
            '" data-select-id="' +
            e.ul(c) +
            '">' +
            c;
          i = i + "</div>";
          return i;
        case GREEK:
        case HEBREW:
        case GREEK_MEANINGS:
        case HEBREW_MEANINGS:
          return (
            "<div class='" +
            g.itemType +
            "Item' data-item-type=\"" +
            g.itemType +
            '" data-select-id="' +
            e.ul(g.item.stepTransliteration) +
            '" title="' +
            a +
            e.ul(g.item.gloss + ", " + g.item.matchingForm) +
            '"><span class="transliteration">' +
            g.item.stepTransliteration +
            "</span></div>"
          );
        case MEANINGS:
          return (
            '<div class="meaningsItem" title="' +
            a +
            e.ul(g.item.gloss) +
            '" data-item-type="' +
            g.itemType +
            '" data-select-id="' +
            e.ul(g.item.gloss) +
            '">' +
            g.item.gloss +
            "<div>"
          );
        case SUBJECT_SEARCH:
          return (
            '<div class="subjectItem" data-item-type="' +
            g.itemType +
            '" data-select-id="' +
            e.ul(g.item.value) +
            '" title="' +
            a +
            e.ul(g.item.value) +
            '">' +
            g.item.value +
            "<div>"
          );
        case TEXT_SEARCH:
          return (
            '<div class="textItem" data-select-id="' +
            e.ul(g.item.text) +
            '"data-item-type="' +
            g.itemType +
            '" title="' +
            a +
            e.ul(g.item.text) +
            '">' +
            g.item.text +
            "</div>"
          );
        case EXACT_FORM:
          return (
            '<div class="exactFormItem" data-select-id="' +
            e.ul(g.item.text) +
            '"data-item-type="' +
            g.itemType +
            '" title="' +
            a +
            e.ul(g.item.text) +
            '">"' +
            g.item.text +
            '"</div>'
          );
        case SYNTAX:
          return (
            '<div class="syntaxItem"data-item-type="' +
            g.itemType +
            '" data-select-id="' +
            e.ul(g.item.value) +
            '" title="' +
            a +
            e.ul(g.item.value) +
            '">' +
            g.item.text +
            "</div>"
          );
        case TOPIC_BY_REF:
          return (
            '<div class="topicByRefItem" title="' +
            a +
            e.ul(g.item.text) +
            '" data-item-type="' +
            g.itemType +
            '" data-select-id="' +
            e.ul(g.item.text) +
            '" >' +
            __s.related_prefix +
            " " +
            g.item.text +
            "</div>"
          );
        case RELATED_VERSES:
          return (
            '<div class="relatedVersesItem" title="' +
            a +
            e.ul(g.item.text) +
            '" data-item-type="' +
            g.itemType +
            '" data-select-id="' +
            e.ul(g.item.text) +
            '" >' +
            __s.related_prefix +
            " " +
            g.item.text +
            "</div>"
          );
          break;
        default:
          var f = "";
          if (g.item && g.item.text === "string") {
            f = g.item.text;
          }
          return f;
      }
    },
    iG: function (b) {
      var c = [];
      for (var a = 0; a < b.length; a++) {
        c.push(this.iH(b[a]));
      }
      return c;
    },
    iH: function (a) {
      if (a === "he") {
        return "hbFont";
      } else {
        if (a === "hbo") {
          return "hbFont";
        } else {
          if (a === "grc") {
            return "unicodeFont";
          } else {
            if (a === "cop") {
              return "copticFont";
            } else {
              if (a === "my") {
                return "burmeseFont";
              } else {
                if (a === "syr") {
                  return "syriacFont";
                } else {
                  if (a === "ar") {
                    return "arabicFont";
                  } else {
                    if (a === "zh") {
                      return "chineseFont";
                    } else {
                      if (a === "khm" || a === "km") {
                        return "khmerFont";
                      } else {
                        if (a === "far" || a === "fa" || a === "per") {
                          return "farsiFont";
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    showTutorial: function () {
      step.util.ui.initSidebar("help", {});
      if (step.sidebar != null) {
        if (!step.touchDevice || step.touchWideDevice) {
          require(["sidebar"], function (a) {
            step.sidebar.save({
              mode: "help",
            });
          });
        } else {
          step.sidebar = null;
        }
      }
    },
    iJ: function (a, e) {
      var m, n, b, h, g, f, c;
      if (typeof a === "string") {
        m = a;
        if (typeof e === "string") {
          h = e;
        }
      } else {
        if (a.strong) {
          m = a.strong;
          b = a.ref;
          n = a.morph;
          h = a.version;
          f = a.variant;
          c = a.morphCount;
        } else {
          var o = $(a);
          m = o.attr("strong");
          n = step.util.MT(o.attr("morph"));
          f = o.attr("var") || "";
          var d = step.util.ui.iS(o);
          b = d[0];
          if (b !== "") {
            b += step.util.ui.iT(o, m);
          }
          h = d[1];
          var i = step.passages
            .findWhere({
              passageId: step.passage.pA(o),
            })
            .get("masterVersion");
          if (h === "") {
            h = i;
          }
          g =
            i +
            "," +
            step.passages
              .findWhere({
                passageId: step.passage.pA(o),
              })
              .get("extraVersions");
          step.historyMorph = [];
          step.historyStrong = [];
        }
      }
      f = f || "";
      step.util.ui.initSidebar("lexicon", {
        strong: m,
        morph: n,
        ref: b,
        variant: f,
        version: h,
        allVersions: g,
        morphCount: c,
      });
      require(["sidebar"], function (p) {
        step.util.ui.iL(m, n, b, h, g, f, c);
      });
    },
    initSidebar: function (b, a) {
      $(".colorOffWarning").remove();
      require(["sidebar"], function (c) {
        if (!a) {
          a = {};
        }
        if (!step.sidebar) {
          step.sidebar = {};
          step.sidebar = new SidebarModel({
            strong: a.strong,
            morph: a.morph,
            ref: a.ref,
            variant: a.variant,
            version: a.version,
            allVersions: a.allVersions,
            mode: b == null ? "analysis" : b,
            morphCount: a.morphCount,
          });
          new SidebarList().add(step.sidebar);
          new SidebarView({
            model: step.sidebar,
            el: $("#sidebar"),
          });
        } else {
          if (b == null) {
            step.sidebar.trigger("toggleOpen");
          } else {
            if (
              step.sidebar.get("mode") != b ||
              (b === "color" && step.touchDevice && !step.touchWideDevice)
            ) {
              step.sidebar.save({
                mode: b,
              });
            } else {
              step.sidebar.trigger("forceOpen");
            }
          }
        }
      });
    },
    iL: function (c, e, a, b, f, d, g) {
      if (step.sidebar != null) {
        if (!step.touchDevice || step.touchWideDevice) {
          step.sidebar.save({
            strong: c,
            morph: e,
            mode: "lexicon",
            ref: a,
            version: b,
            allVersions: f,
            variant: d,
            morphCount: g,
          });
        } else {
          step.sidebar = null;
        }
      }
    },
    iM: function (c, a) {
      var d = this;
      var b = $("[strong]", a);
      step.touchForQuickLexiconTime = 0;
      step.displayQuickLexiconTime = 0;
      step.strongOfLastQuickLexicon = "";
      step.lastTapStrong = "";
      d.pageY = 0;
      b.click(function () {
        if (!step.touchDevice) {
          $(".lexiconFocus, .lexiconRelatedFocus").removeClass(
            "lexiconFocus lexiconRelatedFocus"
          );
          $(this).addClass("lexiconFocus");
          step.util.ui.iJ(this);
          var e = step.util.MT($(this).attr("morph"));
          step.passage.pB({
            passageId: undefined,
            strong: $(this).attr("strong"),
            morph: e,
            classes: "lexiconFocus",
          });
          return false;
        }
      })
        .on("touchstart", function (g) {
          if (
            typeof g.originalEvent === "object" &&
            typeof g.originalEvent.touches === "object" &&
            typeof g.originalEvent.touches[0] === "object" &&
            typeof g.originalEvent.touches[0].clientY === "number"
          ) {
            d.pageY = g.originalEvent.touches[0].clientY;
          }
          step.touchForQuickLexiconTime = Date.now();
          var f = step.util.ui.iN(this);
          var e = f === step.lastTapStrong;
          step.lastTapStrong = "notdisplayed" + f;
          step.util.ui.iO(this, c, e, d.pageY);
        })
        .on("touchend", function (e) {
          var f = Date.now() - step.touchForQuickLexiconTime;
          if (f < TOUCH_DURATION) {
            step.touchForQuickLexiconTime = 0;
            step.strongOfLastQuickLexicon = "";
          }
        })
        .on("touchcancel", function (e) {
          step.touchForQuickLexiconTime = 0;
          step.strongOfLastQuickLexicon = "";
        })
        .on("touchmove", function (e) {
          step.touchForQuickLexiconTime = 0;
          step.strongOfLastQuickLexicon = "";
          var f = Date.now() - step.displayQuickLexiconTime;
          if (f < 900) {
            $("#quickLexicon").remove();
            step.passage.pC(
              undefined,
              "primaryLightBg relatedWordEmphasisHover"
            );
            step.lastTapStrong = "";
          }
        })
        .hover(
          function (g) {
            if (step.touchDevice || step.util.vMB) {
              return;
            }
            var f = step.util.MT($(this).attr("morph"));
            step.passage.pB({
              passageId: undefined,
              strong: $(this).attr("strong"),
              morph: f,
              classes: "primaryLightBg",
            });
            var e = this;
            require(["quick_lexicon"], function () {
              step.util.delay(
                function () {
                  step.util.ui.iR(e, c, false, g.pageY);
                },
                MOUSE_PAUSE,
                "show-quick-lexicon"
              );
            });
          },
          function () {
            if (step.touchDevice || step.util.vMB) {
              return;
            }
            step.passage.pC(
              undefined,
              "primaryLightBg relatedWordEmphasisHover"
            );
            step.util.delay(undefined, 0, "show-quick-lexicon");
            if (!step.util.vMB) {
              $("#quickLexicon").remove();
            }
          }
        );
    },
    iN: function (b) {
      var a = "";
      if (typeof $(b).attr("strong") === "string") {
        a = $(b).attr("strong");
        if (
          typeof $(b).prev()[0] === "object" &&
          typeof $(b).prev()[0].outerHTML === "string"
        ) {
          a += $(b)
            .prev()[0]
            .outerHTML.replace(/\s?primaryLightBg\s?/g, "")
            .replace(/\s?relatedWordEmphasisHover\s?/g, "")
            .replace(/\s?lexiconFocus\s?/g, "")
            .replace(/\s?lexiconRelatedFocus\s?/g, "")
            .replace(/\s?secondaryBackground\s?/g, "");
        }
      }
      return a;
    },
    iO: function (a, b, e, d) {
      if (e) {
        step.strongOfLastQuickLexicon = "";
        step.touchForQuickLexiconTime = 0;
        $(".lexiconFocus, .lexiconRelatedFocus").removeClass(
          "lexiconFocus lexiconRelatedFocus secondaryBackground"
        );
        $(a).addClass("lexiconFocus");
        step.util.ui.iJ(a);
        var c = step.util.MT($(a).attr("morph"));
        step.passage.pB({
          passageId: undefined,
          strong: $(a).attr("strong"),
          morph: c,
          classes: "lexiconFocus",
        });
      } else {
        step.strongOfLastQuickLexicon = $(a).attr("strong");
        require(["quick_lexicon"], function () {
          step.util.ui.iR(a, b, true, d);
        });
      }
    },
    iP: function () {
      $("#quickLexicon").remove();
    },
    iR: function (g, m, a, h) {
      var n = $(g).attr("strong");
      var o = step.util.MT($(g).attr("morph"));
      var e = $(g).attr("var") || "";
      var c = step.util.ui.iS(g);
      var b = c[0];
      var i = c[1];
      if (b !== "") {
        b += step.util.ui.iT(g, n);
      }
      if (i === "") {
        i = step.passages
          .findWhere({
            passageId: m,
          })
          .get("masterVersion");
      }
      if (!step.keyedVersions[i].hasStrongs) {
        possibleVersion = $($(g).parent().parent()[0])
          .find(".smallResultKey")
          .attr("data-version");
        if (
          typeof possibleVersion === "string" &&
          step.keyedVersions[possibleVersion].hasStrongs
        ) {
          i = possibleVersion;
        }
      }
      var f = step.passages
        .findWhere({
          passageId: m,
        })
        .get("isQuickLexicon");
      var d = typeof h === "number" ? h : 0;
      if (f == true || f == null) {
        new QuickLexicon({
          strong: n,
          morph: o,
          version: i,
          reference: b,
          variant: e,
          target: g,
          position: d,
          touchEvent: a,
          height: $(window).height(),
          passageId: m,
        });
      }
    },
    iQ: function (m, o, c, i, h, a, g, f, n, b) {
      var e = step.passages
        .findWhere({
          passageId: h,
        })
        .get("isQuickLexicon");
      var d = 0;
      if (typeof o === "string") {
        o = o.split("/")[0].replace("oshm:", "TOS:");
      } else {
        o = "";
      }
      if (m.substring(0, 1) === "H" && o.indexOf("TOS:") == -1) {
        o = "TOS:" + o;
      }
      if (typeof g === "number") {
        d = g;
      } else {
        if (event && typeof event.clientY === "number") {
          d = event.clientY;
        }
      }
      if (typeof n !== "string") {
        n = "";
      }
      if (typeof QuickLexicon === "undefined") {
        require(["quick_lexicon"], function () {
          step.util.delay(
            function () {
              step.util.ui.iQ(m, o, c, i, h, a, g, f, n, b);
            },
            MOUSE_PAUSE,
            "show-quick-lexicon"
          );
        });
      } else {
        if (e == true || e == null) {
          new QuickLexicon({
            strong: m,
            morph: o,
            txtForMultiStrong: n,
            version: i,
            reference: c,
            target: f,
            position: d,
            touchEvent: a,
            height: $(window).height(),
            passageId: h,
            morphCount: b,
          });
        }
      }
    },
    iS: function (e) {
      var a =
        $($(e).closest("div.verse").find("a.verseLink")[0]).attr("name") ||
        $(e)
          .closest(".verseGrouping")
          .find(".heading .verseLink")
          .attr("name") ||
        $(e).closest(".verse, .interlinear").find(".verseLink").attr("name");
      if (!a) {
        a = "";
      }
      var b =
        $(e)
          .closest("div.verse")
          .parent()
          .find("span.smallResultKey")
          .attr("data-version") ||
        $(e)
          .closest(".singleVerse")
          .find("span.smallResultKey")
          .attr("data-version");
      if (!b) {
        var c = $("th.comparingVersionName");
        if (c.length > 0) {
          var d = $(e).closest("td").index();
          if (typeof d === "number") {
            b = $(c[d - 1]).text();
          }
        }
      }
      if (!b || typeof step.keyedVersions[b] !== "object") {
        b = "";
      }
      return [a, b];
    },
    iT: function (d, a) {
      var c = $(d).closest(".verse");
      if (c.length == 0) {
        c = $(d).closest(".interlinear");
      }
      if (c.length == 0) {
        return "";
      }
      var b = $(c).find("span");
      var g = a.split(" ");
      var s = [];
      foundWordOrderToReport = false;
      for (var n = 0; n < g.length; n++) {
        var p = g[n];
        var o = 0;
        var e = 0;
        for (var m = 0; m < b.length && (e == 0 || (e > 0 && o < 2)); m++) {
          var q = b[m].attributes.strong;
          if (q) {
            var r = q.value.split(" ");
            for (var f = 0; f < r.length; f++) {
              if (r[f] === p) {
                o++;
                if ($(d).is(b[m])) {
                  e = o;
                  break;
                }
              }
            }
          }
        }
        if (e > 0 && e <= 9 && o > 1) {
          s.push("ABCDEFGHI".substring(e - 1, e));
          foundWordOrderToReport = true;
        } else {
          s.push("");
        }
      }
      if (foundWordOrderToReport) {
        return ";" + s.join(";");
      }
      return "";
    },
    iU: function (a, c) {
      var b = a.parent();
      a.off("scroll");
      a.closest(".column").off("scroll");
      a.empty();
      a.append(c);
      b.append(a);
      a.append(this.iV());
    },
    iV: function () {
      var c = step.util.uQ();
      var d = __s.copyright_information_list;
      if (c.get("masterVersion") != null) {
        d += " " + this.iW(c.get("masterVersion"));
      }
      if (!step.util.uO(c.get("extraVersions"))) {
        var b = c.get("extraVersions").split(",") || [];
        for (var a in b) {
          if (!step.util.uO(b[a])) {
            d += ", ";
            d += this.iW(b[a]);
          }
        }
      }
      return "<div class='copyrightInfo'>" + d + "<div>";
    },
    iW: function (a) {
      return (
        "<a href='/version.jsp?version=" + a + "' target='_new'>" + a + "</a>"
      );
    },
    iX: function (o, a, m, c, f, b) {
      if (f == undefined) {
        f = 0;
      }
      var n = $(a, o);
      for (var g = 0; g < n.length; g++) {
        var p = n.eq(g);
        var e = p.children(b);
        for (var h = f; h < e.length; h++) {
          var d = e.eq(h);
          if (c == undefined || !c(d)) {
            d.addClass(m[h - f]);
          }
        }
      }
    },
    iY: function (b) {
      var a = "";
      if (b.hasRedLetter) {
        a +=
          ' <span class="versionFeature" title="' +
          __s.jesus_words_in_red_available +
          '">R</span>';
      }
      if (b.hasNotes) {
        a +=
          ' <span class="versionFeature" title="' +
          __s.notes_available +
          '">N</span>';
      }
      if (b.hasMorphology) {
        a +=
          " <span class='versionFeature' title='" +
          __s.grammar_available +
          "'>G</span>";
      }
      if (b.hasStrongs) {
        a +=
          " <span class='versionFeature' title='" +
          __s.vocabulary_available +
          "'>V</span>";
        if (b.hasSeptuagintTagging) {
          a +=
            " <span class='versionFeature' title='" +
            __s.septuagint_interlinear_available +
            "'>S</span>";
        } else {
          a +=
            " <span class='versionFeature' title='" +
            __s.interlinear_available +
            "'>I</span>";
        }
      }
      return a + "&nbsp;";
    },
    iZ: function (d, a, c, b) {
      if (step.touchDevice) {
        $(".verseNumber", a)
          .closest("a")
          .mouseenter(function () {
            var e = step.passages
              .findWhere({
                passageId: d,
              })
              .get("isVerseVocab");
            if (e || e == null) {
              step.util.ui.ia(d, $(this), c, b);
            }
          });
      } else {
        $(".verseNumber", a)
          .closest("a")
          .hover(
            function () {
              var e = step.passages
                .findWhere({
                  passageId: d,
                })
                .get("isVerseVocab");
              if (e || e == null) {
                if (typeof verseNumTimer !== "undefined") {
                  clearTimeout(verseNumTimer);
                }
                verseNumTimer = setTimeout(
                  step.util.ui.ia,
                  500,
                  d,
                  $(this),
                  c,
                  b
                );
              }
            },
            function () {
              if (typeof verseNumTimer !== "undefined") {
                clearTimeout(verseNumTimer);
              }
            }
          );
      }
    },
    _showVerseWithStrongInBookPopup: function (e, a, d, c, b, f) {
      fetch(
        document.location.origin +
          "/rest/search/masterSearch/version=ESV" +
          URL_SEPARATOR +
          "reference=" +
          e +
          step.util._createStrongSearchArg(a, d) +
          "/HNVUG//////en?lang=en"
      )
        .then(function (g) {
          return g.json();
        })
        .then(function (g) {
          step.util.ui.ib(g, c, b, f);
        });
    },
    _showVerseWithStrongInBiblePopup: function (a, d, c, b, e) {
      fetch(
        document.location.origin +
          "/rest/search/masterSearch/version=ESV|" +
          step.util._createStrongSearchArg(a, d) +
          "/HNVUG//////en?lang=en"
      )
        .then(function (f) {
          return f.json();
        })
        .then(function (f) {
          step.util.ui.ib(f, c, b, e);
        });
    },
    ia: function (e, f, c, b) {
      var a = f.attr("name");
      var d = this;
      require(["qtip"], function () {
        var g =
          step.passages
            .findWhere({
              passageId: e,
            })
            .get("interlinearMode") === "INTERLINEAR"
            ? 650
            : 50;
        step.util.delay(
          function () {
            $.getSafe(
              BIBLE_GET_STRONGS_AND_SUBJECTS,
              [c, a, step.userLanguageCode],
              function (A) {
                var y =
                  '<div class="vocabTable"><div class="col-xs-8 col-sm-4 heading"><h1><%= (data.multipleVerses ? sprintf(__s.vocab_for_verse, data.verse) : "") %></h1></div><div class="col-xs-2 col-sm-1 heading"><h1><%= __s.bible_book %></h1></div><div class="col-xs-2 col-sm-1 heading"><h1><%= ot ? __s.OT : __s.NT %></h1></div><div class="hidden-xs col-sm-4 heading even"><h1><%= __s.vocab_for_verse_continued %></h1></div><div class="hidden-xs col-sm-1 heading"><h1><%= __s.bible_book %></h1></div><div class="hidden-xs col-sm-1 heading"><h1><%= ot ? __s.OT : __s.NT %></h1></div><% _.each(rows, function(row, i) { %><span data-strong="<%= row.strongData.strongNumber %>" <% if (row.morphCount > 0) { %>data-morph="<%= row.morph %>" <% if (row.morphCount > 1) { %>data-morphcount="<%= row.morphCount %>" <% } %><% } %><% if (row.strongData._detailLexicalTag !== "") { %>data-otherstrongs="<%= row.strongData._detailLexicalTag %>"<% } %>><a onclick="javascript:void(0)" class="definition col-xs-8 col-sm-4 <%= i % 2 == 1 ? "even" : "" %>"><%= row.strongData.gloss %> (<span class="transliteration"><%= row.strongData.stepTransliteration %></span> - <%= row.strongData.matchingForm %>)</a><a onclick="javascript:void(0)" class="bookCount col-xs-2 col-sm-1"><%= sprintf("%d&times;", row.counts.book) %></a><a onclick="javascript:void(0)" class="bibleCount col-xs-2 col-sm-1"><%= sprintf("%d&times;", row.counts.bible) %></a></span><% }); %><% if(rows.length % 2 == 1) { %><span class="even"></span><% } %></div><div class="verseVocabLinks"><a onclick="javascript:void(0)" class="relatedVerses"><%= __s.see_related_verses %></a> <a onclick="javascript:void(0)" class="relatedSubjects"><%= __s.see_related_subjects%></a> <a onclick="javascript:void(0)" class="seeTips">See Translation TIPS</a> <% if(isSearch) { %><a onclick="javascript:void(0)" class="verseInContext"><%= __s.see_verse_in_context %></a><% } %></div>';
                var s = [];
                var p = $.getUrlVar("lang");
                if (p == null) {
                  p = "";
                } else {
                  p = p.toLowerCase();
                }
                var t = step.userLanguageCode.toLowerCase();
                if (p === "zh_tw") {
                  t = "zh_tw";
                } else {
                  if (p === "zh") {
                    t = "zh";
                  }
                }
                var u = [];
                if (typeof A.allMorphsInVerse === "string") {
                  u = A.allMorphsInVerse.split(" ");
                }
                for (var C in A.strongData) {
                  var B = A.strongData[C];
                  for (var o in B) {
                    var v = B[o];
                    if (v && v.strongNumber) {
                      var w = A.counts[v.strongNumber];
                      if (t === "es" && v._es_Gloss) {
                        v.gloss = v._es_Gloss;
                      } else {
                        if (t === "zh" && v._zh_Gloss) {
                          v.gloss = v._zh_Gloss;
                        } else {
                          if (t === "zh_tw" && v._zh_tw_Gloss) {
                            v.gloss = v._zh_tw_Gloss;
                          } else {
                            if (t === "km" && v._km_Gloss) {
                              v.gloss = v._km_Gloss;
                            }
                          }
                        }
                      }
                      allMorphsOfThisWord = [];
                      var D = 0;
                      for (var r = 0; r < u.length; r++) {
                        var n = u[r].split("@");
                        if (
                          v.strongNumber === n[0] &&
                          typeof n[1] === "string"
                        ) {
                          if (allMorphsOfThisWord.indexOf(n[1].trim()) == -1) {
                            allMorphsOfThisWord.push(n[1].trim());
                            D++;
                          }
                          u[r] = "";
                        }
                      }
                      s.push({
                        strongData: v,
                        counts: w,
                        morph: allMorphsOfThisWord[0],
                        morphCount: D,
                      });
                    }
                  }
                }
                var h = step.util.uc(e);
                var i = $(h).find(".passageContentHolder");
                var x = $(
                  _.template(y)({
                    rows: s,
                    ot: A.ot,
                    data: A,
                    isSearch: b,
                  })
                );
                x.find(".definition").click(function () {
                  step.historyMorph = [];
                  step.historyStrong = [];
                  var G = $(this).parent().data("strong");
                  var z = step.util.MT($(this).parent().data("morph"));
                  var F = $(this).parent().data("morphcount");
                  var E = G.search(/^([GH]\d{4,5})[A-Za-z]$/) == 0 ? "" : a;
                  step.util.ui.iJ({
                    strong: G,
                    ref: E,
                    version: c,
                    morph: z,
                    morphCount: F,
                  });
                  if (step.touchDevice && !step.touchWideDevice) {
                    $(".versePopup").hide();
                  }
                });
                x.find(".definition").hover(
                  function (H) {
                    if (step.touchDevice || step.util.vMB) {
                      return;
                    }
                    var I = $(this).parent().data("strong");
                    var z = step.util.MT($(this).parent().data("morph"));
                    var G = $(this).parent().data("morphcount");
                    var E = I.search(/^([GH]\d{4,5})[A-Za-z]$/) == 0 ? "" : a;
                    step.passage.pB({
                      passageId: undefined,
                      strong: I,
                      morph: undefined,
                      classes: "primaryLightBg",
                    });
                    var F = this;
                    require(["quick_lexicon"], function () {
                      step.util.delay(
                        function () {
                          step.util.ui.iQ(I, z, E, c, e, H, H.pageY, F, "", G);
                        },
                        MOUSE_PAUSE,
                        "show-quick-lexicon"
                      );
                    });
                  },
                  function () {
                    if (step.touchDevice || step.util.vMB) {
                      return;
                    }
                    step.passage.pC(
                      undefined,
                      "primaryLightBg relatedWordEmphasisHover"
                    );
                    step.util.delay(undefined, 0, "show-quick-lexicon");
                    if (!step.util.vMB) {
                      $("#quickLexicon").remove();
                    }
                  }
                );
                x.find(".bookCount").click(function () {
                  var F = C.substring(0, C.indexOf("."));
                  var z = $(this).parent().data("strong");
                  var E =
                    "reference=" +
                    encodeURIComponent(F) +
                    step.util._createStrongSearchArg(
                      z,
                      $(this).parent().data("otherstrongs")
                    );
                  if (!step.touchDevice || step.touchWideDevice) {
                    step.util.uW(e);
                  }
                  step.util.uQ().save(
                    {
                      strongHighlights: z,
                    },
                    {
                      silent: true,
                    }
                  );
                  step.router.mC(E, null, null, true, true);
                });
                x.find(".bookCount").hover(
                  function (F) {
                    if (step.touchDevice) {
                      return;
                    }
                    var E = C.substring(0, C.indexOf("."));
                    var z = $($(this).parent().find("a")[0]).html();
                    if (typeof bookCountTimer !== "undefined") {
                      clearTimeout(bookCountTimer);
                    }
                    bookCountTimer = setTimeout(
                      step.util.ui._showVerseWithStrongInBookPopup,
                      750,
                      E,
                      $(this).parent().data("strong"),
                      $(this).parent().data("otherstrongs"),
                      F.pageY,
                      z,
                      i
                    );
                  },
                  function () {
                    if (step.touchDevice) {
                      return;
                    }
                    if (typeof bookCountTimer !== "undefined") {
                      clearTimeout(bookCountTimer);
                    }
                    step.util.delay(undefined, 0, "show-quick-lexicon");
                    if (!step.util.vMB) {
                      $("#quickLexicon").remove();
                    }
                  }
                );
                x.find(".bibleCount").click(function () {
                  var z = $(this).parent().data("strong");
                  var E = step.util._createStrongSearchArg(
                    z,
                    $(this).parent().data("otherstrongs")
                  );
                  if (!step.touchDevice || step.touchWideDevice) {
                    step.util.uW(e);
                  }
                  step.util.uQ().save(
                    {
                      strongHighlights: z,
                    },
                    {
                      silent: true,
                    }
                  );
                  step.router.mC(E, null, null, true, true);
                });
                x.find(".bibleCount").hover(
                  function (E) {
                    if (step.touchDevice) {
                      return;
                    }
                    var z = $($(this).parent().find("a")[0]).html();
                    if (typeof bibleCountTimer !== "undefined") {
                      clearTimeout(bibleCountTimer);
                    }
                    bibleCountTimer = setTimeout(
                      step.util.ui._showVerseWithStrongInBiblePopup,
                      750,
                      $(this).parent().data("strong"),
                      $(this).parent().data("otherstrongs"),
                      E.pageY,
                      z,
                      i
                    );
                  },
                  function () {
                    if (step.touchDevice) {
                      return;
                    }
                    if (typeof bibleCountTimer !== "undefined") {
                      clearTimeout(bibleCountTimer);
                    }
                    step.util.delay(undefined, 0, "show-quick-lexicon");
                    if (!step.util.vMB) {
                      $("#quickLexicon").remove();
                    }
                  }
                );
                x.find(".relatedVerses").click(function () {
                  if (!step.touchDevice || step.touchWideDevice) {
                    step.util.uW(e);
                  }
                  step.router.mC(
                    RELATED_VERSES + "=" + encodeURIComponent(C),
                    null,
                    null,
                    null,
                    true
                  );
                });
                x.find(".relatedSubjects").click(function () {
                  if (!step.touchDevice || step.touchWideDevice) {
                    step.util.uW(e);
                  }
                  step.router.mC(
                    TOPIC_BY_REF + "=" + encodeURIComponent(C),
                    null,
                    null,
                    null,
                    true
                  );
                });
                if (
                  typeof A.translationTipsFN === "string" &&
                  A.translationTipsFN !== ""
                ) {
                  var m = A.translationTipsFN;
                  if (m.endsWith(".0")) {
                    m = m.substring(0, m.length - 3) + ".1";
                  }
                  x.find(".seeTips").click(function () {
                    window.open(
                      "https://tips.translation.bible/tip_verse/" + m + "/",
                      "_blank"
                    );
                  });
                } else {
                  x.find(".seeTips").remove();
                }
                x.find(".verseInContext").click(function () {
                  f.trigger("click");
                });
                var q = f.qtip({
                  show: {
                    event: "mouseenter",
                  },
                  hide: {
                    event: "unfocus mouseleave",
                    fixed: true,
                    delay: 200,
                  },
                  position: {
                    my: "bottom center",
                    at: "top center",
                    of: f,
                    viewport: $(window),
                    effect: false,
                  },
                  style: {
                    classes: "versePopup",
                  },
                  overwrite: false,
                  content: {
                    text: x,
                  },
                });
                q.qtip("show");
              }
            ).error(function () {
              changeBaseURL();
            });
          },
          g,
          "delay-strong-popup"
        );
        f.one("mouseleave", function () {
          step.util.clearTimeout("delay-strong-popup");
        });
      });
    },
    ib: function (c, f, o, h) {
      const d = c.results;
      var p = "";
      if (d.length > 6) {
        p +=
          '<div id="bvesearch" style="font-size:12px;height:150px;overflow:auto">';
        p +=
          '<p style="margin-top:2px">Press the <svg width="18px" height="18px" viewBox="0 0 24.00 24.00" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" stroke-width="1.176" transform="matrix(1, 0, 0, 1, 0, 0)"><g id="SVGRepo_bgCarrier" stroke-width="0"><rect x="0" y="0" width="24.00" height="24.00" rx="0" fill="#3B88C3" strokewidth="0"></rect></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M11.0303 7.71967C11.3232 8.01256 11.3232 8.48744 11.0303 8.78033L8.56066 11.25H17.25C17.6642 11.25 18 11.5858 18 12C18 12.4142 17.6642 12.75 17.25 12.75H8.56066L11.0303 15.2197C11.3232 15.5126 11.3232 15.9874 11.0303 16.2803C10.7374 16.5732 10.2626 16.5732 9.96967 16.2803L6.21967 12.5303C5.92678 12.2374 5.92678 11.7626 6.21967 11.4697L9.96967 7.71967C10.2626 7.42678 10.7374 7.42678 11.0303 7.71967Z" fill="#ffffff"></path> </g></svg> or <svg id="down-arrow" width="18px" height="18px" viewBox="0 0 24.00 24.00" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" stroke-width="1.176" transform="matrix(-1, 0, 0, 1, 0, 0)"><g id="SVGRepo_bgCarrier" stroke-width="0"><rect x="0" y="0" width="24.00" height="24.00" rx="0" fill="#3B88C3" strokewidth="0"></rect></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M11.0303 7.71967C11.3232 8.01256 11.3232 8.48744 11.0303 8.78033L8.56066 11.25H17.25C17.6642 11.25 18 11.5858 18 12C18 12.4142 17.6642 12.75 17.25 12.75H8.56066L11.0303 15.2197C11.3232 15.5126 11.3232 15.9874 11.0303 16.2803C10.7374 16.5732 10.2626 16.5732 9.96967 16.2803L6.21967 12.5303C5.92678 12.2374 5.92678 11.7626 6.21967 11.4697L9.96967 7.71967C10.2626 7.42678 10.7374 7.42678 11.0303 7.71967Z" fill="#ffffff"></path> </g></svg> keys (left or right arrow) to scroll the list of verses with the word: ' +
          o +
          ".</p>";
      } else {
        p = "<p>" + o + "</p>";
      }
      for (var e = 0; e < d.length; e++) {
        var g = d[e].preview;
        var n = g.indexOf("<h3");
        if (n > -1) {
          var m = g.indexOf("</h3>", n);
          if (m > -1) {
            g = g.substring(0, n) + g.substring(m + 5);
          }
        }
        p += g
          .replaceAll("<br>", "")
          .replaceAll("<BR>", "")
          .replaceAll("<p></p>", "")
          .replaceAll("<br />", "")
          .replaceAll("tabindex='-1'", "");
      }
      p = p.replaceAll("<a name=", "<span name=").replaceAll("</a>", "</span>");
      p = p
        .replaceAll("passageContentHolder", "")
        .replaceAll("'verse ltrDirection'", "''")
        .replaceAll("'verseLink'", "''")
        .replaceAll("'verseNumber'", "''");
      if (c.total > c.pageSize) {
        p +=
          "<p>Showing the first " +
          d.length +
          " of " +
          c.total +
          " verses.  Click at where your mouse is located to see all verses.</p>";
      }
      p +=
        '<p style="margin-bottom:2px">ESV: The Holy Bible, English Standard Version 2011 Crossway Bibles, a division of Good News Publishers.  All rights reserved.</p>';
      if (d.length > 6) {
        p += "</div>";
      }
      var a = $(p);
      for (var b = 0; b < c.strongHighlights.length; b++) {
        $("span [strong*=" + c.strongHighlights[b] + "]", a)
          .css("text-decoration", "underline")
          .css("color", "#FCAE1E");
      }
      require(["quick_lexicon"], function () {
        var r = a;
        var s = $(r[0]);
        for (var q = 1; q < r.length; q++) {
          s.append($(r[q]));
        }
        new QuickLexicon({
          text: s,
          type: "versesWithWord",
          strong: null,
          morph: null,
          target: h,
          position: f,
          height: $(window).height(),
          touchEvent: false,
        });
      });
    },
    ic: function (a) {
      if (a[0] === "H") {
        return "hbFontSmall";
      } else {
        return "unicodeFont";
      }
    },
    iK: function (d, c, b) {
      var e = $("<div class='panel-heading'>");
      var a = $("<div class='panel panel-default'>").append(e);
      e.append(
        $("<h4 data-toggle='collapse'>")
          .attr("href", b)
          .addClass("panel-title")
          .addClass(c)
          .append('<span class="glyphicon glyphicon-plus"></span>')
          .append(d)
      );
      return a;
    },
    MU: function (d, b, a) {
      var e = a.replace(/ /g, " +").replace(/"/g, '["\u201d]');
      var c = new RegExp(e, "ig");
      doHighlight(d, b, c);
    },
  },
  MV: function (c) {
    if (c) {
      c.preventDefault();
    }
    $("#sideBargenderNumClrs").empty();
    $("#sideBarVerbClrs").empty();
    $("#sideBarHVerbClrs").empty();
    var b = document.getElementById("grammarClrModal");
    if (b) {
      b.parentNode.removeChild(b);
    }
    var a =
      $.getUrlVars().indexOf("debug") > -1
        ? ""
        : step.state.getCurrentVersion() + ".min.";
    $(
      '<div id="grammarClrModal" class="modal selectModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static"><div class="modal-dialog"><div class="modal-content stepModalFgBg""><link href="css/color_code_grammar.' +
        a +
        'css" rel="stylesheet"/><link rel="stylesheet" href="css/spectrum.css"/><script src="js/color_code_config.' +
        a +
        'js"></script><script src="libs/spectrum.js"></script><div class="modal-header">' +
        step.util.uf(null, "closeClrConfig") +
        '</div><div class="modal-body"><div id="colortabs"><ul class="nav nav-tabs"><li class="active"><a href="#nounClrs" data-toggle="tab">Number & Gender</a></li><li><a href="#verbClrs" data-toggle="tab">Greek Verbs</a></li><li><a href="#hVerbClrs" data-toggle="tab">OT Verbs</a></li></ul><div class="tab-content"><div class="tab-pane fade in active" id="nounClrs"></div><div class="tab-pane fade" id="verbClrs"></div><div class="tab-pane fade" id="hVerbClrs"></div></div></div></div><div class="footer"><br><button id="openButton" class="stepButton" onclick=openClrConfig()><label>Open</label></button><button id="saveButton" class="stepButton" onclick=saveClrConfig()><label>Save</label></button><button id="cancelButton" class="stepButton" onclick=cancelClrChanges()><label>Cancel</label></button><button id="resetButton" class="stepButton" onclick=resetClrConfig()><label>Reset</label></button><button class="stepButton" data-dismiss="modal" onclick=closeClrConfig()><label>Apply</label></button></div></div></div><script>$( document ).ready(function() {initializeClrCodeHtmlModalPage();});</script></div>'
    ).modal("show");
    step.util.MW("grammarClrModal");
  },
  uo: function (b, c) {
    $("#showLongAlertModal").click();
    if (b === 1) {
      step.router.mD(c, true, true);
    } else {
      if (b === 2) {
        step.router.mD(c, true, true);
        step.readyToShowPassageSelect = false;
        for (var a = 0; a < 30; a++) {
          if (!step.readyToShowPassageSelect) {
            setTimeout(function () {
              if (step.readyToShowPassageSelect) {
                a = 999;
                setTimeout(function () {
                  if (step.readyToShowPassageSelect) {
                    step.readyToShowPassageSelect = false;
                    $(".passageContainer.active")
                      .find(".select-reference")
                      .click();
                  }
                }, 150);
              }
            }, 350);
          }
        }
        step.readyToShowPassageSelect = false;
      } else {
        if (b === 3) {
          $(".passageContainer.active").find(".select-version").click();
        } else {
          if (b === 4) {
            $(".passageContainer.active").find(".select-reference").click();
          }
        }
      }
    }
  },
  up: function (c) {
    var b = document.getElementById("passageSelectionModal");
    if (b) {
      b.parentNode.removeChild(b);
    }
    $("div.modal-backdrop.in").remove();
    if (c !== -1 && step.util.uP() !== c) {
      step.util.uP(c);
    }
    var a =
      '<div id="passageSelectionModal" dir="' +
      (step.state.isLtR() ? "ltr" : "rtl") +
      '" class="modal selectModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content stepModalFgBg" style="width:95%;max-width:100%;top:0;right:0;bottom:0;left:0;-webkit-overflow-scrolling:touch"><div class="modal-header"><button id="pssgModalBackButton" type="button" style="border:none;float:left;font-size:16px" onclick=step.passageSelect.MF()><i class="glyphicon glyphicon-arrow-left"></i></button><span class="pull-right">' +
      step.util.uf("passageSelectionModal") +
      '<span class="pull-right">&nbsp;&nbsp;&nbsp;</span><div id="modalonoffswitch" class="pull-right modalonoffswitch"><span id="select_verse_number">&nbsp;<b><%= __s.select_verse_number %></b></span><div class="onoffswitch2 append pull-right"><input type="checkbox" name="onoffswitch2" class="onoffswitch2-checkbox" id="selectverseonoffswitch" onchange="addSelectVerse()"/><label class="onoffswitch2-label" for="selectverseonoffswitch"><span class="onoffswitch2-inner"></span><span class="onoffswitch2-switch"></span></label></div></div></span><br><div id="displayLocForm" class="form-group" style="clear:both;float:right;font-size:16px"><label for="displayLocation"><%= __s.display_passage_at %></label><select class="stepFgBg" type="text" id="displayLocation"><option value="replace"><%= __s.current_panel %></option><option class="hidden-xs" value="new"><%= __s.new_panel %></option><option id="append_to_panel" value="append"><%= __s.append_to_panel %></option></select></div><br></div>';
    if (!step.touchDevice) {
      a +=
        '<textarea id="enterYourPassage" rows="1" class="stepFgBg" style="font-size:13px;width:95%;margin-left:5;resize=none;height:24px" title="<%= __s.type_in_your_passage %>" placeholder="<%= __s.select_passage_input_placeholder %>"></textarea>';
    }
    a +=
      '<div id="bookchaptermodalbody" class="modal-body"></div><div class="footer">';
    if (step.touchDevice) {
      a +=
        '<textarea id="enterYourPassage" rows="1"  class="stepFgBg" style="font-size:16px;width:80%;margin-left:5;margin-bottom:5;resize=none;height:24px" placeholder="<%= __s.select_passage_input_short_placeholder %>"></textarea>';
    }
    a +=
      '<br><span id="userEnterPassageError" style="color: red"></span></div><script>$(document).ready(function () {step.passageSelect.pA();});function addSelectVerse() {if (document.getElementById("selectverseonoffswitch").checked) {$("#select_verse_number").addClass("checked");}else {$("#select_verse_number").removeClass("checked");}}</script></div></div></div>';
    $(_.template(a)()).modal("show");
    if (!step.touchDevice) {
      $("textarea#enterYourPassage").focus().val(step.tempKeyInput);
      step.tempKeyInput = "";
    } else {
      step.util.MW("passageSelectionModal");
    }
  },
  copyModal: function () {
    var b = document.getElementById("copyModal");
    if (b) {
      b.parentNode.removeChild(b);
    }
    $("div.modal-backdrop.in").remove();
    var a =
      '<div id="copyModal" class="modal selectModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content stepModalFgBg" style="width:95%;max-width:100%;top:0;right:0;bottom:0;left:0;-webkit-overflow-scrolling:touch"><div class="modal-header"><span class="pull-right">' +
      step.util.uf("copyModal") +
      '<span class="pull-right">&nbsp;&nbsp;&nbsp;</span></span></div>';
    a += '<div id="bookchaptermodalbody" class="modal-body"></div><br>';
    a +=
      '<div class="footer" id="copyModalFooter"><div id="includeNotes" style="display:none"><span>&nbsp;&nbsp;<b>Include notes</b>&nbsp;</span><input type="checkbox" id="selectnotes"/></div><div id="includeXRefs" style="display:none"><span>&nbsp;&nbsp;<b>Include cross references</b>&nbsp;</span><input type="checkbox" id="selectxref"/></div><br></div><script>$(document).ready(function () {step.copyText.initVerseSelect();});</script></div></div></div>';
    $(_.template(a)()).modal("show");
    step.util.MW("copyModal");
  },
  uAG: function (h, d, g) {
    var f = document.getElementById("lexFeedbackModal");
    if (f) {
      f.parentNode.removeChild(f);
    }
    $("div.modal-backdrop.in").remove();
    var a = "";
    if (typeof g === "string") {
      if (g !== "") {
        a += "Bible: " + g;
      }
    } else {
      g = "";
    }
    var b = d;
    if (typeof b === "string") {
      b = b.split(":")[0];
      if (b !== "") {
        if (a !== "") {
          a += ", ";
        }
        a += "passage: " + b;
      }
    } else {
      d = "";
    }
    if (typeof h === "string") {
      if (h !== "") {
        if (a !== "") {
          a += ", ";
        }
        a += "strong number: " + h;
      }
    } else {
      h = "";
    }
    if (a !== "") {
      a = "Current " + a;
    }
    var e =
      '<div class="modal" id="lexFeedbackModal" dir="<%= step.state.isLtR() ? "ltr" : "rtl" %>" tabindex="-1" role="dialog" aria-labelledby="lexFeedbackLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content stepModalFgBg"><div class="modal-header">' +
      step.util.uf("lexFeedbackModal") +
      '<h4 class="modal-title" id="lexFeedbackLabel"><%= __s.lexicon_feedback %></h4></div><div class="modal-body"><div>' +
      a +
      '</div><form role="form"><div class="form-group"><label for="feedbackEmail"><%= __s.register_email %><span class="mandatory">*</span></label><input type="email" class="form-control" value="" id="lexfeedbackEmail" maxlength="200" placeholder="email@email.com"></div><div class="form-group"><label for="lexfeedbackType"><%= __s.register_type %></label><select type="text" class="form-control" id="lexfeedbackType"><option value="Strong tagging"><%= __s.feedback_strong_tagging %></option><option value="English lexicon"><%= __s.feedback_english_lexicon %></option>';
    var i = step.userLanguageCode.toLowerCase();
    if (
      step.defaults.langWithTranslatedLex.indexOf(i) > -1 ||
      " zh zh_tw km es vi ".indexOf(i) > -1
    ) {
      var c = __s.feedback_other_lexicon + " (" + step.userLanguage + ")";
      e += '<option value="Other lexicon">' + c + "</option>";
    }
    e +=
      '</select></div><div class="form-group"><label for="lexfeedbackSummary"><%= __s.feedback_summary %><span class="mandatory">*</span></label> <input type="text" class="form-control" id="lexfeedbackSummary" maxlength="150" placeholder="<%= __s.feedback_summary %>"></div><div class="form-group"><label for="lexfeedbackDescription"><%= __s.feedback_description %><span class="mandatory">*</span></label> <textarea class="form-control" placeholder="<%= __s.feedback_description %>" id="lexfeedbackDescription" /></div></form></div><div class="modal-footer"><button type="button" class="btn cancelFeedback2 stepButton" data-dismiss="modal"><%= __s.cancel %></button><button type="button" class="btn sendFeedback2 stepButton stepPressedButton"><%= __s.help_submit %></button></div><script>$(document).ready(function () {step.lexiconFeedback.init("' +
      h +
      '","' +
      b +
      '","' +
      g +
      '");});</script></div></div></div>';
    $(_.template(e)()).modal("show");
    step.util.MW("lexFeedbackModal");
  },
  ur: function (d, e) {
    var b = $(document).width();
    var a = "";
    if (b > 700 && !step.touchDevice) {
      a =
        ' style="width:' +
        Math.floor(Math.min($(document).width() * 0.9, 680)) +
        'px"';
    }
    var c = document.getElementById("searchSelectionModal");
    if (c) {
      c.parentNode.removeChild(c);
    }
    $(
      _.template(
        '<div id="searchSelectionModal" dir="' +
          (step.state.isLtR() ? "ltr" : "rtl") +
          '" class="modal selectModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"' +
          a +
          '><div class="modal-content stepModalFgBg" style="width:95%;max-width:100%;top:0;right:0;bottom:0;left:0;-webkit-overflow-scrolling:touch"><script>$(document).ready(function () {step.searchSelect.sA(' +
          d +
          ',"' +
          e +
          '");});function showPreviousSearch() {var element = document.getElementById("showprevioussearchonoff");if ((element) && (element.checked)) {step.searchSelect.svH = true;$("#listofprevioussearchs").show();$("#searchAndOrNot").show();if (step.searchSelect.svE.length == 0) {if ((step.searchSelect.svI) || (step.searchSelect.svJ) ||(step.searchSelect.svF.indexOf("") > -1)) $("#updateButton").show();}}else {step.searchSelect.svH = false;$("#listofprevioussearchs").hide();$("#searchAndOrNot").hide();$("#updateButton").hide();$("#searchResultssubjectWarn").hide();$("#searchResultsmeaningsWarn").hide();}}</script><div class="modal-header"><button id="srchModalBackButton" type="button" style="border:none;float:left;font-size:16px" onclick=step.searchSelect.MF("' +
          e +
          '")><i class="glyphicon glyphicon-arrow-left"></i></button><span class="pull-right">' +
          step.util.uf("searchSelectionModal") +
          '<span class="pull-right advanced_search_elements">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="dropdown pull-right advanced_search_elements"><a class="dropdown-toggle showSettings" data-toggle="dropdown" title="Options"><i class="glyphicon glyphicon-cog" style="font-size:14px;background-color:var(--clrBackground);color:var(--clrText)"></i></a><div id="srchOptions" class="passageOptionsGroup stepModalFgBg dropdown-menu pull-right" style="opacity:1" role="menu"></div></span><span class="pull-right">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pull-right advanced_search_elements">&nbsp;&nbsp;&nbsp;&nbsp;</span><span id="displayLocForm" class="form-group pull-right hidden-xs advanced_search_elements" style="font-size:16px"><label for="displayLocation"><%= __s.display_result_in %>:</label><select type="text" id="displayLocation" class="stepFgBg"><option value="replace"><%= __s.current_panel %></option><option class="hidden-xs" value="new"><%= __s.new_panel %></option></select></span></span><br></div><div id="searchmodalbody" class="modal-body" style="padding-top:0px"><div id="searchHdrTable"></div><br><div id="previousSearch" class="advanced_search_elements"></div></div><div class="footer"><br><span id="searchSelectError"></span><button id="updateRangeButton" style="display:none;float:right" type="button" class="stepButton"onclick=step.searchSelect._updateRange("' +
          e +
          '")></button><button id="updateButton" style="display:none;float:right" type="button" class="stepButton"onclick=step.searchSelect.sW()><%= __s.update_search %></button><br><br><br></div></div></div></div>'
      )()
    ).modal("show");
    step.util.MW("searchSelectionModal");
    $("textarea#userTextInput").focus();
  },
  us: function (b, c) {
    var a = document.getElementById("videoModal");
    if (a) {
      a.parentNode.removeChild(a);
    }
    $(
      _.template(
        '<div id="videoModal" class="modal selectModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-videofile="' +
          b +
          '" data-videotime="' +
          c +
          '"><div class="modal-dialog"><div class="modal-content stepModalFgBg"><script>$(document).ready(function () {var file = $("#videoModal").data("videofile");var time = $("#videoModal").data("videotime") * 1000;var gifElement = document.createElement("img");var randomString = "";if ((typeof performance === "object") && (typeof performance.now() === "number")) {randomString = "?" + performance.now();}else randomString = "?" + Math.floor(Math.random() * 10000); gifElement.src = "images/" + file + randomString;gifElement.onload = function() {$("#pleasewait").remove();$("#videomodalbody").append(gifElement);setTimeout(function(){ step.util.closeModal("videoModal") }, time);}})</script><div class="modal-header">' +
          step.util.uf("videoModal") +
          '</div><div id="videomodalbody" class="modal-body" style="text-align:center;background-color:grey"><p id="pleasewait">Loading video, please wait...</p></div></div></div></div>'
      )()
    ).modal("show");
    step.util.MW("videoModal");
  },
  gotoCurrentChapter: function () {
    var g = step.util.uP();
    var m = step.passages.findWhere({
      passageId: g,
    });
    var o = m.get("osisId") || "";
    var e = o.split(".");
    if (e.length < 3) {
      return;
    }
    var i = m.get("previousChapter");
    var h = m.get("nextChapter");
    if (typeof i.osisKeyId !== "string" || typeof h.osisKeyId !== "string") {
      return;
    }
    var n = i.osisKeyId.split(".");
    var d = h.osisKeyId.split(".");
    if (n.length < 2 || d.length < 2) {
      return;
    }
    var c = e[0] !== d[0] || (e[0] === d[0] && e[1] === d[1]);
    var a = JSON.parse(JSON.stringify(i));
    a.osisKeyId = e[0] + "." + e[1];
    var b = {
      model: m,
    };
    var f = this.getArgsForSiblingChapter(b, a, c, true);
    step.router.mD(f);
  },
  getArgsForSiblingChapter: function (b, g, h, d) {
    var f = b.model.get("passageId");
    step.util.uP(f);
    var e = b.model.get("args") || "";
    e = e.replace(new RegExp("@?" + REFERENCE + "[^@]+", "g"), "");
    var a = "";
    var c = this.vD(e);
    if (c !== e) {
      e = c;
      a = b.model.attributes.osisId;
      b.model.attributes.strongHighlights = "";
    } else {
      if (g != undefined && g.osisKeyId != undefined && g.osisKeyId != null) {
        a = g.osisKeyId;
      } else {
        alert(
          "Cannot determine the last location, please re-enter the last passage you want to view.  key.osisKeyId is null or undefined"
        );
      }
      if (!d && step.touchDevice) {
        if (
          !this.vY(
            b.model.get("masterVersion"),
            b.model.get("previousChapter").osisKeyId,
            b.model.get("nextChapter").osisKeyId,
            b.model.get("nextChapter").lastChapter,
            step.util.uc(f),
            h
          )
        ) {
          return;
        }
      }
    }
    e = e.replace(/&&/gi, "").replace(/&$/gi, "");
    if (e.length > 0) {
      e = e
        .replace(/^@/, "")
        .replace(/^\|/, "")
        .replace(/@@+/, URL_SEPARATOR)
        .replace(/\|\|+/, URL_SEPARATOR);
      if (e[e.length - 1] !== URL_SEPARATOR) {
        e += URL_SEPARATOR;
      }
    }
    e += "reference=" + a;
    return e;
  },
  vD: function (a) {
    return a
      .replace(new RegExp("@?" + STRONG_NUMBER + "[^@]+", "ig"), "")
      .replace(new RegExp("@?" + SYNTAX + "[^@]+", "ig"), "")
      .replace(new RegExp("@?" + TEXT_SEARCH + "[^@]+", "ig"), "")
      .replace(new RegExp("@?" + SUBJECT_SEARCH + "[^@]+", "ig"), "")
      .replace(new RegExp("@?" + GREEK + "[^@]+", "ig"), "")
      .replace(new RegExp("@?" + HEBREW + "[^@]+", "ig"), "")
      .replace(new RegExp("@?" + GREEK_MEANINGS + "[^@]+", "ig"), "")
      .replace(new RegExp("@?" + HEBREW_MEANINGS + "[^@]+", "ig"), "")
      .replace(new RegExp("@?" + MEANINGS + "[^@]+", "ig"), "");
  },
  vY: function (m, e, f, d, g, a) {
    var h = false;
    if (typeof e === "string") {
      var i = e.split(".");
      if (i.length == 2 && !isNaN(i[1])) {
        if (typeof f === "string") {
          var b = f.split(".");
          if (b.length == 2 && !isNaN(i[1])) {
            h = true;
            if (b[1] - i[1] == 2) {
              this.vC(g);
            } else {
              if (
                typeof step.keyedVersions[m] !== "object" ||
                typeof step.keyedVersions[m].hasAllNTOTorBoth !== "string"
              ) {
                return;
              }
              if (a) {
                if (typeof d === "boolean" && !d) {
                  if (
                    f === "Matt.1" &&
                    step.keyedVersions[m].hasAllNTOTorBoth === "O"
                  ) {
                    step.util.uJ(
                      "You are at the last chapter of the " + m + ".",
                      3
                    );
                    return false;
                  }
                  this.vC(g);
                } else {
                  if (f === "Rev.22") {
                    step.util.uJ(
                      "You are at the last chapter of " + m + ".",
                      3
                    );
                    return false;
                  }
                }
              } else {
                if (
                  e === "Gen.1" ||
                  (e === "Mal.4" &&
                    step.keyedVersions[m].hasAllNTOTorBoth === "N")
                ) {
                  step.util.uJ(
                    "You are at the first chapter of " + m + ".",
                    3
                  );
                  return false;
                }
                this.vC(g);
              }
            }
          }
        }
      }
    }
    if (!h) {
      var c = g.find("button.select-reference").text().split(":")[0];
      if (a) {
        if (c !== "Rev 22" && c !== "Mal 4" && c !== "Deu 34") {
          this.vC(g);
        }
      } else {
        if (c !== "Ref" && c !== "Gen 1" && c !== "Matt 1") {
          this.vC(g);
        }
      }
    }
    return true;
  },
  vC: function (b) {
    var a = b.find(".passageContent");
    a.empty();
    var c =
      "..... .... .... ....... ... .... ... ........ .... ... ... .... ... .....<br> .... .. .... ... .... ........ .... ... .... ........ ... .... ... .....<br>... ..... .. .... ..... .... ..... ........ .... ...... .... ... .....<br>.... .. .... ... .... ........ .... ... .... ...... ... .... ... .....<br> ...... .... ... ..... .... ..... ..... ..... .... ... .... ... .....<br>...... .... ... ..... .... ..... ..... ..... ... . ... .... ... .....<br> .... .. .... ... .... ........ .... ... .... ...... ... .... ... .....<br>... ..... .... .... ..... .... ..... ........ .... ... ... .... ... .....<br>.... .. .... ... .... ........ .... ... .... ... ... ... .... ... .....<br> ...... .... ... ..... .... ..... ..... ..... .. ... .... ... .....<br";
    a.html(c + "<br>" + c + "<br>" + c);
  },
  ut: function (d, b) {
    element = document.getElementById("showBookOrChapterSummaryModal");
    if (element) {
      element.parentNode.removeChild(element);
    }
    $(".modal-backdrop.in").remove();
    var i = d.split(".");
    var c = i[0];
    var g = c;
    var h = step.util.u9(c);
    var e = JSON.parse(__s.list_of_bibles_books);
    if (h > -1 && typeof e !== "undefined") {
      g = e[h][0];
    }
    var f =
      i.length > 1
        ? parseInt(i[1].split(":")[0].split("-")[0].split(";")[0])
        : 1;
    if (typeof f !== "number") {
      f = 1;
    }
    if (c === "1Sam" || c === "2Sam") {
      urlForiFrame = "1_2Sam";
    } else {
      if (c === "1Kngs" || c === "2Kngs") {
        urlForiFrame = "1_2Kngs";
      } else {
        if (c === "1Chr" || c === "2Chr") {
          urlForiFrame = "1_2Chr";
        }
      }
    }
    var a = c.toLowerCase();
    $.getJSON("html/json/" + a + ".json", function (v) {
      var S =
        '<br><span class="stepFgBg" style="font-size:18px">Videos listed below are from the <a target="_blank" href="https://bibleproject.com">BibleProject</a></span><br><span class="stepFgBg" style="font-size:16px"><b>Overview of Old Testament</b></span><span class="vid_ot glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><div><p style="margin-left:5%;font-size:14px;text-align:left;padding:0;margin-bottom:0;margin-top:8px"><b>From Eden to wilderness</b></p><a href="javascript:step.util.ut(\'Gen\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Genesis</a> <span class="vdes_gen1">chapters 1-11</span><span> - Beginnings</span><span class="vid_gen1 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><span style="margin-left:10%;height:14px;font-size:14px">Genesis</span> <span class="vdes_gen2">chapters 12-50</span><span> - Abraham to Joseph</span><span class="vid_gen2 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Exod\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Exodus</a> <span class="vdes_exod1">chapters 1-18</span><span> - Exodus from Egypt</span><span class="vid_exod1 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><span style="margin-left:10%;height:14px;font-size:14px">Exodus</span> <span class="vdes_exod2">chapters 19-40</span><span> - Covenant at Sinai</span><span class="vid_exod2 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Lev\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Leviticus</a><span> - Ceremonial laws</span><span class="vid_lev glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Num\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Numbers</a><span> - Wilderness years</span><span class="vid_num glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Deut\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Deuteronomy</a><span> - Moses\' farewell</span><span class="vid_deut glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><p style="margin-left:5%;font-size:14px;text-align:left;padding:0;margin-bottom:0;margin-top:8px"><b>From conquest to King Saul</b></p><a href="javascript:step.util.ut(\'Josh\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Joshua</a><span> - Taking the land</span><span class="vid_josh glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Judg\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Judges</a><span> - Living among enemies</span><span class="vid_judg glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Ruth\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Ruth</a><span> - David\'s ancestors\' love story</span><span class="vid_ruth glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'1Sam\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">1 Samuel</a><span> - Prophets versus Kings</span><span class="vid_1sam glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><p style="margin-left:5%;font-size:14px;text-align:left;padding:0;margin-bottom:0;margin-top:8px"><b>From King David to exile</b></p><a href="javascript:step.util.ut(\'2Sam\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">2 Samuel</a><span> - Uniting the Kingdom</span><span class="vid_2sam glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'1Kgs\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">1 Kings</a><span> - Dividing the kingdom</span><span class="vid_1kgs glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'2Kgs\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">2 Kings</a><span> - End of Israel &amp; Judah</span><span class="vid_2kgs glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'1Chr\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">1 Chronicles</a><span> - Retelling 1 &amp; 2 Samuel</span><span class="vid_1chr glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'2Chr\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">2 Chronicles</a><span> - Retelling Judah\'s Kings</span><span class="vid_2chr glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><p style="margin-left:5%;font-size:14px;text-align:left;padding:0;margin-bottom:0;margin-top:8px"><b>Return and faith on trial</b></p><a href="javascript:step.util.ut(\'Ezra\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Ezra</a><span> - Return from exile</span><span class="vid_ezra glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Neh\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Nehemiah</a><span> - Rebuilding Jerusalem</span><span class="vid_neh glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Esth\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Esther</a><span> - Surviving in exile</span><span class="vid_esth glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Job\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Job</a><span> - Understanding suffering</span><span class="vid_job glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><p style="margin-left:5%;font-size:14px;text-align:left;padding:0;margin-bottom:0;margin-top:8px"><b>Worship and wisdom</b></p><a href="javascript:step.util.ut(\'Ps\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Psalms</a><span> - Songs of worship</span><span class="vid_ps glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Prov\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Proverbs</a><span> - Understanding society</span><span class="vid_prov glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Eccl\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Ecclesiastes</a><span> - Understanding life</span><span class="vid_eccl glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Song\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Song of Solomon</a><span> - Understanding love</span><span class="vid_song glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><p style="margin-left:5%;font-size:14px;text-align:left;padding:0;margin-bottom:0;margin-top:8px"><b>Major Prophets</b></p><a href="javascript:step.util.ut(\'Isa\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Isaiah</a> <span class="vdes_isa1">chapters 1-39</span><span> - Judah\'s judgement</span><span class="vid_isa1 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><span style="margin-left:10%;height:14px;font-size:14px">Isaiah</span> <span class="vdes_isa2">chapters 40-66</span><span> - Comfort and hope</span><span class="vid_isa2 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Jer\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Jeremiah</a><span> - Warnings of Judgement</span><span class="vid_jer glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Lam\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Lamentations</a><span> - Jerusalem\'s destruction</span><span class="vid_lam glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Ezek\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Ezekiel</a> <span class="vdes_ezek1">chapters 1-33</span><span> - Nations judge</span><span class="vid_ezek1 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><span style="margin-left:10%;height:14px;font-size:14px">Ezekiel</span> <span class="vdes_ezek2">chapters 34-48</span><span> - A new Temple</span><span class="vid_ezek2 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Dan\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Daniel</a><span> - Witnessing in exile</span><span class="vid_dan glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><p style="margin-left:5%;font-size:14px;text-align:left;padding:0;margin-bottom:0;margin-top:8px"><b>Minor (brief) Prophets</b></p><a href="javascript:step.util.ut(\'Hos\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Hosea</a><span> - Acting out God\'s love</span><span class="vid_hos glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Joel\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Joel</a><span> - Day of the Lord</span><span class="vid_joel glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Amos\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Amos</a><span> - Judgement is inescapable</span><span class="vid_amos glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Obad\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Obadiah</a><span> - Judgement on Edom</span><span class="vid_obad glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Jonah\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Jonah</a><span> - Anyone can repent</span><span class="vid_jonah glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Mic\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Micah</a><span> - Judgement\'s restoration</span><span class="vid_mic glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Nah\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Nahum</a><span> - Judgement on Nineveh</span><span class="vid_nah glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Hab\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Habakkuk</a><span> - Judgement on evil</span><span class="vid_hab glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Zeph\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Zephaniah</a><span> - Judgement\'s remnant</span><span class="vid_zeph glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Hag\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Haggai</a><span> - Rebuilding the temple</span><span class="vid_hag glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Zech\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Zechariah</a><span> - Repentance after exile</span><span class="vid_zech glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Mal\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Malachi</a><span> - God is coming</span><span class="vid_mal glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span></div><br><span class="stepFgBg" style="font-size:16px"><b>Overview of New Testament</b></span><span class="vid_nt glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><div><p style="margin-left:5%;font-size:14px;text-align:left;padding:0;margin-bottom:0;margin-top:8px"><b>Life of Jesus</b></p><a href="javascript:step.util.ut(\'Matt\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Matthew</a> <span class="vdes_matt1">chapters 1-13</span><span> - The King\'s ministry</span><span class="vid_matt1 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><span style="margin-left:10%;height:14px;font-size:14px">Matthew</span> <span class="vdes_matt2">chapters 14-28</span><span> - Opposition & victory</span><span class="vid_matt2 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Mark\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Mark</a><span> - Jesus the Man</span><span class="vid_mark glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Luke\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Luke</a> <span class="vdes_luke1">chapters 1-9</span><span> - The saviour\'s ministry</span><span class="vid_luke1 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><span style="margin-left:10%;height:14px;font-size:14px">Luke</span> <span class="vdes_luke2">chapters 10-24</span><span> - Opposition & victory</span><span class="vid_luke2 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'John\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">John</a> <span class="vdes_john1">chapters 1-12</span><span> - God\'s son ministry</span><span class="vid_john1 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><span style="margin-left:10%;height:14px;font-size:14px">John</span> <span class="vdes_john2">chapters 13-21</span><span> - Opposition & victory</span><span class="vid_john2 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Acts\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Acts</a> <span class="vdes_acts1">chapters 1-12</span><span> - Peter grows the church</span><span class="vid_acts1 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><span style="margin-left:10%;height:14px;font-size:14px">Acts</span> <span class="vdes_acts2">chapters 13-28</span><span> - Paul spreads the church</span><span class="vid_acts2 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><p style="margin-left:5%;font-size:14px;text-align:left;padding:0;margin-bottom:0;margin-top:8px"><b>Pauline letters to churches</b></p><a href="javascript:step.util.ut(\'Rom\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Romans</a> <span class="vdes_rom1">chapters 1 - 4</span><span> - Paul\'s theology, need for justification</span><span class="vid_rom1 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><span style="margin-left:10%;height:14px;font-size:14px">Romans</span> <span class="vdes_rom2">chapters 5 - 16</span><span> - Life of those justified by faith</span><span class="vid_rom2 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'1Cor\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">1 Corinthians</a><span> - Church problems</span><span class="vid_1cor glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'2Cor\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">2 Corinthians</a><span> - Leadership problems</span><span class="vid_2cor glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Gal\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Galatians</a><span> - Freedom from Law</span><span class="vid_gal glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Eph\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Ephesians</a><span> - Church unity</span><span class="vid_eph glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Phil\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Philippians</a><span> - Encouragement</span><span class="vid_phil glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Col\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Colossians</a><span> - Christian lifestyle</span><span class="vid_col glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'1Thess\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">1 Thessalonians</a><span> - Expecting the End</span><span class="vid_1thess glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'2Thess\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">2 Thessalonians</a><span> - The End delayed</span><span class="vid_2thess glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><p style="margin-left:5%;font-size:14px;text-align:left;padding:0;margin-bottom:0;margin-top:8px"><b>Pauline letters to individuals</b></p><a href="javascript:step.util.ut(\'1Tim\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">1 Timothy</a><span> - False teachings</span><span class="vid_1tim glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'2Tim\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">2 Timothy</a><span> - Paul\'s farewell</span><span class="vid_2tim glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Titus\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Titus</a><span> - A difficult ministry</span><span class="vid_titus glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Phlm\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Philemon</a><span> - Slaves as brothers</span><span class="vid_phlm glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><p style="margin-left:5%;font-size:14px;text-align:left;padding:0;margin-bottom:0;margin-top:8px"><b>Letters from others</b></p><a href="javascript:step.util.ut(\'Heb\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Hebrews</a><span> - Jewish Christianity</span><span class="vid_heb glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Jas\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">James</a><span> - Trials of faith</span><span class="vid_jas glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'1Pet\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">1 Peter</a><span> - Life among unbelievers</span><span class="vid_1pet glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'2Pet\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">2 Peter</a><span> - Peter\'s farewell</span><span class="vid_2pet glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'1John\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">1 John</a><span> - God loves us</span><span class="vid_1john glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'2John\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">2 John</a><span> - Love each other</span><span class="vid_2john glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'3John\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">3 John</a><span> - Practical love</span><span class="vid_3john glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><a href="javascript:step.util.ut(\'Jude\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Jude</a><span> - Deserters</span><span class="vid_jude glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><p style="margin-left:5%;font-size:14px;text-align:left;padding:0;margin-bottom:0;margin-top:8px"><b>Prophecies for the future</b></p><a href="javascript:step.util.ut(\'Rev\', \'book\')" style="margin-left:10%;height:14px;font-size:14px">Revelation</a> <span class="vdes_rev1">chapters 1-11</span><span> - The world gets worse</span><span class="vid_rev1 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><br><span style="margin-left:10%;height:14px;font-size:14px"">Revelation</span> <span class="vdes_rev2">chapters 12-22</span><span> - Final war & peace</span><span class="vid_rev2 glyphicon glyphicon-play-circle" style="margin-left:10px;display:none"></span><tr></tr></tbody></table></div>';
      var G =
        '<br><span style="font-size:18px"><b>Book summary of ' +
        g +
        '</b></span><br><span style="font-size:16px"><p style="border:2px solid grey;padding:5px">' +
        v.book_description +
        "<br><br>" +
        v.book_overview +
        "</p>";
      if (" gen exod isa ezek matt luke john acts rom rev ".indexOf(a) == -1) {
        G +=
          '<br><span class="vid_' +
          a +
          'text" style="font-size:16px;display:none;margin-left:8px">Overview video of ' +
          g +
          '</span><span class="vid_' +
          a +
          ' glyphicon glyphicon-play-circle" style="font-size:16px;margin-left:10px;display:none"></span><span class="vid_' +
          a +
          'text" style="font-size:16px;display:none"> by the BibleProject</span><br>';
      } else {
        G +=
          '<br><span class="vid_' +
          a +
          '1text" style="font-size:16px;display:none;margin-left:8px">Overview videos of ' +
          g +
          '</span><span class="vid_' +
          a +
          '1 glyphicon glyphicon-play-circle" style="font-size:16px;margin-left:5px;display:none"></span><span class="vid_' +
          a +
          '1text" style="font-size:16px;display:none"> and </span><span class="vid_' +
          a +
          '2 glyphicon glyphicon-play-circle" style="font-size:16px;margin-left:5px;display:none"></span><span class="vid_' +
          a +
          '2text" style="font-size:16px;display:none"> by the BibleProject</span>';
      }
      G +=
        '<p style="margin:8px">ESV Introduction:<br>' +
        v.ESV_introduction +
        '</p><p style="margin:8px">ESV Summary:<br>' +
        v.ESV_summary +
        "</p>";
      var m = step.searchSelect.vMA[a];
      if (typeof m === "number") {
        var q = step.passageSelect.vE[m][1];
        if (typeof q === "number") {
          var E = false;
          if (typeof v.chapter_intro_icc_url === "string") {
            var x = "";
            if (
              typeof v.chapter_intro_icc_page === "string" &&
              v.chapter_intro_icc_page !== ""
            ) {
              x = ' title="page ' + v.chapter_intro_icc_page + '"';
            }
            G +=
              ' <a style="margin-left:8px;margin-bottom:0" href="' +
              v.chapter_intro_icc_url +
              '" target="icc"' +
              x +
              '><b><u>ICC commentary introduction</u></b> <sup class="glyphicon glyphicon-book"></sup></a>';
            E = true;
          }
          if (typeof v.chapter_outline_icc_url === "string") {
            if (E) {
              G += "<br>";
            }
            var x = "";
            if (
              typeof v.chapter_outline_icc_page === "string" &&
              v.chapter_outline_icc_page !== ""
            ) {
              x = ' title="page ' + v.chapter_outline_icc_page + '"';
            }
            G +=
              ' <a style="margin-left:8px;margin-bottom:0" href="' +
              v.chapter_outline_icc_url +
              '" target="icc"' +
              x +
              '><b><u>ICC commentary outline</u></b> <sup class="glyphicon glyphicon-book"></sup></a>';
            E = true;
          }
          if (!E && typeof v.chapter_1_icc_url === "string") {
            G +=
              '<p style="margin-left:8px;margin-bottom:0">The <sup class="glyphicon glyphicon-book"></sup> icons are links to the ICC commentary.</p>';
          }
          G +=
            '<div style="margin:8px"><table><tbody><tr><th style="width:20%">Chapter</th><th>Description</th></tr>';
          for (var O = 1; O <= q; O++) {
            var p = "chapter_" + O + "_header";
            if (typeof v[p] === "string" && v[p] !== "*" && v[p] !== "") {
              var K = q;
              for (var M = O + 1; M <= K; M++) {
                var z = "chapter_" + M + "_header";
                if (typeof v[z] === "string") {
                  K = M - 1;
                }
              }
              G +=
                "<tr><td><b>" +
                c +
                " " +
                O +
                "-" +
                K +
                "</b></td><td><b>" +
                v[p] +
                "</b></td></tr>";
            }
            p = "chapter_" + O + "_description";
            if (typeof v[p] === "string" && v[p] !== "") {
              if (v[p] === "*") {
                v[p] = "";
              }
              G +=
                "<tr><td><a href=\"javascript:step.util.ut('" +
                c +
                "." +
                O +
                "')\">" +
                c +
                " " +
                O +
                "</a></td><td>" +
                v[p];
              p = "chapter_" + O + "_icc_url";
              if (typeof v[p] === "string" && v[p] !== "") {
                var u = v[p];
                p = "chapter_" + O + "_icc_page";
                var x = "";
                if (typeof v[p] === "string" && v[p] !== "") {
                  x = ' title="page ' + v[p] + '"';
                }
                G +=
                  ' <a href="' +
                  u +
                  '" target="icc"' +
                  x +
                  '><sup class="glyphicon glyphicon-book"></sup></a>';
              }
              G += "</td></tr>";
            }
          }
          G += "</tbody></table></div>";
        }
      }
      G +=
        '</span><div class="copyrightInfo">Copyright information for <a href="/version.jsp?version=ESV" target="_new">ESV</a></div><br>';
      var w =
        '<br><span style="font-size:18px"><b>Chapter summary of ' +
        g +
        " " +
        f +
        '</b></span><br><span style="font-size:16px"><p style="border:2px solid grey;padding:5px">' +
        v["chapter_" + f + "_description"] +
        "<br><br>" +
        v["chapter_" + f + "_overview"] +
        '</p><p style="margin:8px">' +
        v["chapter_" + f + "_summary"] +
        "</p></span><br>";
      var A = v.commentary_keys;
      var I = v.commentary_names;
      if (A == null) {
        A = "['icc']";
        I = "['ICC Commentary']";
      }
      var F = JSON.parse(A.replaceAll("'", '"').replace('\\"', "'"));
      var R = JSON.parse(I.replaceAll("'", '"').replace('\\"', "'"));
      var t = step.userLanguageCode;
      if (t.substr(0, 3) === "fil") {
        t = "fil";
      } else {
        t = t.substr(0, 2);
      }
      for (var P = 0; P < F.length; P++) {
        var J = F[P];
        var p = "chapter_" + f + "_" + J + "_url";
        var L = J.split("_");
        if (L.length == 2 && L[1] === "langcode") {
          p = "chapter_" + f + "_" + L[0] + "_" + t + "_url";
          if (typeof v[p] === "string") {
            J = L[0] + "_" + t;
          } else {
            p = "chapter_" + f + "_" + L[0] + "_en_url";
            if (typeof v[p] == "string") {
              J = L[0] + "_en";
            } else {
              continue;
            }
          }
        }
        if (typeof v[p] === "string" && v[p] !== "") {
          var C = v[p];
          p = "chapter_" + f + "_" + J + "_page";
          var x = "";
          if (typeof v[p] === "string" && v[p] !== "") {
            x = ' title="page ' + v[p] + '"';
          }
          w +=
            '<a style="margin-left:8px;font-size:14px" href="' +
            C +
            '" target="ext_commentary"' +
            x +
            "><b><u>" +
            R[P] +
            " for chapter " +
            f +
            '</u></b> <sup class="glyphicon glyphicon-book"></sup></a><br>';
        }
      }
      w += '<br><br><br><br><span class="nextPreviousChapterGroup">';
      if (f > 1) {
        w +=
          '<a class="previousChapter" style="display:inline" href="javascript:step.util.ut(\'' +
          c +
          "." +
          (f - 1) +
          '\')"><i class="glyphicon glyphicon-arrow-left"></i></a>';
      }
      if (h > -1 && f < step.passageSelect.vE[h][1]) {
        w +=
          '<a class="nextChapter" style="display:inline" href="javascript:step.util.ut(\'' +
          c +
          "." +
          (f + 1) +
          '\')"><i class="glyphicon glyphicon-arrow-right"></i></a>';
      }
      w += "</span>";
      var N = "";
      var B = "";
      var H = "";
      var y = "";
      var Q = "";
      var o = "";
      if (typeof b !== "string" || b === "chapter") {
        N = 'class="active"';
        B = " in active";
      } else {
        if (b === "book") {
          H = 'class="active"';
          y = " in active";
        } else {
          if (b === "bible") {
            Q = 'class="active"';
            o = " in active";
          } else {
            N = 'class="active"';
            B = " in active";
          }
        }
      }
      $(
        _.template(
          '<div id="showBookOrChapterSummaryModal" class="modal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content stepModalFgBg""><script>$(document).keydown(function(event) {if (event.keyCode == 27) {step.util.closeModal("showBookOrChapterSummaryModal");}});</script><div class="modal-header">' +
            step.util.uf("showBookOrChapterSummaryModal") +
            '<br></div><div class="modal-body" style="text-align:left font-size:16px"><div><ul class="nav nav-tabs"><li ' +
            N +
            '><a href="#chptSummary" data-toggle="tab">Chapter summary</a></li><li ' +
            H +
            '><a href="#bookSummary" data-toggle="tab">Book summary</a></li><li ' +
            Q +
            '><a id="bibleTab" href="#bibleSummary" data-toggle="tab">Bible summary</a></li></ul><div class="tab-content"><div class="tab-pane fade' +
            B +
            '" id="chptSummary">' +
            w +
            '</div><div class="tab-pane fade' +
            y +
            '" id="bookSummary">' +
            G +
            '</div><div class="tab-pane fade' +
            o +
            '" id="bibleSummary">' +
            S +
            "</div></div></div></div></div></div></div>"
        )()
      ).modal("show");
      step.util.MW("showBookOrChapterSummaryModal");
      step.util.ux(step.userLanguageCode);
      var D = step.util.uM("step.showBibleProject");
      var n = parseInt(D, 10);
      if (isNaN(n)) {
        n = 0;
      }
      if (n < 1) {
        var s = window.innerWidth > 499 ? "bottom" : "left";
        var r = [
          {
            element: document.querySelector("#bibleTab"),
            intro:
              'Click on the "Bible summary" tab to see summary videos by the BibleProject!',
            position: s,
          },
        ];
        introJs()
          .setOptions({
            steps: r,
          })
          .start();
        n++;
        step.util.ub("step.showBibleProject", n);
      }
    });
  },
  ux: function (b, a) {
    b = b.toLowerCase();
    if (!a) {
      if (b.substring(0, 2) === "zh") {
        b = "zh";
      }
    }
    if (
      " en uk id pl hu th ko te ja ta ro it ru de zh zh_hk ar arz fr es pt hi vi ".indexOf(
        b
      ) == -1
    ) {
      b = "en";
    }
    $.getJSON("html/json/video/" + b + ".json", function (g) {
      for (var f in g) {
        var h = g[f];
        if (!a) {
          var i = "";
          if (b === "zh") {
            i += " ()";
            $(".vid_" + f).css("margin-left", "0px");
          } else {
            if (b === "ar") {
              i += " ()";
              $(".vid_" + f)
                .css("direction", "rtl")
                .css("margin-left", "0px");
            }
          }
          $(".vid_" + f)
            .css("color", "var(--clrHighlight)")
            .show();
          $(".vid_" + f).wrap(
            '<a href="' + h + '" target="_blank">' + i + "</a>"
          );
        } else {
          var i = "";
          if (b === "zh_hk") {
            i += " ()";
          } else {
            if (b === "arz") {
              i += " ()";
            } else {
              return;
            }
          }
          $(".vid_" + f)
            .parent()
            .after(
              '<span class="vid2_' +
                f +
                ' glyphicon glyphicon-play-circle"></span>'
            );
          $(".vid2_" + f).wrap(
            '<a href="' + h + '" target="_blank">' + i + "</a>"
          );
        }
        var e = f.slice(-1);
        var d = $("#bookSummary");
        var c = d.find(".vid_" + f);
        if (!a) {
          if (!isNaN(e)) {
            if (c.length == 1) {
              textInBibleSummary = $("#bibleSummary")
                .find(".vdes_" + f)
                .text();
              if (textInBibleSummary !== "") {
                $("#bookSummary")
                  .find(".vid_" + f)
                  .parent()
                  .before("<span> " + textInBibleSummary + "</span>");
              }
            }
          }
        }
        c.show();
        d.find(".vid_" + f + "text").show();
      }
      if (!a) {
        if (b === "zh") {
          step.util.ux("zh_hk", true);
        } else {
          if (b === "ar") {
            step.util.ux("arz", true);
          }
        }
      }
    });
  },
  MW: function (a) {
    if (step.touchDevice && !step.touchWideDevice) {
      $("body").css("overflow-y", "hidden");
      $("#" + a).on("hidden.bs.modal", function (b) {
        $("body").css("overflow-y", "auto");
      });
    }
  },
  uu: function (f, d, e) {
    step.util.closeModal("showLongAlertModal");
    $(".qtip-titlebar button.close").click();
    var a = e == null ? "" : 'style="padding:25px" ';
    var b =
      d.toLowerCase().indexOf("color") > -1 ||
      d.toLowerCase().indexOf("font") > -1
        ? ' data-backdrop="static"'
        : "";
    $(
      _.template(
        '<div id="showLongAlertModal" class="modal" ' +
          a +
          'role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"' +
          b +
          '><div class="modal-dialog"><div class="modal-content stepModalFgBg""><script>$(document).keydown(function(event) {if (event.keyCode == 27) {step.util.closeModal("showLongAlertModal");}});</script><div class="modal-header">' +
          d +
          step.util.uf("showLongAlertModal") +
          '<br></div><div class="modal-body" style="text-align:left;font-size:14px">' +
          f +
          "</div></div></div></div>"
      )()
    ).modal("show");
    if (e != null) {
      if (e.length == 1) {
        $("#showLongAlertModal .modal-body").append(e[0]);
        if (typeof e[0] === "string") {
          var g = e[0].indexOf('id="welcomeExamples');
          if (g > 1 && g < 10) {
            $(".modal-body").css("padding", "0");
          }
        }
      } else {
        for (var c = 0; c < e.length; c++) {
          $($(".panel-collapse.lexmodal")[c]).append(e[c]);
        }
      }
    }
    step.util.MW("showLongAlertModal");
  },
  uv: function (d) {
    var b;
    var a = false;
    if (d === "flip") {
      if (!step.util.u5()) {
        a = true;
      }
    } else {
      a = step.util.u5();
    }
    var c = document.querySelector(":root");
    if (a) {
      c.style.setProperty("--clrText", "#BCC0C3");
      step.settings.save({
        clrText: "#BCC0C3",
      });
      c.style.setProperty("--clrStrongText", "#8ab4f8");
      step.settings.save({
        clrStrongText: "#8ab4f8",
      });
      c.style.setProperty("--clrBackground", "#202124");
      step.settings.save({
        clrBackground: "#202124",
      });
      c.style.setProperty("--clrHighlight", "#c58af9");
      step.settings.save({
        clrHighlight: "#c58af9",
      });
      c.style.setProperty("--clrHighlightBg", "#800080");
      step.settings.save({
        clrHighlightBg: "#800080",
      });
      c.style.setProperty("--clr2ndHover", "#c5d0fb");
      step.settings.save({
        clr2ndHover: "#c5d0fb",
      });
      $("body,html").css("color-scheme", "dark");
      b = __s.disable;
    } else {
      c.style.setProperty("--clrText", "#5d5d5d");
      step.settings.save({
        clrText: "#5d5d5d",
      });
      c.style.setProperty("--clrStrongText", "#447888");
      step.settings.save({
        clrStrongText: "#447888",
      });
      c.style.setProperty("--clrBackground", "#ffffff");
      step.settings.save({
        clrBackground: "#ffffff",
      });
      c.style.setProperty("--clrHighlight", "#17758F");
      step.settings.save({
        clrHighlight: "#17758F",
      });
      c.style.setProperty("--clrHighlightBg", "#17758F");
      step.settings.save({
        clrHighlightBg: "#17758F",
      });
      c.style.setProperty("--clr2ndHover", "#d3d3d3");
      step.settings.save({
        clr2ndHover: "#d3d3d3",
      });
      $("body,html").css("color-scheme", "normal");
      b = __s.enable;
    }
    c.style.setProperty("--clrLexiconFocusBG", "#c8d8dc");
    step.settings.save({
      clrLexiconFocusBG: "#c8d8dc",
    });
    c.style.setProperty("--clrRelatedWordBg", "#b2e5f3");
    step.settings.save({
      clrRelatedWordBg: "#b2e5f3",
    });
    $("#darkModeBtn").text(b);
    if (d !== "close") {
      step.util.showFontSettings();
    }
  },
  uw: function () {
    if (step.colorUpdateMode) {
      step.colorUpdateMode = false;
    } else {
      step.colorUpdateMode = true;
    }
    step.util.showFontSettings();
  },
  showFontSettings: function (b) {
    var g = document.getElementById("fontSettings");
    if (g) {
      g.parentNode.removeChild(g);
    }
    $(".modal-backdrop.in").remove();
    var a = !(false || !!document.documentMode);
    var e = a;
    var c = navigator.userAgent.toLowerCase();
    if (step.appleTouchDevice) {
      if (c.search(/ cpu os [345678]_/) > -1) {
        a = false;
        e = false;
      }
      if (c.search(/ cpu os 9_/) > -1) {
        a = false;
      }
    } else {
      if (c.search(/android [1234]\./) > -1) {
        a = false;
      }
    }
    var i = "";
    var d = "";
    if (typeof b === "number") {
      i = ", " + b;
      d = "display:none";
    }
    var h = step.util.u5();
    var f =
      '<div id="fontSettings" class="modal selectModal" dir="' +
      (step.state.isLtR() ? "ltr" : "rtl") +
      '" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog" style="width:350px"><div class="modal-content stepModalFgBg">';
    if (a) {
      f +=
        '<link rel="stylesheet" href="css/spectrum.css"><script src="libs/spectrum.js"></script><script src="libs/tinycolor-min.js"></script>';
    }
    f +=
      '<script>$(document).ready(function () {showFontSizeBtns("defaultfont"' +
      i +
      ');showFontSizeBtns("hbFont"' +
      i +
      ');showFontSizeBtns("unicodeFont"' +
      i +
      ');showFontSizeBtns("arabicFont"' +
      i +
      ');showFontSizeBtns("burmeseFont"' +
      i +
      ');showFontSizeBtns("chineseFont"' +
      i +
      ');showFontSizeBtns("copticFont"' +
      i +
      ');showFontSizeBtns("farsiFont"' +
      i +
      ');showFontSizeBtns("khmerFont"' +
      i +
      ');showFontSizeBtns("syriacFont"' +
      i +
      ");";
    if (a) {
      f +=
        'var color = step.settings.get("clrHighlight");if (!((typeof color === "string") && (color.length == 7))) color = "#17758F";var closeButton = $("#fontSettings").find("button.close");if (closeButton.length == 1) $(closeButton[0]).attr("onclick", "closeFontSetting(\'" + color + "\')");color = step.settings.get("clrText");$("#clrText").spectrum({color: color,clickoutFiresChange: false,change: function(color) {var currentClrPicker = $("#clrText").spectrum("get").toHexString();setColor(currentClrPicker, "clrText");},show: function(color) {var currentClrPicker = $("#clrText").spectrum("get").toHexString();var color = step.settings.get("clrText");if (!((typeof color === "string") && (color.length == 7))) color = "#5D5D5D";if (color != currentClrPicker) setColor(currentClrPicker, "clrText");}});color = step.settings.get("clrBackground");$("#clrBackground").spectrum({color: color,clickoutFiresChange: false,change: function(color) {var currentClrPicker = $("#clrBackground").spectrum("get").toHexString();setColor(currentClrPicker, "clrBackground");},show: function(color) {var currentClrPicker = $("#clrBackground").spectrum("get").toHexString();var color = step.settings.get("clrBackground");if (!((typeof color === "string") && (color.length == 7))) color = "#ffffff";if (color != currentClrPicker) setColor(currentClrPicker, "clrBackground");}});color = step.settings.get("clrStrongText");$("#clrStrongText").spectrum({color: color,clickoutFiresChange: false,change: function(color) {var currentClrPicker = $("#clrStrongText").spectrum("get").toHexString();setColor(currentClrPicker, "clrStrongText");},show: function(color) {var currentClrPicker = $("#clrStrongText").spectrum("get").toHexString();var color = step.settings.get("clrStrongText");if (!((typeof color === "string") && (color.length == 7))) color = "#17758F";if (color != currentClrPicker) setColor(currentClrPicker, "clrStrongText");}});color = step.settings.get("clrHighlight");$("#clrHighlight").spectrum({color: color,clickoutFiresChange: false,showPalette: true,palette: [["rgb(23, 117, 143);", "green"],["rgb(172, 9, 35);", "rgb(110, 11, 116);"]],change: function(color) {var currentClrPicker = $("#clrHighlight").spectrum("get").toHexString();setColor(currentClrPicker, "clrHighlight");},show: function(color) {var currentClrPicker = $("#clrHighlight").spectrum("get").toHexString();var color = step.settings.get("clrHighlight");if (!((typeof color === "string") && (color.length == 7))) color = "#17758F";if (color != currentClrPicker) setColor(currentClrPicker, "clrHighlight");}});color = step.settings.get("clrHighlightBg");$("#clrHighlightBg").spectrum({color: color,clickoutFiresChange: false,change: function(color) {var currentClrPicker = $("#clrHighlightBg").spectrum("get").toHexString();setColor(currentClrPicker, "clrHighlightBg");},show: function(color) {var currentClrPicker = $("#clrHighlightBg").spectrum("get").toHexString();var color = step.settings.get("clrHighlightBg");if (!((typeof color === "string") && (color.length == 7))) color = "#17758F";if (color != currentClrPicker) setColor(currentClrPicker, "clrHighlightBg");}});color = step.settings.get("clr2ndHover");$("#clr2ndHover").spectrum({color: color,clickoutFiresChange: false,change: function(color) {var currentClrPicker = $("#clr2ndHover").spectrum("get").toHexString();setColor(currentClrPicker, "clr2ndHover");},show: function(color) {var currentClrPicker = $("#clr2ndHover").spectrum("get").toHexString();var color = step.settings.get("clr2ndHover");if (!((typeof color === "string") && (color.length == 7))) color = "#d3d3d3";if (color != currentClrPicker) setColor(currentClrPicker, "clr2ndHover");}});color = step.settings.get("clrLexiconFocusBG");$("#clrLexiconFocusBG").spectrum({color: color,clickoutFiresChange: false,change: function(color) {var currentClrPicker = $("#clrLexiconFocusBG").spectrum("get").toHexString();setColor(currentClrPicker, "clrLexiconFocusBG");},show: function(color) {var currentClrPicker = $("#clrLexiconFocusBG").spectrum("get").toHexString();var color = step.settings.get("clrLexiconFocusBG");if (!((typeof color === "string") && (color.length == 7))) color = "#17758F";if (color != currentClrPicker) setColor(currentClrPicker, "clrLexiconFocusBG");}});color = step.settings.get("clrRelatedWordBg");$("#clrRelatedWordBg").spectrum({color: color,clickoutFiresChange: false,change: function(color) {var currentClrPicker = $("#clrRelatedWordBg").spectrum("get").toHexString();setColor(currentClrPicker, "clrRelatedWordBg");},show: function(color) {var currentClrPicker = $("#clrRelatedWordBg").spectrum("get").toHexString();var color = step.settings.get("clrRelatedWordBg");if (!((typeof color === "string") && (color.length == 7))) color = "#17758F";if (color != currentClrPicker) setColor(currentClrPicker, "clrRelatedWordBg");}});if (step.colorUpdateMode) $(".adClr").show();else $(".adClr").hide();';
    }
    f +=
      '}); function showFontSizeBtns(fontName, panelNumber) {var currentFontSize = step.util.uj(fontName, panelNumber);if (currentFontSize > 0) {$("#" + fontName + "Btn").find("." + fontName).css("font-size", currentFontSize);$("#" + fontName + "Size").text("(" + currentFontSize + "px)");$("#" + fontName + "Btn").show();}}';
    if (a) {
      f +=
        'function setColor(baseColor, colorName) {if (!((typeof baseColor === "string") && (baseColor.length == 7) && (baseColor.substr(0,1) === "#"))) baseColor = "#17758F";var darkMode = step.util.u5();colorVarName = colorName;var rootVar = document.querySelector(":root");rootVar.style.setProperty("--" + colorVarName, baseColor);var obj = {};obj[colorVarName] = baseColor;step.settings.save(obj);if ((colorVarName === "clrHighlightBg") && (!step.colorUpdateMode)) {rootVar.style.setProperty("--clrHighlightBg",baseColor);step.settings.save({"clrHighlightBg":baseColor});var t = tinycolor(baseColor);var hsl = t.toHsl();var colorH = hsl["h"];var colorS = hsl["s"] * 100;var colorL = hsl["l"] * 100;var desaturate = colorS - 40;var desColor = tinycolor("hsl(" + colorH + ", " + desaturate + "%, " + colorL + "%)");var desHsl = desColor.toHsl();var desColorH = desHsl["h"];var desColorS = desHsl["s"] * 100;var desColorL = desHsl["l"] * 100;var lightHex = baseColor;if (!darkMode) {var lighten = desColorL + 10;var lightColor = tinycolor("hsl(" + desColorH + ", " + desColorS + "%, " + lighten + "%)");var lightHex = lightColor.toHexString();}rootVar.style.setProperty("--clrStrongText",lightHex);step.settings.save({"clrStrongText":lightHex});desaturate = colorS - 50;desColor = tinycolor("hsl(" + colorH + ", " + desaturate + "%, " + colorL + "%)");desHsl = desColor.toHsl();desColorH = desHsl["h"];desColorS = desHsl["s"] * 100;desColorL = desHsl["l"] * 100;lighten = desColorL + 50;lightColor = tinycolor("hsl(" + desColorH + ", " + desColorS + "%, " + lighten + "%)");lightHex = lightColor.toHexString();rootVar.style.setProperty("--clrLexiconFocusBG",lightHex);step.settings.save({"clrLexiconFocusBG":lightHex});lighten = colorL + 55;lightColor = tinycolor("hsl(" + colorH + ", " + colorS + "%, " + lighten + "%)");lightHex = lightColor.toHexString();rootVar.style.setProperty("--clrRelatedWordBg",lightHex);step.settings.save({"clrRelatedWordBg":lightHex});}step.util.showFontSettings();}';
    }
    f +=
      'function closeFontSetting(baseColor) {if ((typeof baseColor === "string") && (baseColor.length == 7)) {if ((baseColor === "#17758F") || (baseColor === "#c58af9")) step.util.uv("close");else setColor(baseColor);}step.util.closeModal("fontSettings");}</script><div class="modal-header"><span><b>' +
      (typeof b === "number"
        ? __s.update_font_in_current_panels
        : __s.update_font_in_all_panels) +
      "</b></span>" +
      step.util.uf(null, "closeFontSetting") +
      '</div><div class="modal-body" style="text-align:center"><table style="height:auto;width:95%"><tr><th style="width:70%"><th style="width:30%"></tr><tr id="defaultfontBtn" style="display:none"><td class="passageContent defaultfont">' +
      __s.default_font +
      ' <span id="defaultfontSize"></span></td><td class="pull-right"><button class="btn btn-default btn-sm" type="button" title="Decrease font size" onclick="step.util.uh(\'defaultfont\', -1' +
      i +
      ')" title="' +
      __s.passage_smaller_fonts +
      '"><span style="font-size:8px;line-height:12px">A -</span></button><button class="btn btn-default btn-sm" type="button" title="Increase font size" onclick="step.util.uh(\'defaultfont\', 1' +
      i +
      ')" title="' +
      __s.passage_larger_fonts +
      '"><span style="font-size:10px;line-height:12px;font-weight:bold">A +</span></button></td></tr><tr id="hbFontBtn" style="display:none"><td class="passageContent hbFont">' +
      __s.hebrew +
      ':  <span id="hbFontSize"></span></td><td class="pull-right"><button class="btn btn-default btn-sm" type="button" title="Decrease font size" onclick="step.util.uh(\'hbFont\', -1' +
      i +
      ')" title="' +
      __s.passage_smaller_fonts +
      '"><span style="font-size:8px;line-height:12px">A -</span></button><button class="btn btn-default btn-sm" type="button" title="Increase font size" onclick="step.util.uh(\'hbFont\', 1' +
      i +
      ')" title="' +
      __s.passage_larger_fonts +
      '"><span style="font-size:10px;line-height:12px;font-weight:bold">A +</span></button></td></tr><tr id="unicodeFontBtn" style="display:none"><td class="passageContent unicodeFont">' +
      __s.greek +
      ':  <span id="unicodeFontSize"></span></td><td class="pull-right"><button class="btn btn-default btn-sm" type="button" title="Decrease font size" onclick="step.util.uh(\'unicodeFont\', -1' +
      i +
      ')" title="' +
      __s.passage_smaller_fonts +
      '"><span style="font-size:8px;line-height:12px">A -</span></button><button class="btn btn-default btn-sm" type="button" title="Increase font size" onclick="step.util.uh(\'unicodeFont\', 1' +
      i +
      ')" title="' +
      __s.passage_larger_fonts +
      '"><span style="font-size:10px;line-height:12px;font-weight:bold">A +</span></button></td></tr><tr id="arabicFontBtn" style="display:none"><td class="passageContent arabicFont">Arabic:   <span id="arabicFontSize"></span></td><td class="pull-right"><button class="btn btn-default btn-sm" type="button" title="Decrease font size" onclick="step.util.uh(\'arabicFont\', -1' +
      i +
      ')" title="' +
      __s.passage_smaller_fonts +
      '"><span style="font-size:8px;line-height:12px">A -</span></button><button class="btn btn-default btn-sm" type="button" title="Increase font size" onclick="step.util.uh(\'arabicFont\', 1' +
      i +
      ')" title="' +
      __s.passage_larger_fonts +
      '"><span style="font-size:10px;line-height:12px;font-weight:bold">A +</span></button></td></tr><tr id="burmeseFontBtn" style="display:none"><td class="passageContent burmeseFont">()  <span id="burmeseFontSize"></span></td><td class="pull-right"><button class="btn btn-default btn-sm" type="button" title="Decrease font size" onclick="step.util.uh(\'burmeseFont\', -1' +
      i +
      ')" title="' +
      __s.passage_smaller_fonts +
      '"><span style="font-size:8px;line-height:12px">A -</span></button><button class="btn btn-default btn-sm" type="button" title="Increase font size" onclick="step.util.uh(\'burmeseFont\', 1' +
      i +
      ')" title="' +
      __s.passage_larger_fonts +
      '"><span style="font-size:10px;line-height:12px;font-weight:bold">A +</span></button></td></tr><tr id="chineseFontBtn" style="display:none"><td class="passageContent chineseFont">Chinese:  <span id="chineseFontSize"></span></td><td class="pull-right"><button class="btn btn-default btn-sm" type="button" title="Decrease font size" onclick="step.util.uh(\'chineseFont\', -1' +
      i +
      ')" title="' +
      __s.passage_smaller_fonts +
      '"><span style="font-size:8px;line-height:12px">A -</span></button><button class="btn btn-default btn-sm" type="button" title="Increase font size" onclick="step.util.uh(\'chineseFont\', 1' +
      i +
      ')" title="' +
      __s.passage_larger_fonts +
      '"><span style="font-size:10px;line-height:12px;font-weight:bold">A +</span></button></td></tr><tr id="copticFontBtn" style="display:none"><td class="passageContent copticFont">Coptic:  <span id="copticFontSize"></span></td><td class="pull-right"><button class="btn btn-default btn-sm" type="button" title="Decrease font size" onclick="step.util.uh(\'copticFont\', -1' +
      i +
      ')" title="' +
      __s.passage_smaller_fonts +
      '"><span style="font-size:8px;line-height:12px">A -</span></button><button class="btn btn-default btn-sm" type="button" title="Increase font size" onclick="step.util.uh(\'copticFont\', 1' +
      i +
      ')" title="' +
      __s.passage_larger_fonts +
      '"><span style="font-size:10px;line-height:12px;font-weight:bold">A +</span></button></td></tr><tr id="farsiFontBtn" style="display:none"><td class="passageContent farsiFont">Farsi:   <span id="farsiFontSize"></span></td><td class="pull-right"><button class="btn btn-default btn-sm" type="button" title="Decrease font size" onclick="step.util.uh(\'farsiFont\', -1' +
      i +
      ')" title="' +
      __s.passage_smaller_fonts +
      '"><span style="font-size:8px;line-height:12px">A -</span></button><button class="btn btn-default btn-sm" type="button" title="Increase font size" onclick="step.util.uh(\'farsiFont\', 1' +
      i +
      ')" title="' +
      __s.passage_larger_fonts +
      '"><span style="font-size:10px;line-height:12px;font-weight:bold">A +</span></button></td></tr><tr id="khmerFontBtn" style="display:none"><td class="passageContent khmerFont">Khmer:  <span id="khmerFontSize"></span></td><td class="pull-right"><button class="btn btn-default btn-sm" type="button" title="Decrease font size" onclick="step.util.uh(\'khmerFont\', -1' +
      i +
      ')" title="' +
      __s.passage_smaller_fonts +
      '"><span style="font-size:8px;line-height:12px">A -</span></button><button class="btn btn-default btn-sm" type="button" title="Increase font size" onclick="step.util.uh(\'khmerFont\', 1' +
      i +
      ')" title="' +
      __s.passage_larger_fonts +
      '"><span style="font-size:10px;line-height:12px;font-weight:bold">A +</span></button></td></tr><tr id="syriacFontBtn" style="display:none"><td class="passageContent syriacFont">Syriac:   <span id="syriacFontSize"></span></td><td class="pull-right"><button class="btn btn-default btn-sm" type="button" title="Decrease font size" onclick="step.util.uh(\'syriacFont\', -1' +
      i +
      ')" title="' +
      __s.passage_smaller_fonts +
      '"><span style="font-size:8px;line-height:12px">A -</span></button><button class="btn btn-default btn-sm" type="button" title="Increase font size" onclick="step.util.uh(\'syriacFont\', 1' +
      i +
      ')" title="' +
      __s.passage_larger_fonts +
      '"><span style="font-size:10px;line-height:12px;font-weight:bold">A +</span></button></td></tr>';
    if (e && typeof b !== "number") {
      f +=
        '<tr><td class="passageContent defaultfont">' +
        __s.dark_mode +
        '</td><td class="pull-right"><button id="darkModeBtn" class="btn btn-default btn-sm' +
        (h ? " stepPressedButton" : "") +
        '" type="button" title="Dark mode" onclick="step.util.uv(\'flip\')"><span style="font-size:10px;line-height:12px;font-weight:bold">' +
        (h ? __s.disable : __s.enable) +
        "</span></button></td></tr>";
    }
    if (a && typeof b !== "number") {
      f +=
        '<tr><td class="passageContent defaultfont">' +
        __s.advanced_color_update +
        ':</td><td class="pull-right"><button id="colorUpdateMode" class="btn btn-default btn-sm' +
        (step.colorUpdateMode ? " stepPressedButton" : "") +
        '" type="button" title="Color mode" onclick="step.util.uw()"><span style="font-size:10px;line-height:12px;font-weight:bold">' +
        (step.colorUpdateMode ? __s.disable : __s.enable) +
        '</span></button></td></tr><tr class="adClr" style="' +
        d +
        '"><td>' +
        __s.text_with_no_highlight +
        '</td><td class="pull-right"><input id="clrText" type="color" value="#5D5D5D"/></td></tr><tr class="adClr" style="' +
        d +
        '"><td>' +
        __s.background_color +
        '</td><td class="pull-right"><input id="clrBackground" type="color" value="#ffffff"/></td></tr><tr class="adClr" style="' +
        d +
        '"><td>' +
        __s.highlighted_text +
        ' 1</td><td class="pull-right"><input id="clrStrongText" type="color" value="#17758f"/></td></tr><tr class="adClr" style="' +
        d +
        '"><td>' +
        __s.highlighted_text +
        ' 2</td><td class="pull-right"><input id="clrHighlight" type="color" value="#447888"/></td></tr><tr style="' +
        d +
        '"><td>' +
        __s.highlighted_background +
        ' 1</td><td class="pull-right"><input id="clrHighlightBg" type="color" value="#447888"/></td></tr><tr class="adClr" style="' +
        d +
        '"><td>' +
        __s.highlighted_background +
        ' 2</td><td class="pull-right"><input id="clr2ndHover" type="color" value="#d3d3d3"/></td></tr><tr class="adClr" style="' +
        d +
        '"><td>' +
        __s.highlighted_for_lexicon +
        '</td><td class="pull-right"><input id="clrLexiconFocusBG" type="color" value="#C8D8DC"/></td></tr><tr class="adClr" style="' +
        d +
        '"><td>' +
        __s.highlighted_for_related_text +
        '</td><td class="pull-right"><input id="clrRelatedWordBg" type="color" value="#B2E5F3"/></td></tr>';
    }
    f += "</table><br>";
    if (a) {
      f +=
        '<span><p style="text-align:left;font-size:18px;' +
        d +
        '">' +
        __s.examples_for_the_selected_color +
        '</p><p class="passageContent" style="' +
        d +
        '">' +
        __s.text_with_no_highlight +
        '</p><p class="passageContent" style="color:var(--clrStrongText);' +
        d +
        '">' +
        __s.highlighted_text +
        ' 1</p><p class="passageContent" style="color:var(--clrHighlight);' +
        d +
        '">' +
        __s.highlighted_text +
        ' 2</p><p class="passageContent primaryLightBg" style="' +
        d +
        '">' +
        __s.highlighted_background +
        ' 1</p><p class="passageContent secondaryBackground" style="' +
        d +
        '">' +
        __s.highlighted_background +
        ' 2</p><p class="passageContent lexiconFocus" style="' +
        d +
        '">' +
        __s.highlighted_for_lexicon +
        '</p><p class="passageContent relatedWordEmphasisHover" style="' +
        d +
        '">' +
        __s.highlighted_for_related_text +
        "</p></span>";
    }
    f +=
      '<div class="footer"><button class="stepButton pull-right" data-dismiss="modal" onclick=closeFontSetting()><label>' +
      __s.ok +
      "</label></button>";
    if (a) {
      f +=
        '<button class="stepButton pull-right" style="' +
        d +
        '" onclick=step.util.uv()><label>' +
        __s.original_color +
        "</label></button>";
    }
    f += "</div><br></div></div></div></div>";
    $(_.template(f)()).modal("show");
    step.util.MW("fontSettings");
  },
  uy: function () {
    require(["menu_extras"], function () {
      new PickBibleView({
        model: step.settings,
        searchView: self,
      });
    });
  },
  uz: function (a) {
    if (a) {
      $("#top_input_area").show();
      $("span.tmp-rm-hidden-xs.title")
        .removeClass("tmp-rm-hidden-xs")
        .addClass("hidden-xs");
      $(".navbarIconDesc").hide();
      $("#classicalUICheck").show();
    } else {
      $("#top_input_area").hide();
      $("span.hidden-xs.title")
        .removeClass("hidden-xs")
        .addClass("tmp-rm-hidden-xs");
      $(".navbarIconDesc").show();
      $("#classicalUICheck").hide();
    }
  },
  u0: function (a) {
    if (
      !a &&
      ($.getUrlVars().indexOf("skipwelcome") > -1 || step.state.isLocal())
    ) {
      return;
    }
    if (step.appleTouchDevice) {
      return;
    }
    var c = step.util.uM("step.usageCount");
    var b = parseInt(c, 10);
    if (isNaN(b)) {
      b = 0;
    }
    if (b <= 1 || a) {
      var d = [
        {
          intro: __s.introjs_intro,
        },
        {
          element: document
            .querySelector(".passageContainer.active")
            .querySelector(".select-version.stepButtonTriangle"),
          intro: __s.introjs_bible,
          position: "bottom",
        },
        {
          element: document
            .querySelector(".passageContainer.active")
            .querySelector(".select-reference.stepButtonTriangle"),
          intro: __s.introjs_passage,
          position: "bottom",
        },
      ];
      if (window.innerWidth > 499) {
        d.push({
          element: document
            .querySelector(".passageContainer.active")
            .querySelector(".select-search.stepButtonTriangle"),
          intro: __s.introjs_search,
          position: "bottom",
        });
      }
      introJs()
        .setOptions({
          steps: d,
          nextLabel: " > ",
          prevLabel: " < ",
          doneLabel: __s.done,
        })
        .start();
    } else {
      var c = step.util.uM("step.colorgrammar");
      var b = parseInt(c, 10);
      if (isNaN(b)) {
        b = 0;
      }
      if (
        b < 1 &&
        window.innerWidth > 499 &&
        $("#colorgrammar-icon").is(":visible")
      ) {
        var d = [
          {
            element: document.querySelector("#colorgrammar-icon"),
            intro: "Color code grammar is available with a new user interface.",
            position: "left",
          },
        ];
        introJs()
          .setOptions({
            steps: d,
          })
          .start();
        b++;
        step.util.ub("step.colorgrammar", b);
      } else {
        c = step.util.uM("step.copyIntro");
        b = parseInt(c, 10);
        if (isNaN(b)) {
          b = 0;
        }
        if (
          b < 1 &&
          window.innerWidth > 499 &&
          $("#copy-icon").is(":visible")
        ) {
          var d = [
            {
              element: document.querySelector("#copy-icon"),
              intro: __s.copy_intro,
              position: "left",
            },
          ];
          introJs()
            .setOptions({
              steps: d,
            })
            .start();
          b++;
          step.util.ub("step.copyIntro", b);
        }
      }
    }
  },
  u1: function () {
    if ($.getUrlVars().indexOf("skipwelcome") > -1) {
      return;
    }
    if (step.appleTouchDevice) {
      return;
    }
    var b = step.util.uM("step.multiVersionCount");
    var a = parseInt(b, 10);
    if (isNaN(a)) {
      a = 0;
    }
    if (window.innerWidth > 499 && a < 1) {
      var c = [
        {
          element: document
            .querySelector(".passageContainer.active")
            .querySelector(".dropdown.settingsDropdown"),
          intro: __s.introjs_multi_version,
          position: "left",
        },
      ];
      introJs()
        .setOptions({
          steps: c,
        })
        .start();
      a++;
      step.util.ub("step.multiVersionCount", a);
    }
  },
  closeModal: function (c) {
    var b =
      " showLongAlertModal showBookOrChapterSummaryModal grammarClrModal passageSelectionModal searchSelectionModal copyModal videoModal fontSettings raiseSupport aboutModal bibleVersions ";
    if (
      b.indexOf(" " + c + " ") > -1 &&
      step.touchDevice &&
      !step.touchWideDevice
    ) {
      $("body").css("overflow-y", "auto");
    }
    if (c === "bibleVersions") {
      userHasUpdated = false;
    }
    var a = document.getElementById(c);
    if (a) {
      $("#" + c).modal("hide");
      $("#" + c).modal({
        show: false,
      });
      if (a.parentNode && c !== "raiseSupport") {
        a.parentNode.removeChild(a);
      }
      $(".qtip-titlebar button.close").click();
      if (
        c === "showLongAlertModal" ||
        c === "fontSettings" ||
        c === "grammarClrModal"
      ) {
        $(".sp-container").remove();
        $(".modal-backdrop.in").remove();
      }
    }
  },
  u2: function () {
    var a = $(".list-group-item:visible").length;
    var b = $(".ul_Most_widely_used").find(".list-group-item:visible").length;
    if (a > b) {
      a -= b;
    }
    $(".tagLine").text(
      sprintf(
        __s.filtering_total_bibles_and_commentaries,
        a,
        step.itemisedVersions.length
      )
    );
  },
  u3: function (a) {
    var m = [
      "Abanyom",
      "Abureni",
      "Alege",
      "Amharic",
      "Arabic",
      "Boghom",
      "Cakfem-Mushere",
      "Cibak",
      "Efutop",
      "Ewe",
      "Fyam",
      "Ganda",
      "Gbagyi",
      "Geez",
      "Gwak",
      "gyz",
      "Hausa",
      "Hwana",
      "Igbo",
      "Ikposo",
      "Jere",
      "Kikuyu",
      "Kota__Gabon_",
      "Lala-Roba",
      "Lama__Togo_",
      "Lingala",
      "Lopit",
      "Luo",
      "Malagasy",
      "Malagasy__Plateau",
      "Mashi__Zambia_",
      "Mbembe__Cross_River",
      "Mbere",
      "Mina__Cameroon_",
      "Miya",
      "Naro",
      "Nde-Nsele-Nta",
      "Njebi",
      "North_Ndebele",
      "Nyanja",
      "Olulumo-Ikom",
      "Oromo",
      "Polci",
      "Portuguese",
      "Sanga__Nigeria_",
      "Sangu__Gabon_",
      "Shona",
      "Sira",
      "Suri",
      "Swahili",
      "Swahili__individual_language_",
      "Tswana",
      "Twi",
      "tyy",
      "Warji",
      "Wumbvu",
      "Yiwom",
      "Yombe",
      "Yoruba",
      "Zimba",
      "English",
      "French",
      "Spanish",
    ];
    var b = [
      "Achi",
      "Beaver",
      "Cal",
      "Cherokee",
      "English",
      "Haitian_Creole",
      "Portuguese",
      "Potawatomi",
      "Serrano",
      "Spanish",
      "Tapiet",
      "Toba-Maskoy",
      "French",
    ];
    var c = ["Japanese", "Chinese", "Chinese__Literary", "Korean", "English"];
    var p = [
      "Albanian",
      "Basque",
      "Bulgarian",
      "Church_Slavic",
      "Croatian",
      "Czech",
      "Danish",
      "Dutch",
      "English",
      "Middle_English",
      "Esperanto",
      "Estonian",
      "Finnish",
      "French",
      "German",
      "Gothic",
      "Greek",
      "Ancient_Greek",
      "Hungarian",
      "Icelandic",
      "Irish",
      "Italian",
      "Latin",
      "Latvian",
      "Lithuanian",
      "Manx",
      "Norwegian_Bokml",
      "Norwegian_Nynorsk",
      "Polish",
      "Portuguese",
      "Romanian",
      "Russian",
      "Scottish_Gaelic",
      "Serbian",
      "Slovak",
      "Slovenian",
      "Spanish",
      "Swedish",
      "Turkish",
      "Ukrainian",
      "Vlaams",
      "Welsh",
    ];
    var n = [
      "Abau",
      "Adzera",
      "Agarabi",
      "Alamblak",
      "Alekano",
      "Ama__Papua_New_Guinea_",
      "Amanab",
      "Ambrym__Southeast",
      "Ambulas",
      "Amele",
      "Aneme_Wake",
      "Angaataha",
      "Angal_Heneng",
      "Angor",
      "Anjam",
      "Ankave",
      "Anuki",
      "Arapesh__Bumbita",
      "Are",
      "Arifama-Miniafia",
      "Aruamu",
      "Au",
      "_Auhelawa",
      "Awa__Papua_New_Guinea_",
      "Awara",
      "Awiyaana",
      "Bambam",
      "Barai",
      "Bargam",
      "Bariai",
      "Baruya",
      "Benabena",
      "Biangai",
      "Bimin",
      "Bine",
      "Binumarien",
      "Bola",
      "Borong",
      "Bo-Ung",
      "Buang__Mangga",
      "Buang__Mapos",
      "Bugawac",
      "Bukiyip",
      "Bunama",
      "Bwanabwana",
      "Chamorro",
      "Chort",
      "Chuave",
      "Dadibi",
      "Daga",
      "Dano",
      "Dawawa",
      "Dedua",
      "Dobu",
      "Doromu-Koki",
      "Edolo",
      "Enga",
      "Ese",
      "Ewage-Notu",
      "Faiwol",
      "Fasu",
      "Folopa",
      "Fore",
      "Gapapaiwa",
      "Ghayavi",
      "Girawa",
      "Golin",
      "Guhu-Samane",
      "Gwahatike",
      "Halia",
      "Hanga_Hundi",
      "Hiri_Motu",
      "Hote",
      "Huli",
      "Iamalele",
      "Iatmul",
      "Iduna",
      "Imbongu",
      "Inoke-Yate",
      "Ipili",
      "Iwal",
      "Iwam__Sepik",
      "Iyo",
      "Kakabai",
      "Kalam",
      "Kaluli",
      "Kamasau",
      "Kamula",
      "Kanasi",
      "Kandas",
      "Kandawo",
      "Kanite",
      "Kapingamarangi",
      "Kara__Papua_New_Guinea_",
      "Karkar-Yuri",
      "Kte",
      "Keapara",
      "Kein",
      "Ketengban",
      "Kewa__East",
      "Kewa__West",
      "Keyagana",
      "Kobon",
      "Koiali__Mountain",
      "Komba",
      "Kombio",
      "Korafe-Yegha",
      "Kosena",
      "Kuanua",
      "Kube",
      "Kuman",
      "Kunimaipa",
      "Kuot",
      "Kwamera",
      "Kwanga",
      "Kwoma",
      "Kyaka",
      "Label",
      "Lote",
      "Madak",
      "Maiadomu",
      "Maiwa__Papua_New_Guinea_",
      "Manam",
      "Mangseng",
      "Maori",
      "Mape",
      "Marik",
      "Maskelynes",
      "Mauwake",
      "Mbula",
      "Mekeo",
      "Melpa",
      "Mende__Papua_New_Guinea_",
      "Mengen",
      "Mian",
      "Migabac",
      "Misima-Panaeati",
      "Molima",
      "Motu",
      "Mufian",
      "Mussau-Emira",
      "Mutu",
      "Muyuw",
      "Naasioi",
      "Nabak",
      "Nakanai",
      "Nali",
      "Namiae",
      "Nehan",
      "Nek",
      "Nggem",
      "Nii",
      "Nobonob",
      "Numanggang",
      "Nyindrou",
      "Odoodee",
      "Oksapmin",
      "Olo",
      "mie",
      "Orokaiva",
      "Paama",
      "Patep",
      "Patpatar",
      "Pele-Ata",
      "Pohnpeian",
      "Qaqet",
      "Ramoaaina",
      "Rawa",
      "Rotokas",
      "Safeyoka",
      "Saliba",
      "Salt-Yui",
      "Samberigi",
      "Saniyo-Hiyewe",
      "Saposa",
      "Seimat",
      "Selepet",
      "Siane",
      "Sinaugoro",
      "Sio",
      "Siroi",
      "Somba-Siawari",
      "Suau",
      "Suena",
      "Sulka",
      "Sursurunga",
      "Tabo",
      "Tairora__North",
      "Tairora__South",
      "Takia",
      "Tangga",
      "Tangoa",
      "Tanna__North",
      "Tanna__Southwest",
      "Taupota",
      "Tawala",
      "Telefol",
      "Timbe",
      "Tinputz",
      "Tok_Pisin",
      "Tuma-Irumu",
      "Tungag",
      "Ubir",
      "Umanakaina",
      "Umbu-Ungu",
      "Usan",
      "Usarufa",
      "Waffa",
      "Waima",
      "Wantoat",
      "Waris",
      "Waskia",
      "Wedau",
      "Weri",
      "Wipi",
      "Wiru",
      "Wuvulu-Aua",
      "Yabem",
      "Yareba",
      "Yau__Morobe_Province_",
      "Yaweyuha",
      "Yele",
      "Yessan-Mayo",
      "Yongkom",
      "Yopno",
      "Zabana",
      "Zia",
      "English",
      "French",
    ];
    var e = [
      "Assamese",
      "Bangla",
      "Bengali",
      "Chhattisgarhi",
      "Gujarati",
      "Hindi",
      "Kannada",
      "Kurdish__Central",
      "Kurumba__Mullu",
      "Mal",
      "Marathi",
      "Nepali",
      "Oriya",
      "Panjabi",
      "Persian",
      "Persian__Iranian",
      "Tamil",
      "Tausug",
      "Telugu",
      "Urdu",
      "English",
    ];
    var o = [
      "Burmese",
      "Cebuano",
      "Central_Khmer",
      "Hiligaynon",
      "Iloko",
      "Indonesian",
      "Karen__Manumanaw",
      "Karen__Yintale",
      "Kayah__Eastern",
      "Marma",
      "Malayalam",
      "Sama__Central",
      "Tagalog",
      "Thai",
      "Uma",
      "Vietnamese",
      "zo",
      "English",
      "French",
      "Spanish",
      "Chinese",
    ];
    var q = [
      "Arabic",
      "Armenian",
      "Coptic",
      "Kurdish",
      "Persian",
      "Persian__Iranian",
      "Hebrew",
      "Hebrew__Ancient",
      "Syriac",
      "English",
    ];
    var r = [];
    if (a) {
      $(".langSpan").show();
      $(".langBtn").show();
      $(".langUL").show();
      var h = confirm("Make sure you run this in the All languages tab.");
      r = m
        .concat(b)
        .concat(c)
        .concat(p)
        .concat(n)
        .concat(e)
        .concat(o)
        .concat(q);
      var d = "";
      for (var g = 0; g < r.length; g++) {
        if ($(".ul_" + r[g]).length == 0) {
          d += "," + r[g];
        }
        $(".btn_" + r[g]).hide();
        $(".ul_" + r[g]).hide();
      }
      if (d !== "") {
        console.log("Languages not found " + d);
      }
      h = confirm(
        "All buttons for the different languages and Bibles should be hidden"
      );
    } else {
      var f = $(".selectGeo option:selected").val();
      if (f === "all") {
        $(".langSpan").show();
        $(".langBtn").show();
        $(".langUL").hide();
      } else {
        if (f === "africa") {
          r = m;
        } else {
          if (f === "americas") {
            r = b;
          } else {
            if (f === "east_south_east_asia") {
              r = c.concat(o);
            } else {
              if (f === "europe") {
                r = p;
              } else {
                if (f === "oceania") {
                  r = n;
                } else {
                  if (f === "south_asia") {
                    r = e;
                  } else {
                    if (f === "western_asia") {
                      r = q;
                    }
                  }
                }
              }
            }
          }
        }
        $(".langSpan").hide();
        $(".langBtn").hide();
        $(".langUL").hide();
        for (var g = 0; g < r.length; g++) {
          $(".btn_" + r[g]).show();
          $(".span_" + r[g]).show();
          $(".plusminus_" + r[g]).text("+");
        }
      }
      $(".langBtn").removeClass("stepPressedButton");
    }
    step.util.u2();
  },
  ue: function (f, e) {
    var m = f;
    var h = "";
    var b = "";
    if (
      typeof step.srchTxt !== "undefined" &&
      typeof step.srchTxt[f] !== "undefined" &&
      step.srchTxt[f].search(/(.+)\s\(<i>(.+)<\/i>\s-\s(.+)\)/) > -1
    ) {
      m = RegExp.$1;
      h = RegExp.$2;
      b = RegExp.$3;
    } else {
      var a = "";
      var i = f.substr(0, 1);
      if (i === "G") {
        a = GREEK;
      } else {
        if (i === "H") {
          a = HEBREW;
        }
      }
      if (a !== "") {
        var c =
          SEARCH_AUTO_SUGGESTIONS +
          f +
          "/" +
          VERSION +
          "%3D" +
          e +
          URL_SEPARATOR +
          LIMIT +
          "%3D" +
          a +
          URL_SEPARATOR +
          "?lang=" +
          step.userLanguageCode;
        var g = $.ajax({
          url: c,
          async: false,
        }).responseText;
        if (g.length > 10) {
          var d = JSON.parse(g);
          if (
            d.length > 0 &&
            typeof d[0] !== "undefined" &&
            typeof d[0].suggestion !== "undefined"
          ) {
            if (typeof d[0].suggestion.gloss !== "undefined") {
              m = d[0].suggestion.gloss;
            }
            if (typeof d[0].suggestion.stepTransliteration !== "undefined") {
              h = d[0].suggestion.stepTransliteration;
            }
            if (typeof d[0].suggestion.matchingForm !== "undefined") {
              b = d[0].suggestion.matchingForm;
            }
          }
        }
      }
    }
    return [m, h, b];
  },
  u4: function (a, b) {
    if (typeof step.srchTxt === "undefined") {
      step.srchTxt = {};
    }
    if (typeof step.srchTxt[a] === "undefined" || step.srchTxt[a].length < 7) {
      step.srchTxt[a] = b;
    }
    if (a.search(/([GH]\d{1,5})[A-Za-z]$/) > -1) {
      a = RegExp.$1;
    }
    step.srchTxt[a] = b;
  },
  uf: function (b, a) {
    var c = step.util.u5() ? "opacity:0.8" : "opacity:0.9";
    var d = 'onclick=step.util.closeModal("' + b + '")';
    if (typeof a === "string") {
      if (a.length > 0) {
        d = "onclick=" + a + "()";
      } else {
        d = "";
      }
    }
    return (
      '<button type="button" style="background:var(--clrBackground);color:var(--clrText);' +
      c +
      '" class="close" data-dismiss="modal" ' +
      d +
      ">X</button>"
    );
  },
  u5: function () {
    var b = document
      .querySelector(":root")
      .style.getPropertyValue("--clrBackground");
    if (typeof b !== "string" || (b.length !== 7 && b.length !== 15)) {
      if (
        typeof step.settings === "object" &&
        typeof step.settings.get === "function"
      ) {
        var a = step.settings.get("clrBackground");
        if (typeof a === "string" && a.length == 7 && a.substr(0, 1) === "#") {
          b = a;
        }
      }
    }
    if (b === "#202124" || b === "rgb(32, 33, 36)") {
      return true;
    }
    return false;
  },
  u6: function (g, a) {
    var c = g;
    var d = c.indexOf("@");
    if (d > -1) {
      if (a) {
        c = c.substring(d + 1);
      } else {
        c = c.substring(0, d);
      }
    }
    var b = c.indexOf("-");
    if (b > -1) {
      var e = c.substring(b + 1);
      var f = e.indexOf(".") == -1 ? "-" : " - ";
      return " at " + c.substring(0, b) + f + e;
    } else {
      return " only at " + c;
    }
  },
  u8: function (d, c) {
    var e = d.split(" ");
    var a = "";
    for (var b = 0; b < e.length; b++) {
      var f = e[b].split(".")[0].split("!")[0];
      if (f.indexOf("lemma") > -1) {
        continue;
      }
      if (f.search(/([GH])(\d{1,4})([A-Za-z]?)$/) > -1) {
        f = RegExp.$1 + ("000" + RegExp.$2).slice(-4);
        if (!c) {
          f += RegExp.$3;
        }
      }
      if (a !== "") {
        a += " ";
      }
      a += f;
    }
    return a;
  },
  ud: function (o, p, g, q, a, f, d) {
    var h = {
      vocabInfos: [],
      morphInfos: [],
    };
    if (step.state.isLocal()) {
      f(d);
      return;
    }
    var i = o.split(" ");
    var n = [];
    for (var c = 0; c < i.length; c++) {
      if (n.indexOf(i[c]) == -1) {
        n.push(i[c]);
      }
    }
    var m = step.state.getCurrentVersion();
    if (m !== "") {
      m += "/";
    }
    var e = 0;
    h.vocabInfos = new Array(n.length);
    for (var c = 0; c < n.length; c++) {
      var b = step.util.u8(n[c], true);
      $.getJSON("/html/lexicon/" + m + b + ".json", function (w) {
        var u = -1;
        var K = -1;
        var H = -1;
        var J = -1;
        var B = "";
        if (this.url.search("/([HG]\\d+)\\.json$") > -1) {
          B = RegExp.$1;
          for (var F = 0; F < n.length; F++) {
            if (B === step.util.u8(n[F], true)) {
              J = F;
              break;
            }
          }
        }
        if (J == -1) {
          f(d);
          return;
        }
        for (var F = 0; F < w.v.length; F++) {
          if (n[J] !== B) {
            var G = w.v[F][2];
            var t = typeof G === "number" ? w.d[G] : G;
            if (n[J] === t) {
              u = F;
              break;
            }
          }
          var I = w.v[F][0];
          if (I.indexOf("*") > -1) {
            K = F;
          }
          if (I.indexOf("L") > -1) {
            H = F;
          }
        }
        if (u == -1) {
          u = K;
          if (H > -1) {
            var z =
              step.util.uQ().get("masterVersion") +
              "," +
              step.util.uQ().get("extraVersions");
            if (
              z.toUpperCase().indexOf("ABEN") > -1 ||
              z.toUpperCase().indexOf("ABGK") > -1
            ) {
              var C = step.util.uI([step.util.uQ().get("osisId")]);
              if (C[1]) {
                u = H;
              }
            } else {
              if (z.toUpperCase().indexOf("LXX") > -1) {
                u = H;
              }
            }
          }
        }
        if (u == -1) {
          u = 0;
        }
        var y = step.util.u7(w, u);
        h.vocabInfos[J] = y;
        e++;
        if (e == n.length) {
          if (p) {
            var v = 0;
            var s = p.split(" ");
            h.morphInfos = new Array(s.length);
            for (var E = 0; E < s.length; E++) {
              var A = s[E];
              if (A === "nomorph") {
                v++;
                h.morphInfos[E] = {};
              }
            }
            for (var E = 0; E < s.length; E++) {
              if (s[E] === "nomorph") {
                continue;
              }
              var A = s[E];
              var D = A.toLowerCase();
              if (
                D.indexOf("strongsmorph:") > -1 ||
                D.indexOf("strongmorph:") > -1 ||
                D.indexOf("tos:") > -1
              ) {
                h.morphInfos = [];
                q(step.util.cleanVocabResult(h), a);
                return;
              }
              var x = D.search("robinson:");
              if (x > -1) {
                A = A.substring(x + 9);
              }
              $.getJSON("/html/lexicon/" + m + A + ".json", function (N) {
                var L = -1;
                var r = "";
                if (s.length > 1) {
                  if (this.url.search("/([^.]+)\\.json$") > -1) {
                    r = RegExp.$1;
                    for (var M = 0; M < s.length; M++) {
                      if (r === s[M]) {
                        if (h.morphInfos[M] == undefined) {
                          L = M;
                          break;
                        }
                      }
                    }
                  }
                } else {
                  L = 0;
                }
                if (L == -1) {
                  console.log(
                    "something wrong, cannot locate original search morph in getVocabMorphInfoFromJson"
                  );
                  f(d);
                  return;
                }
                v++;
                h.morphInfos[L] = N.morphInfos[0];
                if (v == s.length) {
                  q(step.util.cleanVocabResult(h), a);
                }
              }).error(function () {
                console.log(
                  "getJSon failed strong:" +
                    o +
                    " morph: " +
                    A +
                    " version: " +
                    g
                );
                if (v < 0) {
                  return;
                }
                v = -100;
                f(d);
              });
            }
          } else {
            q(step.util.cleanVocabResult(h), a);
          }
        }
      }).error(function () {
        if (e < 0) {
          return;
        }
        e = -100;
        f(d);
      });
    }
  },
  cleanVocabResult: function (a) {
    for (var b = a.vocabInfos.length - 1; b > -1; b--) {
      if (!a.vocabInfos[b]) {
        a.vocabInfos.splice(b, 1);
      }
    }
    return a;
  },
  u9: function (b) {
    var c = b.split(".");
    if (typeof c[0] !== "string") {
      return -1;
    }
    var d = c[0].toLowerCase();
    var a = step.searchSelect.vMA[d];
    if (typeof a === "number") {
      return a;
    }
    return -1;
  },
  uI: function (e) {
    var m = false;
    var g = false;
    var h = [];
    var a = [];
    for (var d = 0; d < e.length; d++) {
      if (typeof e[d] !== "string") {
        continue;
      }
      var f = e[d].split(" ");
      for (var b = 0; b < f.length; b++) {
        var c = step.util.u9(f[b]);
        if (c > 38) {
          h.push(f[b]);
          m = true;
        } else {
          if (c > -1) {
            a.push(f[b]);
            g = true;
          }
        }
      }
    }
    return [m, g, h, a];
  },
  isColorOptionEnabled: function (a) {
    var c = a.get("urlFragment");
    var d = c.indexOf("options=");
    if (d == -1) {
      return false;
    }
    var b = c.substring(d + 8).split("&")[0];
    return b.indexOf("C") > -1;
  },
  MQ: function () {
    var c = $("#sideBarVerbClrs");
    var b = $("#sideBarHVerbClrs");
    if (c.length == 0 && b.length == 0) {
      return;
    }
    var e = step.util.uQ();
    var d = step.util.uI([e.get("osisId")]);
    var g = d[0];
    var a = d[1];
    var f = step.util.isColorOptionEnabled(e);
    if (!g || (f && $(".passageContainer.active").data("ntCSS") === "")) {
      c.hide();
    } else {
      c.show();
    }
    if (!a || (f && $(".passageContainer.active").data("otCSS") === "")) {
      b.hide();
    } else {
      b.show();
    }
  },
  uAA: function (c, b, a) {
    if (typeof step.keyedVersions[c] !== "object") {
      return true;
    }
    var d = step.keyedVersions[c].hasAllNTOTorBoth;
    if (d === "B") {
      return true;
    }
    if (b && d === "O") {
      return false;
    } else {
      if (a && d === "N") {
        return false;
      }
    }
    return true;
  },
  uAB: function (a, g, m) {
    var d = 9999;
    var h = -1;
    for (var e = 0; e < a.length; e++) {
      var f = a[e];
      if (typeof step.keyedVersions[f] !== "object") {
        continue;
      }
      var c = step.keyedVersions[f].hasAllNTOTorBoth;
      if (c !== "O" && c !== "N" && c !== "B") {
        continue;
      }
      var b = 9999;
      if (c === "B") {
        b = 1;
      } else {
        if (f === "KJVA") {
          b = 2;
        } else {
          if (g && m) {
            continue;
          }
          if (g && c === "N") {
            b = 3;
          } else {
            if (m && c === "O") {
              b = 3;
            }
          }
        }
      }
      b += step.keyedVersions[f].hasStrongs ? 0 : 10;
      if (b < d) {
        d = b;
        h = e;
      }
    }
    return h;
  },
  uK: function (c, b, a) {
    if (b == null) {
      return true;
    }
    osisIDs = b.attributes.osisId.split(/[ ,]/);
    return step.util.uAC(c, osisIDs, a);
  },
  uAC: function (u, w, c, g, p) {
    var h = step.util.uI(w);
    var m = h[0];
    var q = h[1];
    var e = h[2];
    var r = h[3];
    if (!step.util.uAA(u, m, q)) {
      var b = "";
      var x = "";
      var s = "";
      var f = "";
      if (m) {
        b = "Old ";
        x = "New ";
        s = e.join(", ");
        f = "Gen.1";
      }
      if (q) {
        b += "New ";
        x += "Old ";
        s = r.join(", ");
        f = "Matt.1";
      }
      var t = "version=" + u;
      for (var o = 0; o < c.length; o++) {
        t += URL_SEPARATOR + "version=" + c[o];
      }
      t += URL_SEPARATOR + "reference=" + f;
      var v = this.uAB(c, m, q);
      var d = "";
      if (v > -1) {
        d = "version=" + c[v] + URL_SEPARATOR + "version=" + u;
        for (var o = 0; o < c.length; o++) {
          if (o != v) {
            d += URL_SEPARATOR + "version=" + c[o];
          }
        }
        for (var n = 0; n < w.length; n++) {
          if (n == 0) {
            d += URL_SEPARATOR + "reference=";
          } else {
            d += ",";
          }
          d += w[n];
        }
      }
      var a =
        "<br>" +
        sprintf(__s.error_bible_doesn_t_have_passage, s) +
        "<br><br>We cannot process your request to display " +
        u +
        " as the first Bible.<br><br>The " +
        u +
        " Bible only has the " +
        b +
        "Testament, it does not have the passage (" +
        s +
        ") which is in the " +
        x +
        " Testment. <br><br>If you need both New and Old Testament passages, please select a Bible (e.g.: ESV) with both testaments as the first Bible.<br><br>Below are some possible options:<br><ul>";
      if (d !== "" && step.util.uQ().get("masterVersion") !== c[v]) {
        a +=
          "<li><a href=\"javascript:step.util.uo(1,'" +
          d +
          "')\">" +
          sprintf(__s.switch_another_as_first_bible, c[v]) +
          ".</a>";
      }
      if (!p) {
        a +=
          "<li><a href=\"javascript:step.util.uo(2,'" +
          t +
          "')\">" +
          sprintf(__s.go_to_first_passage_in_bible, f, u) +
          "</a>";
      }
      a +=
        "<li><a href=\"javascript:step.util.uo(0,'')\">" +
        __s.close_window_stay_current_passage +
        "</a>";
      if (!g) {
        step.util.uu(a, "Warning");
      }
      return false;
    }
    return true;
  },
  uM: function (a) {
    try {
      if (window.localStorage) {
        return localStorage.getItem(a);
      }
    } catch (b) {
      console.log("local storage error: ", b);
      if (b.code == 22) {
        console.log("local storage error, storage full");
      }
    }
    return $.cookie(a);
  },
  ub: function (a, b) {
    try {
      if (window.localStorage) {
        window.localStorage.setItem(a, b);
        return;
      }
    } catch (c) {
      console.log("local storage error: ", c);
      if (c.code == 22) {
        console.log("local storage error, storage full");
      }
    }
    $.cookie(a, b);
  },
  uk: function (a) {
    a = a.toUpperCase();
    if (a === "KJVA") {
      a = "KJV";
    } else {
      if (a === "ESV_TH") {
        a = "ESV";
      } else {
        if (a === "OHB") {
          a = "OSHB";
        } else {
          if (a === "SBLG") {
            a = "SBLG_TH";
          } else {
            if (a === "LXX") {
              a = "LXX_TH";
            } else {
              if (a === "CUN") {
                a = "CHIUN";
              } else {
                if (a === "CUNS") {
                  a = "CHIUNS";
                } else {
                  if (a === "ANT") {
                    a = "ANTONIADES";
                  } else {
                    if (a === "ELZ") {
                      a = "ELZEVIR";
                    } else {
                      if (a === "RWEBS") {
                        a = "RWEBSTER";
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    return a;
  },
  un: function (b, e) {
    var c = true;
    if (typeof e === "string") {
      var a = e.split(",");
      for (var d = 0; d < a.length; d++) {
        if (step.util.uAE(a[d], b)) {
          c = false;
        }
      }
    } else {
      e = "";
    }
    if (c) {
      step.util.uAE("ESV", b);
      b.vocabInfos[0].notInBibleSelected = e;
    }
  },
  uAD: function (d, b) {
    var a = b ? "OT" : "NT";
    var c = -1;
    if (typeof d === "string") {
      d = step.util.uk(d);
      c = this.uvC.indexOf(d);
      if (c == -1) {
        if (b) {
          c = this.uvG.indexOf(d);
          if (c > -1) {
            c += this.uvC.length;
          }
        } else {
          c = this.uvD.indexOf(d);
          if (c > -1) {
            c += this.uvC.length + this.uvG.length;
          } else {
            c = this.uvE.indexOf(d);
            if (c > -1) {
              c += this.uvC.length + this.uvG.length + this.uvD.length;
              a = "OT";
            } else {
              c = this.uvF.indexOf(d);
              if (c > -1) {
                c =
                  c * 2 +
                  this.uvC.length +
                  this.uvG.length +
                  this.uvD.length +
                  this.uvE.length;
                a = "BOTH";
              }
            }
          }
        }
      }
    }
    return [c, a];
  },
  uAE: function (h, c) {
    var f = c.vocabInfos[0].strongNumber.substring(0, 1) === "H" ? true : false;
    var p = this.uAD(h, f);
    var n = p[0];
    var m = p[1];
    if (n > -1) {
      for (var d = 0; d < c.vocabInfos.length; d++) {
        if (typeof c.vocabInfos[d].freqList !== "string") {
          if (typeof c.vocabInfos[d].popularityList === "string") {
            c.vocabInfos[d].freqList = c.vocabInfos[d].popularityList;
          } else {
            continue;
          }
        }
        var g = c.vocabInfos[d].freqList.split(";");
        if (g.length > n) {
          var b = g[n];
          if (b === "") {
            b = 0;
          } else {
            var e = b.split("@");
            if (e.length > 1) {
              b = e[0];
            }
          }
          b = parseInt(b);
          var a = m === "BOTH" ? "versionCountOT" : "versionCount" + m;
          if (
            typeof c.vocabInfos[d][a] !== "number" ||
            (typeof c.vocabInfos[d][a] === "number" && c.vocabInfos[d][a] < b)
          ) {
            c.vocabInfos[d][a] = b;
          }
          if (m === "BOTH") {
            var o = g[n + 1];
            if (o === "") {
              o = 0;
            } else {
              var e = o.split("@");
              if (e.length > 1) {
                o = e[0];
              }
            }
            o = parseInt(o);
            if (
              typeof c.vocabInfos[d].versionCountNT !== "number" ||
              (typeof c.vocabInfos[d].versionCountNT === "number" &&
                c.vocabInfos[d].versionCountNT < o)
            ) {
              c.vocabInfos[d].versionCountNT = o;
            }
          }
        }
      }
      return true;
    }
    return false;
  },
  uAF: function (q, m, e, n) {
    var c = false;
    var f = "";
    var b = "";
    var o = "";
    if (typeof n === "string" && n !== "") {
      var h = false;
      var g = q.strongNumber.substring(0, 1) === "H" ? true : false;
      var a = n.split(",");
      for (var d = 0; d < a.length; d++) {
        var p = this.uAD(a[d], g);
        if (p[0] > -1) {
          h = true;
        } else {
          p = this.uAD(a[d], !g);
          if (p[0] > -1) {
            h = true;
          }
        }
      }
      if (h) {
        f =
          '<span title="not in the Bible(s) you selected, ESV count is shown">';
        b =
          '<span title="some words are not in the Bible(s) you selected, ESV count is shown">';
        o =
          ' <span style="background-color:#fffacd;font-weight:bold">*</span></span>';
      }
    }
    if (typeof q.versionCountOT === "number") {
      c = true;
      if (q.versionCountOT > 0) {
        if (typeof q.versionCountNT === "number" && q.versionCountNT !== 0) {
          return (
            b + q.versionCountOT + "x (OT), " + q.versionCountNT + "x (NT)" + o
          );
        }
        if (e) {
          return f + q.versionCountOT + "x (OT)" + o;
        }
        return f + sprintf(__s.stats_occurs, q.versionCountOT) + o;
      }
    }
    if (typeof q.versionCountNT === "number") {
      c = true;
      if (q.versionCountNT > 0) {
        if (e) {
          return f + q.versionCountNT + "x (NT)" + o;
        }
        return f + sprintf(__s.stats_occurs, q.versionCountNT) + o;
      }
    }
    if (c) {
      return f + sprintf(__s.stats_occurs, 0) + o;
    }
    if (typeof m === "number") {
      return f + sprintf(__s.stats_occurs, m) + o;
    }
    return "";
  },
  MY: function (c, f, e, g, i, h) {
    if (typeof h !== "string") {
      h = "";
    } else {
      h += " ";
    }
    var d = h.indexOf("detailLex ") > -1 ? ";display:none" : "";
    var b = $(
      "<a class='" +
        h +
        "srchFrequency_details glyphicon glyphicon-info-sign' style='font-size:11px" +
        d +
        "' onmouseover='javascript:$(\"#quickLexicon\").remove()'></a>"
    );
    if (f == undefined) {
      f = "";
    }
    var a = step.util.uE(c, f.split(";"), g, i, e);
    require(["qtip"], function () {
      b.qtip({
        show: {
          event: "mouseenter",
        },
        hide: {
          event: "unfocus mouseleave",
          fixed: true,
          delay: 200,
        },
        position: {
          my: "top center",
          at: "top center",
          of: b,
          viewport: $(window),
          effect: false,
        },
        style: {
          classes: "freqListHover",
        },
        overwrite: true,
        content: {
          text: a,
        },
      });
    });
    return b;
  },
  setupGesture: function () {
    var a;
    if (screen.height > 700 && screen.width > 800) {
      step.touchWideDevice = true;
      document.getElementById("resizeButton").style.display = "inline";
      a = document.getElementById("columnHolder");
    } else {
      a = document.getElementsByTagName("body")[0];
    }
    a.addEventListener("touchstart", step.util.handleTouchStart, false);
    a.addEventListener("touchend", step.util.handleTouchEnd, false);
  },
  handleTouchStart: function (a) {
    step.touchstartX = a.changedTouches[0].screenX;
    step.touchstartY = a.changedTouches[0].screenY;
    step.touchstartTime = new Date().getTime();
  },
  handleTouchEnd: function (d) {
    var f = step.passages
      .findWhere({
        passageId: 0,
      })
      .get("isSwipeLeftRight");
    if ((f != undefined && !f) || typeof d.changedTouches === "undefined") {
      return;
    }
    var c = d.changedTouches[0].screenX;
    var b = d.changedTouches[0].screenY;
    var h = 40;
    var g = 35;
    if (step.appleTouchDevice) {
      h = 50;
      g = 25;
    }
    var i = Math.abs(b - step.touchstartY);
    var m = c - step.touchstartX;
    step.touchstartX = null;
    step.touchstartY = null;
    if (i < g) {
      if (Math.abs(m) > h) {
        if (new Date().getTime() - step.touchstartTime > 400) {
          return;
        }
        var e = $(d.srcElement.closest(".passageContainer"));
        if (m < 0) {
          e.find("a.nextChapter").click();
        } else {
          e.find("a.previousChapter").click();
        }
        var a = step.util.uM("swipeCount");
        if (a == null) {
          a = 0;
        }
        if (a < 11) {
          a++;
          step.util.ub("swipeCount", a);
        }
      } else {
        if (m < 3 && i < 3) {
          if (
            d.srcElement.outerHTML.substring(0, 7) === "<button" ||
            (d.srcElement.outerHTML.substring(0, 5) === "<span" &&
              d.srcElement.outerHTML.indexOf("verse") == -1) ||
            d.srcElement.closest("#quickLexicon") != null ||
            d.srcElement.closest("#showLongAlertModal") != null
          ) {
            return;
          }
          step.passage.pC(
            undefined,
            "primaryLightBg secondaryBackground relatedWordEmphasisHover"
          );
          $("#quickLexicon").remove();
          step.util.closeModal("showLongAlertModal");
        }
      }
    }
  },
  hideNavBarOnPhones: function (a) {
    if (step.touchDevice && !step.touchWideDevice) {
      $("body").css("overflow-y", "auto");
      $("#stepnavbar").css("position", "relative");
      $(".mainPanel.row.row-offcanvas").css("padding", 0);
      $("#columnHolder").css("overflow-y", "unset");
      $(".passageContainer").css("border", "0");
      $(".passageOptionsGroup")
        .css("position", "sticky")
        .css("top", 0)
        .css("left", 0)
        .css("opacity", 1)
        .css("z-index", 2145);
      $(".previousChapter")
        .css("top", "90%")
        .css("display", "inline")
        .css("position", "fixed")
        .css("bottom", "unset");
      $(".nextChapter")
        .css("top", "90%")
        .css("display", "inline")
        .css("position", "fixed")
        .css("bottom", "unset");
      $(".passageContent").css("height", "auto");
      $(".searchResults").css("overflow-y", "hidden").css("height", "auto");
      $(".passageContentHolder")
        .css("overflow-y", "hidden")
        .css("height", "auto");
      $(".copyrightInfo").removeClass("copyrightInfo").addClass("crInfoX");
      $("#srchRslts").css("overflow-y", "hidden").css("height", "auto");
      $("#panel-icon").remove();
      $(".openNewPanel").remove();
      $("#resizeButton").remove();
      if (!a) {
        window.scrollTo(0, 1);
      }
    }
  },
  _createStrongSearchArg: function (b, c) {
    var a = URL_SEPARATOR + "strong=" + encodeURIComponent(b);
    if (c == null || c === "") {
      return a;
    }
    var f = c.split(" ");
    var e = URL_SEPARATOR + "srchJoin=(1";
    for (var d = 0; d < f.length; d++) {
      e += "o" + (d + 2);
      a += URL_SEPARATOR + "strong=" + encodeURIComponent(f[d]);
    }
    return e + ")" + a;
  },
  loadTOS: function () {
    var b = 1;
    if (cv[b] == null) {
      var a = step.util.addGrammar;
      jQuery.ajax({
        dataType: "script",
        cache: true,
        url: "js/tos_morph.js",
        error: function (d, c) {
          console.log("load tos_morph.js Failed: " + c);
        },
        complete: function (d, c) {
          a();
        },
      });
      return true;
    }
    return false;
  },
  addGrammar: function () {
    var b = $(".morphs");
    for (var c = 0; c < b.length; c++) {
      if (b[c].innerText !== "") {
        continue;
      }
      var i = step.util.MT($($(b[c]).parent()[0]).attr("morph"));
      if (typeof i !== "string") {
        continue;
      }
      var e = i.split(" ");
      var g = [];
      if (e.length > 1) {
        var a = $($(b[c]).parent()[0]).attr("strong");
        if (typeof a === "string" && a !== "") {
          g = a.split(" ");
        }
      }
      var f = "";
      for (var h = 0; h < e.length; h++) {
        if (h > 0 && h < g.length && typeof g[h] === "string" && g[h] !== "") {
          if (step.util.uF(g[h])) {
            continue;
          }
        }
        if (e[h].indexOf("TOS:") == -1) {
          e[h] = "TOS:" + e[h];
        }
        var d = cf.getTOSMorphologyInfo(e[h]);
        if (d.length != 1 || typeof d[0]["ot_function"] !== "string") {
          continue;
        }
        if (f !== "") {
          f += ". ";
        }
        f +=
          d[0]["ot_function"].charAt(0).toUpperCase() +
          d[0]["ot_function"].slice(1);
      }
      b[c].innerText = f;
    }
  },
  expandCollapse: function (c) {
    var d = c.target.classList;
    if (d.length < 1) {
      return false;
    }
    var b = "";
    for (var a = 0; a < d.length; a++) {
      if (d[a].indexOf("glyphicon") == 0) {
        continue;
      }
      var e = d[a].indexOf("Select");
      if (e < 1 || d[a].length != e + 6) {
        continue;
      }
      b = d[a].substring(0, e);
    }
    if (b === "") {
      return false;
    }
    if ($("." + b + ":visible").length > 0) {
      $("." + b).hide();
      $("." + b + "Select")
        .removeClass("glyphicon-triangle-bottom")
        .addClass("glyphicon-triangle-right");
      step.util.ub("sidebar." + b, "false");
    } else {
      $("." + b).show();
      $("." + b + "Select")
        .removeClass("glyphicon-triangle-right")
        .addClass("glyphicon-triangle-bottom");
      step.util.ub("sidebar." + b, "true");
    }
    return false;
  },
  MT: function (b) {
    if (typeof b !== "string") {
      return b;
    }
    b = b.replace(/n\/a/g, "nomorph");
    if (b.substring(0, 5) !== "oshm:") {
      return b;
    }
    var d = b.substring(5).split("/");
    var a = d[0];
    var e = d[0].substring(0, 1);
    for (var c = 1; c < d.length; c++) {
      if (
        d[c].substring(0, 1) === "V" ||
        (d[c].substring(0, 1) === "N" && a.substring(1, 2) !== "V")
      ) {
        a = e + d[c] + " " + a;
      } else {
        a += " " + e + d[c];
      }
    }
    return "TOS:" + a;
  },
  adjustBibleListingHeight: function () {
    var b = $(".BibleFeatures");
    for (var d = 0; d < b.length; d++) {
      var c = $(b[d]);
      if (c.text().trim() === "") {
        continue;
      }
      var f = c.position().top;
      if (f > 20) {
        c.css("margin-top", "");
        var e = c.parent();
        var a = e.height();
        if (a < 1) {
          continue;
        }
        if (a < f) {
          e.height(f + 15);
        }
      }
    }
  },
  fineTuneBibleName: function (a) {
    var b = new RegExp("^" + a.shortInitials + "\\s", "g");
    return a.name
      .replace("(" + a.shortInitials + ")", "")
      .replace(" " + a.shortInitials + " ", "")
      .replace(b, "")
      .replace(/\s\s/g, " ")
      .replace(/^[ -]/g, "")
      .replace(/^[ -]/g, "")
      .trim();
  },
  expandCollapseExample: function (c) {
    var a = $(c.target);
    var b = a.parent().next();
    if (b.is("div") && b.has("stepExample")) {
      if (c.target.classList.contains("glyphicon-triangle-right")) {
        a.removeClass("glyphicon-triangle-right").addClass(
          "glyphicon-triangle-bottom"
        );
        b.show();
        b.find("div.faq_img").show();
      } else {
        a.removeClass("glyphicon-triangle-bottom").addClass(
          "glyphicon-triangle-right"
        );
        b.hide();
        $("#videoExample").remove();
      }
    }
    return false;
  },
  levenshtein: function (q, p) {
    var o = [];
    if (q === p) {
      return 0;
    } else {
      var m = q.length,
        h = p.length;
      if (m && h) {
        var e = 0,
          d = 0,
          n,
          i,
          g,
          f,
          r = o;
        while (e < m) {
          r[e] = ++e;
        }
        while (d < h) {
          f = p.charCodeAt(d);
          n = d;
          ++d;
          i = d;
          for (e = 0; e < m; ++e) {
            g = n + (q.charCodeAt(e) === f ? 0 : 1);
            n = r[e];
            i = i < n ? (i < g ? i + 1 : g) : n < g ? n + 1 : g;
            r[e] = i;
          }
        }
        return i;
      } else {
        return m + h;
      }
    }
  },
  levenshteinNameComparator: function (a) {
    return function (d, c) {
      return (
        step.util.levenshtein(a, d.name) - step.util.levenshtein(a, c.name)
      );
    };
  },
  MS: function (a) {
    return String(a).charAt(0).toUpperCase() + String(a).slice(1);
  },
};
window.step = window.step || {};
step.passageSelect = {
  version: "ESV_th",
  userLang: "en",
  vA: false,
  modalMode: "book",
  vB: "",
  vC: "",
  vD: [],
  vE: [
    [
      "Gen",
      50,
      [
        31, 25, 24, 26, 32, 22, 24, 22, 29, 32, 32, 20, 18, 24, 21, 16, 27, 33,
        38, 18, 34, 24, 20, 67, 34, 35, 46, 22, 35, 43, 55, 32, 20, 31, 29, 43,
        36, 30, 23, 23, 57, 38, 34, 34, 28, 34, 31, 22, 33, 26,
      ],
    ],
    [
      "Exo",
      40,
      [
        22, 25, 22, 31, 23, 30, 25, 32, 35, 29, 10, 51, 22, 31, 27, 36, 16, 27,
        25, 26, 36, 31, 33, 18, 40, 37, 21, 43, 46, 38, 18, 35, 23, 35, 35, 38,
        29, 31, 43, 38,
      ],
      "Exod",
    ],
    [
      "Lev",
      27,
      [
        17, 16, 17, 35, 19, 30, 38, 36, 24, 20, 47, 8, 59, 57, 33, 34, 16, 30,
        37, 27, 24, 33, 44, 23, 55, 46, 34,
      ],
    ],
    [
      "Num",
      36,
      [
        54, 34, 51, 49, 31, 27, 89, 26, 23, 36, 35, 16, 33, 45, 41, 50, 13, 32,
        22, 29, 35, 41, 30, 25, 18, 65, 23, 31, 40, 16, 54, 42, 56, 29, 34, 13,
      ],
    ],
    [
      "Deu",
      34,
      [
        46, 37, 29, 49, 33, 25, 26, 20, 29, 22, 32, 32, 18, 29, 23, 22, 20, 22,
        21, 20, 23, 30, 25, 22, 19, 19, 26, 68, 29, 20, 30, 52, 29, 12,
      ],
      "Deut",
    ],
    [
      "Jos",
      24,
      [
        18, 24, 17, 24, 15, 27, 26, 35, 27, 43, 23, 24, 33, 15, 63, 10, 18, 28,
        51, 9, 45, 34, 16, 33,
      ],
      "Josh",
    ],
    [
      "Judg",
      21,
      [
        36, 23, 31, 24, 31, 40, 25, 35, 57, 18, 40, 15, 25, 20, 20, 31, 13, 31,
        30, 48, 25,
      ],
    ],
    ["Rut", 4, [22, 23, 18, 22], "Ruth"],
    [
      "1Sa",
      31,
      [
        28, 36, 21, 22, 12, 21, 17, 22, 27, 27, 15, 25, 23, 52, 35, 23, 58, 30,
        24, 42, 15, 23, 29, 22, 44, 25, 12, 25, 11, 31, 13,
      ],
      "1Sam",
    ],
    [
      "2Sa",
      24,
      [
        27, 32, 39, 12, 25, 23, 29, 18, 13, 19, 27, 31, 39, 33, 37, 23, 29, 33,
        43, 26, 22, 51, 39, 25,
      ],
      "2Sam",
    ],
    [
      "1Ki",
      22,
      [
        53, 46, 28, 34, 18, 38, 51, 66, 28, 29, 43, 33, 34, 31, 34, 34, 24, 46,
        21, 43, 29, 53,
      ],
      "1Kgs",
    ],
    [
      "2Ki",
      25,
      [
        18, 25, 27, 44, 27, 33, 20, 29, 37, 36, 21, 21, 25, 29, 38, 20, 41, 37,
        37, 21, 26, 20, 37, 20, 30,
      ],
      "2Kgs",
    ],
    [
      "1Ch",
      29,
      [
        54, 55, 24, 43, 26, 81, 40, 40, 44, 14, 47, 40, 14, 17, 29, 43, 27, 17,
        19, 8, 30, 19, 32, 31, 31, 32, 34, 21, 30,
      ],
      "1Chr",
    ],
    [
      "2Ch",
      36,
      [
        17, 18, 17, 22, 14, 42, 22, 18, 31, 19, 23, 16, 22, 15, 19, 14, 19, 34,
        11, 37, 20, 12, 21, 27, 28, 23, 9, 27, 36, 27, 21, 33, 25, 33, 27, 23,
      ],
      "2Chr",
    ],
    ["Ezr", 10, [11, 70, 13, 24, 17, 22, 28, 36, 15, 44], "Ezra"],
    ["Neh", 13, [11, 20, 32, 23, 19, 19, 73, 18, 38, 39, 36, 47, 31]],
    ["Est", 10, [22, 23, 15, 17, 14, 14, 10, 17, 32, 3], "Esth"],
    [
      "Job",
      42,
      [
        22, 13, 26, 21, 27, 30, 21, 22, 35, 22, 20, 25, 28, 22, 35, 22, 16, 21,
        29, 29, 34, 30, 17, 25, 6, 14, 23, 28, 25, 31, 40, 22, 33, 37, 16, 33,
        24, 41, 30, 24, 34, 17,
      ],
    ],
    [
      "Psa",
      150,
      [
        6, 12, 8, 8, 12, 10, 17, 9, 20, 18, 7, 8, 6, 7, 5, 11, 15, 50, 14, 9,
        13, 31, 6, 10, 22, 12, 14, 9, 11, 12, 24, 11, 22, 22, 28, 12, 40, 22,
        13, 17, 13, 11, 5, 26, 17, 11, 9, 14, 20, 23, 19, 9, 6, 7, 23, 13, 11,
        11, 17, 12, 8, 12, 11, 10, 13, 20, 7, 35, 36, 5, 24, 20, 28, 23, 10, 12,
        20, 72, 13, 19, 16, 8, 18, 12, 13, 17, 7, 18, 52, 17, 16, 15, 5, 23, 11,
        13, 12, 9, 9, 5, 8, 28, 22, 35, 45, 48, 43, 13, 31, 7, 10, 10, 9, 8, 18,
        19, 2, 29, 176, 7, 8, 9, 4, 8, 5, 6, 5, 6, 8, 8, 3, 18, 3, 3, 21, 26, 9,
        8, 24, 13, 10, 7, 12, 15, 21, 10, 20, 14, 9, 6,
      ],
      "Ps",
    ],
    [
      "Pro",
      31,
      [
        33, 22, 35, 27, 23, 35, 27, 36, 18, 32, 31, 28, 25, 35, 33, 33, 28, 24,
        29, 30, 31, 29, 35, 34, 28, 28, 27, 28, 27, 33, 31,
      ],
      "Prov",
    ],
    ["Ecc", 12, [18, 26, 22, 16, 20, 12, 29, 17, 18, 20, 10, 14], "Eccl"],
    ["Song", 8, [17, 17, 11, 16, 16, 13, 13, 14]],
    [
      "Isa",
      66,
      [
        31, 22, 26, 6, 30, 13, 25, 22, 21, 34, 16, 6, 22, 32, 9, 14, 14, 7, 25,
        6, 17, 25, 18, 23, 12, 21, 13, 29, 24, 33, 9, 20, 24, 17, 10, 22, 38,
        22, 8, 31, 29, 25, 28, 28, 25, 13, 15, 22, 26, 11, 23, 15, 12, 17, 13,
        12, 21, 14, 21, 22, 11, 12, 19, 12, 25, 24,
      ],
    ],
    [
      "Jer",
      52,
      [
        19, 37, 25, 31, 31, 30, 34, 22, 26, 25, 23, 17, 27, 22, 21, 21, 27, 23,
        15, 18, 14, 30, 40, 10, 38, 24, 22, 17, 32, 24, 40, 44, 26, 22, 19, 32,
        21, 28, 18, 16, 18, 22, 13, 30, 5, 28, 7, 47, 39, 46, 64, 34,
      ],
    ],
    ["Lam", 5, [22, 22, 66, 22, 22]],
    [
      "Eze",
      48,
      [
        28, 10, 27, 17, 17, 14, 27, 18, 11, 22, 25, 28, 23, 23, 8, 63, 24, 32,
        14, 49, 32, 31, 49, 27, 17, 21, 36, 26, 21, 26, 18, 32, 33, 31, 15, 38,
        28, 23, 29, 49, 26, 20, 27, 31, 25, 24, 23, 35,
      ],
      "Ezek",
    ],
    ["Dan", 12, [21, 49, 30, 37, 31, 28, 28, 27, 27, 21, 45, 13]],
    ["Hos", 14, [11, 23, 5, 19, 15, 11, 16, 14, 17, 15, 12, 14, 16, 9]],
    ["Joe", 3, [20, 32, 21], "Joel"],
    ["Amo", 9, [15, 16, 15, 13, 27, 14, 17, 14, 15], "Amos"],
    ["Obd", 1, [21], "Obad"],
    ["Jon", 4, [17, 10, 10, 11], "Jonah"],
    ["Mic", 7, [16, 13, 12, 13, 15, 16, 20]],
    ["Nah", 3, [15, 13, 19]],
    ["Hab", 3, [17, 20, 19]],
    ["Zep", 3, [18, 15, 20], "Zeph"],
    ["Hag", 2, [15, 23]],
    [
      "Zec",
      14,
      [21, 13, 10, 14, 11, 15, 14, 23, 17, 12, 17, 14, 9, 21],
      "Zech",
    ],
    ["Mal", 4, [14, 17, 18, 6]],
    [
      "Mat",
      28,
      [
        25, 23, 17, 25, 48, 34, 29, 34, 38, 42, 30, 50, 58, 36, 39, 28, 27, 35,
        30, 34, 46, 46, 39, 51, 46, 75, 66, 20,
      ],
      "Matt",
    ],
    [
      "Mar",
      16,
      [45, 28, 35, 41, 43, 56, 37, 38, 50, 52, 33, 44, 37, 72, 47, 20],
      "Mark",
    ],
    [
      "Luk",
      24,
      [
        80, 52, 38, 44, 39, 49, 50, 56, 62, 42, 54, 59, 35, 35, 32, 31, 37, 43,
        48, 47, 38, 71, 56, 53,
      ],
      "Luke",
    ],
    [
      "Joh",
      21,
      [
        51, 25, 36, 54, 47, 71, 53, 59, 41, 42, 57, 50, 38, 31, 27, 33, 26, 40,
        42, 31, 25,
      ],
      "John",
    ],
    [
      "Act",
      28,
      [
        26, 47, 26, 37, 42, 15, 60, 40, 43, 48, 30, 25, 52, 28, 41, 40, 34, 28,
        41, 38, 40, 30, 35, 27, 27, 32, 44, 31,
      ],
      "Acts",
    ],
    [
      "Rom",
      16,
      [32, 29, 31, 25, 21, 23, 25, 39, 33, 21, 36, 21, 14, 23, 33, 27],
    ],
    [
      "1Cor",
      16,
      [31, 16, 23, 21, 13, 20, 40, 13, 27, 33, 34, 31, 13, 40, 58, 24],
    ],
    ["2Cor", 13, [24, 17, 18, 18, 21, 18, 16, 24, 15, 18, 33, 21, 14]],
    ["Gal", 6, [24, 21, 29, 31, 26, 18]],
    ["Eph", 6, [23, 22, 21, 32, 33, 24]],
    ["Phili", 4, [30, 30, 21, 23], "Phil"],
    ["Col", 4, [29, 23, 25, 18]],
    ["1Th", 5, [10, 20, 13, 18, 28], "1Thess"],
    ["2Th", 3, [12, 17, 18], "2Thess"],
    ["1Ti", 6, [20, 15, 16, 16, 25, 21], "1Tim"],
    ["2Ti", 4, [18, 26, 17, 22], "2Tim"],
    ["Tit", 3, [16, 15, 15], "Titus"],
    ["Phile", 1, [25], "Phlm"],
    ["Heb", 13, [14, 18, 19, 16, 14, 20, 28, 13, 28, 39, 40, 29, 25]],
    ["Jam", 5, [27, 26, 18, 17, 20], "Jas"],
    ["1Pe", 5, [25, 25, 22, 19, 14], "1Pet"],
    ["2Pe", 3, [21, 22, 18], "2Pet"],
    ["1Jo", 5, [10, 29, 24, 21, 21], "1John"],
    ["2Jo", 1, [13], "2John"],
    ["3Jo", 1, [15], "3John"],
    ["Jude", 1, [25]],
    [
      "Rev",
      22,
      [
        20, 29, 22, 11, 14, 17, 17, 13, 21, 11, 19, 17, 18, 20, 8, 21, 18, 24,
        21, 15, 27, 21,
      ],
    ],
  ],
  pA: function (a) {
    this.version = "ESV_th";
    this.userLang = step.state.language() || "en-US";
    this.modalMode = "book";
    this.vB = "";
    this.vC = "";
    this.vD = JSON.parse(__s.list_of_bibles_books);
    step.util.closeModal("searchSelectionModal");
    var b = false;
    if (step.util.uc(step.util.uP()).find(".resultsLabel").text() !== "") {
      $("#append_to_panel").hide();
      b = true;
    }
    if (
      $(".passageContainer.active").width() < 500 ||
      (step.touchDevice && !step.touchWideDevice)
    ) {
      $("#displayLocForm").hide();
    }
    this.pC(a);
    $("textarea#enterYourPassage").on("input", function (c) {
      step.passageSelect.pB(c);
    });
  },
  pB: function (f) {
    var h = $("textarea#enterYourPassage").val();
    var a =
      h.slice(-1) === "\n" || f.originalEvent.inputType === "insertLineBreak";
    h = h
      .replace(/[\n\r]/g, "")
      .replace(/[\t]/g, " ")
      .replace(/\s\s+/g, " ")
      .replace(/,,/g, ",")
      .replace(/^\s+/g, "");
    h = h.replace(/[]/g, "-");
    $("td").css("background-color", "var(--clrBackground)");
    var g = h.replace(/\s+$/g, "").split(/,|;/);
    g = g[g.length - 1].replace(/^\s+/g, "").replace(/\s+$/g, "");
    var n = g.split(/\.|:|\s/)[0].toLowerCase();
    if (n.length > 0) {
      if (n === "jas") {
        n = "jam";
      } else {
        if (n === "obd") {
          n = "obad";
        } else {
          if (n === "phi" || n === "phil") {
            n = "ph(il|lm)";
          } else {
            if (n.length > 3) {
              for (var c = 0; c < this.vD.length; c++) {
                var d = this.vD[c][0].toLowerCase();
                var m = d.substr(0, 2);
                if (m === "1 " || m === "2 " || m === "3 ") {
                  d = d.substr(0, 1) + d.substr(2);
                }
                if (d.indexOf(n) == 0) {
                  n = this.vE[c].length == 4 ? this.vE[c][3] : this.vE[c][0];
                  n = n.toLowerCase();
                  break;
                }
              }
            }
          }
        }
      }
      var b = RegExp("^" + n, "i");
      $("td")
        .filter(function () {
          return b.test($(this).text());
        })
        .css("background-color", "fafad2");
    }
    if (a) {
      this.pH(false, h);
    } else {
      if (
        f.originalEvent.inputType === "insertText" &&
        f.originalEvent.data === ","
      ) {
        this.pH(true, h);
      } else {
        if (
          f.originalEvent.inputType === "deleteContentBackward" ||
          (f.originalEvent.inputType === "insertText" &&
            f.originalEvent.data === ".")
        ) {
          $("#userEnterPassageError").text("");
        }
      }
    }
  },
  pC: function (a) {
    $("#bookchaptermodalbody").empty();
    translationType = this.MC();
    var b = this.pE(a);
    $("#bookchaptermodalbody").append(b);
    $("#keyboardEntry").show();
    this.MB(a, translationType);
    $("#pssgModalBackButton").hide();
  },
  MB: function (b, c) {
    $("#enterYourPassage").show();
    if (
      (this.userLang.toLowerCase().indexOf("en") == 0 ||
        this.userLang.toLowerCase().indexOf("es") == 0 ||
        this.userLang.toLowerCase().indexOf("zh") == 0) &&
      c !== ""
    ) {
      this.MD(c, b);
    } else {
      var a =
        SEARCH_AUTO_SUGGESTIONS +
        "%20%20/" +
        EXAMPLE_DATA +
        "%3D" +
        REFERENCE +
        URL_SEPARATOR +
        LIMIT +
        "%3D" +
        REFERENCE +
        URL_SEPARATOR +
        VERSION +
        "%3D" +
        this.version +
        URL_SEPARATOR +
        "?lang=" +
        this.userLang;
      $.getJSON(a, function (d) {
        step.passageSelect.MD(d, b);
      }).fail(function () {
        changeBaseURL();
      });
    }
  },
  MC: function () {
    var g = "";
    var f = false;
    var e = step.util.uQ().get("searchTokens") || [];
    var c = false;
    for (var d = 0; d < e.length; d++) {
      if (e[d].itemType == VERSION) {
        if (!c) {
          this.version = e[d].item.initials;
          g = e[d].item.shortInitials;
          c = true;
        }
        if (!f) {
          f =
            typeof step.keyedVersions[e[d].item.initials] === "object" &&
            step.keyedVersions[e[d].item.initials].languageCode === "en";
        }
      }
    }
    this.vA = f;
    var b = this.version.replace(/_sb$/, "").replace(/_th$/, "");
    g = g.replace(/_sb$/, "").replace(/_th$/, "");
    var a = "";
    if (typeof step.keyedVersions[b] === "object") {
      a = step.keyedVersions[b].hasAllNTOTorBoth;
    } else {
      if (typeof step.keyedVersions[g] === "object") {
        a = step.keyedVersions[g].hasAllNTOTorBoth;
      }
    }
    if (a === "B") {
      return "OTNT";
    } else {
      if (a === "N") {
        return "NT";
      } else {
        if (a === "O") {
          return "OT";
        }
      }
    }
    return "";
  },
  MD: function (C, q) {
    var p =
      "Gen Exod Lev Num Deut Josh Judg Ruth 1Sam 2Sam 1Kgs 2Kgs 1Chr 2Chr Ezra Neh Esth Job Ps Prov Eccl Song Isa Jer Lam Ezek Dan Hos Joel Amos Obad Jonah Mic Nah Hab Zeph Hag Zech Mal";
    var B =
      "Matt Mark Luke John Acts Rom 1Cor 2Cor Gal Eph Phil Col 1Thess 2Thess 1Tim 2Tim Titus Phlm Heb Jas 1Pet 2Pet 1John 2John 3John Jude Rev";
    var r = 0;
    var z = true;
    var f = $(window).width();
    var b = 7;
    var o = 5;
    var A = {};
    if (!q) {
      if (f < 1100) {
        b = 6;
        o = 4;
        if (f < 735) {
          b = 5;
          o = 3;
          if (f < 370 && this.userLang.toLowerCase().indexOf("zh") == 0) {
            o = 2;
          }
        }
      }
    } else {
      b = 1;
      A = {
        gen: "",
        exod: "",
        lev: "",
        num: "",
        deut: "",
        josh: "",
        judg: "",
        ruth: "",
        "1sam": "",
        "2sam": "",
        "1kgs": "",
        "2kgs": "",
        "1chr": "",
        "2chr": "",
        ezra: "",
        neh: "",
        esth: "",
        job: "",
        ps: "",
        prov: "",
        eccl: "",
        song: "",
        isa: "",
        jer: "",
        lam: "",
        ezek: "",
        dan: "",
        hos: "",
        joel: "",
        amos: "",
        obad: "",
        jonah: "",
        mic: "",
        nah: "",
        hab: "",
        zeph: "",
        hag: "",
        zech: "",
        mal: "",
        matt: "",
        mark: "",
        luke: "",
        john: "",
        acts: "",
        rom: "",
        "1cor": "",
        "2cor": "",
        gal: "",
        eph: "",
        phil: "",
        col: "",
        "1thess": "",
        "2thess": "",
        "1tim": "",
        "2tim": "",
        titus: "",
        phlm: "",
        heb: "",
        jas: "",
        "1pet": "",
        "2pet": "",
        "1john": "",
        "2john": "",
        "3jo": "",
        jude: "",
        rev: "",
      };
      $.ajaxSetup({
        async: false,
      });
      $.getJSON("html/json/book_description.json", function (i) {
        for (key in i) {
          A[key] = i[key];
        }
      });
      $.ajaxSetup({
        async: true,
      });
    }
    var u = this.MA(b, q);
    var x = false;
    var m = 0;
    var g = 0;
    if (typeof C === "string") {
      if (C === "OTNT") {
        g = 66;
      } else {
        if (C === "OT") {
          g = 39;
        } else {
          if (C === "NT") {
            m = 39;
            g = 66;
          }
        }
      }
      x = true;
    } else {
      g = C.length;
    }
    var n = false;
    var t = "";
    var d = "";
    for (var v = m; v < g; v++) {
      var w;
      var h;
      var c;
      var a;
      if (x) {
        w = this.vE[v].length === 4 ? this.vE[v][3] : this.vE[v][0];
        a = this.vE[v][1];
        c = this.vD[v][0];
        h = this.vD[v].length === 2 ? this.vD[v][1] : w;
      } else {
        w = C[v].suggestion.osisID;
        a = 0;
        c = C[v].suggestion.fullName;
        h =
          this.userLang.toLowerCase().indexOf("en") == 0
            ? w
            : C[v].suggestion.shortName.replace(/ /g, "").substr(0, 6);
      }
      var e = B.indexOf(w) > -1;
      if (!e) {
        oldTestament = p.indexOf(w) > -1;
      }
      if (e && z) {
        z = false;
        r = 0;
        u += "</tr></table>";
        $("#ot_table").append(u);
        u = this.MA(b, q);
      }
      var y = c;
      if (this.userLang.toLowerCase().indexOf("zh") == 0) {
        if (
          (y.length == o || y.length == o + 1) &&
          t.indexOf(y.substr(-1)) > -1
        ) {
          y = y.substr(0, y.length - 1);
        } else {
          if (
            (y.length == o + 1 || y.length == o + 2) &&
            d.indexOf(y.substr(-2)) > -1
          ) {
            y = y.substr(0, y.length - 2);
          }
        }
      }
      if (y.length > 0 && y.length <= o) {
        h = y;
      }
      if (!e && !oldTestament) {
        h += '<span style="color:brown">*</span>';
        n = true;
      }
      if (q && typeof A[w.toLowerCase() + "_header"] === "string") {
        u +=
          '<td style="font-size:18px;text-align:left;padding:0"><b>' +
          A[w.toLowerCase() + "_header"] +
          "</b></td></tr><tr>";
      }
      var s = "";
      if (q) {
        if (!e && !oldTestament) {
          s = '<span style="color:brown">*</span>';
        }
        if (typeof A[w.toLowerCase()] === "string") {
          s += " - " + A[w.toLowerCase()];
        }
      }
      u +=
        '<td title="' +
        c +
        '"><a href="javascript:step.passageSelect.pG(\'' +
        w +
        "', '" +
        this.version +
        "', '" +
        this.userLang +
        "', " +
        a +
        "," +
        (q ? "true" : "false") +
        ');"' +
        (q ? ' style="text-align:left;padding:0" ' : "") +
        ">" +
        (q ? c + s : h) +
        "</a></td>";
      r++;
      if (r % b == 0) {
        u += "</tr><tr>";
      }
    }
    u += "</tr></table>";
    if (n) {
      u += '<p style="color:brown">* Deuterocanonical or other books</p>';
    }
    if (z) {
      $("#ot_table").append(u);
    } else {
      $("#nt_table").append(u);
    }
    this.pD(this.version);
  },
  pD: function (a) {
    if (
      typeof step.keyedVersions[a] === "object" &&
      typeof step.keyedVersions[a].shortInitials === "string"
    ) {
      a = step.keyedVersions[a].shortInitials;
    }
    if ($("#nt_table").text() === "") {
      $("#nt_header").html(
        "<b>" + __s.nt_short + "</b> " + __s.is_not_available_in + " " + a
      );
    } else {
      if ($("#ot_table").text() === "") {
        $("#ot_header").html(
          "<b>" + __s.ot_short + "</b> " + __s.is_not_available_in + " " + a
        );
      }
    }
  },
  pE: function (a) {
    var b =
      '<div class="header" style="overflow-y:auto"><h4>' +
      __s.please_select_book +
      "</h4>";
    if (this.userLang.toLowerCase().indexOf("en") == 0 || this.vA) {
      b +=
        '<button style="font-size:10px;line-height:10px;vertical-align:middle" type="button" onclick="step.passageSelect.pA(' +
        (a ? "false" : "true") +
        ')" title="Show summary information" class="select-version stepButton' +
        (a ? ' stepPressedButton">Summary -' : '">Summary +') +
        "</button>";
    }
    b +=
      '</div><span id="ot_header" class="stepFgBg" style="font-size:18px"><b>' +
      __s.old_testament +
      '</b></span><div id="ot_table"/><span id="nt_header" class="stepFgBg" style="font-size:18px"><b>' +
      __s.new_testament +
      '</b></span><div id="nt_table"/></div>';
    return b;
  },
  MA: function (d, a) {
    var c = Math.floor(100 / d);
    html = "<table><colgroup>";
    for (var b = 0; b < d; b++) {
      html += '<col span="1" style="width:' + c + '%;">';
    }
    html += "</colgroup>";
    html += "<tr>";
    return html;
  },
  ME: function (c, b) {
    var e = c.substring(0, c.indexOf("."));
    if (e === "") {
      e = c;
    }
    if (
      b != 0 &&
      $("#select_verse_number").hasClass("checked") &&
      this.modalMode === "chapter"
    ) {
      var o = 0;
      for (var f = 0; f < this.vE.length; f++) {
        var n = this.vE[f].length === 4 ? this.vE[f][3] : this.vE[f][0];
        if (e === n) {
          o = this.vE[f][2][Math.abs(b) - 1] || 0;
          break;
        }
      }
      if (o > 0) {
        this.pJ(null, c, o, false);
        return;
      } else {
        alert(
          "Cannot determine the number of verse in " +
            c +
            ".  Will proceed to display the chapter."
        );
      }
    }
    var g = step.util.uQ().get("searchTokens") || [];
    var m = "";
    var h = "";
    var q = $("#displayLocation option:selected").val();
    for (var f = 0; f < g.length; f++) {
      if (g[f].itemType === VERSION) {
        if (m.length > 0) {
          m += URL_SEPARATOR + VERSION + "=";
        }
        m += g[f].item.shortInitials;
      } else {
        if (q === "append" && g[f].itemType === "reference") {
          h += URL_SEPARATOR + "reference=" + g[f].item.osisID;
        }
      }
    }
    step.util.closeModal("passageSelectionModal");
    if (q === "append") {
      var a = VERSION + "=" + m + h + URL_SEPARATOR + REFERENCE + "=" + c;
      step.router.mD(a, true, true);
    } else {
      if (q === "new") {
        step.util.uY();
      }
      if (this.modalMode === "verse") {
        ap = step.util.uQ();
        var d = this.pF(e);
        if (d === 1) {
          var p =
            c.substring(0, c.indexOf(".")) +
            ".1." +
            c.substring(c.indexOf(".") + 1);
          ap.save(
            {
              targetLocation: p,
            },
            {
              silent: true,
            }
          );
        } else {
          ap.save(
            {
              targetLocation: c,
            },
            {
              silent: true,
            }
          );
        }
        c = c.substring(0, c.lastIndexOf("."));
      }
      step.router.mC("reference=" + c, false, true, true);
    }
  },
  pF: function (c) {
    for (var b = 0; b < this.vE.length; b++) {
      var a = this.vE[b].length === 4 ? this.vE[b][3] : this.vE[b][0];
      if (c === a) {
        return this.vE[b][1];
      }
    }
  },
  pG: function (e, a, b, f, d) {
    $("#pssgModalBackButton").show();
    if (f > 0) {
      this.pJ(null, e, f, true, a, b, d);
    } else {
      var c =
        SEARCH_AUTO_SUGGESTIONS +
        e +
        "/limit%3D" +
        REFERENCE +
        URL_SEPARATOR +
        VERSION +
        "%3D" +
        a +
        URL_SEPARATOR +
        REFERENCE +
        "%3D" +
        e +
        URL_SEPARATOR +
        "?lang=" +
        b;
      $.getJSON(c, function (g) {
        step.passageSelect.pJ(g, e, f, true, a, b, d);
      }).fail(function () {
        changeBaseURL();
      });
    }
  },
  pH: function (c, a) {
    if (a !== null) {
      userInput = a;
    } else {
      userInput = $("textarea#enterYourPassage").val();
      userInput = userInput
        .replace(/[\n\r]/g, "")
        .replace(/[\t]/g, " ")
        .replace(/\s\s+/g, " ")
        .replace(/,,/g, ",")
        .replace(/^\s+/g, "");
      userInput = userInput.replace(/[]/g, "-");
    }
    var b =
      SEARCH_AUTO_SUGGESTIONS +
      userInput +
      "/limit%3D" +
      REFERENCE +
      URL_SEPARATOR +
      VERSION +
      "%3D" +
      this.version +
      URL_SEPARATOR +
      "?lang=" +
      this.userLang;
    $.getJSON(b, function (e) {
      if (e.length > 0) {
        if (e[0].suggestion.passage) {
          console.log(
            "Program error: unexpected result from SEARCH_AUTO_SUGGESTIONS"
          );
          console.log(e);
        } else {
          if (!c) {
            step.passageSelect.ME(e[0].suggestion.osisID, 0);
          }
        }
      } else {
        var d = userInput != "" ? ' for "' + userInput + '"' : "";
        $("#userEnterPassageError").text(
          "No match" + d + ", please update the passage you entered."
        );
        $("textarea#enterYourPassage").focus();
        if (!c) {
          $("textarea#enterYourPassage").val(userInput);
        }
      }
    }).fail(function () {
      changeBaseURL();
    });
  },
  pI: function (b) {
    var c = ["", "", "", "", "", "", "", "", "", ""];
    var a = ["", "", "", "", "", "", "", "", "", ""];
    if (this.userLang == "ar") {
      return b.toString().replace(/[0-9]/g, function (d) {
        return c[+d];
      });
    } else {
      if (this.userLang == "fa") {
        return b.toString().replace(/[0-9]/g, function (d) {
          return a[+d];
        });
      } else {
        return b;
      }
    }
  },
  pJ: function (w, b, f, o, d, n, m) {
    var u;
    $("#enterYourPassage").hide();
    if (o) {
      u = __s.please_select_chapter;
      this.modalMode = "chapter";
    } else {
      u = __s.please_select_verse;
      this.modalMode = "verse";
    }
    var e = 10;
    var g = 10;
    if (step.touchDevice) {
      var t = navigator.userAgent.toLowerCase();
      if (
        t.indexOf("android") > -1 ||
        (step.appleTouchDevice && t.indexOf("safari/60") > -1)
      ) {
        e = 7;
        g = 14;
      }
    }
    var r = [];
    if (m) {
      e = 1;
      for (var s = 0; s <= f; s++) {
        r.push("");
      }
      $.ajaxSetup({
        async: false,
      });
      $.getJSON("html/json/" + b.toLowerCase() + ".json", function (i) {
        for (key in i) {
          if (key.indexOf("chapter_") == 0) {
            var x = key.indexOf("_description");
            if (x > -1) {
              var c = key.substr(8, x - 8);
              if (i[key] === "*" || i[key] === "**") {
                r[c] = i["chapter_" + c + "_overview"];
              } else {
                r[c] = i[key];
              }
            } else {
              if (key.indexOf("_header") > 8) {
                r[key] = i[key];
              }
            }
          }
        }
      });
      $.ajaxSetup({
        async: true,
      });
    }
    var p = '<div class="header"><h4>' + u + "</h4>";
    if (
      o &&
      (n.toLowerCase().indexOf("en") == 0 || this.vA) &&
      step.util.u9(b) > -1
    ) {
      p +=
        '<button style="font-size:10px;line-height:10px;vertical-align:middle" type="button" onclick="step.passageSelect.pG(\'' +
        b +
        "','" +
        d +
        "','" +
        n +
        "'," +
        f +
        "," +
        (m ? "false" : "true") +
        ')" title="Show summary information" class="select-version stepButton' +
        (m ? ' stepPressedButton">Summary -' : '">Summary +') +
        "</button>";
    }
    p += '</div><div style="overflow-y:auto"><table><colgroup>';
    for (var v = 0; v < e; v++) {
      p += '<col span="1" style="width:' + g + '%">';
    }
    p += "</colgroup><tr>";
    var h = 0;
    var q = "";
    if (f > 0) {
      if (o) {
        this.vC = f;
        this.vB = b;
      }
      for (var s = 0; s < f; s++) {
        h++;
        q = f === 1 ? b : b + "." + h;
        if (m && typeof r["chapter_" + h + "_header"] === "string") {
          p +=
            '<td style="font-size:18px;text-align:left;padding:0"><b>' +
            r["chapter_" + h + "_header"] +
            "</b></td></tr><tr>";
        }
        var a = "";
        if (typeof r[h] === "string") {
          a = " - " + r[h];
        }
        p +=
          "<td><a href=\"javascript:step.passageSelect.ME('" +
          q +
          "', '" +
          h +
          "');\"" +
          (m
            ? ' style="text-align:left;padding:0px 0px 0px 22px;text-indent: -22px;" '
            : "") +
          ">" +
          this.pI(h) +
          (m ? a : "") +
          "</a></td>";
        if (h > e - 1 && h % e == 0) {
          p += "</tr><tr>";
        }
      }
    } else {
      for (var s = 0; s < w.length; s++) {
        if (w[s].suggestion.sectionType === "PASSAGE") {
          h++;
          q = w[s].suggestion.osisID;
          var a = "";
          if (typeof r[h] === "string") {
            a = " - " + r[h];
          }
          p +=
            "<td><a href=\"javascript:step.passageSelect.ME('" +
            q +
            "', '" +
            h +
            "');\"" +
            (m ? ' style="text-align:left;padding:0" ' : "") +
            ">" +
            this.pI(h) +
            (m ? a : "") +
            "</a></td>";
          if (h > e - 1 && h % e == 0) {
            p += "</tr><tr>";
          }
        }
      }
      if (o) {
        this.vB = q.substring(0, q.indexOf("."));
        this.vC = h;
      }
    }
    if (h === 1) {
      this.ME(q, -1);
      return;
    }
    p += "</tr></table></div></div>";
    $("#bookchaptermodalbody").empty();
    $("#bookchaptermodalbody").append(p);
  },
  MF: function () {
    if (this.modalMode === "verse") {
      this.pJ(null, this.vB, this.vC, true);
      this.modalMode = "chapter";
    } else {
      $("#bookchaptermodalbody").empty();
      this.modalMode = "book";
      this.pC();
    }
  },
};
window.step = window.step || {};
step.searchSelect = {
  version: "ESV_th",
  userLang: "en",
  svA: "",
  svB: [
    TEXT_SEARCH,
    MEANINGS,
    SUBJECT_SEARCH,
    GREEK,
    GREEK_MEANINGS,
    HEBREW,
    HEBREW_MEANINGS,
    NAMES,
  ],
  svC: 8,
  displayOptions: [
    "Strong_number",
    "Transliteration",
    "Original_language",
    "Frequency",
    "Frequency_details",
    "Immediate_lookup",
  ],
  svD: 1,
  svE: "",
  previousUserInput: "",
  searchRange: "Gen-Rev",
  svF: [],
  svG: 0,
  svH: false,
  svI: false,
  svJ: false,
  timer: undefined,
  vMA: {
    gen: 0,
    exo: 1,
    exod: 1,
    lev: 2,
    num: 3,
    deu: 4,
    deut: 4,
    jos: 5,
    josh: 5,
    judg: 6,
    rut: 7,
    ruth: 7,
    "1sa": 8,
    "1sam": 8,
    "2sa": 9,
    "2sam": 9,
    "1ki": 10,
    "1kgs": 10,
    "2ki": 11,
    "2kgs": 11,
    "1ch": 12,
    "1chr": 12,
    "2ch": 13,
    "2chr": 13,
    ezr: 14,
    ezra: 14,
    neh: 15,
    est: 16,
    esth: 16,
    job: 17,
    psa: 18,
    ps: 18,
    pro: 19,
    prov: 19,
    ecc: 20,
    eccl: 20,
    song: 21,
    isa: 22,
    jer: 23,
    lam: 24,
    eze: 25,
    ezek: 25,
    dan: 26,
    hos: 27,
    joe: 28,
    joel: 28,
    amo: 29,
    amos: 29,
    obd: 30,
    obad: 30,
    jon: 31,
    jonah: 31,
    mic: 32,
    nah: 33,
    hab: 34,
    zep: 35,
    zeph: 35,
    hag: 36,
    zec: 37,
    zech: 37,
    mal: 38,
    mat: 39,
    matt: 39,
    mar: 40,
    mark: 40,
    luk: 41,
    luke: 41,
    joh: 42,
    john: 42,
    act: 43,
    acts: 43,
    rom: 44,
    "1cor": 45,
    "2cor": 46,
    gal: 47,
    eph: 48,
    phili: 49,
    phil: 49,
    col: 50,
    "1th": 51,
    "1thess": 51,
    "2th": 52,
    "2thess": 52,
    "1ti": 53,
    "1tim": 53,
    "2ti": 54,
    "2tim": 54,
    tit: 55,
    titus: 55,
    phile: 56,
    phlm: 56,
    heb: 57,
    jam: 58,
    jas: 58,
    "1pe": 59,
    "1pet": 59,
    "2pe": 60,
    "2pet": 60,
    "1jo": 61,
    "1john": 61,
    "2jo": 62,
    "2john": 62,
    "3jo": 63,
    "3john": 63,
    jude: 64,
    rev: 65,
  },
  svK: [
    {
      groupName: __s.book_of_moses,
      show: false,
      books: [0, 1, 2, 3, 4],
      bookOrderPos: [-1, -1, -1, -1, -1],
    },
    {
      groupName: __s.history_books,
      show: false,
      books: [5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],
      bookOrderPos: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    },
    {
      groupName: __s.poetic_books,
      show: false,
      books: [17, 18, 19, 20, 21],
      bookOrderPos: [-1, -1, -1, -1, -1],
    },
    {
      groupName: __s.major_prophets,
      show: false,
      books: [22, 23, 24, 25, 26],
      bookOrderPos: [-1, -1, -1, -1, -1],
    },
    {
      groupName: __s.minor_prophets,
      show: false,
      books: [27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38],
      bookOrderPos: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    },
  ],
  svL: [
    {
      groupName: __s.gospels_and_acts,
      show: false,
      books: [39, 40, 41, 42, 43],
      bookOrderPos: [-1, -1, -1, -1, -1],
    },
    {
      groupName: __s.pauline_epistles,
      show: false,
      books: [44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56],
      bookOrderPos: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
    },
    {
      groupName: __s.other_nt,
      show: false,
      books: [57, 58, 59, 60, 61, 62, 63, 64, 65],
      bookOrderPos: [-1, -1, -1, -1, -1, -1, -1, -1, -1],
    },
  ],
  svM: undefined,
  bookOrder: [],
  svN: {},
  sA: function (f, a) {
    if (typeof f === "number" && f !== step.util.uP()) {
      step.util.uP(f);
    }
    if (
      typeof step.state === "undefined" ||
      typeof step.state.language === "undefined"
    ) {
      this.userLang = "en-US";
    } else {
      this.userLang = step.state.language() || "en-US";
    }
    this.version = "ESV_th";
    this.svA = "";
    this.svD = 1;
    $("#langButtonForm").show();
    this.previousUserInput = this.svE.replaceAll("*", "");
    this.svE = "";
    this.searchRange = "Gen-Rev";
    this.svF = [];
    this.svG = 0;
    this.svH = false;
    this.svI = false;
    this.svJ = false;
    this.timer = undefined;
    this.svK[0].show = false;
    this.svK[0].bookOrderPos = [-1, -1, -1, -1, -1];
    this.svK[1].show = false;
    this.svK[1].bookOrderPos = [
      -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    ];
    this.svK[2].show = false;
    this.svK[2].bookOrderPos = [-1, -1, -1, -1, -1];
    this.svK[3].show = false;
    this.svK[3].bookOrderPos = [-1, -1, -1, -1, -1];
    this.svK[4].show = false;
    this.svK[4].bookOrderPos = [
      -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    ];
    this.svL[0].show = false;
    this.svL[0].bookOrderPos = [-1, -1, -1, -1, -1];
    this.svL[1].show = false;
    this.svL[1].bookOrderPos = [
      -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
    ];
    this.svL[2].show = false;
    this.svL[2].bookOrderPos = [-1, -1, -1, -1, -1, -1, -1, -1, -1];
    (this.svM = undefined), (this.bookOrder = []);
    this.svN = {};
    $("#searchmodalbody").addClass("scrollPart");
    if (
      this.userLang.indexOf("en") != 0 &&
      this.svK[0].groupName === "Books of Moses" &&
      this.svK[0].groupName !== "Pentateuch"
    ) {
      this.svK[0].groupName = __s.the_pentateuch;
    }
    if (step.util.uc(step.util.uP()).find(".resultsLabel").text() !== "") {
      var b = step.util.uQ().get("searchTokens") || [];
      var h = "";
      $("#previousSearch").empty();
      var w = [];
      var x = [];
      var r = [];
      var u = [];
      for (var o = 0; o < b.length; o++) {
        var d = b[o];
        var y = d.itemType ? d.itemType : d.tokenType;
        if (y === "srchJoin") {
          var q = d.token.split(/(?=[aon])/);
          for (var n = 0; n < q.length; n++) {
            if (n > 0) {
              var v = q[n].substring(0, 1);
              if (v !== "a" && v !== "o" && v !== "n") {
                v = "a";
              }
              x.push(v);
            }
            r.push((q[n].match(/\(/) || []).length);
            u.push((q[n].match(/\)/) || []).length);
          }
        }
      }
      var g = 0;
      for (var p = 0; p < b.length; p++) {
        var d = b[p];
        var y = d.itemType ? d.itemType : d.tokenType;
        if (y === REFERENCE) {
          if (h !== "") {
            h += ",";
          }
          h += d.item.osisID.replace(/ /g, ",");
        } else {
          if (y !== VERSION) {
            if (y === SYNTAX) {
              var c = d.token.replace(/\(/g, "").replace(/\)/g, "").split(" ");
              step.util.uT(c);
              if (c.length == 1 && c[0].substr(0, 7) === STRONG_NUMBER + ":") {
                var t = c[0].substr(7);
                var e = step.util.ue(t, this.version);
                currWord = {
                  token: c[0],
                  item: {
                    gloss: e[0],
                    stepTransliteration: e[1],
                    matchingForm: e[2],
                  },
                };
                var m = "";
                if (g > 0 && g <= x.length) {
                  m = x[g - 1];
                }
                g = this.sH(y, currWord, w, this.svF, g, m, r, u);
              } else {
                alert("Something wrong with syntax search " + c);
              }
            } else {
              var m = "a";
              if (g == 0) {
                m = "";
              } else {
                if (g <= x.length) {
                  m = x[g - 1];
                }
              }
              g = this.sH(y, d, w, this.svF, g, m, r, u);
            }
          }
        }
      }
      this.svG = w.length;
      if (w.length > 0) {
        var s =
          '<div id="modalonoffswitch" class="modalonoffswitch"><span class="pull-left" style="font-size:18px" id="search_with_previous">' +
          __s.search_with_previous +
          '&nbsp;&nbsp;</span><span class="pull-left"><select id="searchAndOrNot" style="display:none;font-size:16px" class="stepButton" type="text"><option id="and_search" value="AND">' +
          __s.search_previous_and +
          '</option><option id="or_search" value="OR">' +
          __s.search_previous_or +
          '</option><option id="not_search" value="NOT">' +
          __s.search_previous_not +
          '</option></select></span><span class="onoffswitch2 pull-left"><input type="checkbox" name="onoffswitch2" class="onoffswitch2-checkbox" id="showprevioussearchonoff" onchange="showPreviousSearch()"/><label class="onoffswitch2-label" for="showprevioussearchonoff"><span class="onoffswitch2-inner"></span><span class="onoffswitch2-switch"></span></label></span></div><br><br><br><br><ul id="listofprevioussearchs" class="listOPSul" style="display:none">';
        for (var o = 0; o < w.length; o++) {
          s += "<li id='lOPS_" + o + "' class='listOPSli'>" + w[o];
          s +=
            this.svF[o].indexOf("(") > -1 || this.svF[o].indexOf(")") > -1
              ? ""
              : "<span class='closeMark' onclick=step.searchSelect.sM(" +
                o +
                ")>X</span>";
          s += "</li>";
        }
        s += "</ul>";
        $("#previousSearch").append(s);
      }
      if (h !== "") {
        this.searchRange = h;
      }
    } else {
      $("#modalonoffswitch").hide();
      $("#searchAndOrNot").hide();
    }
    step.searchSelect.sC();
    $("#searchHdrTable").append(this.sJ());
    $("#searchHdrTable").find("label.btn").click(this.handleLanguageButton);
    this.handleLanguageButton("init");
    $("#srchModalBackButton").hide();
    $(function () {
      $("textarea#userTextInput").on("input", function (z) {
        this.timer && clearTimeout(this.timer);
        var i = step.touchDevice ? 600 : 300;
        this.timer = setTimeout(step.searchSelect.svO, i, z);
      });
    });
    step.searchSelect.sB();
    if (a === "range_update") {
      step.searchSelect._buildRangeHeaderAndTable();
    } else {
      if ($("textarea#userTextInput").val() !== "") {
        $("#searchButton").click();
      }
    }
  },
  sB: function () {
    $(".advanced_search_elements").show();
    step.searchSelect.sE();
    if (
      $(".passageContainer.active").width() < 500 ||
      (step.touchDevice && !step.touchWideDevice)
    ) {
      $("#displayLocForm").hide();
    }
  },
  sC: function () {
    var c =
      '<h5>Show in results</h5><ul class="displayModes" style="padding-left:0px" role="presentation">';
    for (var b = 0; b < this.displayOptions.length; b++) {
      var a = this.displayOptions[b].toLowerCase();
      c +=
        '<li class="stepModalFgBg passageOptionsGroup dropdown-menu passage" style="display:block;position:initial;opacity:1;border:0px;padding:0px;box-shadow:none"><a data-value="STRONG" data-selected="true" class="searchOptions" id="srchOptns' +
        a +
        '">' +
        this.displayOptions[b].replace("_", " ") +
        '<span id="srchOptnsCheck' +
        a +
        '" class="glyphicon glyphicon-ok pull-right"></span"></a></li><br>';
    }
    c += "</ul>";
    $("#srchOptions").append(c);
    for (var b = 0; b < this.displayOptions.length; b++) {
      step.searchSelect._handleOptions(
        null,
        this.displayOptions[b].toLowerCase()
      );
    }
    $(".searchOptions").click(step.searchSelect._handleOptions);
  },
  _handleOptions: function (e, a) {
    var c = e !== null ? e.target.id.substring(9) : a;
    var b = step.util.uM("step.srchOptn" + c);
    var d = false;
    if (
      typeof b !== "string" &&
      c !== "strong_number" &&
      c !== "original_language" &&
      c !== "frequency_details" &&
      c !== "immediate_lookup"
    ) {
      d = true;
    } else {
      d = b === "true";
    }
    if (e === null) {
      d = !d;
    }
    if (d) {
      $("#srchOptnsCheck" + c).css("visibility", "hidden");
    } else {
      $("#srchOptnsCheck" + c).css("visibility", "visible");
    }
    step.util.ub("step.srchOptn" + c, d ? "false" : "true");
    if (e !== null) {
      step.searchSelect.sG();
    }
    return false;
  },
  sE: function () {
    var c = step.util.uM("step.previousSearches");
    if (c == null) {
      return;
    }
    var b =
      '<h4 style="font-size:14px;margin-bottom:0px">Previous searches</h4><ul class="displayModes" style="padding-left:0px" role="presentation">';
    c = c.split(";");
    for (var a = 0; a < c.length; a++) {
      b +=
        '<li class="stepModalFgBg dropdown-menu passageOptionsGroup" style="display:block;position:initial;opacity:1;border:0px;padding:0px;box-shadow:none"><a class="searchWords" id="searchWords' +
        a +
        '" style="display:inline-block;width:100%;line-height:20px">' +
        c[a] +
        "</a></li>";
    }
    b += "</ul>";
    $("#previousSearchWords").empty().append(b);
    $(".searchWords").click(step.searchSelect._displayPreviousSearchWord);
  },
  _displayPreviousSearchWord: function (c) {
    if (
      c == null ||
      typeof c.target.id !== "string" ||
      c.target.id.substring(0, 11) !== "searchWords"
    ) {
      return;
    }
    var a = c.target.id.substring(11);
    var b = step.util.uM("step.previousSearches");
    b = b.split(";");
    $("textarea#userTextInput").val(b[a]);
    $("#previousSearchDropDown").removeClass("open");
    step.searchSelect.svO(c);
    return false;
  },
  sG: function () {
    var e = 0;
    var f = false;
    for (var c = 0; c < this.displayOptions.length; c++) {
      var b = this.displayOptions[c].toLowerCase();
      var a = step.util.uM("step.srchOptn" + b);
      var d = false;
      if (typeof a !== "string" && b !== "strong_number" && b !== "frequency") {
        d = true;
      } else {
        d = a === "true";
      }
      if (d) {
        $(".srch" + b).show();
        if (b === "transliteration" || b === "original_language") {
          e++;
        }
        if (b === "strong_number") {
          f = true;
        }
      } else {
        $(".srch" + b).hide();
      }
    }
    if (step.searchSelect.searchRange !== "Gen-Rev") {
      $(".srchFrequency").hide();
    }
    if (e > 1 || f) {
      $(".srchParathesis").show();
    } else {
      $(".srchParathesis").hide();
    }
    if (e > 1) {
      $(".srchDash").show();
    } else {
      $(".srchDash").hide();
    }
    if (e > 1 && f) {
      $(".srchSpaceStrong").show();
    } else {
      $(".srchSpaceStrong").hide();
    }
  },
  sH: function (r, b, p, h, f, e, i, n) {
    var a = r.toLowerCase();
    if (a === "srchjoin") {
      return f;
    }
    var m = "";
    var c = "";
    if (typeof e === "undefined") {
      e = "";
    } else {
      if (e !== "") {
        if (e === "a") {
          e = "AND";
        } else {
          if (e === "o") {
            e = "OR";
          } else {
            if (e === "n") {
              e = "NOT";
            }
          }
        }
        var d = e === "AND" ? " selected" : "";
        var o = e === "OR" ? " selected" : "";
        var s = e === "NOT" ? " selected" : "";
        e =
          ' <select id="searchAndOrNot' +
          h.length +
          '" class="stepButton" style="font-size:16px" type="text" onchange="javascript:step.searchSelect.handleAndOrNot()"><option id="and_search" value="AND"' +
          d +
          ">" +
          __s.and +
          '</option><option id="or_search" value="OR"' +
          o +
          ">" +
          __s.or +
          '</option><option id="not_search" value="NOT"' +
          s +
          ">" +
          __s.not +
          "</option></select> ";
      }
    }
    if (i[f] > 0) {
      var q = "(".repeat(i[f]);
      var c = "<span style='font-size:16px'>" + e + q + "</span>";
      e = "";
      p.push(c);
      h.push(q);
    }
    if (a === SYNTAX) {
      var m =
        b.token.toLowerCase().indexOf("strong:") == 0
          ? b.token.substr(7)
          : b.token;
      if (m.substring(0, 1) === "H") {
        a = HEBREW;
      } else {
        if (m.substring(0, 1) === "G") {
          a = GREEK;
        }
      }
    }
    if (a.indexOf("greek") == 0) {
      a = "greek";
    } else {
      if (a.indexOf("hebrew") == 0) {
        a = "hebrew";
      }
    }
    if (this.svB.indexOf(a) > 2 && b.item !== undefined) {
      if (typeof __s[a] !== "undefined") {
        a = __s[a];
      }
      var g = b.item.gloss;
      if (b.item.stepTransliteration !== "") {
        var u = "";
        if (typeof b.item.strongNumber === "string") {
          u = b.item.strongNumber;
        } else {
          u = b.token;
          if (u.substring(0, 7) === "strong:") {
            u = u.substring(7) + "*";
          }
        }
        g +=
          '<i class="srchTransliteration"> ' +
          b.item.stepTransliteration +
          '</i><span class="srchParathesis"> (</span><span class="srchOriginal_Language">' +
          b.item.matchingForm +
          '</span><span class="srchSpaceStrong"> </span><span class="srchStrong_number">' +
          u +
          '</span><span class="srchParathesis">)</span>';
      }
      var c = "<span style='font-size:16px'>" + e + a + "</span> = " + g;
      p.push(c);
      var m = b.token;
      if (r === SYNTAX) {
        if (m.toLowerCase().indexOf("strong:") == 0) {
          m = m.substring(7);
        }
        h.push("syntax=t=strong:" + m);
      } else {
        h.push("strong=" + m);
      }
      if (b.item.stepTransliteration !== "") {
        step.util.u4(m, g);
      }
    } else {
      if (typeof __s[a] !== "undefined") {
        a = __s[a];
      }
      p.push("<span style='font-size:16px'>" + e + a + "</span> = " + b.token);
      h.push(r + "=" + b.token);
    }
    if (n[f] > 0) {
      var t = ")".repeat(n[f]);
      var c = "<span style='font-size:16px'>" + t + "</span>";
      p.push(c);
      h.push(t);
    }
    return f + 1;
  },
  svO: function (f) {
    $("#quickLexicon").remove();
    if (typeof f === "object" && f.target.id === "enterRange") {
      $("#userEnterRangeError").text("");
      var d = $("textarea#enterRange").val();
      d = d
        .replace(/[\n\r]/g, "")
        .replace(/[\t]/g, " ")
        .replace(/\s\s+/g, " ")
        .replace(/,,/g, ",")
        .replace(/^\s+/g, "");
      d = d.replace(/[]/g, "-");
      if (d.length > 0) {
        $("#search_range_table")
          .find(".stepPressedButton")
          .removeClass("stepPressedButton");
        $("#search_range_table").find(".stepButton").css("opacity", "0.3");
      } else {
        $("#search_range_table").find(".stepButton").css("opacity", "1.0");
      }
      $("textarea#enterRange").val(d);
      if (d.length > 3) {
        var b =
          SEARCH_AUTO_SUGGESTIONS +
          d +
          "/limit%3D" +
          REFERENCE +
          URL_SEPARATOR +
          VERSION +
          "%3D" +
          step.searchSelect.version +
          URL_SEPARATOR +
          "?lang=" +
          step.searchSelect.userLang;
        $.getJSON(b, function (e) {
          if (e.length == 0) {
            $("#updateRangeButton").hide();
            $("#userEnterRangeError").text(
              "No match for " + d + ", please update your entry."
            );
            $("textarea#enterRange").focus();
            $("textarea#enterRange").val(d);
          } else {
            $("#srchModalBackButton").prop(
              "title",
              "Update search range and return to search."
            );
            $("#updateRangeButton").show();
          }
        }).fail(function () {
          changeBaseURL();
        });
      } else {
        if (
          d.length == 0 &&
          step.searchSelect.searchRange.length > 0 &&
          step.searchSelect.searchRange !== "Gen-Rev"
        ) {
          $("#srchModalBackButton").prop(
            "title",
            "Update search range and return to search."
          );
          $("#updateRangeButton").show();
        } else {
          $("#updateRangeButton").hide();
        }
      }
    } else {
      $("#searchButton").hide();
      var a = typeof f === "string" ? f : "";
      var d = a !== "" ? a : $("textarea#userTextInput").val();
      if (d === "" || d === "\n") {
        for (var c = 0; c < step.searchSelect.svC; c++) {
          $("#searchResults" + step.searchSelect.svB[c]).empty();
        }
        step.searchSelect.handleLanguageButton();
        if (d === "\n") {
          $("textarea#userTextInput").val("");
        }
        return;
      }
      if (
        d.slice(-1) === "\n" ||
        typeof f.originalEvent !== "object" ||
        f.originalEvent.inputType === "insertLineBreak"
      ) {
        d = d
          .replace(/[\n\r]/g, "")
          .replace(/\t/g, " ")
          .replace(/\s\s/g, " ")
          .replace(/,,/g, ",")
          .replace(/^\s+/g, "");
        $("textarea#userTextInput").val(d);
        $("#warningMessage").text("");
        step.searchSelect.sX();
        if (a !== "") {
          $("#warningMessage").text(
            "No result for your search.  Please try again."
          );
        }
      } else {
        if (
          $("#srchOptnsCheckimmediate_lookup").css("visibility") === "visible"
        ) {
          step.searchSelect.sX();
          $("#searchButton").hide();
        } else {
          step.searchSelect.sD(d);
        }
      }
    }
  },
  sD: function (b) {
    if (b === undefined) {
      b = $("textarea#userTextInput").val();
    }
    var a = step.searchSelect.userLang.toLowerCase().indexOf("zh") == 0 ? 1 : 2;
    if (b.length < a) {
      $("#searchButton").hide();
    } else {
      if ($("#userTextInput").data("lastsearchword") !== b) {
        $("#searchButton").show();
      } else {
        $("#searchButton").hide();
      }
    }
  },
  MF: function (a) {
    $("#quickLexicon").remove();
    $("#searchSelectError").text("");
    $("#srchModalBackButton").prop("title", "");
    if ($("#updateRangeButton").is(":visible")) {
      $("#updateRangeButton").hide();
      step.searchSelect._updateRange("doNotCallGoBack");
    }
    if (a === "range_update") {
      $("#showprevioussearchonoff").click();
      $("#updateButton").click();
      return;
    }
    $("#enterRange").remove();
    showPreviousSearch();
    if (typeof $("textarea#userTextInput").val() === "undefined") {
      $("#searchHdrTable").empty().append(this.sJ());
      $("#searchHdrTable").find("label.btn").click(this.handleLanguageButton);
      if (
        typeof step.searchInputBeforeUserClickedRange === "string" &&
        step.searchInputBeforeUserClickedRange !== ""
      ) {
        $("textarea#userTextInput").val(step.searchInputBeforeUserClickedRange);
        step.searchInputBeforeUserClickedRange = "";
      }
      this.handleLanguageButton("init");
      $("#previousSearch").show();
      if (this.svD == 1) {
        $("#srchModalBackButton").hide();
        $("#langButtonForm").show();
      }
      $(function () {
        $("textarea#userTextInput").on("input", function (c) {
          this.timer && clearTimeout(this.timer);
          var b = step.touchDevice ? 600 : 300;
          this.timer = setTimeout(step.searchSelect.svO, b, c);
        });
      });
      $("textarea#userTextInput").focus();
      this.sX(null, this.svE.replaceAll("*", ""));
    } else {
      if (this.svD == 2 || this.svD == 3) {
        this.svA = "";
        this.svD = 1;
        $("#srchModalBackButton").hide();
        $("#langButtonForm").show();
        this.sX();
      }
    }
    step.searchSelect.sB();
  },
  sJ: function () {
    var g = this.searchRange;
    var a = this.searchRange;
    if (
      (this.userLang.toLowerCase().indexOf("zh") == 0 ||
        this.userLang.toLowerCase().indexOf("es") == 0) &&
      this.MC() !== ""
    ) {
      a = "";
      var h = JSON.parse(__s.list_of_bibles_books);
      while (g != "") {
        var b = "";
        var m = g.search(/[-,]/);
        if (m > -1) {
          b = g.substr(m, 1);
        } else {
          m = g.length;
        }
        var e = g.substr(0, m);
        var o = this.vMA[e.toLowerCase()];
        if (o > -1 && typeof h !== "undefined" && h[o].length === 2) {
          a += h[o][1];
        } else {
          a += e;
        }
        a += b;
        g = g.substr(m + 1);
      }
    }
    var f = document.querySelector(":root").style.getPropertyValue("--clrText");
    var d =
      '<div class="header" style="padding:0px"><form id="langButtonForm" role="form" class="form-inline" style="margin-top:8px"><span class="form-group btn-group" data-toggle="buttons"><label class="btn btn-default btn-sm stepButton stepPressedButton active"><input type="radio" data-lang="en" checked="checked">' +
      this.sc() +
      '</label><label class="btn btn-default btn-sm stepButton"><input type="radio" data-lang="he">' +
      step.util.MS(__s.hebrew) +
      '</label><label class="btn btn-default btn-sm stepButton"><input type="radio" data-lang="gr">' +
      step.util.MS(__s.greek) +
      '</label></span></form></div><div id="searchRangeButton" style="font-size:larger"><b>' +
      __s.search_range +
      ':</b> <a onclick=step.searchSelect._buildRangeHeaderAndTable("userClickedRangeButton")>' +
      a +
      '</a></div><br><span id="warningMessage" style="color:red;width:90%;float:left"></span><br><textarea id="userTextInput" rows="1" class="stepFgBg" style="font-size:16px;width:50%" placeholder="' +
      __s.enter_search_word +
      '">' +
      step.searchSelect.previousUserInput +
      '</textarea><button id="searchButton" style="vertical-align:top;display:none;padding-left:10px;padding-right:10px" class="stepButton primaryLightBg" onclick=step.searchSelect.sX() title="Get suggested search"><i style="font-size:12px" class="find glyphicon glyphicon-search"></i></button><span id="previousSearchDropDown" class="dropdown advanced_search_elements"><a class="dropdown-toggle showSettings" data-toggle="dropdown" title="Previous searches">&nbsp;&nbsp;<?xml version="1.0" ?><svg height="21px" version="1.1" viewBox="0 0 20 21" width="20px" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><desc/><defs/><g fill="none" fill-rule="evenodd" id="Page-1" stroke="' +
      f +
      '" stroke-width="1"><g fill="' +
      f +
      '" id="Core" opacity="0.9" transform="translate(-464.000000, -254.000000)"><g id="history" transform="translate(464.000000, 254.500000)"><path d="M10.5,0 C7,0 3.9,1.9 2.3,4.8 L0,2.5 L0,9 L6.5,9 L3.7,6.2 C5,3.7 7.5,2 10.5,2 C14.6,2 18,5.4 18,9.5 C18,13.6 14.6,17 10.5,17 C7.2,17 4.5,14.9 3.4,12 L1.3,12 C2.4,16 6.1,19 10.5,19 C15.8,19 20,14.7 20,9.5 C20,4.3 15.7,0 10.5,0 L10.5,0 Z M9,5 L9,10.1 L13.7,12.9 L14.5,11.6 L10.5,9.2 L10.5,5 L9,5 L9,5 Z" id="Shape"/></g></g></g></svg></a><div id="previousSearchWords" class="stepModalFgBg dropdown-menu pull-right" style="opacity:1" role="menu"></div></span><div id="basic_search_help_text" style="font-size:14px;width:90%"></div><div id="search_table" class="advanced_search_elements"><table>';
    for (var c = 0; c < step.searchSelect.svC; c++) {
      var n = this.svB[c];
      d +=
        '<tr class="select2-result select2-result-selectable select-' +
        n +
        '"><td onmousemove="javascript:$(\'#quickLexicon\').remove()" onmouseover="javascript:$(\'#quickLexicon\').remove()" class="search-type-column select2-result select2-result-selectable select-' +
        n +
        '" style="padding-left:0px;font-size:14px;text-align:left;' +
        (step.state.isLtR() ? '">' : 'text-align: right;">') +
        __s["search_type_desc_" + n] +
        ':<a class="search_type_title_' +
        n +
        ' glyphicon glyphicon-info-sign" style="font-size:11px;display:inline;margin-left:8px" data-hasqtip="true" aria-describedby="qtip-60"></a></td></tr><tr style="height:40px;border-bottom:solid"  class="select2-result select2-result-selectable select-' +
        n +
        '"><td onmouseout="javascript:$(\'#quickLexicon\').remove()" onmouseover="javascript:$(\'#quickLexicon\').remove()" style="padding-left:15px;text-align:left"><span id="searchResults' +
        n +
        '"></span></td></tr>';
    }
    d += "</table></div><br>";
    return d;
  },
  handleLanguageButton: function (c) {
    var h;
    var a = $("#langButtonForm")
      .find(".stepPressedButton")
      .find("input")
      .data("lang");
    if (typeof c === "string" || c === "init") {
      h = step.util.uM("lastSearchTab");
      if (typeof h === "string") {
        $("label.btn").removeClass("stepPressedButton");
        var d = 0;
        if (h === "he") {
          d = 1;
        } else {
          if (h === "gr") {
            d = 2;
          } else {
            h = "en";
          }
        }
        $($("label.btn")[d]).addClass("stepPressedButton");
      } else {
        h = "en";
      }
    } else {
      if (typeof c === "object") {
        var f = $(c.target);
        h = f.find("input").data("lang");
        $("label.btn").removeClass("stepPressedButton");
        f.addClass("stepPressedButton");
        if (a !== h) {
          step.util.ub("lastSearchTab", h);
          userInput = $("textarea#userTextInput").val().trim();
          if (userInput.length > 4 && !isNaN(userInput.substring(1, 5))) {
            var g = userInput.substring(0, 1).toLowerCase();
            if ((g === "h" && a === "he") || (g === "g" && a === "gr")) {
              $("textarea#userTextInput").val("");
            }
          }
          step.searchSelect.sF(h);
          step.searchSelect.sX();
          return;
        }
      } else {
        h = "en";
        var b = $("label.btn.steppressedbutton");
        if (b.length == 1) {
          var e = b.find("input");
          if (e.length == 1) {
            h = e.data("lang");
            if (h !== "en" && h !== "he" && h !== "gr") {
              h = "en";
            }
          }
        }
      }
    }
    step.searchSelect.sF(h);
  },
  sF: function (d) {
    $(".select2-result").hide();
    var a = false;
    var c = "";
    if (d === "en") {
      if ($("#searchResultstext").text() !== "") {
        $(".select-text").show();
        a = true;
      }
      if ($("#searchResultssubject").text() !== "") {
        $(".select-subject").show();
        a = true;
      }
      if ($("#searchResultsmeanings").text() !== "") {
        $(".select-meanings").show();
        a = true;
      }
      if ($("#searchResultsnames").text() !== "") {
        $(".select-names").show();
        a = true;
      }
      c =
        "<p>" +
        __s.basic_search_help_header +
        "</p><ul><li>" +
        __s.basic_search_help_text1 +
        "<li>" +
        __s.basic_search_help_text2 +
        "<li>" +
        __s.basic_search_help_text3 +
        "<li>" +
        __s.basic_search_help_text4 +
        "</ul>";
      if (step.searchSelect.svA === MEANINGS) {
        c =
          "<p>" +
          __s.related_word_search_help_header +
          "</p><ul><li>" +
          __s.related_word_search_help_text +
          "</ul>";
      } else {
        if (step.searchSelect.svA === SUBJECT_SEARCH) {
          c =
            "<p>" +
            __s.topic_search_help_header +
            "</p><ul><li>" +
            __s.topic_search_help_text +
            "</ul>";
        }
      }
    } else {
      if (d === "he") {
        if ($("#searchResultstext").text() !== "") {
          $(".select-text").show();
          a = true;
        }
        if ($("#searchResultshebrew").html() !== "") {
          $(".select-hebrew").show();
          a = true;
        }
        if ($("#searchResultshebrewMeanings").html() !== "") {
          $(".select-hebrewMeanings").show();
          a = true;
        }
        c = "<p>" + __s.hebrew_search_help_header + "</p><ul>";
        if (
          step.searchSelect.svA === "" ||
          step.searchSelect.svA === HEBREW_MEANINGS
        ) {
          c += "<li>" + __s.hebrew_related_word_search_help_text;
        }
        if (
          step.searchSelect.svA === "" ||
          step.searchSelect.svA === HEBREW
        ) {
          c += "<li>" + __s.hebrew_transliteration_search_help_text;
        }
        if (step.searchSelect.svA === "") {
          c += "<li>" + __s.hebrew_orig_lang_search_help_text;
          c += "<li>" + __s.hebrew_strong_number_search_help_text;
        }
        c += "</ul>";
      } else {
        if (d === "gr") {
          if ($("#searchResultstext").text() !== "") {
            $(".select-text").show();
            a = true;
          }
          if ($("#searchResultsgreek").html() !== "") {
            $(".select-greek").show();
            a = true;
          }
          if ($("#searchResultsgreekMeanings").html() !== "") {
            $(".select-greekMeanings").show();
            a = true;
          }
          c = "<p>" + __s.greek_search_help_header + "</p><ul>";
          if (
            step.searchSelect.svA === "" ||
            step.searchSelect.svA === GREEK_MEANINGS
          ) {
            c += "<li>" + __s.greek_related_word_search_help_text;
          }
          if (
            step.searchSelect.svA === "" ||
            step.searchSelect.svA === GREEK
          ) {
            c += "<li>" + __s.greek_transliteration_search_help_text;
          }
          if (step.searchSelect.svA === "") {
            c += "<li>" + __s.greek_orig_lang_search_help_text;
            c += "<li>" + __s.greek_strong_number_search_help_text;
          }
          c += "</ul>";
        }
      }
    }
    if (a) {
      $("#basic_search_help_text").text("");
      $("#basic_search_help_text").hide();
    } else {
      $("#basic_search_help_text").html(c);
      $("#basic_search_help_text").show();
      var b = $("textarea#userTextInput").val();
      if (b.length > 2) {
        if (step.searchSelect.previousUserInput !== b) {
          $("#warningMessage").text(__s.no_result);
        }
      }
    }
    require(["qtip"], function () {
      for (l = 0; l < step.searchSelect.svC; l++) {
        var f = step.searchSelect.svB[l];
        var e = $(".search_type_title_" + f);
        e.qtip({
          position: {
            my: "top right",
            at: "top right",
            viewport: $(window),
          },
          style: {
            tip: false,
            classes: "draggable-tooltip xrefPopup",
          },
          show: {
            event: "mouseenter",
          },
          hide: {
            event: "unfocus mouseleave",
            fixed: true,
            delay: 200,
          },
          content: {
            text: __s["search_type_title_" + f],
          },
        });
      }
    });
  },
  _buildRangeHeaderAndTable: function (g) {
    $("#quickLexicon").remove();
    var t = false;
    var e;
    if (typeof g === "string" && g === "userClickedRangeButton") {
      step.searchInputBeforeUserClickedRange = $(
        "textarea#userTextInput"
      ).val();
    } else {
      step.searchInputBeforeUserClickedRange = "";
      if (typeof g === "object" && Array.isArray(g) && g.length > 0) {
        t = true;
        e = g;
      }
    }
    $("#searchSelectError").text("");
    $("#updateFeedback").text("");
    var o = this.sL(t);
    $("#previousSearch").hide();
    $("#searchHdrTable").empty().append(o);
    $("#srchModalBackButton").show();
    $("#srchModalBackButton").prop(
      "title",
      "Return to search without updating search range."
    );
    this.MB();
    $(function () {
      $("textarea#enterRange").on("input", function (z) {
        this.timer && clearTimeout(this.timer);
        var i = step.touchDevice ? 600 : 300;
        this.timer = setTimeout(step.searchSelect.svO, i, z);
      });
    });
    var y = false;
    if (this.searchRange !== "Gen-Rev") {
      var p = this.searchRange + ",";
      var h = p.indexOf(",");
      var s = p.substring(0, h);
      p = p.substring(h + 1);
      while (s !== "") {
        var c = s.indexOf("-");
        if (c == -1) {
          var d = this.svN[s];
          if (typeof d !== "undefined") {
            this.bookOrder[d][1] = true;
          } else {
            y = true;
          }
        } else {
          if (c > 1) {
            var r = s.substring(0, c);
            var m = s.substring(c + 1);
            var b = this.svN[r];
            var a = this.svN[m];
            if (typeof b !== "undefined") {
              this.bookOrder[b][1] = true;
            } else {
              y = true;
            }
            if (typeof a !== "undefined") {
              this.bookOrder[a][1] = true;
              if (b > -1 && b < a) {
                for (var x = b + 1; x < a; x++) {
                  this.bookOrder[x][1] = true;
                }
              }
            } else {
              y = true;
            }
          }
        }
        var h = p.indexOf(",");
        if (h === -1) {
          s = "";
          p = "";
        } else {
          s = p.substring(0, h);
          p = p.substring(h + 1);
        }
      }
    }
    if (y) {
      $("textarea#enterRange").val(this.searchRange);
      $("#search_range_table")
        .find(".stepPressedButton")
        .removeClass("stepPressedButton");
      $("#search_range_table").find(".stepButton").css("opacity", "0.4");
    } else {
      for (var x = 0; x < 3; x++) {
        var q;
        var f;
        if (x == 0) {
          q = this.svK;
          f = "ot_tableg";
        } else {
          if (x == 1) {
            q = this.svL;
            f = "nt_tableg";
          } else {
            if (x == 2) {
              q = this.svM;
              f = "ob_tableg";
            }
          }
        }
        var w = true;
        for (var v = 0; v < q.length; v++) {
          var n = true;
          for (var u = 0; u < q[v].bookOrderPos.length; u++) {
            if (
              q[v].bookOrderPos[u] > -1 &&
              !this.bookOrder[q[v].bookOrderPos[u]][1]
            ) {
              this.sU(f + v + "b" + u, true);
            }
            if (t) {
              curBook = this.bookOrder[q[v].bookOrderPos[u]][0];
              if (e.indexOf(curBook) == -1) {
                $("#" + f + v + "b" + u)
                  .prop("disabled", true)
                  .css("opacity", 0.5);
              } else {
                n = false;
                w = false;
              }
            }
          }
          if (t && n) {
            for (var u = 0; u < q[v].bookOrderPos.length; u++) {
              $("#" + f + v + "b" + u).hide();
              $("#" + f + v + "b" + u)
                .parent()
                .parent()
                .hide();
            }
            $("#" + f + v).hide();
          }
        }
        if (t && w) {
          $("#" + f.substr(0, 3) + "hdr").hide();
        }
      }
      if (this.searchRange === "Gen-Rev") {
        $("#updateFeedback").text(__s.all_books_not_selected);
      } else {
        $("#updateFeedback").text(__s.search_range_button_color_desc);
      }
    }
    $("#searchSelectError").text("");
    $("#updateRangeButton").hide();
    $("#updateRangeButton").text(__s.update_search_range);
    $("#updateButton").hide();
  },
  sL: function (a) {
    var c = 16;
    var b =
      '<div class="header"><h4>' +
      __s.click_to_select_search_range +
      ':</h4><span style="float:right">' +
      __s.search_range_button_color_desc +
      '</span></div><span id="updateFeedback"></span><div id="search_range_table"><button id="ot_hdr" type="button" class="stepButton stepPressedButton" style="display:none;width:97%;font-size:' +
      c +
      'px" title="' +
      __s.click_to_select +
      " " +
      __s.all +
      " " +
      __s.old_testament +
      " " +
      __s.bible_book +
      '" onclick=step.searchSelect.sS(this.id)><i>' +
      __s.old_testament +
      ':</i></button><div id="ot_table"/><button id="nt_hdr" type="button" class="stepButton stepPressedButton" style="display:none;width:97%;font-size:' +
      c +
      'px" title="' +
      __s.click_to_select +
      " " +
      __s.all +
      " " +
      __s.new_testament +
      " " +
      __s.bible_book +
      '" onclick=step.searchSelect.sS(this.id)><i>' +
      __s.new_testament +
      ':</i></button><div id="nt_table"/><h4 id="other_books_hdr"/><div id="ob_table"/>';
    if (!a && !step.touchDevice && $("#enterRange").length == 0) {
      $(".footer").prepend(
        '<textarea id="enterRange" rows="1" class="stepFgBg" style="font-size:13px;width:95%;margin-left:5;resize=none;height:24px" placeholder=' +
          __s.enter_search_range +
          '></textarea><br><span id="userEnterRangeError" style="color: red"></span>'
      );
    }
    return b;
  },
  _updateRange: function (o) {
    var c = $("textarea#enterRange").val();
    if (typeof c === "string" && c !== "") {
      this.searchRange = c;
      $("#updateRangeButton").hide();
      if (o !== "doNotCallGoBack") {
        this.MF(o);
      }
    } else {
      $("#searchSelectError").text("");
      var d = "";
      for (var n = 0; n < 3; n++) {
        var g;
        var a;
        if (n == 0) {
          g = this.svK;
          a = "#ot_tableg";
        } else {
          if (n == 1) {
            g = this.svL;
            a = "#nt_tableg";
          } else {
            if (n == 2) {
              g = this.svM;
              a = "#ob_tableg";
            }
          }
        }
        for (var h = 0; h < g.length; h++) {
          for (var f = 0; f < g[h].bookOrderPos.length; f++) {
            if (g[h].bookOrderPos[f] > -1) {
              if (
                $(a + h + "b" + f).hasClass("stepPressedButton") &&
                g[h].bookOrderPos[f] > -1
              ) {
                this.bookOrder[g[h].bookOrderPos[f]][1] = true;
                d += "," + this.bookOrder[g[h].bookOrderPos[f]][0];
              } else {
                this.bookOrder[g[h].bookOrderPos[f]][1] = false;
              }
            }
          }
        }
      }
      var b = -1;
      var e = -1;
      var p = "";
      for (var n = 0; n < this.bookOrder.length; n++) {
        if (this.bookOrder[n][1]) {
          if (b === -1) {
            b = n;
          }
          e = n;
        } else {
          p += this.sO(b, e);
          b = -1;
          e = -1;
        }
      }
      p += this.sO(b, e);
      if (p.length > 0) {
        this.searchRange = p.replace(/,$/, "");
      } else {
        this.searchRange = "Gen-Rev";
      }
      this.svI = true;
      if (typeof step.util === "undefined") {
        var m = document.getElementById("rangeModal");
        if (m) {
          $("#rangeModal").modal("hide");
          $("#rangeModal").modal({
            show: false,
          });
          if (m.parentNode) {
            m.parentNode.removeChild(m);
          }
        }
        filterByRange(d);
      } else {
        $("#updateRangeButton").hide();
        if (o !== "doNotCallGoBack") {
          this.MF(o);
        }
      }
    }
  },
  sO: function (c, b) {
    var a = "";
    if (c !== -1) {
      var a = this.bookOrder[c][0];
      if (c !== b) {
        a += "-";
        a += this.bookOrder[b][0];
      }
      a += ",";
    }
    return a;
  },
  MB: function () {
    var b = this.MC();
    if (
      (this.userLang.toLowerCase().indexOf("en") == 0 ||
        this.userLang.toLowerCase().indexOf("es") == 0 ||
        this.userLang.toLowerCase().indexOf("zh") == 0) &&
      b !== ""
    ) {
      this.MD(b);
    } else {
      var a =
        SEARCH_AUTO_SUGGESTIONS +
        "%20%20/" +
        EXAMPLE_DATA +
        "%3D" +
        REFERENCE +
        URL_SEPARATOR +
        LIMIT +
        "%3D" +
        REFERENCE +
        URL_SEPARATOR +
        VERSION +
        "%3D" +
        this.version +
        URL_SEPARATOR +
        "?lang=" +
        this.userLang;
      $.ajaxSetup({
        async: false,
      });
      $.getJSON(a, function (c) {
        step.searchSelect.MD(c);
      }).fail(function () {
        changeBaseURL();
      });
      $.ajaxSetup({
        async: true,
      });
    }
  },
  MC: function () {
    if (typeof step.util === "undefined") {
      return "OTNT";
    }
    var d = "";
    var c = step.util.uQ().get("searchTokens") || [];
    for (var b = 0; b < c.length; b++) {
      if (c[b].itemType === VERSION) {
        this.version = c[b].item.initials;
        d = c[b].item.shortInitials;
        break;
      }
    }
    var a = "";
    if (typeof step.keyedVersions[this.version] === "object") {
      a = step.keyedVersions[this.version].hasAllNTOTorBoth;
    } else {
      if (typeof step.keyedVersions[d] === "object") {
        a = step.keyedVersions[d].hasAllNTOTorBoth;
      }
    }
    if (a === "B") {
      return "OTNT";
    } else {
      if (a === "N") {
        return "NT";
      } else {
        if (a === "O") {
          return "OT";
        }
      }
    }
    return "";
  },
  MD: function (e) {
    var m = false;
    var a = 0;
    var c = 0;
    var h;
    if (typeof e === "string") {
      if (e === "OTNT") {
        c = 66;
      } else {
        if (e === "OT") {
          c = 39;
        } else {
          if (e === "NT") {
            a = 39;
            c = 66;
          }
        }
      }
      e = step.passageSelect.vE;
      m = true;
      h = JSON.parse(__s.list_of_bibles_books);
    } else {
      c = e.length;
    }
    this.svM = [
      {
        groupName: "Other",
        show: false,
        books: [],
        bookOrderPos: [],
      },
    ];
    this.bookOrder = [];
    this.svN = {};
    bookOrderPos = -1;
    for (var f = a; f < c; f++) {
      bookOrderPos++;
      var g;
      var p;
      var d;
      if (m) {
        g = e[f].length === 4 ? e[f][3] : e[f][0];
        d = g;
        p = g;
      } else {
        g = e[f].suggestion.osisID;
        d = e[f].suggestion.fullName;
        p =
          this.userLang.toLowerCase().indexOf("en") == 0
            ? g
            : e[f].suggestion.shortName.replace(/ /g, "").substr(0, 6);
      }
      var o = g;
      var q = this.vMA[g.toLowerCase()];
      if (q > -1) {
        if (typeof step.passageSelect.vE[q][3] !== "undefined") {
          o = step.passageSelect.vE[q][3];
        }
        if (typeof h !== "undefined") {
          d = h[q][0];
          p = h[q].length === 2 ? h[q][1] : g;
        }
      }
      this.bookOrder.push([g, false, o, p, d]);
      this.svN[g] = bookOrderPos;
      if (g != o) {
        this.svN[o] = bookOrderPos;
      }
      var s = false;
      for (j = 0; j < this.svK.length; j++) {
        var n = this.sP(this.svK[j], g);
        if (n > -1) {
          this.svK[j].show = true;
          this.svK[j].bookOrderPos[n] = bookOrderPos;
          s = true;
          break;
        }
      }
      if (!s) {
        for (j = 0; j < this.svL.length; j++) {
          var n = this.sP(this.svL[j], g);
          if (n > -1) {
            this.svL[j].show = true;
            this.svL[j].bookOrderPos[n] = bookOrderPos;
            s = true;
            break;
          }
        }
      }
      if (!s) {
        this.svM[0].show = true;
        this.svM[0].books.push(-1);
        this.svM[0].bookOrderPos.push(bookOrderPos);
      }
    }
    var r = $(window).width();
    var b = 7;
    if (r < 1100) {
      b = 6;
      if (r < 800) {
        b = 4;
      }
    }
    this.sR(this.svK, b, "ot_table");
    this.sR(this.svL, b, "nt_table");
    this.sR(this.svM, b, "ob_table");
  },
  sP: function (c, a) {
    for (var b = 0; b < c.books.length; b++) {
      if (
        a == step.passageSelect.vE[c.books[b]][0] ||
        a == step.passageSelect.vE[c.books[b]][3]
      ) {
        return b;
      }
    }
    return -1;
  },
  sQ: function (a) {
    return [this.bookOrder[a][4], this.bookOrder[a][3]];
  },
  sR: function (g, c, e) {
    var i = "";
    var b = 29;
    var n = 12;
    for (j = 0; j < g.length; j++) {
      var d = Math.ceil(g[j].bookOrderPos.length / (c - 1));
      var a = b * d;
      if (g[j].show) {
        i +=
          '<tr style="height:' +
          (b + 1) +
          'px"><td rowspan="' +
          d +
          '"><button id="' +
          e +
          "g" +
          j +
          '"type="button" class="stepButton stepPressedButton" style="font-size:' +
          n +
          "px;width:100%;min-height:" +
          a +
          'px" title="' +
          __s.click_to_select +
          " " +
          __s.all +
          " " +
          g[j].groupName +
          " " +
          __s.bible_book +
          '" onclick=step.searchSelect.sT(this.id)><i>' +
          g[j].groupName +
          ":</i></button></td>";
        var f = 2;
        for (k = 0; k < g[j].bookOrderPos.length; k++) {
          if (g[j].bookOrderPos[k] > -1) {
            if (f === 1) {
              i += '<tr style="height:' + (b + 1) + 'px">';
              f = 2;
            }
            var h = this.sQ(g[j].bookOrderPos[k]);
            i +=
              '<td><button id="' +
              e +
              "g" +
              j +
              "b" +
              k +
              '" title="' +
              __s.click_to_select +
              " " +
              h[0] +
              '" type="button" class="stepButton stepPressedButton" style="font-size:' +
              n +
              "px;width:95%;height:" +
              (b - 2) +
              'px" onclick=step.searchSelect.sU(this.id)>' +
              h[1] +
              "</button></td>";
            f++;
            if (f > c) {
              f = 1;
              i += "</tr>";
            }
          }
        }
        i += "</tr>";
      }
    }
    if (i.length > 0) {
      if (e === "ob_table") {
        $("#other_books_hdr").text("Other Books");
      }
      var m = this.MA(c, e);
      $("#" + e).append(this.MA(c, e) + i + "</table>");
      if (e.substr(0, 2) === "nt") {
        $("#nt_hdr").show();
      } else {
        if (e.substr(0, 2) === "ot") {
          $("#ot_hdr").show();
        }
      }
    }
  },
  sN: function () {
    if (
      step.touchDevice ||
      $("textarea#enterRange").length != 1 ||
      $("textarea#enterRange").val() === ""
    ) {
      return false;
    }
    $("#userEnterRangeError").text(
      "You can only click to select when keyboard entry field is empty."
    );
    return true;
  },
  sS: function (a) {
    if (this.sN()) {
      return;
    }
    var b = "#" + a;
    $("#searchSelectError").text(__s.click_update_when_finish);
    $("#updateRangeButton").show();
    $("#srchModalBackButton").prop(
      "title",
      "Update search range and return to search."
    );
    if ($(b).hasClass("stepPressedButton")) {
      $(b).removeClass("stepPressedButton");
      $("button[id^='" + a.substring(0, 2) + "_tableg']").each(function (c, d) {
        $(d).removeClass("stepPressedButton");
      });
      $("#updateFeedback").text(
        __s.removed + ' "' + $(b).text().replace(/:$/, "") + '".'
      );
    } else {
      $(b).addClass("stepPressedButton");
      $("button[id^='" + a.substring(0, 2) + "_tableg']").each(function (c, d) {
        $(d).addClass("stepPressedButton");
      });
      $("#updateFeedback").text(
        __s.added + ' "' + $(b).text().replace(/:$/, "") + '".'
      );
    }
  },
  sT: function (a) {
    if (this.sN()) {
      return;
    }
    var b = "#" + a;
    $("#searchSelectError").text(__s.click_update_when_finish);
    $("#updateRangeButton").show();
    $("#srchModalBackButton").prop(
      "title",
      "Update search range and return to search."
    );
    if ($(b).hasClass("stepPressedButton")) {
      $(b).removeClass("stepPressedButton");
      $("button[id^='" + a + "b']").each(function (c, d) {
        $(d).removeClass("stepPressedButton");
      });
      $(b.substring(0, 3) + "_hdr").removeClass("stepPressedButton");
      $("#updateFeedback").text(
        __s.removed + ' "' + $(b).text().replace(/:$/, "") + '".'
      );
    } else {
      $(b).addClass("stepPressedButton");
      $("button[id^='" + a + "b']").each(function (c, d) {
        $(d).addClass("stepPressedButton");
      });
      this.sV(a);
      $("#updateFeedback").text(
        __s.added + ' "' + $(b).text().replace(/:$/, "") + '".'
      );
    }
  },
  sU: function (b, a) {
    if (this.sN()) {
      return;
    }
    var d = "#" + b;
    $("#searchSelectError").text(__s.click_update_when_finish);
    $("#updateRangeButton").show();
    if (!a) {
      $("#srchModalBackButton").prop(
        "title",
        "Update search range and return to search."
      );
    }
    if ($(d).hasClass("stepPressedButton")) {
      $(d).removeClass("stepPressedButton");
      var e = /b\d{1,2}$/;
      var f = b.match(e);
      if (f !== null) {
        var g = b.substring(0, b.length - f.toString().length);
        $("#" + g).removeClass("stepPressedButton");
      }
      $(d.substring(0, 3) + "_hdr").removeClass("stepPressedButton");
      $("#updateFeedback").text(__s.removed + ' "' + $(d).text() + '".');
    } else {
      $(d).addClass("stepPressedButton");
      var e = /b\d{1,2}$/;
      var f = b.match(e);
      if (f !== null) {
        var g = b.substring(0, b.length - f.toString().length);
        var c = true;
        $("button[id^='" + g + "b']").each(function (h, m) {
          if (!$(m).hasClass("stepPressedButton")) {
            c = false;
          }
        });
        if (c) {
          $("#" + g).addClass("stepPressedButton");
          this.sV(b);
        }
        $("#updateFeedback").text(__s.added + ' "' + $(d).text() + '".');
      }
    }
  },
  sV: function (a) {
    var e = a.substring(0, 2);
    var d = 0;
    if (e === "ot") {
      d = this.svK.length;
    } else {
      if (e === "nt") {
        d = this.svL.length;
      }
    }
    e = "#" + e + "_tableg";
    var c = true;
    for (var b = 0; b < d; b++) {
      if (!$(e + b).hasClass("stepPressedButton")) {
        c = false;
      }
    }
    if (c) {
      $(e.substr(0, 3) + "_hdr").addClass("stepPressedButton");
    }
  },
  MA: function (e, a) {
    var b = $("#" + a).width();
    var f = 145;
    var c = Math.max(Math.floor((b - f) / (e - 1)), 10);
    html = '<table><colgroup><col span="1" style="width:' + f + 'px;">';
    for (var d = 1; d < e; d++) {
      html += '<col span="1" style="width:' + c + 'px;">';
    }
    html += "</colgroup>";
    return html;
  },
  sK: function (b) {
    if (b.strongNumber == undefined) {
      return b.gloss;
    }
    var a = step.userLanguageCode.toLowerCase();
    if (a === "es" && typeof b._es_Gloss === "string") {
      return b._es_Gloss;
    }
    if (
      (a === "zh_tw" || a === "zh_hk") &&
      typeof b._zh_tw_Gloss === "string"
    ) {
      return b.gloss + " (" + b._zh_tw_Gloss + ")";
    }
    if (a.substring(0, 2) === "zh" && typeof b._zh_Gloss === "string") {
      return b.gloss + " (" + b._zh_Gloss + ")";
    }
    if (step.defaults.langWithTranslatedLex.indexOf(a) == -1) {
      return b.gloss;
    }
    fetch(
      "https://us.stepbible.org/html/lexicon/" +
        a +
        "_json/" +
        b.strongNumber +
        ".json"
    )
      .then(function (c) {
        return c.json();
      })
      .then(function (c) {
        var d = c.gloss;
        var e = d.indexOf(":");
        if (e > -1) {
          d = d.substring(e + 1).trim();
        }
        step.util.MR(".src_gloss_" + c.strong, " [" + d.trim() + "]", 0);
      });
    return b.gloss + '<span class="src_gloss_' + b.strongNumber + '"></span>';
  },
  sX: function (c, r, e) {
    $("#quickLexicon").remove();
    if (typeof c === "undefined" || c === null) {
      c = "";
    }
    var g = "";
    $("textarea#userTextInput").show();
    $("#searchButton").show();
    $(".search-type-column").show();
    $("#warningMessage").text("");
    if (typeof r === "undefined" || r === null) {
      g = $("textarea#userTextInput").val();
    } else {
      g = r;
      $("textarea#userTextInput").text(g);
    }
    g = g
      .replace(/[\n\r]/g, " ")
      .replace(/\t/g, " ")
      .replace(/\s\s/g, " ")
      .replace(/,,/g, ",")
      .replace(/^\s+/g, "")
      .trim();
    if (
      g.length > 1 ||
      (step.searchSelect.userLang.toLowerCase().indexOf("zh") == 0 &&
        g.length > 0)
    ) {
      if (
        " a an and are as at be but by for if in into is it no not of on or such that the their then there these they this to was will with ".indexOf(
          " " + g.toLowerCase() + " "
        ) > -1
      ) {
        $("#warningMessage").text(
          "Search for extremely common words might not be found in Fuzzy, Greek and Hebrew searches."
        );
        setTimeout(function () {
          $("#warningMessage").text("");
        }, 5000);
      } else {
        if ($("#warningMessage").html().indexOf("common word") > -1) {
          $("#warningMessage").text("");
        }
      }
      $("#updateButton").hide();
      var d;
      var b = step.util.uQ().get("searchTokens") || [];
      var h = "";
      for (var o = 0; o < b.length; o++) {
        var t = b[o].itemType ? b[o].itemType : b[o].tokenType;
        if (t === VERSION) {
          if (h !== "") {
            h += URL_SEPARATOR;
          }
          h += VERSION + "%3D" + b[o].item.shortInitials;
        }
      }
      if (h === "") {
        h = VERSION + "%3D" + step.searchSelect.version;
      }
      var n = $("#langButtonForm")
        .find(".stepPressedButton")
        .find("input")
        .data("lang");
      var u = step.userLanguageCode.substring(0, 2).toLowerCase();
      var m = false;
      if (n === "en" || n === "he" || n === "gr") {
        var p = g.substring(0, 1).toUpperCase();
        var a = g.length;
        if ((p === "H" || p === "G") && g.split(" ").length == 1) {
          if (a == 6 || a == 7) {
            if (g.substring(1, 2) === "0" && !isNaN(g.substring(2, 6))) {
              m = true;
              g = p + g.substring(2);
              a = g.length;
            }
          }
          if (a == 2) {
            m = !isNaN(g.substring(1, 2));
          } else {
            if (a > 2 && a < 7) {
              m = !isNaN(g.substring(1, a - 1));
            }
          }
          if (m) {
            if (p === "H") {
              n = "he";
            } else {
              if (p === "G") {
                n = "gr";
              }
            }
            step.util.ub("lastSearchTab", n);
            g = step.util.u8(g.toUpperCase(), true);
            $("textarea#userTextInput").val(g);
          }
        }
      }
      if (c === "" && step.searchSelect.svA === "") {
        if (
          n === "en" &&
          u !== "zh" &&
          u !== "ar" &&
          g.indexOf("*") == -1 &&
          g.indexOf('"') == -1 &&
          !(g[0] == "'" && g[g.length - 1] == "'") &&
          g.indexOf("") == -1 &&
          g.indexOf("") == -1
        ) {
          g = g.split(" ").join("* ") + "*";
        }
        d = SEARCH_AUTO_SUGGESTIONS + g + "/" + h + URL_SEPARATOR;
      } else {
        if (c === "") {
          c = step.searchSelect.svA;
        } else {
          step.searchSelect.svA = c;
          step.searchSelect.svD = 2;
          $("#langButtonForm").hide();
        }
        $("#srchModalBackButton").show();
        d =
          SEARCH_AUTO_SUGGESTIONS +
          g +
          "/" +
          h +
          URL_SEPARATOR +
          LIMIT +
          "%3D" +
          c +
          URL_SEPARATOR;
      }
      var s = [];
      var q = "";
      var i = [];
      var f = [];
      if (n === "en" || n === "he" || n === "gr") {
        d += "//" + n;
      }
      d += "?lang=" + step.searchSelect.userLang;
      $.getJSON(d, function (aq) {
        for (var am = 0; am < step.searchSelect.svC; am++) {
          $("#searchResults" + step.searchSelect.svB[am]).empty();
        }
        step["SearchCount" + GREEK] = 0;
        step["SearchCount" + GREEK_MEANINGS] = 0;
        step["SearchCount" + HEBREW] = 0;
        step["SearchCount" + HEBREW_MEANINGS] = 0;
        step["SearchCount" + MEANINGS] = 0;
        step["SearchCount" + SUBJECT_SEARCH] = 0;
        step["SearchCount" + TEXT_SEARCH] = 0;
        step["SearchCount" + NAMES] = 0;
        var ac = [];
        var an = step.util.uQ().get("searchTokens") || [];
        var G = "";
        for (var ah = 0; ah < an.length; ah++) {
          var V = an[ah].itemType ? an[ah].itemType : an[ah].tokenType;
          if (V === VERSION) {
            if (G !== "") {
              G += ",";
            }
            G += an[ah].item.shortInitials;
          }
        }
        for (var am = 0; am < aq.length; am++) {
          var Y = false;
          var W = aq[am].itemType;
          var y = step.searchSelect.svB.indexOf(W);
          var M = $("#searchResults" + step.searchSelect.svB[y]);
          var ae = aq[am].suggestion;
          if (
            (W == GREEK_MEANINGS || W == HEBREW_MEANINGS) &&
            typeof ae === "object" &&
            step.name_types.includes(ae.type)
          ) {
            var R = ae.strongNumber;
            if (!f.includes(R)) {
              f.push(R);
              var at = {};
              at.strongs = [];
              var au = at.strongs;
              au.push(R);
              at.name = ae.gloss;
              var F = at.name;
              var ao = step.searchSelect.sY(aq[am].suggestion, G);
              var O = ae.briefDef;
              at.brief = O;
              at.type = ae.type;
              var ag = ae._detailLexicalTag;
              if (ag) {
                at.alternateNames = [];
                var E = at.alternateNames;
                ag = JSON.parse(ag);
                ag.forEach(function (ay, ax, aB) {
                  var az = ay[1];
                  if (!au.includes(az)) {
                    au.push(az);
                    var aA = {};
                    aA.strongNumber = az;
                    aA.popularityList = ay[6];
                    var aw = step.searchSelect.sY(aA, G);
                    ao[0] += aw[0];
                    ao[1] += aw[1];
                  }
                  var av = ay[2];
                  if (!E.includes(av) && !(av === F)) {
                    E.push(av);
                  }
                });
                if (E.length === 0) {
                  delete at.alternateNames;
                }
              }
              at.count = ao[0] + ao[1];
              if (at.count > 0) {
                i.push(at);
              }
            }
          }
          switch (W) {
            case GREEK:
            case GREEK_MEANINGS:
            case HEBREW:
            case HEBREW_MEANINGS:
            case MEANINGS:
            case SUBJECT_SEARCH:
            case TEXT_SEARCH:
              var D = "";
              if (aq[am].grouped) {
                var C = M.html();
                if (typeof aq[am].extraExamples !== "undefined") {
                  if (
                    typeof C === "string" &&
                    (C.match(/<br>/g) || []).length < 4
                  ) {
                    for (var aj = 0; aj < aq[am].extraExamples.length; aj++) {
                      if (aj > 0) {
                        D += ", ";
                      }
                      if (W === GREEK || W === HEBREW) {
                        D +=
                          '<i class="srchTransliteration>' +
                          aq[am].extraExamples[aj].stepTransliteration +
                          "</i>";
                      } else {
                        if (
                          W === GREEK_MEANINGS ||
                          W === HEBREW_MEANINGS ||
                          W === MEANINGS
                        ) {
                          D += aq[am].extraExamples[aj].gloss;
                        } else {
                          if (W === SUBJECT_SEARCH) {
                            D += aq[am].extraExamples[aj].value;
                          }
                        }
                      }
                    }
                    if (D.length == 0) {
                      console.log("group, but no examples");
                    } else {
                      var ab = M.text();
                      if (
                        ab.indexOf(__s.list_similar_meaning) == -1 &&
                        ab.indexOf(__s.list_similar_hebrew_meaning) == -1 &&
                        ab.indexOf(__s.list_similar_greek_meaning) == -1
                      ) {
                        var D = "&nbsp;&nbsp;&nbsp;<b>";
                        if (W === GREEK_MEANINGS || W === HEBREW_MEANINGS) {
                          D += __s.list_similar_meaning;
                        } else {
                          if (W === GREEK) {
                            D += __s.list_similar_greek_meaning;
                          } else {
                            if (W === HEBREW) {
                              D += __s.list_similar_hebrew_meaning;
                            } else {
                              D += __s.more;
                            }
                          }
                        }
                        D += "</b>...";
                        if (C !== "") {
                          M.append("<br>");
                        }
                        var B =
                          '<a onmousemove="javascript:$(\'#quickLexicon\').remove()" onmouseover="javascript:$(\'#quickLexicon\').remove()" style="padding:0px;" href="javascript:step.searchSelect.sX(\'' +
                          W +
                          "')\">" +
                          D +
                          "</a>";
                        if (W == MEANINGS) {
                          q = B;
                        } else {
                          M.append(B);
                        }
                      }
                    }
                  }
                } else {
                  if (typeof C === "string" && C !== "") {
                    M.append("<br>");
                  }
                  M.append(
                    "<span>There are " +
                      aq[am].count +
                      " more options. Enter a longer search word to get more specific search suggestions.</span>"
                  );
                }
              } else {
                var ad = "";
                var af = "";
                var T = "";
                if (W === SUBJECT_SEARCH) {
                  D = aq[am].suggestion.value;
                  ad = D;
                } else {
                  if (W === MEANINGS) {
                    D = step.searchSelect.sK(aq[am].suggestion);
                    ad = D;
                  } else {
                    if (W === TEXT_SEARCH) {
                      if (aq[am].suggestion.text.search(/^[HG]\d/i) == -1) {
                        D = aq[am].suggestion.text;
                        $("#userTextInput").attr("data-lastsearchword", D);
                        ad = D.replace(/["'\u201C\u201D\u2018\u2019]/g, "%22");
                        if (ad.indexOf("%22") == -1) {
                          var Z = ad.split(" ");
                          if (Z.length > 1) {
                            if (Z[0] === "#AND:") {
                              Z.shift();
                              ad = Z.join(" ");
                              D = Z.join(" <sub>and</sub> ");
                            } else {
                              var J = [];
                              var A = [];
                              for (var ak = 0; ak < Z.length; ak++) {
                                var al = Z[ak].trim();
                                if (al.length > 0) {
                                  if (al.toLowerCase() === "and") {
                                    J.push("<sub>and</sub>");
                                  } else {
                                    if (al.toLowerCase() === "or") {
                                      J.push("<sub>or</sub>");
                                    } else {
                                      J.push(al);
                                      A.push(al);
                                    }
                                  }
                                }
                              }
                              ad = A.join(" ");
                              D = J.join(" ");
                              if (A.length == J.length) {
                                D = Z.join(" <sub>or</sub> ");
                              }
                            }
                          }
                          $("td.search-type-column.select-text").html(
                            __s.search_type_desc_text +
                              ':<a class="search_type_title_text glyphicon glyphicon-info-sign" style="font-size:11px;display:inline;margin-left:8px" data-hasqtip="true" aria-describedby="qtip-60"></a>'
                          );
                        }
                      }
                      if (
                        $("textarea#userTextInput").val().indexOf("*") == -1
                      ) {
                        D = D.replaceAll("*", "");
                      }
                    } else {
                      if (n !== "en") {
                        ad = aq[am].suggestion.strongNumber;
                        var P = ad;
                        var Q = ad;
                        var ai = false;
                        var S = null;
                        if (P.search(/^([GH]\d{4,5})[A-Za-z]$/) == 0) {
                          S = [];
                          P = RegExp.$1;
                          Q = P + "*";
                          ai = true;
                          if (W === GREEK_MEANINGS || W === HEBREW_MEANINGS) {
                            for (var aj = 0; aj < aq.length; aj++) {
                              if (W === aq[aj].itemType) {
                                if (
                                  typeof aq[aj].suggestion === "object" &&
                                  typeof aq[aj].suggestion.strongNumber ===
                                    "string" &&
                                  aq[aj].suggestion.strongNumber.slice(
                                    0,
                                    -1
                                  ) === P
                                ) {
                                  S.push(aq[aj].suggestion.strongNumber);
                                }
                              }
                            }
                          }
                        }
                        if (ac.includes(W + P)) {
                          continue;
                        }
                        ac.push(W + P);
                        af = step.searchSelect.sK(aq[am].suggestion);
                        var L =
                          typeof aq[am].suggestion._detailLexicalTag ===
                            "string" &&
                          aq[am].suggestion._detailLexicalTag !== "";
                        D =
                          '<i class="srchTransliteration">' +
                          aq[am].suggestion.stepTransliteration +
                          '</i><span class="srchParathesis"> (</span><span class="srchOriginal_Language">' +
                          aq[am].suggestion.matchingForm +
                          '</span><span class="srchSpaceStrong"> </span><span class="srchStrong_number">' +
                          Q +
                          '</span><span class="srchParathesis">)</span>';
                        if (L || (ai && S.length > 1)) {
                          D += " etc.";
                        }
                        if (ai || L) {
                          step.searchSelect.sq(
                            M,
                            P,
                            W,
                            D,
                            "",
                            af,
                            "",
                            c,
                            S,
                            L,
                            false,
                            g,
                            G
                          );
                          continue;
                        } else {
                          var w = {
                            vocabInfos: [
                              {
                                strongNumber: aq[am].suggestion.strongNumber,
                                freqList: aq[am].suggestion.popularityList,
                              },
                            ],
                          };
                          step.util.un(w, G);
                          var x =
                            typeof w.vocabInfos[0].versionCountOT ===
                              "number" &&
                            w.vocabInfos[0].versionCountOT > 0 &&
                            typeof w.vocabInfos[0].versionCountNT ===
                              "number" &&
                            w.vocabInfos[0].versionCountNT > 0;
                          var N = step.util.uAF(
                            w.vocabInfos[0],
                            parseInt(aq[am].suggestion.popularity),
                            x,
                            w.vocabInfos[0].notInBibleSelected
                          );
                          if (N.indexOf(">0 x") > -1) {
                            Y = true;
                          }
                          D += '<span class="srchFrequency"> ' + N + "</span>";
                        }
                      }
                    }
                  }
                }
                if (!Y || c !== "") {
                  if (W === TEXT_SEARCH || W === MEANINGS) {
                    if (aq[am].count == 0) {
                      continue;
                    }
                    if (W === TEXT_SEARCH) {
                      if (ad.slice(-1) === "*") {
                        var K = ad;
                        if (
                          $("textarea#userTextInput").val().indexOf("*") == -1
                        ) {
                          K = K.replaceAll("*", "");
                        }
                        af += "(" + __s.words_that_start_with + " " + K + ")";
                      }
                      af +=
                        '<span class="srchFrequency"> ' +
                        aq[am].count +
                        " x</span>";
                    } else {
                      if (W === MEANINGS) {
                        var ar = {};
                        ar.currentSearchSuggestionElement = M;
                        ar.str2Search = ad;
                        ar.suggestionType = W;
                        ar.text2Display = D;
                        ar.prefixToDisplay = "";
                        ar.suffixToDisplay =
                          '<span class="srchFrequency"> ' +
                          aq[am].count +
                          " x</span>";
                        ar.suffixTitle = T;
                        ar.limitType = c;
                        ar.augStrongSameMeaning = null;
                        ar.hasDetailLexInfo = false;
                        ar.needIndent = false;
                        ar.userInput = "";
                        ar.allVersions = G;
                        s.push(ar);
                      }
                    }
                  } else {
                    if (W === SUBJECT_SEARCH) {
                      if (
                        typeof aq[am].suggestion === "object" &&
                        Array.isArray(aq[am].suggestion.searchTypes)
                      ) {
                        var I = "";
                        for (
                          var aj = 0;
                          aj < aq[am].suggestion.searchTypes.length;
                          aj++
                        ) {
                          if (
                            aq[am].suggestion.searchTypes[aj] ===
                            "SUBJECT_SIMPLE"
                          ) {
                            I = SUBJECT_SEARCH;
                            break;
                          }
                          if (
                            aq[am].suggestion.searchTypes[aj] ===
                            "SUBJECT_EXTENDED"
                          ) {
                            W = NAVE_SEARCH;
                          }
                          if (
                            aq[am].suggestion.searchTypes[aj] ===
                              "SUBJECT_FULL" &&
                            W !== NAVE_SEARCH
                          ) {
                            W = NAVE_SEARCH_EXTENDED;
                          }
                        }
                      }
                      if (aq[am].count > 0) {
                        af =
                          '<span class="srchFrequency"> ' +
                          aq[am].count +
                          " x</span>";
                      }
                    }
                  }
                  if (W !== MEANINGS) {
                    if (
                      n === "en" &&
                      (W === GREEK_MEANINGS || W === HEBREW_MEANINGS)
                    ) {
                      continue;
                    }
                    step.searchSelect.sq(
                      M,
                      ad,
                      W,
                      D,
                      "",
                      af,
                      T,
                      c,
                      null,
                      false,
                      false,
                      "",
                      G
                    );
                  }
                }
              }
              break;
            case REFERENCE:
              if (
                aq[am].suggestion.sectionType === "PASSAGE" &&
                !aq[am].suggestion.wholeBook
              ) {
                pos = step.searchSelect.svE
                  .replace(/\s\s+/, " ")
                  .search(/^\s?[\da-z][a-z]+[\s.]?\d/i);
                if (pos > -1) {
                  if (e) {
                    step.searchSelect.ME(aq[0].suggestion.osisID);
                  }
                  $("#warningMessage").empty();
                  $("#warningMessage").append(
                    '<a href="javascript:step.util.us(\'Psalm23.gif\', 15)">You can only search for words and subjects here.  Click to learn how to select passage.<span class="glyphicon glyphicon-film" style="font-size:16px"></span></a>'
                  );
                }
              }
              break;
            default:
              alert("Unknown result: " + W);
              break;
          }
        }
        s.sort(function (aw, av) {
          const ay = aw.text2Display.split(",")[0].trim();
          const ax = av.text2Display.split(",")[0].trim();
          if (ay < ax) {
            return -1;
          }
          if (ay > ax) {
            return 1;
          }
          return 0;
        });
        s.forEach(function (aB) {
          var aE = aB.currentSearchSuggestionElement;
          var ay = aB.str2Search.split(",")[0];
          var aF = aB.suggestionType;
          var aI = aB.text2Display;
          var aH = aB.prefixToDisplay;
          var aC = aB.suffixToDisplay;
          var ax = aB.suffixTitle;
          var av = aB.limitType;
          var aG = aB.augStrongSameMeaning;
          var aw = aB.hasDetailLexInfo;
          var aA = aB.needIndent;
          var az = aB.userInput;
          var aD = aB.allVersions;
          step.searchSelect.sq(
            aE,
            ay,
            aF,
            aI,
            aH,
            aC,
            ax,
            av,
            aG,
            aw,
            aA,
            az,
            aD
          );
        });
        var H = $("#searchResultsmeanings");
        var X = H.html();
        if (X !== "") {
          H.append("<br>");
        }
        if (q !== "") {
          H.append(q);
        }
        var v = $("#searchResultsnames");
        var z = [];
        var aa = [];
        i = i.sort(step.util.levenshteinNameComparator(g));
        if (i.length > 0) {
          $("td.search-type-column.select-names").html(
            __s.search_type_desc_names +
              ':<a class="search_type_title_names glyphicon glyphicon-info-sign" style="font-size:11px;display:inline;margin-left:8px" data-hasqtip="true" aria-describedby="qtip-60"></a>'
          );
          i.forEach(function (aw) {
            var av = aw.name;
            var ax = aw.type;
            if (!aa.includes(av)) {
              var ay = {};
              ay.name = av;
              ay.type = ax;
              ay.typeCount = {};
              ay.typeCount[ax] = 1;
              ay.conglomeration = [aw];
              ay.count = aw.count;
              z.push(ay);
              aa.push(av);
            } else {
              z.forEach(function (az) {
                if (az.name === av) {
                  az.conglomeration.push(aw);
                  if (isNaN(az.typeCount[ax])) {
                    az.typeCount[ax] = 1;
                  } else {
                    az.typeCount[ax]++;
                  }
                }
              });
            }
          });
        }
        var U = [];
        z.forEach(function (aC, az) {
          var aQ = aC.name;
          var aL = 0;
          var aM = "";
          for (var aA = 0; aA < aC.conglomeration.length; aA++) {
            if (aM !== "") {
              aM += ",";
            }
            sortedAllStrongs = aC.conglomeration[aA].strongs.sort().join(",");
            if (U.includes(sortedAllStrongs)) {
              aC.typeCount[aC.conglomeration[aA].type]--;
              aC.conglomeration.splice(aA, 1);
              aA--;
              aM = aM.slice(0, -1);
            } else {
              aL += aC.conglomeration[aA].count;
              aM += aC.conglomeration[aA].strongs.join(",");
              U.push(sortedAllStrongs);
            }
          }
          if (aC.conglomeration.length < 1) {
            return;
          }
          var ax = "greekMeanings";
          var aw = "greek";
          if (aM.substring(0, 1) === "H") {
            ax = "hebrewMeanings";
            aw = "hebrew";
          }
          var aF = step.searchSelect.sI(aC.typeCount, aQ);
          var aH = "";
          var aE = "";
          var aO = "";
          var av = [];
          for (var aP in aC.typeCount) {
            if (aC.typeCount.hasOwnProperty(aP)) {
              av.push(aC.typeCount[aP]);
            }
          }
          var ay = 0;
          var aI = true;
          for (var aK = 0; aK < av.length; aK++) {
            if (av[aK] === 1) {
              ay++;
            } else {
              if (av[aK] !== 0) {
                aI = false;
                break;
              }
            }
          }
          if (ay === 1 && aI) {
            aO = __s.occurs_in_total;
          } else {
            aO = __s.occur_in_total;
          }
          aE = '<span class="srchFrequency"> ' + aO + " - " + aL + " x</span>";
          var aG = "";
          var aJ = null;
          var aD = false;
          var aN = false;
          var aB = "";
          step.searchSelect.sq(
            v,
            aM,
            ax,
            aF,
            aH,
            aE,
            aG,
            aw,
            aJ,
            aD,
            aN,
            aB,
            G
          );
          aC.conglomeration.forEach(function (aW, aY) {
            var aR = aY + 1;
            var aT = "";
            alternateNamesList = aW.alternateNames;
            if (alternateNamesList) {
              aT = "(also ";
              alternateNamesList.forEach(function (a2) {
                aT += '"' + a2 + '", ';
              });
              aT = aT.slice(0, -2);
              aT += ") ";
            }
            var aZ = aW.strongs.join(",");
            var a1 = aW.brief + " " + aT;
            var a0 = aR + ") ";
            var aX = '<span class="srchFrequency"> - ' + aW.count + " x</span>";
            var aS = "";
            var aV = true;
            var aU = "";
            step.searchSelect.sq(
              v,
              aZ,
              ax,
              a1,
              a0,
              aX,
              aS,
              aw,
              aJ,
              aD,
              aV,
              aU,
              G
            );
          });
          if (az < z.length - 1) {
            v.append(
              '<hr style="border: none; border-top: 1px solid #ccc; margin: 0; padding: 0;">'
            );
          }
        });
        if (v[0].lastChild && v[0].lastChild.tagName === "HR") {
          v[0].lastChild.remove();
        }
        if (m) {
          step.searchSelect.handleLanguageButton("init");
        } else {
          step.searchSelect.handleLanguageButton();
        }
        if (step.searchSelect.searchRange !== "Gen-Rev") {
          $(".srchFrequency").hide();
        }
      }).fail(function () {
        changeBaseURL();
      });
      step.searchSelect.svE = g;
      step.searchSelect.sG();
    } else {
      for (o = 0; o < step.searchSelect.svC; o++) {
        $("#searchResults" + step.searchSelect.svB[o]).text("");
      }
      showPreviousSearch();
    }
  },
  sY: function (d, e) {
    var c = {
      vocabInfos: [d],
    };
    step.util.un(c, e);
    var b =
      typeof c.vocabInfos[0].versionCountOT === "number"
        ? c.vocabInfos[0].versionCountOT
        : 0;
    var a =
      typeof c.vocabInfos[0].versionCountNT === "number"
        ? c.vocabInfos[0].versionCountNT
        : 0;
    return [b, a, c.vocabInfos[0].notInBibleSelected];
  },
  sZ: function (y, v, n, q) {
    var t = 0;
    var e = [];
    var m = "";
    var g = 0;
    var h = 0;
    var c = 0;
    var x = 0;
    var w = "";
    var f = [];
    var d = [];
    var o = "";
    for (var r = 0; r < y.length; r++) {
      var b = y[r].itemType;
      if (y[r].grouped) {
        alert("There should be not group here");
        continue;
      }
      if (b === GREEK || b === HEBREW) {
        if (
          Array.isArray(n) &&
          n.length > 0 &&
          !n.includes(y[r].suggestion.strongNumber)
        ) {
          continue;
        }
        if (!f.includes(y[r].suggestion.strongNumber)) {
          f.push(y[r].suggestion.strongNumber);
          h += parseInt(y[r].suggestion.popularity);
          var s = this.sY(y[r].suggestion, q);
          c += s[0];
          x += s[1];
          w = step.searchSelect.sa(w, s[2]);
          if (!Array.isArray(n) || (Array.isArray(n) && n.length == 1)) {
            o = y[r].suggestion.popularityList;
          }
        }
        str2Search = step.searchSelect.sr(
          y[r].suggestion.strongNumber,
          y[r].suggestion._detailLexicalTag
        );
        if (e.includes(str2Search)) {
          continue;
        }
        e.push(str2Search);
        if (
          Array.isArray(y[r].suggestion._detailLexicalTag) &&
          y[r].suggestion._detailLexicalTag.length > 0
        ) {
          g += y[r].suggestion._detailLexicalTag.length;
          for (var p = 0; p < y[r].suggestion._detailLexicalTag.length; p++) {
            if (y[r].suggestion._detailLexicalTag[p][1].indexOf(v) != 0) {
              if (!d.includes(y[r].suggestion._detailLexicalTag[p][1])) {
                d.push(y[r].suggestion._detailLexicalTag[p][1]);
                h += parseInt(y[r].suggestion._detailLexicalTag[p][3]);
                var u = {
                  strongNumber: y[r].suggestion._detailLexicalTag[p][1],
                  freqList: y[r].suggestion._detailLexicalTag[p][6],
                };
                var s = this.sY(u, q);
                c += s[0];
                x += s[1];
                w = step.searchSelect.sa(w, s[2]);
              }
            }
          }
        } else {
          g++;
        }
        var a = parseInt(y[r].suggestion.popularity);
        if (m === "" || a > t) {
          m = step.searchSelect.sK(y[r].suggestion);
          t = a;
          w = step.searchSelect.sa(w, s[2]);
        }
      } else {
        g++;
        h += parseInt(y[r].suggestion.popularity);
        var s = this.sY(y[r].suggestion, q);
        c += s[0];
        x += s[1];
        w = step.searchSelect.sa(w, s[2]);
      }
    }
    return [m, g, f, d, h, c, x, o, w];
  },
  sa: function (e, d) {
    if (typeof d === "string" && d.length > 0) {
      if (e === "") {
        e = d;
      } else {
        var c = d.split(",");
        for (var b = 0; b < c.length; b++) {
          var a = e.split(",");
          if (!a.includes(c[b])) {
            e += "," + c[b];
          }
        }
      }
    }
    return e;
  },
  sd: function (p, b, q, i, f, d, t, s, e, o, h, r, m, g, c, n) {
    if (
      step.searchSelect.LASTSUGGESTKEY ===
      p + step.searchSelect.version + b
    ) {
      data = step.searchSelect.LASTSUGGESTDATA;
      step.searchSelect.si(data, p, q, i, f, d, t, s, e, o, h, r, m, g, c, n);
      return;
    }
    var a =
      SEARCH_AUTO_SUGGESTIONS +
      p +
      "/" +
      VERSION +
      "%3D" +
      step.searchSelect.version +
      URL_SEPARATOR +
      LIMIT +
      "%3D" +
      b +
      URL_SEPARATOR +
      "?lang=" +
      step.searchSelect.userLang;
    $.getJSON(a, function (v) {
      for (var u = 0; u < v.length; u++) {
        if (
          typeof v[u].suggestion._detailLexicalTag === "string" &&
          v[u].suggestion._detailLexicalTag !== ""
        ) {
          v[u].suggestion._detailLexicalTag = JSON.parse(
            v[u].suggestion._detailLexicalTag
          );
        }
      }
      step.searchSelect.LASTSUGGESTKEY = p + step.searchSelect.version + b;
      step.searchSelect.LASTSUGGESTDATA = v;
      step.searchSelect.si(v, p, q, i, f, d, t, s, e, o, h, r, m, g, c, n);
    });
  },
  se: function (a, h, e, c, g) {
    var f = a.substring(0, 1) === "H" ? HEBREW : GREEK;
    if (step.state.isLocal()) {
      step.searchSelect.sf(a, f, h, e, c, g);
      return;
    }
    var b = a;
    if (b.search(/^([GH]\d{4,5})[A-Za-z]$/) == 0) {
      b = RegExp.$1;
    }
    var d = step.state.getCurrentVersion();
    if (d !== "") {
      d += "/";
    }
    $.getJSON("/html/lexicon/" + d + b + ".json", function (n) {
      var m = [];
      for (var o = 0; o < n.v.length; o++) {
        var p = step.util.MX(n, o);
        p.itemType = f;
        m.push(p);
      }
      step.searchSelect.sl(m, a, h, e, c, f, g);
    }).error(function () {
      step.searchSelect.sf(a, f, h, e, c, g);
    });
  },
  sf: function (a, f, g, d, c, e) {
    var b =
      SEARCH_AUTO_SUGGESTIONS +
      a +
      "/" +
      VERSION +
      "%3D" +
      step.searchSelect.version +
      URL_SEPARATOR +
      LIMIT +
      "%3D" +
      f +
      URL_SEPARATOR +
      "?lang=" +
      step.searchSelect.userLang;
    $.getJSON(b, function (m) {
      for (var h = 0; h < m.length; h++) {
        if (
          typeof m[h].suggestion._detailLexicalTag === "string" &&
          m[h].suggestion._detailLexicalTag !== ""
        ) {
          m[h].suggestion._detailLexicalTag = JSON.parse(
            m[h].suggestion._detailLexicalTag
          );
        }
      }
      step.searchSelect.LASTSUGGESTKEY = a + step.searchSelect.version + f;
      step.searchSelect.LASTSUGGESTDATA = m;
      step.searchSelect.sl(m, a, g, d, c, f, e);
    }).fail(function () {
      changeBaseURL();
    });
  },
  sg: function (u, s, t, c, n, p, o, h, b, f, r, g, m, q, e) {
    var d = u.substring(0, 1) === "H" ? HEBREW : GREEK;
    if (step.state.isLocal()) {
      step.searchSelect.sd(u, d, s, t, c, n, p, o, h, b, f, r, g, m, q, e);
      return;
    }
    var a = u;
    if (a.search(/^([GH]\d{4,5})[A-Za-z]$/) == 0) {
      a = RegExp.$1;
    }
    var i = step.state.getCurrentVersion();
    if (i !== "") {
      i += "/";
    }
    $.getJSON("/html/lexicon/" + i + a + ".json", function (w) {
      var v = [];
      for (var x = 0; x < w.v.length; x++) {
        var y = step.util.MX(w, x);
        y.itemType = d;
        v.push(y);
      }
      step.searchSelect.si(v, u, s, t, c, n, p, o, h, b, f, r, g, m, q, e);
    }).error(function () {
      step.searchSelect.sd(u, d, s, t, c, n, p, o, h, b, f, r, g, m, q, e);
    });
  },
  si: function (d, o, p, h, e, b, t, s, c, n, g, q, i, f, a, m) {
    var r = step.searchSelect.sZ(d, o, p, h);
    if (typeof b === "function") {
      if (b.name === "_addFreqListQTip") {
        b(p, h, r[7], e);
      } else {
        if (b.name === "svP") {
          b(r, p, t, s, c, o, n, e, g, q, i, f, a, m, h);
        }
      }
    }
  },
  _addFreqListQTip: function (e, b, c, a) {
    if (a && e.length == 1) {
      var d = step.util.MY(e[0], c, b, "", "");
      a.append("&nbsp;").append(d);
      step.searchSelect.sG();
    }
  },
  svP: function (q, z, u, t, o, p, a, v, i, y, n, r, x, e, B) {
    var d = q[1];
    var A = q[0];
    var s = "";
    if (d > 1) {
      s = "<span>(" + d + " forms)</span>";
    } else {
      if (Array.isArray(z) && z.length == 1) {
        u = ' title="' + z[0] + '" ';
        t = t.replace(p + "*", z[0]);
      }
    }
    var w = q[4];
    var f = q[5];
    var C = q[6];
    var c = step.util.uAF(
      {
        strongNumber: p,
        versionCountOT: f,
        versionCountNT: C,
      },
      w,
      f > 0 && C > 0,
      q[8]
    );
    t += '<span class="srchFrequency"> ' + c + "</span>";
    var h = p;
    if (a) {
      p = q[2].toString();
      if (A !== "") {
        r = A;
      }
    }
    if (q[3].length > 0) {
      p += "," + q[3].toString();
      u = ' title="' + __s.all + " forms: " + p + '" ';
    }
    var D = "step.searchSelect.sW('" + n + "','" + p + "')";
    var g = $(
      '<a style="padding:0px"' +
        u +
        ' onclick="javascript:' +
        D +
        '">' +
        t +
        "</a>"
    );
    var m =
      "step.searchSelect.sm('" +
      h +
      "','" +
      z +
      "','" +
      e +
      "','" +
      o +
      "','" +
      B +
      "')";
    step.searchSelect.sp(n, p, "", B.split(",")[0], g);
    if (!step.searchSelect.so(D, m, s)) {
      v.append(i)
        .append(y)
        .append(g)
        .append(" - ")
        .append(step.searchSelect.sn(r, x))
        .append(" ")
        .append(
          '<a style="padding:0px" title="Select forms" onmousemove="javascript:$(\'#quickLexicon\').remove()" onmouseover="javascript:$(\'#quickLexicon\').remove()" href="javascript:' +
            m +
            '">' +
            s +
            "</a>"
        );
      if (d < 2) {
        var b = step.util.MY(p, q[7], B, "", "");
        v.append("&nbsp;").append(b);
        step.searchSelect.sG();
      }
    }
  },
  sj: function (B, y, x, q, h, w, p, a, t) {
    var e = 0;
    var n = 0;
    var A = 0;
    var z = "";
    var f = [];
    for (var u = 0; u < B.length; u++) {
      if (B[u].itemType === GREEK || B[u].itemType === HEBREW) {
        if (!p.includes(B[u].suggestion.strongNumber)) {
          p.push(B[u].suggestion.strongNumber);
        }
        if (a.length == 0 || a.includes(B[u].suggestion.strongNumber)) {
          w[u] = parseInt(B[u].suggestion.popularity);
          var m = [w[u], 0, 0];
          if (typeof B[u].suggestion._detailLexicalTag === "object") {
            m = step.searchSelect.ss(
              B[u].suggestion.strongNumber,
              w[u],
              B[u].suggestion._detailLexicalTag,
              t
            );
            z = step.searchSelect.sa(z, m[3]);
          }
          w[u] = m[0];
          if (!f.includes(B[u].suggestion.strongNumber)) {
            f.push(B[u].suggestion.strongNumber);
            e += w[u];
            n += m[1];
            A += m[2];
          }
          var g = step.searchSelect
            .sr(
              B[u].suggestion.strongNumber,
              B[u].suggestion._detailLexicalTag
            )
            .split(",");
          for (var o = 0; o < g.length; o++) {
            if (!f.includes(g[o])) {
              f.push(g[o]);
            }
          }
        }
      }
    }
    var d = step.searchSelect.svB.indexOf(x);
    var s = $("#searchResults" + step.searchSelect.svB[d]);
    var r = "<span>" + y + "*</span>";
    var v = __s.has_various_and_related_forms;
    if (x === GREEK_MEANINGS || x === HEBREW_MEANINGS) {
      r = "<span>";
      if (a.length > 1) {
        r += a.length + " " + __s.different + " ";
      }
      r +=
        y +
        "* (<i>" +
        B[0].suggestion.stepTransliteration +
        "</i>) " +
        __s.and_synonyms_with_the_meaning +
        " " +
        q +
        "</span>";
      v = "";
    } else {
      r += " (<i>" + B[0].suggestion.stepTransliteration + "</i>)";
    }
    var b = n > 0 && A > 0;
    var c = step.util.uAF(
      {
        strongNumber: y,
        versionCountOT: n,
        versionCountNT: A,
      },
      e,
      b,
      z
    );
    r += '<span class="srchFrequency"> ' + c + "</span>";
    step.searchSelect.sq(
      s,
      f.toString(),
      x,
      r,
      "",
      v,
      "",
      h,
      null,
      false,
      false,
      "",
      t,
      false,
      false
    );
    return b;
  },
  sk: function (b, J, c, E, h, a, p, A, d) {
    var y = "";
    var K = 0;
    var g = 0;
    var C = "";
    var f = step.searchSelect.svB.indexOf(E);
    var t = $("#searchResults" + step.searchSelect.svB[f]);
    for (var w = 0; w < b.length; w++) {
      var B = parseInt(b[w][0]);
      var n = J[B].itemType;
      if (J[B].grouped) {
        continue;
      }
      if (
        (E === GREEK_MEANINGS || E === HEBREW_MEANINGS) &&
        a.length > 0 &&
        !a.includes(J[B].suggestion.strongNumber)
      ) {
        continue;
      }
      if (
        n === GREEK ||
        n === HEBREW ||
        n === GREEK_MEANINGS ||
        n === HEBREW_MEANINGS
      ) {
        var s = "";
        var F = J[B].suggestion.strongNumber;
        var q = F;
        var x = step.searchSelect.sK(J[B].suggestion);
        var r = F[0].toUpperCase();
        s = J[B].suggestion.type + ": ";
        q = step.searchSelect.sr(
          J[B].suggestion.strongNumber,
          J[B].suggestion._detailLexicalTag
        );
        if (p.includes(q)) {
          continue;
        }
        p.push(q);
        var u = J[B].suggestion.popularity;
        var I = J[B].suggestion.strongNumber;
        var v = "";
        var D = {
          vocabInfos: [
            {
              strongNumber: F,
              freqList: J[B].suggestion.popularityList,
            },
          ],
        };
        step.util.un(D, A);
        var o =
          typeof D.vocabInfos[0].versionCountOT === "number"
            ? D.vocabInfos[0].versionCountOT
            : 0;
        var H =
          typeof D.vocabInfos[0].versionCountNT === "number"
            ? D.vocabInfos[0].versionCountNT
            : 0;
        var G = step.searchSelect.sa("", D.vocabInfos[0].notInBibleSelected);
        if (I.slice(0, -1) === c) {
          K++;
          if (y !== "") {
            y += ",";
          }
          y += I;
          g += o + H;
          C = J[B].suggestion.stepTransliteration;
        }
        if (
          Array.isArray(J[B].suggestion._detailLexicalTag) &&
          J[B].suggestion._detailLexicalTag.length > 0
        ) {
          if (step.name_types.includes(J[B].suggestion.type)) {
            v = step.searchSelect.sb(
              "type_of_word_with_multiple_names",
              J[B].suggestion.type,
              J[B].suggestion._detailLexicalTag.length
            );
          } else {
            v = step.searchSelect.sb(
              "type_of_word_with_multiple_synonyms",
              J[B].suggestion.type,
              J[B].suggestion._detailLexicalTag.length
            );
          }
          v += ": " + x.split(":")[0] + ": ";
          var m = step.searchSelect.ss(
            F,
            u,
            J[B].suggestion._detailLexicalTag,
            A
          );
          d = d || (m[1] > 0 && m[2] > 0) ? true : false;
          var e = step.util.uAF(
            {
              strongNumber: F,
              versionCountOT: m[1],
              versionCountNT: m[2],
            },
            m[0],
            d,
            G
          );
          s = __s.all + " " + e + " " + __s.occurrences;
          x = "";
        } else {
          d = d || (o > 0 && H > 0) ? true : false;
          var e = step.util.uAF(
            {
              strongNumber: F,
              versionCountOT: o,
              versionCountNT: H,
            },
            u,
            d,
            G
          );
          if (
            (r === "H" || r === "G") &&
            typeof J[B].suggestion._searchResultRange === "string"
          ) {
            var z = q.indexOf(",") > -1;
            s +=
              '<i class="srchTransliteration">' +
              J[B].suggestion.stepTransliteration +
              '</i><span class="srchParathesis"> (</span><span class="srchOriginal_Language">' +
              J[B].suggestion.matchingForm +
              '</span><span class="srchSpaceStrong"> </span><span class="srchStrong_number">' +
              I +
              '</span><span class="srchParathesis">)</span>' +
              step.util.u6(J[B].suggestion._searchResultRange, z) +
              '<span class="srchFrequency"> ' +
              e +
              "</span>";
          } else {
            s +=
              '<i class="srchTransliteration">' +
              J[B].suggestion.stepTransliteration +
              '</i><span class="srchParathesis"> (</span><span class="srchOriginal_Language">' +
              J[B].suggestion.matchingForm +
              '</span><span class="srchSpaceStrong"> </span><span class="srchStrong_number">' +
              I +
              '</span><span class="srchParathesis">)</span><span class="srchFrequency"> ' +
              e +
              "</span>";
          }
        }
        step.searchSelect.sq(
          t,
          q,
          n,
          s,
          v,
          x,
          "",
          h,
          null,
          false,
          true,
          "",
          A,
          false,
          false
        );
        step.searchSelect.st(t, F, J[B].suggestion._detailLexicalTag, B, A, d);
      }
    }
    t.append("<br>");
    if (K > 1) {
      t.append("<br><hr><br>");
      step.searchSelect.sq(
        t,
        y,
        n,
        c,
        __s.find_all +
          " <a title='Document on the Strong number system' href='https://docs.google.com/document/d/1PE_39moIX8dyQdfdiXUS5JkyuzCGnXrVhqBM87ePNqA/preview#heading=h.4a5fldrviek' target='_blank'>" +
          __s.simple_strong +
          "</a>: ",
        '(<i class="srchTransliteration">' +
          C +
          '</i> - <span class="srchFrequency"> ' +
          g +
          " x</span>)",
        "",
        h,
        null,
        false,
        false,
        "",
        A,
        false,
        false
      );
    }
  },
  sl: function (e, q, r, o, c, a, m) {
    var p = [];
    for (var d = 0; d < step.searchSelect.svC; d++) {
      $("#searchResults" + step.searchSelect.svB[d]).empty();
    }
    var g = [];
    var n = r == null || r === "" || r === "null" ? [] : r.split(",");
    var t = {};
    var h = [];
    var f = false;
    if (e.length > 1) {
      f = step.searchSelect.sj(e, q, o, c, a, t, g, n, m);
      for (var s in t) {
        h.push([s, t[s]]);
      }
      h.sort(function (u, i) {
        return i[1] - u[1];
      });
    }
    if (h.length == 0) {
      h.push(["0", 0]);
    }
    step.searchSelect.sk(h, e, q, o, a, n, p, m, f);
    for (var b = 0; b < step.searchSelect.svC; b++) {
      if (step.searchSelect.svB[b] === o) {
        $(".select-" + step.searchSelect.svB[b]).show();
      } else {
        $(".select-" + step.searchSelect.svB[b]).hide();
      }
    }
    $(".detailLexTriangle").click(step.searchSelect.su);
    $(".search-type-column").hide();
    step.searchSelect.sG();
  },
  sm: function (a, e, c, b, d) {
    $("#quickLexicon").remove();
    $("#warningMessage").text("");
    $("textarea#userTextInput").hide();
    $("#searchButton").hide();
    $("#updateButton").hide();
    $("#advancedsearchonoff").hide();
    $("#previousSearchDropDown").hide();
    step.searchSelect.svD = 3;
    $("#langButtonForm").hide();
    $("#srchModalBackButton").show();
    step.searchSelect.se(a, e, c, b, d);
  },
  sn: function (b, c) {
    if (b === "") {
      return "";
    }
    var a =
      "<span onmouseover=\"javascript:$('#quickLexicon').remove()\" onmousemove=\"javascript:$('#quickLexicon').remove()\" ";
    if (c !== "") {
      a += ' title="' + c + '"';
    }
    a += ">" + b + "</span>";
    return a;
  },
  so: function (m, h, e) {
    var c = h.split(",")[0];
    for (var g = 3; g < step.searchSelect.svC - 1; g++) {
      var b = $("#searchResults" + step.searchSelect.svB[g]).html();
      if (typeof b === "string" && b !== "") {
        var a = b.split("<a");
        for (var f = 0; f < a.length; f++) {
          var d = a[f].indexOf(m);
          if (d > -1) {
            d = a[f + 1].indexOf(c);
            if (d > -1) {
              d = a[f + 1].indexOf(e);
              if (d > -1) {
                return true;
              }
            }
          }
        }
      }
    }
    return false;
  },
  sp: function (e, d, f, a, g) {
    if (step.touchDevice || $(window).height() < 600) {
      return;
    }
    if (e !== "strong") {
      g.hover(function (h) {
        $("#quickLexicon").remove();
      });
      return;
    }
    var c = "";
    if (d.indexOf(",") > -1) {
      var b = d.split(",").length;
      if ($("#userTextInput").is(":visible")) {
        c =
          "Search of " +
          b +
          " words with same meaning, click on '<i>" +
          b +
          " forms</i>' at the end of this line for more information";
      } else {
        if (typeof f === "string" && f.indexOf("docs.google.com") > -1) {
          c = sprintf(__s.old_strong_explain, b);
        } else {
          c = sprintf(__s.search_word_same_meaning, b);
        }
      }
    }
    g.hover(
      function (h) {
        if (h.type === "mouseleave") {
          $("#quickLexicon").remove();
          return;
        }
        require(["quick_lexicon"], function () {
          step.util.delay(
            function () {
              step.util.ui.iQ(
                d,
                "",
                "",
                a,
                step.util.uP(),
                h,
                h.pageY,
                null,
                c
              );
            },
            MOUSE_PAUSE,
            "show-quick-lexicon"
          );
        });
      },
      function () {
        step.util.delay(undefined, 0, "show-quick-lexicon");
        $("#quickLexicon").remove();
      }
    );
  },
  sq: function (A, t, g, x, D, v, C, f, F, w, J, s, I) {
    var H = 0;
    var d = 11;
    if (
      !$("#srchModalBackButton").is(":hidden") ||
      A.selector === "#searchResultsnames"
    ) {
      d = 33;
    }
    var n = "";
    var b = Array.isArray(F);
    var a = A.html();
    var p = g;
    if (p === NAVE_SEARCH || p === NAVE_SEARCH_EXTENDED) {
      p = SUBJECT_SEARCH;
    }
    step["SearchCount" + p]++;
    H = step["SearchCount" + p];
    if (H >= d) {
      return;
    }
    if (typeof a === "string" && a !== "") {
      if (H < d + 1 || f !== "") {
        if (a.slice(-5) !== "</ol>") {
          n = "<br>";
        }
        if (J) {
          n +=
            "<br style='line-height:" + (step.touchDevice ? "2" : "5") + "px'>";
        }
      }
    }
    if (J) {
      n += "&nbsp;&nbsp;&nbsp;";
    }
    if (H < d - 1 || f !== "") {
      var z = "";
      if (t.substring(0, 1) === "H" || t.substring(0, 1) === "G") {
        z = ' title="' + t;
        if (b) {
          z += "*";
        }
        z += '" ';
      }
      var r =
        g === GREEK ||
        g === GREEK_MEANINGS ||
        g === HEBREW ||
        g === HEBREW_MEANINGS
          ? "strong"
          : g;
      if (b || w) {
        var y = $("<span></span");
        A.append(y);
        this.sg(
          t,
          F,
          I,
          y,
          step.searchSelect.svP,
          z,
          x,
          s,
          b,
          n,
          D,
          r,
          v,
          C,
          g
        );
      } else {
        var e = "";
        var K =
          " onclick=\"javascript:step.searchSelect.sW('" +
          r +
          "','" +
          t +
          "','" +
          x.replace(/["'\u201C\u201D\u2018\u2019]/g, "%22") +
          "')\"";
        var m = $(
          '<a style="padding:0px;' + e + '"' + z + K + ">" + x + "</a>"
        );
        var G = $(A).is($("#searchResultsnames"));
        if (!G) {
          this.sp(r, t, D, I.split(",")[0], m);
        }
        const E = !(D === "");
        var B;
        if (E) {
          const i = $('<div class="search-sub-suggestion">');
          const q = $('<div class="search-sub-suggestion-part">');
          const o = $('<div class="search-sub-suggestion-part">');
          q.append("&nbsp;&nbsp;&nbsp;" + D);
          o.append(m).append(" " + this.sn(v, C));
          i.append(q).append(o);
          A.append(i);
        } else {
          A.append(n + D)
            .append(m)
            .append(" " + this.sn(v, C));
        }
        if (r === "strong" && t.indexOf(",") == -1 && !E) {
          var u = t;
          if (isNaN(t.slice(-1))) {
            u = t.slice(0, -1);
          }
          var c = $("<span></span");
          A.append("&nbsp;").append(c);
          var h;
          if (!G) {
            h = step.searchSelect._addFreqListQTip;
          }
          this.sg(u, [t], I, c, h);
        }
      }
      return;
    }
    if (H < d) {
      if (g === GREEK_MEANINGS || g === HEBREW_MEANINGS) {
        A.append(n)
          .append("&nbsp;&nbsp;&nbsp;")
          .append(
            '<a onmousemove="javascript:$(\'#quickLexicon\').remove()" onmouseover="javascript:$(\'#quickLexicon\').remove()" style="padding:0px" title="click to see more suggestions" href="javascript:step.searchSelect.sX(\'' +
              g +
              "')\"><b>list all with similar meaning...</b></a>"
          );
      } else {
        if (g === GREEK || g === HEBREW) {
          if (n === "") {
            A.append("<br>");
          }
          A.append(n)
            .append("&nbsp;&nbsp;&nbsp;")
            .append(
              '<a onmousemove="javascript:$(\'#quickLexicon\').remove()" onmouseover="javascript:$(\'#quickLexicon\').remove()" style="padding:0px" title="click to see more suggestions" href="javascript:step.searchSelect.sX(\'' +
                g +
                "')\"><b>list all with similar " +
                g.charAt(0).toUpperCase() +
                g.slice(1).toLowerCase() +
                " spelling...</b></a>"
            );
        }
      }
    }
    return;
  },
  sr: function (b, a) {
    if (Array.isArray(a) && a.length > 0) {
      var c = [b];
      a.forEach(function (e, d) {
        if (c.includes(e[1])) {
          return;
        }
        c.push(e[1]);
      });
      c.sort();
      return c.join(",");
    }
    return b;
  },
  ss: function (a, c, b, f) {
    c = parseInt(c);
    var g = 0;
    var e = 0;
    var d = "";
    if (Array.isArray(b)) {
      b.forEach(function (i, h) {
        if (i[1] !== a) {
          c += parseInt(i[3]);
        }
        var m = {
          vocabInfos: [
            {
              strongNumber: i[1],
              freqList: i[6],
            },
          ],
        };
        step.util.un(m, f);
        g +=
          typeof m.vocabInfos[0].versionCountOT === "number"
            ? m.vocabInfos[0].versionCountOT
            : 0;
        e +=
          typeof m.vocabInfos[0].versionCountNT === "number"
            ? m.vocabInfos[0].versionCountNT
            : 0;
        d = step.searchSelect.sa(d, m.vocabInfos[0].notInBibleSelected);
      });
    }
    return [c, g, e, d];
  },
  st: function (f, i, a, e, g, d) {
    if (!a || !Array.isArray(a)) {
      return;
    }
    var c = f.find(".search-sub-suggestion");
    if (c.length > 0) {
      c = $(c[c.length - 1]);
    } else {
      c = f;
    }
    c.append(
      "<a id='detailLexSelect" +
        e +
        "' class='detailLexTriangle glyphicon glyphicon-triangle-bottom'></a>"
    );
    var h = $(
      "<ol class='detailLex" +
        e +
        "' style='margin-bottom:0px;line-height:14px'>"
    );
    var m = [];
    var b = false;
    a.forEach(function (o, n) {
      if (m.includes(o[1])) {
        return;
      }
      m.push(o[1]);
      var u = "&nbsp;&nbsp;&nbsp;";
      var p = $("<li>");
      if (o[1] === i) {
        p.append(
          "<span class='detailLex" +
            e +
            " glyphicon glyphicon-arrow-right' style='font-size:10px'></span>"
        );
        u = "";
      }
      var s = step.searchSelect.ss(o[1], o[3], [o], g);
      d = d || (s[1] > 0 && s[2] > 0) ? true : false;
      var q = step.util.uAF(
        {
          strongNumber: i,
          versionCountOT: s[1],
          versionCountNT: s[2],
        },
        s[0],
        d,
        s[3]
      );
      var r = $(
        '<a class="detailLex' +
          e +
          '" style="padding:0px;color:var(--clrStrongText)" title="' +
          o[1] +
          "\"onclick=\"javascript:step.searchSelect.sW('strong','" +
          o[1] +
          "','" +
          o[1] +
          "')\">" +
          u +
          "" +
          o[0] +
          ': <i class="srchTransliteration">' +
          o[5] +
          '</i><span class="srchParathesis"> (</span><span class="srchOriginal_Language">' +
          o[4] +
          '</span><span class="srchSpaceStrong"> </span><span class="srchStrong_number">' +
          o[1] +
          '</span><span class="srchParathesis">)</span><span class="srchFrequency"> ' +
          q +
          "</span></a>"
      );
      step.searchSelect.sp("strong", o[1], "", g.split(",")[0], r);
      p.append(r).append(
        " - " +
          step.searchSelect.sK({
            strongNumber: o[1],
            gloss: o[2],
          })
      );
      if (o[6] !== "") {
        var t = step.util.MY(o[1], o[6], g, "", "");
        p.append("&nbsp;").append(t);
        b = true;
      }
      h.append(p);
    });
    f.append(h);
    if (b) {
      step.searchSelect.sG();
    }
  },
  su: function (c) {
    var a = c.target.id;
    var b = a.substr(15);
    if (c.target.classList.contains("glyphicon-triangle-right")) {
      $(".detailLex" + b).show();
      $("#" + a)
        .removeClass("glyphicon-triangle-right")
        .addClass("glyphicon-triangle-bottom");
    } else {
      $(".detailLex" + b).hide();
      $("#" + a)
        .removeClass("glyphicon-triangle-bottom")
        .addClass("glyphicon-triangle-right");
    }
  },
  sv: function (a) {
    if (typeof a !== "string" || (a !== "AND" && a !== "OR" && a !== "NOT")) {
      return "a";
    } else {
      return a.substring(0, 1).toLowerCase();
    }
  },
  sw: function (b) {
    var d = step.util.uM("step.previousSearches");
    var e = b;
    var c = [b.toLocaleLowerCase("en-US")];
    if (d != null) {
      d = d.split(";");
      for (var a = 0; a < d.length && a < 9; a++) {
        if (!c.includes(d[a].toLocaleLowerCase("en-US"))) {
          e += ";" + d[a];
          c.push(d[a]);
        }
      }
    }
    step.util.ub("step.previousSearches", e);
  },
  sW: function (n, b, w) {
    $("#quickLexicon").remove();
    step.searchSelect.sw(step.searchSelect.svE);
    var h = step.util.uQ().get("searchTokens") || [];
    var u = "";
    var p =
      this.searchRange === "Gen-Rev"
        ? ""
        : URL_SEPARATOR + "reference=" + this.searchRange;
    var o = "";
    for (var v = 0; v < h.length; v++) {
      var y = h[v].itemType ? h[v].itemType : h[v].tokenType;
      if (y === VERSION) {
        if (u.length > 0) {
          u += URL_SEPARATOR;
        }
        u += "version=" + h[v].item.shortInitials;
      }
    }
    if (typeof b !== "string") {
      b = "";
    }
    var g = 0;
    var t = "";
    var r = "";
    var c;
    if (this.svH) {
      c = this.sv($("#searchAndOrNot option:selected").val());
      for (var v = 0; v < this.svF.length; v++) {
        if (this.svF[v] === "") {
          continue;
        }
        var s = "";
        var d = "";
        if (this.svF[v].substring(0, 1) === "(") {
          s = this.svF[v];
          if (v > 0) {
            d = this.sv($("#searchAndOrNot" + v + " option:selected").val());
          }
          do {
            v++;
          } while (this.svF[v] === "" && v < this.svF.length);
        } else {
          if (this.svF[v].substring(0, 1) === ")") {
            t += this.svF[v];
            continue;
          }
        }
        g++;
        if (g > 1) {
          if (d === "") {
            d = this.sv($("#searchAndOrNot" + v + " option:selected").val());
          }
          t += d + s + g;
        } else {
          t += s + "1";
        }
        r += URL_SEPARATOR + this.svF[v];
      }
    }
    var q = "";
    g++;
    if (n === TEXT_SEARCH) {
      if (w.indexOf(" <sub>and</sub> ") > 0) {
        o = "";
        var e = b.split(" ");
        for (var v = 0; v < e.length; v++) {
          o += URL_SEPARATOR + "text=" + e[v];
        }
      } else {
        o = URL_SEPARATOR + "text=" + b;
      }
    } else {
      if (n === STRONG_NUMBER) {
        var f = b.split(",");
        o = URL_SEPARATOR + "strong=" + f[0];
        step.util.u4(b[0], w);
        if (f.length > 1) {
          q = "(" + g;
          for (var v = 1; v < f.length; v++) {
            g++;
            o += URL_SEPARATOR + "strong=" + f[v];
            q += "o" + g;
            step.util.u4(b[v], w);
          }
          q += ")";
        }
      } else {
        if (typeof n !== "undefined") {
          o = URL_SEPARATOR + n + "=" + b;
        }
      }
    }
    var a = "";
    if (t !== "") {
      a = URL_SEPARATOR + "srchJoin=";
      if (o === "") {
        a += t;
      } else {
        if (g > 1) {
          if (q === "") {
            a += t + c + g;
          } else {
            a += t + c + q;
          }
        }
      }
    } else {
      if (q !== "") {
        a = URL_SEPARATOR + "srchJoin=" + q;
      }
    }
    var m = u + p + a + r + o;
    var x = $("#displayLocation option:selected").val();
    step.util.closeModal("searchSelectionModal");
    if (x === "new") {
      step.util.uY();
    }
    step.router.mD(m, true, true);
  },
  ME: function (a) {
    var b = $("#displayLocation option:selected").val();
    step.util.closeModal("searchSelectionModal");
    if (b === "new") {
      step.util.uY();
    }
    step.router.mC("reference=" + a, false, true);
  },
  sM: function (b) {
    this.svF[b] = "";
    this.svG--;
    showPreviousSearch();
    $("#lOPS_" + b).hide();
    var a = -1;
    var d = false;
    for (var c = 0; c < this.svF.length; c++) {
      if (this.svF[c].substring(0, 1) === "(") {
        a = c;
        d = false;
      } else {
        if (a > -1) {
          if (this.svF[c].substring(0, 1) === ")") {
            if (!d) {
              this.svF[a] = "";
              this.svF[c] = "";
              $("#lOPS_" + a).hide();
              $("#lOPS_" + c).hide();
              this.svG -= 2;
            }
            a = -1;
            d = false;
          } else {
            if (this.svF[c] !== "") {
              d = true;
            }
          }
        }
      }
    }
    if (this.svG == 0) {
      $("#previousSearch").empty();
      $("#updateButton").hide();
    }
  },
  handleAndOrNot: function () {
    this.svJ = true;
    $("#updateButton").show();
  },
  sI: function (f, a) {
    var b = Object.keys(f).length;
    var i = "";
    var d = 0;
    for (var e in f) {
      d++;
      if (f.hasOwnProperty(e) && f[e] > 0) {
        var g = e;
        if (e === "person or group") {
          g = "person_or_group";
        } else {
          if (
            typeof g !== "string" ||
            typeof __s["type_of_word_" + g] !== "string"
          ) {
            e = "word";
            g = "word";
          }
        }
        if (i != "") {
          if (d == b) {
            i += " " + __s.and.toLowerCase() + " ";
          } else {
            i += ", ";
          }
        }
        var h = f[e];
        var c = __s["type_of_word_" + g];
        if (h == 1 && step.userLanguageCode.toLowerCase() === "en") {
          h =
            "aeiou".indexOf(c.substring(0, 1).toLowerCase()) > -1 ? "An" : "A";
          if (d > 1) {
            h = h.toLowerCase();
          }
        }
        if (h > 1) {
          e = step.plural_name_types[e];
        }
        i += h + " " + e;
      }
    }
    return sprintf(__s.type_of_word_named, i, a);
  },
  sb: function (c, b, e) {
    if (b === "person or group") {
      b = "person_or_group";
    }
    if (typeof b !== "string" || typeof __s["type_of_word_" + b] !== "string") {
      b = "word";
    }
    var d = __s["type_of_word_" + b];
    var a = sprintf(__s[c], d, e);
    if (
      step.userLanguageCode.toLowerCase() === "en" &&
      a.substring(0, 2) === "A " &&
      "aeiou".indexOf(d.substring(0, 1).toLowerCase()) > -1
    ) {
      a = "An " + d.substr(2);
    }
    return a;
  },
  sc: function () {
    var d = [];
    var q = step.userLanguageCode;
    if (q === "zh_TW") {
      q = "zh-tw";
    }
    var p;
    try {
      p = new Intl.DisplayNames([q], {
        type: "language",
      });
    } catch (c) {
      p = new Intl.DisplayNames(["en"], {
        type: "language",
      });
    }
    var e = 0;
    var h = step.util.uQ().get("searchTokens") || [];
    for (var f = 0; f < h.length; f++) {
      var a = h[f];
      var n = a.itemType ? a.itemType : a.tokenType;
      if (n === VERSION) {
        var o = a.token ? a.token : a.item.initials;
        if (typeof o === "string" || o !== "") {
          var b = step.keyedVersions[o];
          if (typeof b === "object") {
            var m = b.languageCode;
            if (typeof m === "string") {
              if (" grc hbo ".indexOf(m) == -1) {
                var g = b.originalLanguage;
                if (typeof g !== "string" || g === "" || g === m) {
                  try {
                    g = p.of(m);
                  } catch (c) {
                    g = b.languageName;
                  }
                  if (g === m) {
                    g = b.languageName;
                  }
                }
                if (d.indexOf(g) == -1) {
                  e++;
                  if (e > 3) {
                    d.push("...");
                    break;
                  }
                  d.push(step.util.MS(g));
                }
              }
            }
          }
        }
      }
    }
    if (e < 4 && d.indexOf("English") == -1) {
      if (e === 3) {
        d.push("...");
      } else {
        try {
          d.push(step.util.MS(p.of("en")));
        } catch (c) {}
      }
    }
    return d.join(", ");
  },
};
window.step = window.step || {};
step.copyText = {
  initVerseSelect: function () {
    var a = $(".versenumber");
    step.util.closeModal("searchSelectionModal");
    step.util.closeModal("passageSelectionModal");
    this._displayVerses();
    if (step.util.uQ().get("extraVersions") !== "") {
      $("#includeNotes").hide();
      $("#includeXRefs").hide();
    }
  },
  _displayVerses: function () {
    $("#bookchaptermodalbody").empty();
    var a = this._buildHeaderAndSkeleton();
    $("#bookchaptermodalbody").append(a);
    $("#bookchaptermodalbody").append(this._buildChapterVerseTable(-1));
  },
  _buildHeaderAndSkeleton: function (a) {
    var b =
      '<div class="header" style="overflow-y:auto"><h4>' +
      __s.please_select_first_version_to_copy +
      "</h4>";
    return b;
  },
  goCopy: function (c, ai) {
    var M = step.util.uc(step.util.uP());
    var ah = $(M).find(".passageContentHolder").clone();
    if (c > ai) {
      var f = c;
      c = ai;
      ai = f;
    }
    var F = $(ah).find(".versenumber");
    if (F.length == 0) {
      F = $(ah).find(".verselink");
    }
    var p = 0;
    if (ai < F.length - 1) {
      for (var Z = F.length - 1; Z > ai; Z--) {
        var d = false;
        var Q = 0;
        var r = $(F[Z]).parent();
        while (!d && Q < 6) {
          if (
            r.hasClass("verse") ||
            r.hasClass("row") ||
            r.hasClass("verseGrouping") ||
            r.hasClass("interlinear")
          ) {
            r.remove();
            d = true;
            p++;
          } else {
            r = r.parent();
          }
          Q++;
        }
      }
    }
    if (c > 0) {
      for (var Z = c - 1; Z >= 0; Z--) {
        var d = false;
        var Q = 0;
        var r = $(F[Z]).parent();
        while (!d && Q < 6) {
          if (
            r.hasClass("verse") ||
            r.hasClass("row") ||
            r.hasClass("verseGrouping") ||
            r.hasClass("interlinear")
          ) {
            r.remove();
            d = true;
            p++;
          } else {
            r = r.parent();
          }
          Q++;
        }
      }
    }
    var w = "";
    if ($("#selectnotes").prop("checked")) {
      var X = $(ah).find(".note");
      for (var W = 0; W < X.length; W++) {
        var v = $(X[W]).find("a");
        if (v.length > 1) {
          P = "n" + (W + 1);
          J = $(X[W]).find(".inlineNote").text().replace(//, "");
          $("<span>(" + P + ") </span>").insertAfter(X[W]);
          w += "\n(" + P + ") " + J;
        }
      }
    }
    var u = "";
    if ($("#selectxref").prop("checked")) {
      var X = $(ah).find(".note");
      for (var W = 0; W < X.length; W++) {
        var v = $(X[W]).find("a");
        if (v.length == 1) {
          var P = $(v).text();
          var J = "";
          var e = $(".margin");
          if (e.length > 0) {
            for (var V = 0; V < e.length; V++) {
              if (P === $(e[V]).find("strong").text()) {
                var L = $(e[V]).find(".linkRef");
                for (var T = 0; T < L.length; T++) {
                  if (T > 0) {
                    J += ", ";
                  }
                  J += $(L[T]).text();
                }
                continue;
              }
            }
          }
        }
        if (J !== "") {
          $("<span>(" + P + ") </span>").insertAfter(X[W]);
          u += "\n(" + P + ") " + J;
        }
      }
    }
    $(ah).find(".notesPane").remove();
    $(ah).find(".note").remove();
    if ($(ah).find(".verseGrouping").length == 0) {
      $(ah).find(".heading").remove();
    } else {
      $(ah).find(".heading").prepend("\n");
      var t = $(ah).find(".singleVerse");
      for (var ac = 0; ac < t.length; ac++) {
        $(t[ac]).html(
          $(t[ac])
            .html()
            .replace(/(>\(\w{2,8}\))\n/, "$1")
        );
      }
      $(t).prepend("\n");
    }
    $(ah).find(".stepButton").remove();
    $(ah).find(".level2").text("\t");
    $(ah).find(".level3").text("\t\t");
    $(ah).find(".level4").text("\t\t\t");
    $(ah).find(".level5").text("\t\t\t\t");
    $(ah).find(".startLineGroup").replaceWith("\n");
    $(ah).find("h2.xgen").prepend("\n");
    $(ah).find("h3.psalmHeading").append("\n");
    if ($(ah).find(".headingVerseNumber").length > 0) {
      $(ah).find(".headingVerseNumber").prepend("\n");
    }
    var O = $(ah).find(".interlinear");
    for (var aa = 0; aa < O.length; aa++) {
      if ($($(O[aa]).find(".interlinear")).length == 0) {
        var D = $(O[aa]).text();
        if (D.indexOf("[") > -1) {
          continue;
        }
        D = D.replace(/\s/g, "").replace(/&nbsp;/g, "");
        if (D.length == 0) {
          continue;
        }
        $(O[aa]).prepend(" [").append("] ");
      } else {
        $(O[aa]).prepend("<br>");
      }
    }
    $(ah).find(".verseNumber").prepend(" ").append(" ");
    $(ah).find(".interVerseNumbers").prepend("<br>");
    $(ah).find("p").replaceWith("\n");
    $(ah).find("br").replaceWith("\n");
    $(ah).find("div").prepend("\n");
    var af = $(ah).find(".small-caps");
    for (var T = 0; T < af.length; T++) {
      $(af[T]).text($(af[T]).text().toUpperCase());
    }
    var q = step.util.uQ().get("masterVersion");
    var I = step.util.uQ().get("extraVersions");
    var B = step.util.uQ().get("options");
    if (I !== "") {
      q += "," + I;
    }
    var b = q.split(",");
    var h = $(ah).find(".comparingTable");
    if (h.length > 0) {
      var ad = $(h).find("tr.row");
      if (ad.length > 0) {
        for (var Z = 0; Z < ad.length; Z++) {
          var x = $(ad[Z]).find("td.cell");
          if (x.length == b.length) {
            for (var W = 0; W < x.length; W++) {
              $(x[W]).prepend("\n(" + b[W] + ") ");
            }
          }
        }
      }
      $(h).find("tr").not(".row").remove();
    }
    var H = "";
    for (var V = 0; V < ah.length; V++) {
      H += $(ah[V])
        .text()
        .replace(/    /g, " ")
        .replace(/Read full chapter/, "")
        .replace(/   /g, " ")
        .replace(/  /g, " ")
        .replace(/\t /g, "\t")
        .replace(/\n\s+\n/g, "\n\n")
        .replace(/\n\n\n/g, "\n\n")
        .replace(/\n\n\t/g, "\n\t")
        .replace(/^\n/g, "")
        .replace(/(\n) (\d)/g, "$1$2")
        .replace(/\n $/, "\n")
        .replace(/\n\n$/, "\n");
      if (H.search(/\n$/) == -1) {
        H += "\n";
      }
    }
    if ($(ah).find(".verseGrouping").length > 0) {
      H = H.replace(/\n\n/g, "\n");
    }
    if (O.length > 0) {
      var ak = "";
      var S = H.split(/\n/);
      for (var T = 0; T < S.length; T++) {
        var R = S[T].replace(/\s+/g, " ");
        if (R === "" || R === " ") {
          continue;
        }
        ak += R + "\n";
      }
      H = ak;
    }
    if (B.indexOf("X") > -1) {
      var K = H.split("\n");
      var C = false;
      var N = K.length;
      for (var ac = N - 1; ac > -1; ac--) {
        if (K[ac].trim().length == 0) {
          N = ac;
        } else {
          break;
        }
      }
      for (var ac = 0; ac < N; ac++) {
        var s = false;
        if (
          K[ac].substring(0, 1) === "(" &&
          K[ac].slice(-1) === ")" &&
          K[ac].length < 30
        ) {
          var z = K[ac].substring(1, K[ac].length - 1);
          var G = z.split(": ");
          if (G.length == 2) {
            var E = G[1].split(".");
            if (E.length > 1 && E.length < 4) {
              if (isNaN(E[0]) && !isNaN(E[1])) {
                if (E.length == 3) {
                  if (!isNaN(E[2])) {
                    s = true;
                  }
                } else {
                  s = true;
                }
              }
            }
          }
        }
        if (s) {
          if (C) {
            K[ac - 1] = "";
          }
          if (ac == N - 1) {
            K[ac] = "";
          }
        }
        C = s;
      }
      H = "";
      for (var ac = 0; ac < N; ac++) {
        if (K[ac].trim().length > 0) {
          H += K[ac] + "\n";
        }
      }
    }
    if (w !== "") {
      H += "\nNotes:" + w;
    }
    if (u !== "") {
      H += "\nCross references:" + u;
    }
    var g = Math.floor(new Date().getTime() / 1000);
    var Y = g.toString();
    var o = $.cookie("step.copyRightsTimeStamps");
    var ab = $.cookie("step.copyRightsVersions");
    if (
      !(
        typeof o === "string" &&
        typeof ab === "string" &&
        ab === q &&
        g - parseInt(o) < 3600
      )
    ) {
      for (var ac = 0; ac < b.length; ac++) {
        currentVersion = b[ac];
        if (currentVersion === "") {
          continue;
        }
        $.ajaxSetup({
          async: false,
        });
        $.getJSON("/html/copyrights/" + currentVersion + ".json", function (i) {
          H += "\n" + currentVersion + ": " + i;
        }).fail(function () {
          H +=
            "\n" +
            currentVersion +
            ": Copyright notice at STEPBible.org/version.jsp?version=" +
            currentVersion;
        });
        $.ajaxSetup({
          async: true,
        });
      }
      $.cookie("step.copyRightsTimeStamps", Y);
      $.cookie("step.copyRightsVersions", q);
    } else {
      if (I === "") {
        H += "\n(" + q + ")";
      }
    }
    var A = $.cookie("step.copyTimeStamps");
    if (p > 1) {
      var ag = Math.floor(30 * (p / F.length));
      Y -= ag;
    }
    var y = 0;
    var aj = 0;
    var ae = [];
    if (A != null && typeof A === "string") {
      ae = A.split(",");
      for (var aa = 0; aa < ae.length; aa++) {
        if (ae[aa] === "") {
          continue;
        }
        var a = g - ae[aa];
        if (a > 60) {
          continue;
        }
        if (aj < a) {
          aj = a;
        }
        Y += "," + ae[aa];
        y++;
      }
    }
    var U = 1000;
    $.cookie("step.copyTimeStamps", Y);
    if (y > 4) {
      alert(
        "You are copying at a rapid pace.\n\nThe copy function is intended for personal use within the copyrights limitation.  Please review the copyrights requirement for the Bibles (" +
          q +
          ") you are using."
      );
      U = Math.min((60 - aj) * 1000, 5000);
      $("#copyModal").find(".close").hide();
    } else {
      if (ae.length > 0) {
        U = 600;
      }
    }
    navigator.clipboard.writeText(H);
    $("#bookchaptermodalbody").empty();
    $("#bookchaptermodalbody").append("<h2>" + __s.text_is_copied);
    $("#copyModalFooter").empty();
    setTimeout(function () {
      step.util.closeModal("copyModal");
    }, U);
  },
  _buildChapterVerseTable: function (p) {
    var a = step.util.uc(step.util.uP());
    var r = $(a).find(".versenumber");
    var h = [];
    if (r.length > 0) {
      for (var u = 0; u < r.length; u++) {
        h.push($(r[u]).text());
      }
    } else {
      r = $(a).find(".verseLink");
      for (var u = 0; u < r.length; u++) {
        var y = $(r[u]).attr("name");
        y = y.replace(/^([123A-Za-z]+)\.(\d)/, "$1 $2").replace(/\./g, ":");
        h.push(y);
      }
    }
    var z = false;
    var b = false;
    var q = $(a).find(".note");
    for (var s = 0; s < q.length && (!z || !b); s++) {
      var t = $(q[s]).find("a");
      if (t.length == 1 && !z) {
        $("#includeXRefs").show();
        z = true;
      } else {
        if (t.length > 1 && !b) {
          $("#includeNotes").show();
          b = true;
        }
      }
    }
    var w =
      p == -1
        ? __s.select_the_first_verse_to_copy + "<br><br><br>"
        : __s.copy_will_start_from_verse +
          ": " +
          h[p] +
          "<br>" +
          __s.select_last_verse_to_copy;
    this.modalMode = "verse";
    var e = 10;
    var g = 10;
    if (step.touchDevice) {
      var v = navigator.userAgent.toLowerCase();
      if (
        v.indexOf("android") > -1 ||
        (step.appleTouchDevice && v.indexOf("safari/60") > -1)
      ) {
        e = 7;
        g = 14;
      }
    }
    var o = '<div class="header"><h4>' + w + "</h4>";
    o += '</div><div style="overflow-y:auto"><table><colgroup>';
    for (var x = 0; x < e; x++) {
      o += '<col span="1" style="width:' + g + '%">';
    }
    o += "</colgroup><tr>";
    var n = 0;
    var m = "";
    for (var u = 0; u < h.length; u++) {
      n++;
      var A = h[u];
      var f = A;
      var d = A.split(/:/);
      if (d.length == 2 && d[0] === m.split(/:/)[0]) {
        A = d[1];
      } else {
        d = A.split(/ /);
        if (d.length == 2 && d[0] === m.split(/ /)[0]) {
          A = d[1];
        }
      }
      m = f;
      if (p > -1) {
        if (u == p) {
          A = "<b><i>" + A + "</i></b>";
        }
        o +=
          '<td><a href="javascript:step.copyText.goCopy(' +
          p +
          "," +
          u +
          ');">' +
          A +
          "</a></td>";
      } else {
        o +=
          '<td><a href="javascript:step.copyText._buildChapterVerseTable(' +
          u +
          ');">' +
          A +
          "</a></td>";
      }
      if (n > e - 1 && n % e == 0) {
        o += "</tr><tr>";
      }
    }
    o += "</tr></table></div></div>";
    $("#bookchaptermodalbody").empty();
    $("#bookchaptermodalbody").append(o);
  },
};
window.step = window.step || {};
step.lexiconFeedback = {
  init: function (a, c, b) {
    $(".sendFeedback2").click(function (d) {
      d.preventDefault();
      if (!step.lexiconFeedback.validate()) {
        return;
      }
      require(["html2canvas"], function () {
        var g = [];
        var f = $("#lexFeedbackModal").find("form");
        var e = f.find("#lexfeedbackEmail").val();
        step.settings.save(
          {
            userFeedbackEmail: e,
          },
          {
            silent: true,
          }
        );
        g.push({
          key: "type",
          value: f.find("#lexfeedbackType").val(),
        });
        g.push({
          key: "email",
          value: e,
        });
        g.push({
          key: "description",
          value:
            f.find("#lexfeedbackDescription").val() +
            " Passage: " +
            b +
            "," +
            c +
            "," +
            a,
        });
        g.push({
          key: "summary",
          value: f.find("#lexfeedbackSummary").val(),
        });
        g.push({
          key: "url",
          value: document.URL,
        });
        $("#lexFeedbackModal").hide();
        $("#lexFeedbackModal").remove();
        $("body").removeClass("modal-open");
        $(".modal-backdrop").remove();
        step.util.MP(__s.feedback_please_wait, "warning", null, 25);
        html2canvas(document.body, {
          onrendered: function (h) {
            step.util.MP(__s.feedback_sending, "warning", null, 75);
            step.util.uR(
              SUPPORT_CREATE,
              "screenshot-part",
              "file",
              h,
              "image/png",
              g,
              function (i) {
                if (i) {
                  step.util.MP(__s.feedback_success);
                } else {
                  step.util.uN(__s.feedback_failure);
                }
              }
            );
          },
        });
      });
    });
    if (step.userLanguageCode.substring(0, 2) !== "en") {
      if ($(".sendFeedback2").text() === "Submit") {
        $(".sendFeedback2").text(__s.help_feedback);
      }
      if ($(".cancelFeedback2").text() === "Cancel") {
        $(".cancelFeedback2").text(__s.close);
      }
    }
  },
  validate: function () {
    var b = true;
    var a = $("#lexFeedbackModal").find("form");
    a.find("input, select, textarea").each(function (c, f) {
      var e = $(this);
      var d = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
      if (
        step.util.uO(e.val()) ||
        (e.attr("id") == "lexfeedbackEmail" && d.exec(e.val()) == null)
      ) {
        e.closest(".form-group").addClass("has-error");
        b = false;
      } else {
        e.closest(".form-group").removeClass("has-error");
      }
    });
    return b;
  },
};
var MainSearchView = Backbone.View.extend({
  el: ".search-form",
  events: {
    "click .find": "search",
    "click .showSidebar": "showAnalysis",
    "click .showBooks": "showBooks",
  },
  specificContext: [],
  initialize: function () {
    var e = this;
    this.ignoreOpeningEvent = false;
    this.clearContextAfterSearch = false;
    this.masterSearch = this.$el.find("#masterSearch");
    this.specificContext = [];
    this.startTimes = {};
    this.allContexts = [REFERENCE, VERSION, LIMIT, EXAMPLE_DATA];
    var c = this;
    _.bindAll(this);
    _.bindAll(c);
    this.listenTo(step.passages, "sync-update", this.syncWithUrl);
    this.listenTo(Backbone.Events, "search:add", this._appendVersions);
    this.listenTo(Backbone.Events, "search:remove", this._removeVersion);
    this.masterSearch
      .select2({
        minimumInputLength: 2,
        openOnEnter: false,
        id: function (f) {
          if (f == null) {
            return null;
          }
          var g = f.itemType + "-";
          if (f.item != null) {
            switch (f.itemType) {
              case REFERENCE:
                g += f.item.fullName + step.util.guid();
                break;
              case VERSION:
                if (f.item.shortInitials != null) {
                  g += f.item.shortInitials;
                }
                break;
              case GREEK:
              case GREEK_MEANINGS:
              case HEBREW_MEANINGS:
              case HEBREW:
                g += f.item.strongNumber;
                break;
              case SYNTAX:
              case TEXT_SEARCH:
                g += f.item.value;
                break;
              case SUBJECT_SEARCH:
                g += (f.item.searchTypes || []).join("-") + ":" + f.item.value;
                break;
              case MEANINGS:
                g += f.item.gloss;
                break;
              case EXACT_FORM:
                g += f.item.text;
                break;
              case TOPIC_BY_REF:
              case RELATED_VERSES:
              default:
                g += f.item;
                break;
            }
          }
          return g;
        },
        formatInputTooShort: function (g, h) {
          var o = h - g.length;
          var i = sprintf(__s.x_more_characters, o);
          var m = $("<span>")
            .addClass("searchLabel")
            .append(
              $("<a>")
                .append(__s.search_advanced)
                .on("click", function () {
                  c.mJ();
                })
            );
          var f = $('<span style="width: 50%">')
            .append(m)
            .append($('<span class="message">').append(i));
          return f;
        },
        ajax: {
          url: function (m, n) {
            var p = step.state.language();
            if (
              m.length >= 2 ||
              (!step.util.uO(p) && p.toLowerCase().indexOf("zh") == 0)
            ) {
              var f = SEARCH_AUTO_SUGGESTIONS + m;
              var o = "";
              if (e.specificContext.length != 0) {
                for (var h = 0; h < e.specificContext.length; h++) {
                  o +=
                    e.specificContext[h].itemType +
                    "=" +
                    e.specificContext[h].value;
                  if (h < e.specificContext.length) {
                    o += URL_SEPARATOR;
                  }
                }
              }
              if (e.clearContextAfterSearch) {
                e.MH(EXAMPLE_DATA);
              }
              var g = step.util.uO(p) ? "" : "?lang=" + p;
              return f + "/" + encodeURIComponent(o) + g;
            }
          },
          dataType: "json",
          quietMillis: KEY_PAUSE,
          cache: true,
          results: function (n, m) {
            var o = e.mU(LIMIT) != null;
            var h = $.data(
              c.masterSearch.select2("container"),
              "select2-last-term"
            );
            var f = [];
            for (var i = 0; i < n.length; i++) {
              var g = c.mO(n[i], f, h, o);
              f.push({
                text: g.text,
                item: g.item,
                itemType: n[i].itemType,
              });
            }
            return {
              results: c.patch(f, h),
            };
          },
        },
        multiple: true,
        formatResult: c.formatResults,
        matcher: c.matchDropdownEntry,
        formatSelection: function (g) {
          var f =
            _.where($("#masterSearch").select2("data"), {
              itemType: "version",
            }) || [];
          c.masterVersion = f.length > 0 ? f[0] : null;
          if (c.masterVersion == null && g != null && g.itemType == VERSION) {
            c.masterVersion = g;
          }
          return step.util.ui.iF(g, f.length > 1);
        },
        escapeMarkup: function (f) {
          return f;
        },
        formatResultCssClass: c.formatResultCssClass,
        formatSelectionCssClass: c.formatResultCssClass,
      })
      .on("select2-selecting", function (g) {
        var f = $(this);
        if (
          g.object &&
          g.object.itemType == REFERENCE &&
          e.mU(REFERENCE) == null &&
          (g.object.item.sectionType == "BIBLE_BOOK" ||
            g.object.item.sectionType == "APOCRYPHA") &&
          g.object.item.wholeBook
        ) {
          g.preventDefault();
          e.isOpeningBibleList = true;
          e.MG(REFERENCE, g.object.item.osisID);
          $.data(
            e.masterSearch.select2("container"),
            "select2-last-term",
            null
          );
          f.select2("search", g.object.item.shortName);
        } else {
          if (g.object.item.grouped) {
            g.preventDefault();
            $.data(
              e.masterSearch.select2("container"),
              "select2-last-term",
              null
            );
            e.MG(LIMIT, g.object.itemType);
            f.select2("search", e.mS());
            f.select2("container").find("input").focus();
          } else {
            if (g.object.item.exit) {
              g.preventDefault();
              e.MH(LIMIT);
              $.data(
                e.masterSearch.select2("container"),
                "select2-last-term",
                null
              );
              f.select2("search", e.mS());
            }
          }
        }
        return;
      })
      .on("selected", function (f) {
        var g = e.masterSearch.select2("container");
        var m = g.find("input").val() || "";
        var i = g.find(".replaceItem");
        var q = i.parent().parent().first();
        var n = e.masterSearch.select2("data");
        if (q.length > 0) {
          var h = q.index();
          n.splice(h, 1, n[n.length - 1]);
          n.pop();
        }
        e.mA(n);
        e.mB();
        e.search();
        var o = $(this);
        var p = o.select2("data") || [];
        if (p.length == 0) {
          return;
        }
        e.mZ();
        g.find("input").val("");
        e.MH([REFERENCE, VERSION, LIMIT]);
      })
      .on("select2-opening", function (g) {
        if (!e.ignoreOpeningEvent) {
          e.MH(e.allContexts);
          e.mB();
        }
        var h = e.masterSearch.select2("data") || [];
        for (var f = 0; f < h.length; f++) {
          if (h[f].itemType == VERSION) {
            e.MG(VERSION, h[f].item.initials);
            break;
          }
        }
      })
      .on("select2-removed", function () {
        e.mZ();
        var f = e.masterSearch.select2("data");
        if (!_.isEmpty(f)) {
          if (
            _.any(f, function (g) {
              return g.itemType !== "version";
            })
          ) {
            e.search();
          }
        }
      });
    var b = this.masterSearch.select2("container");
    var d = step.util.uM("step.classicalUI");
    var a = d === "true" ? true : false;
    step.util.uz(a);
    if (step.state.language().indexOf("zh") == 0) {
      b.data("select2").opts.minimumInputLength = 1;
    }
    b.find("input[type='text']").on("keydown", this._handleKeyPressInSearch);
    b.find("ul.select2-choices")
      .sortable({})
      .on("dragstart.h5s", function () {
        e.masterSearch.select2("onSortStart");
      })
      .bind("sortupdate", function () {
        e.masterSearch.select2("onSortEnd");
        e.mZ();
      });
    this.masterSearch.on("change", function () {
      e.masterSearch.html(e.masterSearch.val());
    });
  },
  mA: function (a) {
    this.masterSearch.select2("data", a, true);
    this.mC();
    this.masterSearch
      .select2("container")
      .find("ul.select2-choices")
      .sortable({});
  },
  mB: function () {
    this.masterSearch
      .select2("container")
      .find(".replaceItem")
      .removeClass("replaceItem");
  },
  mC: function (a) {
    var b;
    if (a) {
      b = $(a).not("[data-handler]");
    } else {
      b = this.$el.find("[data-select-id]").not("[data-handler]");
    }
    this.mD(b);
    this.mG(b);
    this.mH(b);
    this.mE(b);
    this.mF(b);
    b.attr("data-handler", true);
  },
  mD: function (b) {
    var a = this;
    $(b)
      .filter(".versionItem")
      .click(function (c) {
        a.mL();
      });
  },
  mE: function (b) {
    var a = this;
    $(b)
      .filter(".textItem, .syntaxItem, .topicByRefItem")
      .click(function (e) {
        var d = $(this);
        a.mK(e, d);
        var c = d.data("item-type");
        var f = d.data("select-id");
        a.mJ(c, f);
      });
  },
  mF: function (b) {
    var a = this;
    $(b)
      .filter(".exactFormItem")
      .click(function (c) {
        a.mK(c, $(this));
        a.mJ(EXACT_FORM);
      });
  },
  mG: function (b) {
    var a = this;
    $(b)
      .filter(".referenceItem")
      .each(function () {
        $(this).click(function (c) {
          a.mK(c, $(this));
          a.mI(c, REFERENCE, null);
        });
      });
  },
  mH: function (b) {
    var a = this;
    $(b)
      .filter(
        ".greekMeaningsItem, .hebrewMeaningsItem, .hebrewItem, .greekItem, .meaningsItem, .subjectItem"
      )
      .click(function (c) {
        a.mK(c, $(this));
        a.mI(
          c,
          $(this).attr("data-item-type"),
          ($(this).attr("data-select-id") || "")
            .replace(/\./g, "")
            .substring(0, 2)
        );
      });
  },
  mI: function (b, c, a) {
    b.stopPropagation();
    if (a == null) {
      a = "  ";
    }
    this.ignoreOpeningEvent = true;
    this.clearContextAfterSearch = true;
    this.MG(EXAMPLE_DATA, c);
    this.MG(LIMIT, c);
    $.data(this.masterSearch.select2("container"), "select2-last-term", null);
    this.masterSearch.select2("open");
    this.masterSearch.select2("search", a);
    this.ignoreOpeningEvent = false;
  },
  mJ: function (b, c) {
    var a = this;
    require(["menu_extras"], function () {
      var e = a.masterSearch.select2("data");
      var d = REF_VERSION;
      for (var f = 0; f < e; f++) {
        if (e[f].itemType == VERSION) {
          d = e[f].item.initials;
          break;
        }
      }
      new AdvancedSearchView({
        searchView: a,
        masterVersion: d,
        initialView: b,
        value: c || "",
      });
    });
  },
  mK: function (b, a) {
    if (!b.shiftKey) {
      a.closest("ul").find(".replaceItem").removeClass("replaceItem");
      a.addClass("replaceItem");
    }
  },
  mL: function () {
    var a = this;
    require(["menu_extras"], function () {
      new PickBibleView({
        model: step.settings,
        searchView: a,
      });
    });
  },
  mM: function (b, a) {
    var d = b;
    var c = b;
    switch (b.itemType) {
      case HEBREW:
      case GREEK:
        d = this.mQ(b.suggestion, b.itemType == HEBREW);
        break;
      case GREEK_MEANINGS:
      case HEBREW_MEANINGS:
        d = this.mR(b.suggestion, b.itemType == HEBREW_MEANINGS);
        break;
      case REFERENCE:
        d = b.suggestion.fullName;
        c = b;
        break;
      case SUBJECT_SEARCH:
        d = b.suggestion.value;
        break;
      case EXACT_FORM:
        d = b.suggestion.text;
        break;
      case TEXT_SEARCH:
        d = b.suggestion.text;
        break;
    }
    return {
      text: d,
      item: c.suggestion,
    };
  },
  mN: function (b, a, d) {
    var c = b;
    b.isControl = true;
    if (d) {
      b.text = sprintf(__s.too_many_options_to_show, b.count);
      b.maxGroupReached = true;
    } else {
      this.mP(c, a);
    }
    return {
      text: c.text,
      item: c,
    };
  },
  mO: function (c, a, b, d) {
    if (c.grouped) {
      return this.mN(c, b, d);
    }
    return this.mM(c, a);
  },
  mP: function (f, d) {
    var a = [];
    var b = f.extraExamples || [];
    for (var c = 0; c < b.length; c++) {
      switch (f.itemType) {
        case HEBREW:
        case GREEK:
          a.push(
            '<span class="transliteration">' +
              this.mW(b[c].stepTransliteration, d) +
              "</em>"
          );
          break;
        case HEBREW_MEANINGS:
        case GREEK_MEANINGS:
        case MEANINGS:
          a.push(this.mW(b[c].gloss, d));
          break;
        case SUBJECT_SEARCH:
          a.push(this.mW(b[c].value, d));
          break;
        case VERSION:
          a.push(this.mW(b[c].item.initials, d));
          break;
      }
      if (a.length >= 2) {
        break;
      }
    }
    var e = a.join(", ");
    f.text = sprintf(__s.options_number_of_terms, e);
  },
  mQ: function (c, a, b) {
    return (
      '<span class="' +
      (a ? "hbFontMini" : "unicodeFontMini") +
      '">' +
      c.matchingForm +
      "</span> (<span class='transliteration'>" +
      this.mW(c.stepTransliteration, b) +
      "</span> - " +
      this.mW(c.gloss, b) +
      ")"
    );
  },
  mR: function (c, a, b) {
    return (
      this.mW(c.gloss, b) +
      " (<span class='transliteration'>" +
      this.mW(c.stepTransliteration, b) +
      '</span> - <span class="' +
      (a ? "hbFontMini" : "unicodeFontMini") +
      '">' +
      c.matchingForm +
      "</span>)"
    );
  },
  _getCurrentInitials: function () {
    var b = this.masterSearch.select2("data");
    var c = [];
    for (var a = 0; a < b.length; a++) {
      if (
        typeof b[a].item === "object" &&
        typeof b[a].item.shortInitials === "string"
      ) {
        c.push(b[a].item.shortInitials);
      }
    }
    return c;
  },
  _appendVersions: function (e) {
    var d = this.masterSearch.select2("data");
    d.push({
      item: e.value,
      itemType: e.itemType,
    });
    var f = this.masterSearch.select2("container").find(".replaceItem");
    var b = f.parent().parent().first();
    var c = {
      item: e.value,
      itemType: e.itemType,
    };
    if (b.length > 0) {
      var a = b.index();
      d.splice(a, 1, c);
    } else {
      d.push(c);
    }
    this.mA(d);
    this.mB();
    this.masterSearch.select2("close");
    this.mZ();
  },
  _removeVersion: function (c) {
    var a = this.masterSearch.select2("data");
    for (var b = a.length - 1; b > -1; b--) {
      if (
        typeof a[b].item === "object" &&
        (a[b].item.initials === c.value.initials ||
          a[b].item.shortInitials === c.value.initials)
      ) {
        a.splice(b, 1);
      }
    }
    this.mA(a);
  },
  search: function () {
    var q = this.masterSearch.select2("data");
    var m = "";
    var p = "";
    var n = "";
    var b = 0;
    var g = "";
    var f = [];
    var i = [];
    for (var o = 0; o < q.length; o++) {
      switch (q[o].itemType) {
        case VERSION:
          m += URL_SEPARATOR + q[o].itemType + "=";
          var e = q[o].item.shortInitials;
          m += encodeURIComponent(e);
          if (b == 0) {
            g = e;
          } else {
            if (f.indexOf() == -1) {
              f.push(e);
            }
          }
          b++;
          break;
        case REFERENCE:
          var c = q[o].item.osisID;
          p += URL_SEPARATOR + q[o].itemType + "=" + encodeURIComponent(c);
          i.push(c);
          break;
        case GREEK:
        case GREEK_MEANINGS:
        case HEBREW:
        case HEBREW_MEANINGS:
          n +=
            URL_SEPARATOR +
            STRONG_NUMBER +
            "=" +
            encodeURIComponent(q[o].item.strongNumber);
          break;
        case MEANINGS:
          n +=
            URL_SEPARATOR +
            MEANINGS +
            "=" +
            encodeURIComponent(q[o].item.gloss);
          break;
        case SUBJECT_SEARCH:
          var d = step.util.uQ().get("subjectSearchType");
          var h = "";
          var a = q[o].item.searchTypes.indexOf(d);
          if (a != -1) {
            h = q[o].item.searchTypes[a];
          } else {
            h = q[o].item.searchTypes[0];
          }
          switch (h) {
            case "SUBJECT_SIMPLE":
              n += URL_SEPARATOR + SUBJECT_SEARCH;
              break;
            case "SUBJECT_EXTENDED":
              n += URL_SEPARATOR + NAVE_SEARCH;
              break;
            case "SUBJECT_FULL":
              n += URL_SEPARATOR + NAVE_SEARCH_EXTENDED;
              break;
            default:
              n +=
                URL_SEPARATOR +
                q[o].itemType +
                "=" +
                encodeURIComponent(q[o].item);
          }
          n += "=" + encodeURIComponent(q[o].item.value);
          break;
        case TOPIC_BY_REF:
        case RELATED_VERSES:
          n +=
            URL_SEPARATOR +
            q[o].itemType +
            "=" +
            encodeURIComponent(q[o].item.text);
          break;
        case SYNTAX:
          n +=
            URL_SEPARATOR +
            q[o].itemType +
            "=" +
            encodeURIComponent(q[o].item.value);
          break;
        case TEXT_SEARCH:
          n +=
            URL_SEPARATOR +
            q[o].itemType +
            "=" +
            encodeURIComponent(q[o].item.text);
          break;
        case EXACT_FORM:
          n +=
            URL_SEPARATOR +
            q[o].itemType +
            "=" +
            encodeURIComponent(q[o].item.text);
          break;
        default:
          m +=
            URL_SEPARATOR + q[o].itemType + "=" + encodeURIComponent(q[o].item);
          break;
      }
    }
    if (!step.util.uAC(g, i, f)) {
      return;
    }
    step.util.uQ().save(
      {
        pageNumber: 1,
        filter: null,
        strongHighlights: null,
      },
      {
        silent: true,
      }
    );
    m = m.replace(/^@/, "").replace(/^\|/, "");
    n = n.replace(/^@/, "").replace(/^\|/, "");
    p = p.replace(/^@/, "").replace(/^\|/g, "");
    if (n.length > 0) {
      m += m.length > 0 ? URL_SEPARATOR : "";
      m += n;
    }
    if (p.length > 0) {
      m += m.length > 0 ? URL_SEPARATOR : "";
      m += p;
    }
    step.router.mD(m);
    if (b > 1) {
      step.util.u1();
    }
  },
  mS: function () {
    return this.masterSearch.select2("container").find(".select2-input").val();
  },
  patch: function (f, e) {
    var b = (
      _.findWhere(this.specificContext, {
        itemType: LIMIT,
      }) || {}
    ).value;
    if (b) {
      var h = {
        itemType: b,
        item: {
          exit: true,
        },
      };
      f.splice(0, 0, h);
    }
    var a = [];
    if (b == null) {
      a = this.mT(null, e);
    } else {
      if (b == VERSION) {
        a = this.mT(b, e);
      }
    }
    var d = 0;
    for (d = 0; d < f.length; d++) {
      if (f[d].itemType != REFERENCE) {
        break;
      }
    }
    var g = f.slice(0, d);
    var c = f.slice(d);
    return g.concat(a).concat(c);
  },
  mT: function (a, b) {
    return this.mV(a, b);
  },
  matchDropdownEntry: function (a, b) {
    if (step.util.uO(b)) {
      return false;
    }
    var c = new RegExp("\\b" + step.util.uH(a), "ig");
    if ($.type(b) === "string") {
      return b != null && b != "" && b.toLowerCase().match(c);
    }
    switch (b.itemType) {
      case VERSION:
        var d =
          this.matchDropdownEntry(a, b.item.name || "") ||
          this.matchDropdownEntry(a, b.item.languageName || "");
        return d;
      case GREEK_MEANINGS:
      case HEBREW_MEANINGS:
        return this.matchDropdownEntry(a, b.item.gloss);
      case GREEK:
      case HEBREW:
        return (
          this.matchDropdownEntry(a, b.item.stepTransliteration) ||
          this.matchDropdownEntry(a, b.item.matchingForm) ||
          this.matchDropdownEntry(a, b.item.strongNumber)
        );
      case SUBJECT_SEARCH:
        return this.matchDropdownEntry(a, b.item.value);
      case TEXT_SEARCH:
        return this.matchDropdownEntry(a, b.item.text);
    }
    return false;
  },
  MG: function (b, a) {
    this.MH(b);
    this.specificContext.push({
      itemType: b,
      value: a,
    });
  },
  mU: function (a) {
    return (
      _.findWhere(this.specificContext, {
        itemType: a,
      }) || {}
    ).value;
  },
  MH: function (b) {
    if (b == null) {
      b = [];
    } else {
      if (!$.isArray(b)) {
        b = [b];
      }
    }
    for (var a = this.specificContext.length - 1; a > -1; a--) {
      if (b.indexOf(this.specificContext[a].itemType) != -1) {
        this.specificContext.splice(a, 1);
      }
    }
  },
  mV: function (t, q) {
    var c = [];
    for (var s = 0; s < this.specificContext.length; s++) {
      if (this.specificContext[s].itemType == REFERENCE) {
        return c;
      }
    }
    var e = (this.mS() || "").toLowerCase();
    var m = [];
    var a = [];
    var v = [];
    var n = [];
    var u = [];
    var r = 0;
    for (var o = 0; o < step.itemisedVersions.length; o++) {
      var f = step.itemisedVersions[o];
      var g = (f.item.shortInitials || "").toLowerCase();
      var h = (f.item.initials || "").toLowerCase();
      var b = (f.item.languageName || "").toLowerCase();
      var p = (f.item.originalLanguage || "").toLowerCase();
      if ((h != "" && h == e) || (g != "" && g == e)) {
        m.push(f);
      } else {
        if (g.indexOf(e) == 0 || h.indexOf(e) == 0) {
          if (f.item.recommended) {
            a.unshift(f);
          } else {
            a.push(f);
          }
        } else {
          if (b.indexOf(e) == 0 || p.indexOf(e) == 0) {
            if (f.item.recommended) {
              n.push(f);
            } else {
              v.push(f);
            }
          } else {
            if (this.matchDropdownEntry(e, f)) {
              if (t == VERSION || m.length + a.length < 3) {
                if (f.item.recommended) {
                  n.push(f);
                } else {
                  u.push(f);
                }
              } else {
                r++;
              }
            }
          }
        }
      }
    }
    c = c.concat(m);
    c = c.concat(a);
    u = n.concat(v).concat(u);
    if (t == VERSION) {
      c = c.concat(u);
    } else {
      if (c.length < 3) {
        r = u.length - 3;
        c = c.concat(u.splice(0, 3 - c.length));
      }
    }
    if (r > 0) {
      var d = {
        itemType: VERSION,
        item: {},
        grouped: true,
        count: r,
        maxReached: false,
        extraExamples: u.splice(0, 2),
      };
      this.mP(d, q);
      c.push({
        text: d.text,
        item: d,
        itemType: VERSION,
      });
    }
    if (q.indexOf("=") != -1) {
      c.push({
        item: {
          value: q,
          text: q,
        },
        itemType: SYNTAX,
      });
    }
    return c;
  },
  formatResultCssClass: function (a) {
    if (a && a.itemType == EXACT_FORM) {
      return (
        "select-" +
        a.itemType +
        " select-exactForm-" +
        (a.greek ? "greek" : "hebrew")
      );
    }
    return "select-" + a.itemType;
  },
  formatResults: function (m, b, g, f) {
    var a = step.util.ui.iE(m.itemType);
    var n;
    if (m.item.maxGroupReached) {
      return "<span class='maxSelected'>" + a + m.item.text + "</span>";
    }
    if (m.item.grouped) {
      return (
        "<span class='glyphicon glyphicon-chevron-down'></span> " +
        a +
        m.item.text
      );
    }
    if (m.item.exit) {
      return (
        "<span class='glyphicon glyphicon-chevron-up'></span> " +
        __s.exit_dropdown
      );
    }
    switch (m.itemType) {
      case VERSION:
        n = [
          '<div class="versionItem">',
          a,
          '<span class="features">' + step.util.ui.iY(m.item) + "</span>",
          '<span class="initials">' +
            this.mW(m.item.shortInitials, g.term) +
            "</span> - ",
          '<span class="name">' + this.mW(m.item.name, g.term) + "</span>",
          "</div>",
        ].join("");
        break;
      case GREEK:
        n = a + this.mQ(m.item, false, g.term);
        break;
      case GREEK_MEANINGS:
        n = a + this.mR(m.item, false, g.term);
        break;
      case HEBREW:
        n = a + this.mQ(m.item, true, g.term);
        break;
      case HEBREW_MEANINGS:
        n = a + this.mR(m.item, true, g.term);
        break;
      case REFERENCE:
        var h;
        if (
          this.mU(REFERENCE) != null &&
          (m.item.sectionType == "BIBLE_BOOK" ||
            (!m.item.wholeBook && !m.item.passage))
        ) {
          h = __s.bible_whole_book_section;
        } else {
          var e = __s[m.item.sectionType.toLowerCase() + "_section"];
          if (e == null) {
            e = __s[m.item.sectionType.toLowerCase()];
          }
          h = e;
        }
        n = [
          '<span class="source">[' + h + "]</span>",
          this.mW(m.item.fullName, g.term),
        ].join("");
        break;
      case TEXT_SEARCH:
        n = [a, this.mW(m.item.text, g.term)].join("");
        break;
      case SUBJECT_SEARCH:
        var c = "";
        for (var d = 0; d < m.item.searchTypes.length; d++) {
          switch (m.item.searchTypes[d]) {
            case "SUBJECT_SIMPLE":
              c +=
                '<span title="' +
                __s.search_subject_book_headings +
                '">' +
                __s.search_subject_book_headings_initials +
                "</span> ";
              break;
            case "SUBJECT_EXTENDED":
              c +=
                '<span title="' +
                __s.search_subject_nave +
                '">' +
                __s.search_subject_nave_initials +
                "</span> ";
              break;
            case "SUBJECT_FULL":
              c +=
                '<span title="' +
                __s.search_subject_nave_extended +
                '">' +
                __s.search_subject_nave_extended_initials +
                "</span> ";
              break;
          }
        }
        n =
          a +
          '<span class="features">' +
          c +
          "</span>" +
          this.mW(m.item.value, g.term) +
          "</div>";
        break;
      case MEANINGS:
        n = a + this.mW(m.item.gloss, g.term);
        break;
      case SYNTAX:
        n = a + this.mW(m.item.value, g.term);
        break;
    }
    return n;
  },
  mW: function (d, b) {
    if (d == null || b == null || d.length == 0 || b.length == 0) {
      return d;
    }
    var a = window.Select2.util.stripDiacritics(d.toLowerCase());
    var c = window.Select2.util.stripDiacritics(b.toLowerCase());
    var e = a.indexOf(c);
    if (e != -1) {
      return (
        d.substring(0, e) +
        '<span class="select2-match">' +
        d.substring(e, e + b.length) +
        "</span>" +
        d.substring(e + b.length)
      );
    }
    return d;
  },
  mX: function (b, g) {
    var f = g.tokenType;
    var c = g.token || "";
    var e = g.enhancedTokenInfo;
    switch (f) {
      case VERSION:
        return step.keyedVersions[c];
      case REFERENCE:
        return {
          fullName: e.fullName,
          shortName: e.shortName,
          osisID: e.osisID,
        };
      case GREEK_MEANINGS:
      case GREEK:
      case HEBREW_MEANINGS:
      case HEBREW:
      case STRONG_NUMBER:
        for (var d = 0; d < b.length; d++) {
          var a;
          if (b[d].item && b[d].item.strongNumber == c) {
            g.tokenType = b[d].itemType;
          }
        }
        if (c.length > 0 && c[0] == "G") {
          g.tokenType = GREEK_MEANINGS;
        } else {
          g.tokenType = HEBREW_MEANINGS;
        }
        return e;
      case SUBJECT_SEARCH:
        return {
          value: c,
          searchTypes: ["SUBJECT_SIMPLE"],
        };
      case NAVE_SEARCH:
        return {
          value: c,
          searchTypes: ["SUBJECT_EXTENDED"],
        };
      case NAVE_SEARCH_EXTENDED:
        return {
          value: c,
          searchTypes: ["SUBJECT_FULL"],
        };
      case EXACT_FORM:
        return {
          text: c,
          greek: e.greek,
        };
      case TOPIC_BY_REF:
      case RELATED_VERSES:
        return {
          text: c,
        };
      case MEANINGS:
        return {
          gloss: c,
        };
      case TEXT_SEARCH:
        return {
          text: e.text,
          value: e.text,
        };
      case SYNTAX:
        return e == null
          ? {
              text: "&lt;...&gt;",
              value: c,
            }
          : {
              text: e.text,
              value: e.value,
            };
      default:
        return c;
    }
  },
  mY: function (a, e, b) {
    var c = this.mX(a, e[b]);
    var d = e[b].tokenType;
    switch (d) {
      case SUBJECT_SEARCH:
      case NAVE_SEARCH:
      case NAVE_SEARCH_EXTENDED:
        d = SUBJECT_SEARCH;
        break;
    }
    return {
      item: c,
      itemType: d,
    };
  },
  syncWithUrl: function (b) {
    if (b == null) {
      b = step.util.uQ();
    }
    var a = this.masterSearch.select2("data");
    var d = [];
    var e = b.get("searchTokens") || [];
    for (var c = 0; c < e.length; c++) {
      d.push(this.mY(a, e, c));
    }
    this.mA(d);
    this.mC();
    this.mZ();
  },
  _handleKeyPressInSearch: function (a) {
    if (a.keyCode == 13 && !a.isPropagationStopped()) {
      this.search();
    }
  },
  showAnalysis: function () {
    require(["sidebar"], function (a) {
      step.util.ui.initSidebar();
    });
  },
  mZ: function () {
    var b = this.$el.find(".versionItem");
    var a = b.eq(0);
    if (b.length > 1 && a.length > 0 && !a.hasClass("masterVersion")) {
      b.removeClass("masterVersion");
      a.addClass("masterVersion");
      a.attr("title", a.attr("title") + "\n" + __s.master_version_info);
      this.masterVersion = _.findWhere(this.masterSearch.select2("data"), {
        itemType: "version",
      });
    } else {
      this.masterVersion = null;
    }
  },
  showBooks: function () {
    var b = $("<select>");
    var a = _.template(
      "<% _.each(versions, function(version, i) { %> <option value='<%= version.item.initials %>'><%= version.item.name %></option> <% }) %>"
    )({
      versions: step.itemisedVersions,
    });
    b.append(a);
    $("body").append(b);
    b.click();
    b.css("left", "30");
    b.css("top", "50");
    b.css("position", "absolute");
  },
});
var StepRouter = Backbone.Router.extend({
  routes: {
    "search(?:query)": "doMasterSearch",
    "(?:query)": "doMasterSearch",
  },
  initialize: function () {},
  mA: function (b, c, a) {
    if (b === "") {
      b += "?";
    } else {
      if (b[b.length - 1] !== "?") {
        b += "&";
      }
    }
    b += c;
    if (a != null) {
      b = b + "=" + a;
    }
    return b;
  },
  mB: function (b) {
    var a = b || Backbone.history.fragment || "";
    this.navigate(a, {
      trigger: false,
      replace: true,
    });
  },
  mC: function (n, o, p, d, q) {
    var e = step.util.uQ();
    var g = n;
    var a = e.get("masterVersion");
    var m = "";
    var b = [];
    if (a !== "") {
      if (!o || step.keyedVersions[a].category == "BIBLE") {
        m = "version=" + a;
      }
      var c = (e.get("extraVersions") || "").split(",");
      for (var f = 0; f < c.length; f++) {
        if ((c[f] || "") !== "") {
          if (!o || step.keyedVersions[c[f]].category == "BIBLE") {
            if (m !== "") {
              m += URL_SEPARATOR;
            }
            m += "version=" + c[f];
            b.push(c[f]);
          }
        }
      }
    }
    var h = n.substring(n.indexOf("reference=") + 10).split(" ");
    if (!step.util.uAC(a, h, b, false, true)) {
      return;
    }
    p = p ? true : false;
    d = d ? true : false;
    if (m !== "" && g !== "") {
      g = m + URL_SEPARATOR + g;
    }
    if (step.touchDevice && !step.touchWideDevice && q) {
      window.open("/?q=" + g.split(" ")[0], "_blank");
    } else {
      this.mD(g, d, p);
    }
  },
  mD: function (b, D, F) {
    var A = step.util.uP();
    var h = step.passages.findWhere({
      passageId: A,
    });
    var d = h.get("selectedOptions") || "";
    var e = h.get("interlinearMode") || "";
    var C = h.get("pageNumber");
    var c = h.get("context");
    var p = h.get("strongHighlights");
    var B = h.get("order");
    var E = h.get("passageId");
    if (step.util.uO(c)) {
      h.set(
        {
          context: 0,
        },
        {
          silent: true,
        }
      );
      c = 0;
    }
    var m = "";
    if (step.util.uO(b)) {
      var x = h.get("args") || "";
      m = this.mA(m, "q", x);
    } else {
      m = this.mA(m, "q", b);
    }
    if (!step.util.uO(d)) {
      if (d.indexOf("M") > -1 || d.indexOf("C") > -1) {
        var n = m.split("version=");
        var o = n.length == 1 ? true : false;
        for (var z = 1; z < n.length; z++) {
          var a = n[z].split(URL_SEPARATOR)[0].split("&")[0];
          if (
            typeof step.keyedVersions[a] === "object" &&
            step.keyedVersions[a].hasMorphology
          ) {
            o = true;
            break;
          }
        }
        var r = 0;
        var w = 0;
        var v = 3;
        var t = 1;
        if (typeof c4 === "object" && !c4[r][w] && !c4[v] && !c4[t][w]) {
          d = d.replace("C", "");
        }
        if (!o) {
          d = d.replace("M", "").replace("C", "");
        }
      }
      var f = "";
      var g = {};
      for (var z = 0; z < d.length; z++) {
        var y = d[z];
        if (typeof g[y] === "undefined") {
          g[y] = 1;
          f += y;
        }
      }
      m = this.mA(m, "options", f);
    }
    if (!step.util.uO(e) && e != "NONE") {
      m = this.mA(m, "display", e);
    }
    if (!step.util.uO(C) && C != "1" && !F) {
      m = this.mA(m, "page", C);
    }
    if (c != 0) {
      m = this.mA(m, "context", c);
    }
    if (!step.util.uO(p) && !D) {
      m = this.mA(m, "qFilter", p);
    }
    if (!step.util.uO(B)) {
      m = this.mA(m, "sort", B);
    }
    if (E != 0) {
      m = this.mA(m, "pos", E);
    }
    if ($.getUrlVars().indexOf("debug") != -1) {
      m = this.mA(m, "debug");
    }
    if (b != null) {
      h.save(
        {
          args: decodeURIComponent(b),
        },
        {
          silent: true,
        }
      );
    }
    var s = Backbone.history.fragment;
    var q = Backbone.history.getFragment(m);
    if (s === q) {
      h.trigger("afterRender");
    } else {
      var u = {
        trigger: true,
      };
      this.navigate(m, u);
    }
  },
  mE: function (a) {
    var e = "http://" + step.state.getDomain() + "/";
    if (a == null) {
      return e;
    }
    var d = step.passages.findWhere({
      passageId: a,
    });
    if (!d) {
      return e;
    }
    var c = d.get("urlFragment");
    var b = e + c;
    $("link[rel='canonical']").attr("href", b);
    return b;
  },
  mF: function (a, b) {
    require(["search"], function (c) {
      if (a.get("pageNumber") > 1) {
        a.trigger("newPage");
      } else {
        a.trigger("destroyViews");
        switch (a.get("searchType")) {
          case "TEXT":
          case "RELATED_VERSES":
            new TextDisplayView({
              model: a,
              partRendered: b,
            });
            break;
          case "SUBJECT_SIMPLE":
          case "SUBJECT_EXTENDED":
          case "SUBJECT_FULL":
          case "SUBJECT_RELATED":
            new SubjectDisplayView({
              model: a,
              partRendered: b,
            });
            break;
          case "ORIGINAL_MEANING":
          case "EXACT_FORM":
          case "ORIGINAL_GREEK_FORMS":
          case "ORIGINAL_GREEK_RELATED":
          case "ORIGINAL_HEBREW_EXACT":
          case "ORIGINAL_HEBREW_FORMS":
          case "ORIGINAL_HEBREW_RELATED":
            new WordDisplayView({
              model: a,
              partRendered: b,
            });
            break;
        }
      }
    });
  },
  mG: function (c, d, e, b) {
    c.save(
      {
        args: e != null ? decodeURIComponent(e) : "",
        urlFragment: Backbone.history.getFragment(),
      },
      {
        silent: true,
      }
    );
    c.trigger("sync-update", c);
    var a = c.get("searchType");
    if (a == "PASSAGE") {
      c.trigger("destroyViews");
      new PassageDisplayView({
        model: c,
        partRendered: d,
      });
    } else {
      this.mF(c, d);
    }
    this.mH(c);
    step.util.hideNavBarOnPhones(b);
  },
  mH: function (d) {
    var h = d.get("searchTokens");
    var c = d.get("passageId");
    var g = step.util.uc(c);
    var f = g.find(".passageOptionsGroup");
    f.find(".argSummary").remove();
    var a = $("<span></span>").addClass("argSummary argSumSpan");
    step.util.ui.iC(h, a, "button");
    f.append(a);
    if (
      a.find("button.select-search").text().trim() === "" &&
      a.find("button.select-reference").text().indexOf(":") > 0
    ) {
      var b = a.find("button.select-reference").text().trim().split(" ");
      if (b.length == 2) {
        if (b[1].indexOf(":")) {
          var e = g.find("span.interlinear.ltr");
          if (e.length == 0) {
            e = g.find("span.interlinear.rtl");
          }
          if (e.length > 0) {
            $(e[e.length - 1]).after(
              '<br><span class="interlinear"><span style="clear:left;padding:16px"><a style="text-decoration:underline" href="javascript:step.util.gotoCurrentChapter()">Read full chapter</a></span></span>'
            );
          } else {
            g.find("div.passageContentHolder").append(
              '<br><div style="padding:16px"><a style="text-decoration:underline" href="javascript:step.util.gotoCurrentChapter()">Read full chapter</a></div>'
            );
          }
        }
      }
    }
  },
  doMasterSearch: function (o, u, n, p, a, f, b, d) {
    var t = this;
    if (step.util.uO(o)) {
      o = $.getUrlVar("q") || "";
      u = $.getUrlVar("options");
      n = $.getUrlVar("display");
      a = $.getUrlVar("qFilter");
      b = $.getUrlVar("context");
      f = $.getUrlVar("sort");
    }
    var m = o.split("&");
    if (m == null || m.length == 0) {
      return;
    }
    for (var e = 0; e < m.length; e++) {
      var s = m[e];
      var g = s.split("=");
      if (g.length < 2) {
        continue;
      }
      var r = g[0];
      var q = g.slice(1).join("=");
      switch (r) {
        case "q":
          o = q;
          break;
        case "options":
          u = q;
          break;
        case "page":
          p = q;
          break;
        case "display":
          n = q;
          break;
        case "context":
          b = q;
          break;
        case "qFilter":
          a = q;
          break;
        case "sort":
          f = q;
          break;
      }
    }
    var c = new Date().getTime();
    var h = step.util.uP();
    o = encodeURIComponent(o.replace(/&debug/gi, ""));
    $.getPassageSafe({
      url: SEARCH_MASTER,
      args: [o, u, n, p, a, f, b, step.userLanguageCode],
      callback: function (w) {
        w.startTime = c;
        step.util.uZ(h);
        var v = step.passages.findWhere({
          passageId: h,
        });
        if (v == null) {
          console.error("No passages defined for ", h);
        }
        v.save(w, {
          silent: true,
        });
        t.mI({
          args: o,
          searchTokens: w.searchTokens,
          options: u,
          display: n,
        });
        step.util.squashErrors(v);
        if (!d) {
          step.router.mB();
        }
        $("#newLineWordle").text(w.reference);
        $("#nextChapterWordle").hide();
        $("#newLineWordle").show();
        $("#nextChapterInputLine").show();
        var i = false;
        if ((typeof p === "string" && !isNaN(p)) || typeof p === "number") {
          if (parseInt(p) > 1) {
            i = true;
          }
        }
        t.mG(v, false, o, i);
      },
      passageId: h,
      level: "error",
    });
  },
  mI: function (d) {
    var b = this.mJ(d.args);
    var a = step.bookmarks.findWhere({
      args: b,
    });
    if (a) {
      a.save({
        options: d.options,
        display: d.display,
        lastAccessed: new Date().getTime(),
      });
      return;
    }
    var c = new HistoryModel({
      args: b,
      lastAccessed: new Date().getTime(),
      searchTokens: d.searchTokens,
      options: d.options,
      display: d.display,
      id: step.util.guid(),
    });
    step.bookmarks.add(c);
    c.save();
  },
  mJ: function (a) {
    var b = (a || "").split(URL_SEPARATOR) || [];
    b.sort(function (d, c) {
      var g = d.split("=");
      var h = c.split("=");
      var f = g[0];
      var e = h[0];
      if (f == e) {
        if (f == VERSION) {
          return g[1] < h[1] ? -1 : 1;
        }
        return 0;
      } else {
        if (f == VERSION) {
          return -1;
        } else {
          if (e == VERSION) {
            return 1;
          } else {
            if (f == REFERENCE) {
              return -1;
            } else {
              if (e == REFERENCE) {
                return 1;
              } else {
                return 0;
              }
            }
          }
        }
      }
    });
    return b.join(URL_SEPARATOR);
  },
});
var DisplayView = Backbone.View.extend({
  MI: function (a) {
    var b = this;
    var d = a.find("[data-version]");
    var c = d.filter("[data-version-disabled='true']");
    c.attr("title", __s.interlinear_no_text_for_version);
    d.not(c)
      .click(function () {
        var f = $(this);
        var g = f.attr("data-version");
        var e = step.util.um(g, b.model, false);
      })
      .attr("title", __s.interlinear_swap_master_version);
  },
  MJ: function (r, s, d, f) {
    var b = f.length;
    var p = 1;
    var e = 0;
    var h = r.find("span.w.verseStart");
    if (h.length > 0) {
      var q = h.first().find("span.strongs");
      var n = [
        "Text Trans",
        "Orig Vocab",
        "Vocab Trans",
        "Eng Vocab",
        "Esp Vocab",
        "",
        "",
      ];
      for (var m = 0; m < q.length; m++) {
        if (n.indexOf(q[m].textContent) > -1) {
          e++;
        }
      }
      q = h.first().find("span.morphs");
      if (q.length > 0 && q[0].textContent === "Grammar") {
        e++;
      }
    }
    for (var m = 0; m < e; m++) {
      f.splice(1, 0, "en");
    }
    var g = f.length != b;
    var o = step.util.ui.iG(f);
    if (d === "INTERLINEAR" || g) {
      step.util.ui.iX(r, ".w", o, function (i) {
        return i.parent().hasClass("verseStart");
      });
    } else {
      if (d.indexOf("INTERLEAVED") != -1) {
        step.util.ui.iX(r, ".verseGrouping", o, undefined, 0, ".singleVerse");
      } else {
        if (d.indexOf("COLUMN") != -1) {
          var c = s.indexOf("X") > -1;
          if (c) {
            var a = [o[0]];
            if (o.length > 1) {
              for (var m = 1; m < o.length; m++) {
                a.push(undefined);
                a.push(o[m]);
              }
            }
            step.util.ui.iX(r, "tr.row", a, undefined, 1);
          } else {
            step.util.ui.iX(r, "tr.row", o, undefined, 1);
          }
        } else {
          if (this.model.get("searchType") == "PASSAGE") {
            if (o[0]) {
              r.addClass(o[0]);
            }
          } else {
            r.find(
              ".searchResults .passageContentHolder, .expandedHeadingItem .passageContentHolder"
            ).addClass(o[0]);
          }
        }
      }
    }
  },
  MK: function (d, c, a) {
    if (!$.isChrome()) {
      return;
    }
    if (!d) {
      d = this.$el;
    }
    if (!c) {
      if (this.model == undefined) {
        return;
      }
      c = this.model.get("interlinearMode");
    }
    if (!a) {
      a = this.model.get("options");
    }
    if (!this.diB(c, a)) {
      return;
    }
    var b = d.find(".interlinear span.w");
    b.not(".verseStart").css("clear", "none");
  },
  diA: function (c) {
    var f = [];
    var g = 0;
    for (var e = 0; e < c.length; e++) {
      var h = c.eq(e);
      var b = h.children();
      if (f.length == 0) {
        for (var d = 0; d < b.length; d++) {
          f.push(-1);
        }
      }
      if (h.hasClass("verseStart")) {
        continue;
      }
      for (var d = 0; d < b.length; d++) {
        var a = b.eq(d);
        if (f[d] == -1) {
          f[d] = a.height();
          g++;
        }
      }
      if (g == f.length) {
        break;
      }
    }
    return f;
  },
  diB: function (b, a) {
    return (
      a.indexOf("E") != -1 ||
      a.indexOf("T") != -1 ||
      a.indexOf("A") != -1 ||
      a.indexOf("M") != -1 ||
      b === "INTERLINEAR"
    );
  },
  ML: function (r, c, t) {
    if (this.diB(c, t)) {
      var e = r;
      if (!e.hasClass("passageContentHolder")) {
        e = e.find(".passageContentHolder");
      }
      var b = e.children().children();
      if (b.length == 0) {
        return;
      }
      var s = this.diA(b);
      var a = $(".verseStart", e);
      for (var f = 0; f < a.length; f++) {
        var d = a.eq(f).children();
        for (var m = 0; m < d.length; m++) {
          if (m < s.length && s[m] != 0) {
            d.eq(m)
              .height(s[m])
              .css("line-height", s[m] + "px");
          }
        }
      }
      var q = b.not(".verseStart").children();
      for (var n = 0; n < q.length; n++) {
        var o = q.eq(n);
        if (o.hasClass("w")) {
          var h = o.children();
          for (var g = 0; g < h.length; g++) {
            h.eq(g)
              .height(s[g])
              .css("line-height", s[g] + "px");
          }
        } else {
          if (step.util.uO(o.text())) {
            var p = o.index();
            if (p < s.length && s[p] != 0) {
              o.height(s[p]).css("line-height", s[p] + "px");
            }
          }
        }
      }
    }
  },
});
var PassageDisplayView = DisplayView.extend({
  el: function () {
    var b = step.util.uc(this.model.get("passageId"));
    var a = b.find(".passageContent");
    if (a.length == 0) {
      a = $('<div class="passageContent"></div>');
      b.find(".passageText").append(a);
    }
    return a;
  },
  initialize: function (a) {
    this.listenTo(this.model, "destroyViews", this.remove);
    this.listenTo(this.model, "destroy-column", this.remove);
    this.listenTo(this.model, "font:change", this.handleFontSizeChange, this);
    this.listenTo(this.model, "afterRender", this.scrollToTargetLocation, this);
    this.partRendered = a.partRendered;
    this.render();
  },
  render: function () {
    this.model.set("startRange", this.model.get("startRange"), {
      silent: true,
    });
    this.model.set("endRange", this.model.get("endRange"), {
      silent: true,
    });
    this.model.set("multipleRanges", this.model.get("multipleRanges"), {
      silent: true,
    });
    var f = this.model.get("selectedOptions") || [];
    var p = this.model.get("options") || [];
    var b = 0;
    cv[b] = f.indexOf("C") > -1 && p.indexOf("C") > -1;
    if (cv[b] && typeof c4 === "undefined") {
      cf.initCanvasAndCssForClrCodeGrammar();
    }
    var m,
      F = "",
      v = "",
      A,
      n = false,
      c = false;
    var q = this.model.get("osisId");
    var h = this.model.get("masterVersion");
    var t = this.model.get("extraVersions");
    var C = h.toUpperCase() + "," + t.toUpperCase();
    var E = step.util.uI(q.split(" "));
    var D = false;
    if (p.indexOf("C") > -1) {
      $("#colorgrammar-icon").show();
      if (f.indexOf("C") == -1) {
        if ($("#sideBargenderNumClrs").length == 1) {
          this.model.set("selectedOptions", f + "C");
        }
      }
      $("#sideBargenderNumClrs").show();
      $("#colorAdvancedConfig").show();
      $("#noColorGrammar").hide();
      if (E[1]) {
        if (
          C.indexOf("ESV") > -1 ||
          C.indexOf("THOT") > -1 ||
          C.indexOf("OHB") > -1 ||
          C.indexOf("NASB2020") > -1 ||
          C.indexOf("NET2FULL") > -1 ||
          C.indexOf("CUN") > -1
        ) {
          D = step.util.loadTOS();
          n = true;
        }
        if (C.indexOf("LXX") > -1) {
          c = true;
        }
      }
      if (
        E[0] &&
        (C.indexOf("ESV") > -1 ||
          C.indexOf("KJV") > -1 ||
          C.indexOf("SBLG") > -1 ||
          C.indexOf("THGNT") > -1 ||
          C.indexOf("NASB2020") > -1 ||
          C.indexOf("NET2FULL") > -1 ||
          C.indexOf("CUN") > -1)
      ) {
        c = true;
      }
    } else {
      $("#colorgrammar-icon").hide();
      $("#sideBargenderNumClrs").hide();
      $("#colorAdvancedConfig").hide();
      $("#noColorGrammar").show();
    }
    if (this.partRendered) {
      if (cv[b]) {
        if (n) {
          A = document.getElementsByClassName("passageContentHolder");
          var E = cf.addClassForTHOT(A[0].outerHTML, C);
          A[0].outerHTML = E[0];
          v = E[1];
        }
        if (c) {
          if (A == null) {
            A = document.getElementsByClassName("passageContentHolder");
          }
          F = cf.getClassesForNT(A[0].outerHTML);
        }
      }
      m = this.$el.find(".passageContentHolder");
    } else {
      if (cv[b]) {
        if (n) {
          var E = cf.addClassForTHOT(this.model.attributes.value, C);
          this.model.attributes.value = E[0];
          v = E[1];
        }
        if (c) {
          F = cf.getClassesForNT(this.model.attributes.value);
        }
      }
      m = $(this.model.get("value"));
    }
    $(".passageContainer.active").data("otCSS", v);
    $(".passageContainer.active").data("ntCSS", F);
    step.util.MQ();
    var o = this.model.get("passageId");
    var g = this.model.get("interlinearMode");
    var z = this.model.get("languageCode");
    var a = this.$el.closest(".passageContainer");
    if (this._isPassageValid(m, q)) {
      a.find(".resultsLabel").html("");
      this.dG(h);
      this.dD(g);
      this.dF(g);
      this.dE();
      this.dC(h, t);
      this.MJ(m, f, g, z);
      this.MI(m);
      this._doInlineNotes(m, o);
      this.MM(m, o, h);
      this.dM(m);
      this.dO(o, m, f, g, h);
      this.dP(m);
      this.dQ(m);
      step.util.ug(this.model, m);
      this._iM(o, m);
      this.dH(o, m);
      this.dR(o, m, h, this.model.get("reference"));
      this.dI(m);
      this.dJ(o, m, h, q);
      if (!this.partRendered) {
        step.util.ui.iU(this.$el, m);
      }
      var y =
        step.touchDevice && !step.touchWideDevice
          ? $(document)
          : $(this.$el).find(".passageContentHolder");
      y.scroll(function () {
        $(".versePopup").hide();
        if ($(this).find(".resultsLabel").text() !== "") {
          return;
        }
        var r = $(this).find(".verseNumber");
        var L =
          step.touchDevice && !step.touchWideDevice
            ? $(window).scrollTop() + 21
            : $(this).offset().top;
        for (var J = 0; J < r.length; J++) {
          var H = r[J];
          if ($(H).offset().top > L) {
            var G =
              step.touchDevice && !step.touchWideDevice
                ? $("button.select-reference")
                : $(this).parent().parent().find("button.select-reference");
            var K = H.innerHTML;
            var N = $(this).find(".interlinear").length > 0;
            if ((N && K.indexOf(":") > -1) || (!N && K.indexOf(":") == -1)) {
              var I = G[0].innerHTML.split(":");
              if (I[0] === "Ref") {
                I[0] = I[1];
              }
              if (N) {
                var M = H.innerHTML.split(":");
                if (M.length > 1) {
                  K = M[1];
                }
              }
              if (I[0].trim() === "") {
                K = "Ref";
              } else {
                K = I[0].trim() + ":" + K;
              }
            }
            $(G).text(K);
            break;
          }
        }
      });
      this.dB();
      this._addForeignLangToInterLinear();
      this.MK(m, g, f);
      this.ML(m, g, f);
      this.scrollToTargetLocation(a);
      step.util.setupGesture();
      $(".passageContentHolder", step.util.uc(step.util.uP())).focus();
    }
    var d = 11;
    var e = 16;
    if (cv[b] !== undefined && cv[e] !== undefined && cv[d] !== undefined) {
      if (cv[b]) {
        cv[e] = 0;
        cf.refreshClrGrammarCSS(F, v);
        if (cv[d] == -1) {
          cf.goAnimate();
        }
      }
    }
    if (step.util.u9(q) > -1) {
      var s = m.find(".xgen");
      if (
        s.length == 1 ||
        (s.length == 2 && $(s[0]).text().trim().length < 2)
      ) {
        $(s[s.length - 1]).append(
          '<button style="font-size:10px;line-height:10px;vertical-align:middle" type="button" onclick="step.util.ut(\'' +
            q +
            '\')" title="Show summary information" class="stepButton">' +
            __s.book_summary +
            "</button>"
        );
      }
    }
    if (!D) {
      step.util.addGrammar();
    }
    var x = $("span:contains(^)");
    for (var B = 0; B < x.length; B++) {
      if (x[B].outerText.length == 1) {
        $($("span:contains(^)")[B]).css("vertical-align", "sub");
        $($("span:contains(^)")[B]).attr("var", "other");
      }
    }
    var i = $.getUrlVars().indexOf("debug") > -1;
    var w = C.indexOf("MHCC") > -1;
    if (w || i) {
      var u = m.find(".introduction");
      if (u.length > 0) {
        u.show();
        if (i && !w) {
          u.children().css("color", "orange");
          alert(
            'One of the selected Bible or commentary has the "introduction" tag.  They are usually hidden.  Since the URL has debug in the query string, they are unhidden in orange color.  If you do not need to review the "introduction" tag, you can ignore them.'
          );
        }
      }
    }
  },
  _addForeignLangToInterLinear: function () {
    var g = step.userLanguageCode.toLowerCase();
    if (step.defaults.langWithTranslatedLex.indexOf(g) > -1) {
      var f = {};
      var e = $(".interlinear").find(".w ").find("span.strongs");
      for (var d = 0; d < e.length; d++) {
        var b = $(e[d]);
        var a = b.parent().attr("strong");
        if (typeof a !== "string" || a === "") {
          if (b.text() === "Eng Vocab") {
            b.html(
              "Eng Vocab<br>" +
                g.substring(0, 1).toUpperCase() +
                g.substring(1, 2) +
                " Vocab"
            );
          }
          continue;
        }
        a = a.split(" ")[0];
        if (a in f) {
          f[a].push(b);
        } else {
          f[a] = [b];
        }
      }
      for (var c in f) {
        fetch(
          "https://us.stepbible.org/html/lexicon/" + g + "_json/" + c + ".json"
        )
          .then(function (h) {
            return h.json();
          })
          .then(function (m) {
            var n = m.gloss.trim();
            var p = n.indexOf(":");
            if (p > -1) {
              n = n.substring(p + 1).trim();
            }
            for (var h = 0; h < f[m.strong].length; h++) {
              var o = f[m.strong][h];
              o.html(o.text() + "<br>" + n);
            }
          });
      }
    }
  },
  scrollToTargetLocation: function (d) {
    var b = this;
    if (!d) {
      d = step.util.uc(this.model.get("passageId"));
    }
    var e = step.passages.findWhere({
      linked: 1,
    });
    if (e != null) {
      var c = e.get("passageId");
      var a = step.util.uc(c);
      if (a.offset().top < d.offset().top) {
        $("body").animate(
          {
            scrollTop: d.offset().top,
          },
          200,
          null,
          function () {
            b._scrollPassageToTarget(d);
          }
        );
        return;
      }
    }
    this._scrollPassageToTarget(d);
  },
  _scrollPassageToTarget: function (e) {
    var b = e.closest(".column");
    e.find(".highlightBorder").removeClass("highlightBorder");
    var d = this.model.get("targetLocation");
    if (d) {
      var c = e.find("[name='" + d + "']");
      var g = c.offset();
      var a = g == undefined ? 0 : g.top + e.scrollTop() - e.offset().top;
      var f = -200;
      e.find(".passageContentHolder").animate(
        {
          scrollTop: f + a,
        },
        500
      );
      $(c).closest(".verse").addClass("highlightBorder");
      $(c).closest(".interlinear").find("*").addClass("highlightBorder");
      this.model.save(
        {
          targetLocation: null,
        },
        {
          silent: true,
        }
      );
    }
  },
  dC: function (c, d) {
    var f = [];
    f.push(c);
    if (d) {
      f = f.concat(d.split(","));
    }
    var b = _.map(f, function (g) {
      return step.keyedVersions[g];
    });
    var a =
      _.findWhere(b, {
        category: "COMMENTARY",
      }) != null;
    if (a) {
      var e = _.findWhere(b, {
        category: "BIBLE",
      });
      if (e == null) {
        step.util.MP(
          sprintf(__s.commentary_version_default),
          "info",
          this.model.get("passageId"),
          null,
          true
        );
        return;
      }
      step.util.MP(
        sprintf(__s.commentary_version, e.initials),
        "info",
        this.model.get("passageId"),
        null,
        true
      );
    }
  },
  dD: function (b) {
    if (
      b != "INTERLEAVED" &&
      b != "COLUMN" &&
      b != "NONE" &&
      b != "INTERLINEAR"
    ) {
      var a = step.settings.get("noStrongCompareWarning") || {};
      step.util.MP(
        __s.error_warn_no_strongs_when_compare,
        null,
        this.model.get("passageId"),
        null,
        a[b]
      );
      a[b] = true;
      step.settings.save({
        noStrongCompareWarning: a,
      });
    }
  },
  dE: function () {
    var a = this.model.get("options") || "";
    if (a.indexOf("D") != -1) {
      step.util.uL("display_divide_hebrew_explanation", "info");
    }
  },
  dF: function (b) {
    if (b != "INTERLINEAR") {
      return;
    }
    var a = step.settings.get("warnInterlinearFirstTime") || false;
    step.util.MP(
      __s.warn_interlinear_view_selected,
      null,
      this.model.get("passageId"),
      null,
      a
    );
    step.settings.save({
      warnInterlinearFirstTime: true,
    });
  },
  dG: function (a) {
    if (!step.keyedVersions) {
      console.warn("No versions have been loaded.");
      return;
    }
    if (
      step.keyedVersions[a].hasStrongs ||
      step.keyedVersions[a].category != "BIBLE"
    ) {
      return false;
    }
    var b = step.settings.get("noStrongWarnings") || {};
    step.util.MP(
      __s.error_warn_if_no_strongs,
      null,
      this.model.get("passageId"),
      null,
      b[a]
    );
    b[a] = true;
    step.settings.save({
      noStrongWarnings: b,
    });
  },
  dH: function (b, g) {
    var f = $(".versification-notice", g);
    for (var c = 0; c < f.length; c++) {
      var d = f.eq(c);
      var e = d.attr("international");
      var a = __s[e];
      d.attr("title", a);
      if (d.hasClass("duplicate")) {
        d.css("float", "left");
      }
      step.util.MP(a, "info", b);
    }
  },
  dI: function (a) {
    $(".w:not([strong]):not(.verseStart)", a).next().css("border-left", "none");
  },
  dJ: function (d, b, c, a) {
    if ($.getUrlVar("altMeanings") != "true") {
      return;
    }
    require(["search", "qtip"], function () {
      step.alternatives.enrichPassage(d, b, c, a);
    });
  },
  _isPassageValid: function (d, a) {
    if (d.find(":not(.xgen):first").length == 0) {
      var c = sprintf(__s.error_bible_doesn_t_have_passage, a);
      c += "<br>" + this.dK(a);
      var b = $("<span>").addClass("notApplicable").html(c);
      this.$el.html(b);
      return false;
    }
    return true;
  },
  dK: function (b) {
    var e = step.util.u9(b);
    if (e > -1) {
      var a = step.util.uQ().get("masterVersion");
      var c = "Old";
      var d = "New";
      if (e > 38) {
        c = "New";
        d = "Old";
      }
      if (typeof step.keyedVersions[a] !== "object") {
        return "";
      }
      if (
        (c === "New" && step.keyedVersions[a].hasAllNTOTorBoth === "O") ||
        (c === "Old" && step.keyedVersions[a].hasAllNTOTorBoth === "N")
      ) {
        var f =
          "<br>The Bible selected, " +
          a +
          ", only has the " +
          d +
          " Testament, but an " +
          c +
          ' Testament passage is selected.<br><br>You can either:<ul><li><a href="javascript:step.util.uo(3)">Add another Bible which has ' +
          c +
          'Testament.</a><li><a href="javascript:step.util.uo(4)">Select a ' +
          d +
          " Testament passage.</a></ul>";
        return f;
      }
    }
    return "";
  },
  _doInlineNotes: function (a) {
    var b = this;
    var d = $(".verse .note, h2 .note, h3 .note", a).has(".inlineNote");
    for (var c = 0; c < d.length; c++) {
      var f = d.get(c);
      var e = $("a", f);
      e.on("touchstart", function (g) {
        b.dL(a, $(this), g);
      })
        .hover(
          function (g) {
            if (!step.util.vMB) {
              b.dL(a, $(this), g);
            }
          },
          function () {
            if (!step.util.vMB) {
              $("#quickLexicon").remove();
            }
          }
        )
        .click(function (g) {
          if (step.util.timeoutID) {
            clearTimeout(step.util.timeoutID);
            step.util.timeoutID = null;
          }
          if (step.util.vMB) {
            step.util.vMB = false;
            b.dL(a, $(this), g);
          } else {
            step.util.vMB = true;
            $("#quickLexicon").find(".close").css("color", "yellow");
            $("#quickLexicon")
              .find("a.sideNote")
              .find("strong")
              .parent()
              .addClass("glyphicon glyphicon-lock");
            var h = function () {
              if (step.util.vMB) {
                step.util.vMB = false;
              }
              $("#quickLexicon").find(".close").css("color", "white");
              $("#quickLexicon")
                .find("a.sideNote")
                .find("strong")
                .parent()
                .removeClass("glyphicon glyphicon-lock");
              step.util.timeoutID = null;
            };
            $("#quickLexicon")
              .find("a.sideNote")
              .find("strong")
              .parent()
              .click(h);
            step.util.timeoutID = setTimeout(h, 15000);
          }
        });
    }
  },
  dL: function (c, b, a) {
    require(["quick_lexicon"], function () {
      var e = b.closest(".note").find(".inlineNote");
      var d =
        typeof a.pageY !== "number" &&
        typeof a.originalEvent.touches[0].pageY === "number"
          ? a.originalEvent.touches[0].pageY
          : a.pageY;
      new QuickLexicon({
        text: e,
        strong: null,
        morph: null,
        target: c,
        position: d,
        height: $(window).height(),
        touchEvent: false,
      });
    });
  },
  MM: function (g, e, f) {
    var n = this;
    var b = e == 0 ? "left" : "right";
    var a = e == 0 ? "right" : "left";
    $(".notesPane > a", g).click(function (i) {
      i.preventDefault();
    });
    var c = $(".notesPane [xref]", g);
    for (var d = 0; d < c.length; d++) {
      var m = c.eq(d);
      var h = m.attr("xref");
      m.click(function (i) {
        i.preventDefault();
      });
      this.MO(m, h, b, a, f);
    }
  },
  MO: function (d, f, e, a, b) {
    var c = this;
    d.on("mouseover", function () {
      c.MN(d, f, e, a, b, false);
    }).on("touchstart", function () {
      c.MN(d, f, e, a, b, true);
    });
  },
  MN: function (d, f, e, a, b, g) {
    var c = this;
    if (!step.util.uAC(b, [f.split(" ")[0]], [], true, true)) {
      b = "ESV";
    }
    if (!$.data(d, "initialised")) {
      require(["qtip", "drag"], function () {
        d.qtip({
          position: {
            my: "top " + e,
            at: "top " + a,
            viewport: $(window),
          },
          style: {
            tip: false,
            classes: "draggable-tooltip xrefPopup",
            width: {
              min: 800,
              max: 800,
            },
          },
          show: {
            event: "click",
          },
          hide: {
            event: "click",
          },
          content: {
            text: function (o, n) {
              var m = b;
              if (
                step.keyedVersions[b] &&
                step.keyedVersions[b].category != "BIBLE"
              ) {
                var q = _.where(c.model.get("searchTokens"), {
                  itemType: VERSION,
                });
                m = "ESV";
                for (var h = 0; h < q.length; h++) {
                  var p = step.keyedVersions[(q[h].item || {}).initials];
                  if (p != null && p.category == "BIBLE") {
                    m = p.initials;
                  }
                }
              }
              $.getSafe(
                BIBLE_GET_BIBLE_TEXT + m + "/" + encodeURIComponent(f),
                function (r) {
                  var i = r.value;
                  if (r.value.length > 1100) {
                    i = $(r.value).text().substring(0, 900) + " ...";
                  }
                  n.set("content.title.text", r.longName);
                  n.set("content.text", i);
                  n.set("content.osisId", r.osisId);
                }
              ).error(function () {
                changeBaseURL();
              });
            },
            title: {
              text: f,
              button: false,
            },
          },
          events: {
            render: function (i, h) {
              $(h.elements.titlebar).css("padding-right", "0px");
              $(h.elements.titlebar).prepend(
                $(
                  '<span class="glyphicon glyphicon-new-window openRefInColumn"></span>'
                ).on("click touchstart", function () {
                  step.util.uX(
                    c.model.get("passageId"),
                    h.get("content.osisId"),
                    true,
                    null,
                    i
                  );
                  return false;
                })
              );
              $(h.elements.titlebar).prepend(
                $(
                  '<button type="button" class="close" aria-hidden="true">X</button>'
                ).on("click touchstart", function () {
                  h.hide();
                  return false;
                })
              );
            },
            visible: function (m, i) {
              var n = i.elements.tooltip;
              var h = g ? ".qtip-title" : ".qtip-titlebar";
              if (g) {
                n.find(".qtip-title").css("width", "90%");
              }
              new Draggabilly($(n).get(0), {
                containment: "body",
                handle: h,
              });
              step.util.ui.iM(c.model.get("passageId"), n);
            },
          },
        });
        $.data(d, "initialised", true);
      });
    }
  },
  dM: function (b) {
    var a = $(".verse .note, h3 .note, h2 .note", b);
    var d = a.not(a.has(".inlineNote"));
    for (var c = 0; c < d.length; c++) {
      this.dN(b, $("a", d.eq(c)));
    }
  },
  dN: function (a, d) {
    var b = $(".notesPane strong", a)
      .filter(function () {
        return $(this).text() == d.text();
      })
      .closest(".margin");
    var c = $(d);
    require(["qtip"], function () {
      c.qtip({
        show: {
          event: "mouseenter",
        },
        hide: {
          event: "unfocus mouseleave",
          fixed: true,
          delay: 200,
        },
        position: {
          my: "top center",
          at: "top center",
          of: c,
          viewport: $(window),
          effect: false,
        },
        style: {
          classes: "xrefHover",
        },
        overwrite: true,
        content: {
          text: b,
        },
      });
    });
  },
  dO: function (c, a, d, f, b) {
    var e = f != undefined && f != "" && f != "INTERLINEAR";
    if (d == undefined || (d.indexOf("V") == -1 && !e)) {
      return;
    }
    step.util.ui.iZ(c, a, b);
  },
  dP: function (a) {
    var b = $(".notesPane", a);
    if (b.text().trim().length == 0) {
      b.toggle(false);
    }
  },
  dQ: function (a) {
    if (
      a.attr("dir") == "ltr" ||
      $(".ltr:first", a).size() > 0 ||
      $("[dir='ltr']:first", a).size() > 0 ||
      $(".ltrDirection:first", a).size() > 0
    ) {
      return;
    }
    a.addClass("rtlDirection");
  },
  dR: function (d, b, c, a) {
    var f = $(".verse:first", b).clone();
    f.find(".verseNumber, .note, sup").remove();
    var e =
      a + " | " + step.keyedVersions[c].shortInitials + " | STEP | " + f.text();
    $("title").html(e);
  },
  _iM: function (b, a) {
    step.util.ui.iM(b, a);
  },
  dB: function () {
    this.dA("clrHighlight", "#17758F");
    this.dA("clrHighlightBg", "#17758F");
    this.dA("clrText", "#5d5d5d");
    this.dA("clr2ndHover", "#d3d3d3");
    this.dA("clrStrongText", "#447888");
    this.dA("clrLexiconFocusBG", "#c8d8dc");
    this.dA("clrRelatedWordBg", "#b2e5f3");
    this.dA("clrBackground", "#ffffff");
    if (step.util.u5()) {
      $("body,html").css("color-scheme", "dark");
    } else {
      $("body,html").css("color-scheme", "normal");
    }
  },
  dA: function (a, c) {
    var b = step.settings.get(a);
    if (!(typeof b === "string" && b.length == 7 && b.substr(0, 1) === "#")) {
      b = c;
    }
    document.querySelector(":root").style.setProperty("--" + a, b);
  },
  handleFontSizeChange: function () {
    this.ML(
      this.$el,
      this.model.get("interlinearMode"),
      this.model.get("options")
    );
  },
});
var HistoryModel = Backbone.Model.extend({
  defaults: function () {
    return {
      args: undefined,
      favourite: false,
      lastAccessed: undefined,
      options: undefined,
      display: undefined,
    };
  },
});
var HistoryModelList = Backbone.Collection.extend({
  model: HistoryModel,
  localStorage: new Backbone.LocalStorage("history-searches"),
  comparator: function (f, d) {
    var e = f.get("favourite");
    var g = d.get("favourite");
    var c = f.get("lastAccessed");
    var h = d.get("lastAccessed");
    if (e == g) {
      return c > h ? -1 : 1;
    }
    if (e) {
      return -1;
    }
    if (g) {
      return 1;
    }
    return 0;
  },
});
var PassageModel = Backbone.Model.extend({
  defaults: function () {
    return {
      passageId: 0,
      pageNumber: 1,
      options: "NHVUG",
      interlinearMode: "",
    };
  },
});
var PassageModelList = Backbone.Collection.extend({
  model: PassageModel,
  localStorage: new Backbone.LocalStorage("passage-searches"),
  initialize: function () {
    this.on("change", this.changePassage, this);
  },
  changePassage: function (e, d, f) {
    if (e.get("createSilently")) {
      e.save(
        {
          createSilently: null,
        },
        {
          silent: true,
        }
      );
      return;
    }
    step.router.mD();
  },
});
var SettingsModel = Backbone.Model.extend({
  defaults: function () {
    return {};
  },
});
var SettingsModelList = Backbone.Collection.extend({
  model: SettingsModel,
  localStorage: new Backbone.LocalStorage("settings"),
  initialize: function () {},
});
var PassageMenuView = Backbone.View.extend({
  infoIcon:
    '<a href="javascript:void(0)" class="infoIcon" data-html="true" data-toggle="popover" data-placement="top"><span class="glyphicon glyphicon-info-sign"></span></a>',
  infoIconMobile:
    '<a href="javascript:void(0)" style="position:fixed;top:unset;bottom:3%" class="infoIcon" data-html="true" data-toggle="popover" data-placement="top"><span class="glyphicon glyphicon-info-sign"></span></a>',
  events: {
    "click a[name]": "updateModel",
    "click .previousChapter": "goToPreviousChapter",
    "click .nextChapter": "goToNextChapter",
    "click .closeColumn": "closeColumn",
    "click .openNewPanel": "openNewPanel",
    "click .resizePanel": "resizePanel",
    "show.bs.dropdown *": "handleDropdownMenu",
  },
  fontButtons:
    '<li><%= __s.font_sizes %><span class="<%= step.state.isLtR() ? "pull-right" : "pull-left" %> btn-group"><button class="btn btn-default btn-sm largerFontSize" type="button" title="<%= __s.font %>"><span class="largerFont"><%= __s.passage_font_size_symbol %></span></button></span></li>',
  quickLexicon:
    '<li><a href="javascript:void(0)" data-selected="true"><span><%= __s.quick_lexicon %></span><span class="glyphicon glyphicon-ok pull-right" style="visibility: <%= isQuickLexicon ? "visible" : "hidden" %>"></span></a></li>',
  similarWord:
    '<li><a href="javascript:void(0)" data-selected="true"><span><%= __s.similar_word %></span><span class="glyphicon glyphicon-ok pull-right" style="visibility: <%= isSimilarWord ? "visible" : "hidden" %>"></span></a></li>',
  enWithZhLexicon:
    '<li><a href="javascript:void(0)" data-selected="true"><span><%= __s.en_with_zh_lexicon %></span><span class="glyphicon glyphicon-ok pull-right" style="visibility: <%= isEnWithZhLexicon ? "visible" : "hidden" %>"></span></a></li>',
  secondZhLexicon:
    '<li><a href="javascript:void(0)" data-selected="true"><span><%= __s.zh_second_zh_lexicon %></span><span class="glyphicon glyphicon-ok pull-right" style="visibility: <%= isSecondZhLexicon ? "visible" : "hidden" %>"></span></a></li>',
  verseVocab:
    '<li><a href="javascript:void(0)" data-selected="true"><span><%= __s.verse_vocab %></span><span class="glyphicon glyphicon-ok pull-right" style="visibility: <%= isVerseVocab ? "visible" : "hidden" %>"></span></a></li>',
  swipeLeftRight:
    '<li><a href="javascript:void(0)" data-selected="true"><span>Swipe left/right</span><span class="glyphicon glyphicon-ok pull-right" style="visibility: <%= isSwipeLeftRight ? "visible" : "hidden" %>"></span></a></li>',
  el: function () {
    return step.util
      .uc(this.model.get("passageId"))
      .find(".passageOptionsGroup");
  },
  items: [
    {
      initial: "H",
      key: "display_headings",
    },
    {
      initial: "V",
      key: "display_verseNumbers",
    },
    {
      initial: "X",
      key: "display_extendedReference",
      help: "display_extendedReference_help",
    },
    {
      initial: "L",
      key: "display_separateLines",
    },
    {
      initial: "R",
      key: "display_redLetter",
    },
    {
      initial: "N",
      key: "display_notes",
    },
    {
      group: "display_vocab_options",
      items: [
        {
          initial: "E",
          key: "display_englishVocab",
        },
        {
          initial: "A",
          key: "display_greekVocab",
        },
        {
          initial: "T",
          key: "display_transliteration",
        },
        {
          initial: "B",
          key: "display_spanishVocab",
        },
        {
          initial: "Z",
          key: "display_chineseVocab",
        },
        {
          initial: "M",
          key: "display_grammar",
        },
      ],
    },
    {
      group: "original_language_options",
      items: [
        {
          initial: "O",
          key: "display_original_transliteration",
        },
        {
          initial: "D",
          key: "display_divide_hebrew",
          help: "display_divide_hebrew_help",
        },
        {
          initial: "G",
          key: "display_greek_pointing",
          help: "display_greek_accents_help",
        },
        {
          initial: "U",
          key: "display_hebrew_vowels",
          help: "display_hebrew_vowels_help",
        },
        {
          initial: "P",
          key: "display_pointing_include_hebrew",
          help: "display_pointing_include_hebrew_vowels_help",
        },
      ],
    },
  ],
  initialize: function () {
    var a = this;
    _.bindAll(this);
    this.listenTo(this.model, "sync-update", this._updateVisibleDropdown);
    this.listenTo(this.model, "destroy-column", this.remove);
    this.column = this.$el.closest(".column");
    this.column.click(this.activateColumn);
    this._updateVisibleDropdown();
    this.warnings = $(step.util.uc(this.model.get("passageId"))).find(
      ".infoIcon"
    );
    if (this.warnings.length == 0) {
      if (step.touchDevice && !step.touchWideDevice) {
        this.warnings = $(_.template(this.infoIconMobile)());
      } else {
        this.warnings = $(_.template(this.infoIcon)());
      }
      this.$el.parent().append(this.warnings);
    }
    this.listenTo(this.model, "raiseMessage", this.raiseMessage);
    this.listenTo(this.model, "squashErrors", this.squashError);
    this.listenTo(
      Backbone.Events,
      "columnsChanged",
      this.updateVisibleCloseButton
    );
  },
  vA: function () {
    var b =
      (this.warnings.attr("data-content") || "").indexOf(
        "glyphicon-exclamation-sign"
      ) != -1;
    var a =
      (this.warnings.attr("data-content") || "").indexOf(
        "glyphicon-warning-sign"
      ) != -1;
    if (b) {
      this.warnings
        .removeClass("text-muted text-info text-warning text-warning")
        .addClass("text-danger")
        .find(".glyphicon")
        .removeClass(
          "glyphicon-exclamation-sign glyphicon-warning-sign glyphicon-info-sign"
        )
        .addClass("glyphicon-exclamation-sign");
    } else {
      if (a) {
        this.warnings
          .removeClass("text-muted text-info text-danger text-warning")
          .addClass("text-warning")
          .find(".glyphicon")
          .removeClass(
            "glyphicon-exclamation-sign glyphicon-warning-sign glyphicon-info-sign"
          )
          .addClass("glyphicon-warning-sign");
      } else {
        this.warnings
          .removeClass("text-muted text-info text-danger text-warning")
          .addClass("text-info")
          .find(".glyphicon")
          .removeClass(
            "glyphicon-exclamation-sign glyphicon-warning-sign glyphicon-info-sign"
          )
          .addClass("glyphicon-info-sign");
      }
    }
  },
  raiseMessage: function (b) {
    var a = this;
    var c = this.warnings.attr("data-content") || "";
    if (c != "") {
      c += "<p />";
    }
    if (b.level == "warning") {
      c +=
        '<span class="text-warning glyphicon glyphicon-warning-sign"></span> ';
    } else {
      if (b.level == "danger" || b.level == "error") {
        c +=
          '<span class="text-danger glyphicon glyphicon-exclamation-sign"></span> ';
      } else {
        if (b.level == "info") {
          c += '<span class="text-info glyphicon glyphicon-info-sign"></span> ';
        }
      }
    }
    c += b.message;
    this.warnings
      .popover({
        html: true,
      })
      .on("hide.bs.popover", function () {
        a.vB();
      });
    this.warnings.attr("data-content", c);
    this.vA();
    this.warnings.show();
    if (b.silent != true) {
      this.warnings.popover("show");
      if (step.touchDevice && !step.touchWideDevice) {
        $(".popover.fade.top.in").css("position", "fixed");
      }
      this.warnings.next(".popover").on("click", function () {
        a.warnings.popover("hide");
        a.vB();
      });
    } else {
      this.warnings.on("shown.bs.popover", function () {
        if (step.touchDevice && !step.touchWideDevice) {
          $(".popover.fade.top.in").css("position", "fixed");
        }
        a.warnings.next(".popover").on("click", function () {
          a.warnings.popover("hide");
          a.vB();
        });
      });
    }
  },
  vB: function () {
    this.warnings.removeClass("text-info text-warning text-danger");
    this.warnings.addClass("text-muted");
  },
  squashError: function () {
    this.warnings.attr("data-content", "");
    this.warnings.hide();
    this.warnings.popover("hide");
    this.vA();
  },
  handleDropdownMenu: function (b) {
    var a = this;
    if (!a.rendered) {
      if (!a.rendered) {
        a.vK();
        a.rendered = true;
        a.vE(b.target);
      }
    } else {
      a.vE(b.target);
    }
  },
  _updateVisibleDropdown: function () {
    var b = step.util.uM("swipeCount");
    if (b == null) {
      b = -1;
    }
    var e = step.passages
      .findWhere({
        passageId: 0,
      })
      .get("isSwipeLeftRight");
    if (e == undefined) {
      e = true;
    }
    var c = navigator.userAgent.toLowerCase();
    if (step.touchDevice && b > 6 && e && !step.appleTouchDevice) {
      $(".nextPreviousChapterGroup").css("display", "none");
    } else {
      $(".nextPreviousChapterGroup").css("display", "block");
      var g = this.$el.find(".dropdown.open");
      if (this.vF(g)) {
        this.vH();
      }
      var h = this.model.get("searchType") === "PASSAGE";
      var i = this.$el.find(".nextPreviousChapterGroup");
      i.toggle(true);
      nextOnly = i.find(".nextChapter");
      nextOnly.toggle(h);
      prevOnly = i.find(".previousChapter");
      prevOnly.toggle(true);
      this.$el.find(".contextContainer").toggle(!h);
    }
    if (step.touchDevice && !step.appleTouchDevice) {
      var d = step.util.uM("swipeIntro");
      if (d != 1) {
        var f = step.util.uM("step.usageCount");
        if (f == null) {
          f = 0;
        } else {
          if (f > 0) {
            var a = [
              {
                intro: __s.swipe_lr,
              },
            ];
            introJs()
              .setOptions({
                steps: a,
              })
              .start();
            step.util.ub("swipeIntro", 1);
          }
        }
      }
    }
  },
  vE: function (a) {
    if (this.vF(a)) {
      this.vH();
    } else {
      if (this.vG(a)) {
        this.vW();
      }
    }
    this._updateVisibleDropdown();
  },
  vF: function (a) {
    return $(a).has(">.showSettings").length > 0;
  },
  vG: function (a) {
    return $(a).has(">.dropdown-share").length > 0;
  },
  vH: function () {
    if (
      this.model == undefined ||
      step.keyedVersions == undefined ||
      !this.rendered
    ) {
      console.log("Unable to find a passage");
      return;
    }
    var a = step.keyedVersions[this.model.get("masterVersion")];
    this.vJ(a);
    this.vI();
  },
  vI: function () {
    var d = this.model.get("options") || "";
    var b = this.model.get("searchType") === "PASSAGE";
    this.displayOptions.toggle(b);
    if (!b) {
      return;
    }
    var e = this.displayOptions.find("li.passage");
    for (var c = 0; c < e.length; c++) {
      var a = e.eq(c);
      var f = a.find("[data-value]").attr("data-value");
      a.toggle(d.indexOf(f) != -1);
    }
    this.displayOptions.find(".menuGroup").each(function (g, h) {
      var m = $(h);
      m.css("font-weight", "bold");
      var o = $(m.data("target")).find("li");
      var n = false;
      for (var g = 0; g < o.length; g++) {
        n = n || (o.eq(g).css("display") || "") != "none";
      }
      m.toggle(n);
    });
  },
  vJ: function (a) {
    this.displayModeContainer.find(".glyphicon").removeClass("active");
    this.displayModeContainer
      .find("[data-value='" + this.model.get("interlinearMode") + "']")
      .find(".glyphicon")
      .addClass("active");
    var d = this.model.get("extraVersions");
    if (d == undefined || d === "") {
      d = [];
    } else {
      d = d.split(",");
    }
    if (d.length == 0) {
      this.displayModeContainer.hide();
      return;
    } else {
      this.displayModeContainer.show();
    }
    var f = a.hasStrongs;
    var g = true;
    var h = a.category == "BIBLE";
    var c = a.languageCode;
    for (var e = 0; e < d.length; e++) {
      var b = step.keyedVersions[d[e]];
      f = f && b.hasStrongs;
      h = h && b.languageCode == c;
      h = h && b.category == "BIBLE";
      g = g && b.hasSeptuagintTagging == a.hasSeptuagintTagging;
    }
    this.displayModeContainer
      .find("a[data-value='INTERLINEAR']")
      .closest("li")
      .toggle(f && g);
    this.displayModeContainer
      .find("a[data-value='INTERLEAVED_COMPARE']")
      .closest("li")
      .toggle(h);
    this.displayModeContainer
      .find("a[data-value='COLUMN_COMPARE']")
      .closest("li")
      .toggle(h);
  },
  vK: function () {
    var a = this.$el.find(".dropdown-menu.pull-right.stepModalFgBg");
    if (a.length == 1) {
      this.$el.find(".dropdown-menu.pull-right.stepModalFgBg")[0].remove();
    }
    var d = $("<div>")
      .addClass("dropdown-menu pull-right stepModalFgBg")
      .attr("role", "menu")
      .attr("dir", step.state.isLtR() ? "" : "rtl");
    this.displayModeContainer = $("<div>");
    var c = $("<h2>").append(__s.display_mode);
    this.displayModeContainer.append(c);
    this.displayModeContainer.append(this.vL());
    d.append(this.displayModeContainer);
    this.displayOptions = this.vM();
    this.otherOptions = this.vO();
    d.append(this.displayOptions)
      .append(_.template("<h2><%= __s.general_options %></h2>")())
      .append(this.otherOptions);
    var b = $("<div>")
      .addClass("dropdown-menu pull-right")
      .attr("role", "menu");
    this.$el.find(".dropdown:has(.dropdown-share)").append(b);
    this.$el.find(".dropdown:has(.showSettings)").append(d);
  },
  vL: function () {
    var a = step.defaults.passage.interOptions;
    var f = step.defaults.passage.interNamedOptions;
    var g = step.defaults.passage.interOptionsExplanations;
    var d = $("<ul>").addClass("displayModes");
    for (var c = 0; c < a.length; c++) {
      var e = this.vS(f[c], a[c], g[c]);
      d.append($("<li>").append(e).attr("role", "presentation"));
    }
    var b = this;
    d.find("a").click(function (h) {
      h.stopPropagation();
      d.find("a").not(this).find(".glyphicon").removeClass("active");
      $(this).find(".glyphicon").addClass("active");
      b.vU();
    });
    return d;
  },
  vM: function () {
    var d = $('<span class="displayOptionsContainer panel-group">').attr(
      "id",
      "displayOptions-" + this.model.get("passageId")
    );
    var c = $("<h2>").append(__s.display_options);
    var e = $("<ul>").addClass("passageOptions");
    var b = this.model.get("context") || 0;
    var a = $('<li class="noHighlight contextContainer">').append(
      $(
        '<span class="contextLabel" dir="' +
          (step.state.isLtR() ? "ltr" : "rtl") +
          '"></span>'
      ).append(this.vN(b))
    );
    e.append(this.vQ(e));
    e.append(a);
    d.append(c);
    d.append(e);
    return d;
  },
  vN: function (a) {
    return sprintf(__s.search_context, a);
  },
  vO: function () {
    var m = $("<ul></ul>");
    var i = this;
    var b = this.model.get("context") || 0;
    var g = $('<li class="noHighlight contextContainer">').append(
      $(
        '<span class="contextLabel" dir="' +
          (step.state.isLtR() ? "ltr" : "rtl") +
          '"></span>'
      ).append(this.vN(b))
    );
    g.append(
      $(
        '<span class="btn-group ' +
          (step.state.isLtR() ? "pull-right" : "pull-left") +
          '"></span>'
      )
        .append(
          '<button class="btn btn-default btn-xs"><span class="glyphicon glyphicon-minus" title="' +
            __s.search_less_context +
            '"></span></button>'
        )
        .append(
          '<button class="btn btn-default btn-xs"><span class="glyphicon glyphicon-plus" title="' +
            __s.search_more_context +
            '"></span></button>'
        )
    );
    g.find("button").click(function (o) {
      o.stopPropagation();
      var p = i.model.get("context");
      var n = $(this).find(".glyphicon-minus").length ? -1 : 1;
      if (step.util.uO(p)) {
        p = 0;
      } else {
        if (isNaN(p)) {
          p = 0;
        } else {
          p = parseInt(p);
        }
      }
      p += n;
      if (p < 0) {
        p = 0;
      }
      $(this).closest("li").find(".contextLabel").html(i.vN(p));
      i.model.save({
        context: p,
      });
    });
    var a = i.model.get("isQuickLexicon");
    if (a == null) {
      this.model.save({
        isQuickLexicon: true,
      });
      a = true;
    }
    m.append(
      $(
        _.template(this.quickLexicon)({
          isQuickLexicon: a,
        })
      ).click(function (o) {
        o.stopPropagation();
        var n = !i.model.get("isQuickLexicon");
        i.model.save({
          isQuickLexicon: n,
        });
        i.vV(this, n);
      })
    );
    if (step.userLanguageCode.toLowerCase().indexOf("zh") == 0) {
      var e = i.model.get("isEnWithZhLexicon");
      if (e == null) {
        this.model.save({
          isEnWithZhLexicon: false,
        });
        e = false;
      }
      m.append(
        $(
          _.template(this.enWithZhLexicon)({
            isEnWithZhLexicon: e,
          })
        ).click(function (n) {
          n.stopPropagation();
          var o = !i.model.get("isEnWithZhLexicon");
          i.model.save({
            isEnWithZhLexicon: o,
          });
          i.vV(this, o);
        })
      );
      var d = i.model.get("isSecondZhLexicon");
      if (d === null) {
        this.model.save({
          isSecondZhLexicon: false,
        });
        d = false;
      }
      m.append(
        $(
          _.template(this.secondZhLexicon)({
            isSecondZhLexicon: d,
          })
        ).click(function (o) {
          o.stopPropagation();
          var n = !i.model.get("isSecondZhLexicon");
          i.model.save({
            isSecondZhLexicon: n,
          });
          i.vV(this, n);
        })
      );
    }
    var h = i.model.get("isVerseVocab");
    if (h == null) {
      this.model.save({
        isVerseVocab: true,
      });
      h = true;
    }
    m.append(
      $(
        _.template(this.verseVocab)({
          isVerseVocab: h,
        })
      ).click(function (o) {
        o.stopPropagation();
        var n = !i.model.get("isVerseVocab");
        i.model.save({
          isVerseVocab: n,
        });
        require(["qtip"], function () {
          $(".verseNumber", step.util.uc(m)).closest("a").qtip("destroy");
        });
        i.vV(this, n);
      })
    );
    var c = i.model.get("isSimilarWord");
    if (c == null) {
      this.model.save({
        isSimilarWord: true,
      });
      c = true;
    }
    m.append(
      $(
        _.template(this.similarWord)({
          isSimilarWord: c,
        })
      ).click(function (n) {
        n.stopPropagation();
        var o = !i.model.get("isSimilarWord");
        i.model.save({
          isSimilarWord: o,
        });
        i.vV(this, o);
      })
    );
    m.append(g);
    m.append(_.template(this.fontButtons)())
      .find(".largerFontSize")
      .click(this.changeFontSizeInThisPanel);
    if (step.touchDevice && step.util.uP() == 0) {
      var f = i.model.get("isSwipeLeftRight");
      if (f == undefined) {
        this.model.save({
          isSwipeLeftRight: true,
        });
        f = true;
      }
      m.append(
        $(
          _.template(this.swipeLeftRight)({
            isSwipeLeftRight: f,
          })
        ).click(function (p) {
          p.stopPropagation();
          var o = i.model.get("isSwipeLeftRight");
          if (o == undefined) {
            o = true;
          }
          var q = !o;
          i.model.save({
            isSwipeLeftRight: q,
          });
          i.vV(this, q);
          var n = q ? "none" : "block";
          $(".nextPreviousChapterGroup").css("display", n);
        })
      );
    }
    return m;
  },
  vP: function (p, g) {
    var d = this.model.get("selectedOptions") || "";
    for (var f = 0; f < g.length; f++) {
      if (g[f].group) {
        var a = $('<div class="panel panel-default stepModalFgBg">');
        var o =
          '<a data-toggle="collapse" class="menuGroup" data-parent="#displayOptions-' +
          this.model.get("passageId") +
          '" data-target="#displayOptions-' +
          g[f].group +
          this.model.get("passageId") +
          '">' +
          __s[g[f].group] +
          '<span class="caret"></span></a>';
        var e = $('<div class="panel-collapse collapse"></div>').attr(
          "id",
          "displayOptions-" + g[f].group + this.model.get("passageId")
        );
        var c = $("<div class='panel-body'>");
        e.append(c);
        this.vP(c, g[f].items || []);
        a.append(o).append(e);
        p.append(a);
      } else {
        if (
          g[f].initial === "Z" &&
          step.userLanguageCode.toLowerCase() === "zh"
        ) {
          g[f].initial = "S";
        }
        if (
          !(
            (g[f].initial === "Z" &&
              step.userLanguageCode.toLowerCase() !== "zh_tw") ||
            (g[f].initial === "S" &&
              step.userLanguageCode.toLowerCase() !== "zh") ||
            (g[f].initial === "B" &&
              step.userLanguageCode.toLowerCase() !== "es")
          )
        ) {
          var n = __s[g[f].key];
          var m = __s[g[f].help];
          var h = this.vS(g[f].initial, n, m);
          var b = d.indexOf(g[f].initial) != -1;
          if (g[f].initial === "U" && !b) {
            b = d.indexOf("P");
          }
          this.vV(h, b);
        }
      }
      p.append($("<li>").addClass("passage").append(h)).attr(
        "role",
        "presentation"
      );
    }
  },
  vQ: function (c) {
    this.vP(c, this.items);
    var b = this;
    var a = c.find("a");
    this.vR(a.not("[data-toggle]"), false, function () {
      b.vU();
    });
    a.filter("[data-toggle]").on("click", function (d) {
      d.stopPropagation();
      var e = $($(this).closest("[data-target]").data("target"));
      e.collapse("toggle", !e.hasClass("in"));
    });
    return c;
  },
  vR: function (d, c, b) {
    var a = this;
    d.click(function (g) {
      g.stopPropagation();
      var f = $(this);
      if (c) {
        $.each(f.closest("ul").find("a"), function () {
          a.vV($(this), false);
        });
        a.vV(f, true);
      } else {
        var h = f.find(".glyphicon").css("visibility") === "hidden";
        a.vV(f, h);
      }
      if (b) {
        b(f);
      }
    });
  },
  vS: function (a, c, b) {
    return $("<a></a>")
      .attr("href", "javascript:void(0)")
      .attr("data-value", a)
      .attr("title", b)
      .append("<span>" + c + "</span>")
      .append(step.util.ui.iA("pull-right"));
  },
  vU: function () {
    var c = this.displayOptions.find("[data-selected='true']");
    var b = "";
    for (var a = 0; a < c.length; a++) {
      b += c.eq(a).data("value");
    }
    if (b.indexOf("P") > -1 && b.indexOf("U") == -1) {
      $("a[data-value='U']").find(".glyphicon").css("visibility", "visible");
    } else {
      if (b.indexOf("P") == -1 && b.indexOf("U") == -1) {
        $("a[data-value='U']").find(".glyphicon").css("visibility", "hidden");
      }
    }
    this.model.save({
      pageNumber: 1,
      selectedOptions: b,
      interlinearMode: this.displayModeContainer
        .find("a:has(.glyphicon.active)")
        .attr("data-value"),
    });
    return b;
  },
  vV: function (a, c) {
    var b = $(a);
    b.find(".glyphicon").css("visibility", c ? "visible" : "hidden");
    b.attr("data-selected", c);
  },
  vW: function () {
    step.util.uP(this.model.get("passageId"));
    if (step.state.isLocal()) {
      return;
    }
    var c = this.$el
      .find(".dropdown-share")
      .closest(".dropdown")
      .find(".dropdown-menu");
    if (!this.sharingBar) {
      this.sharingBar = $("<ul>");
      c.append(this.sharingBar);
    } else {
      this.sharingBar.empty();
    }
    var b = step.router.mE(this.model.get("passageId"), true);
    if (window.twttr != undefined) {
      var d = $(
        '<a href="https://twitter.com/share" class="twitter-share-button" data-via="Tyndale_House">Tweet</a>'
      );
      d.attr("data-url", b);
      d.attr("data-text", $("title").text());
      this.sharingBar.append($("<li>").append(d));
      window.twttr.widgets.load();
    }
    if (window.FB && window.FB.XFBML) {
      if (b != null) {
        if (b.indexOf("-") > -1) {
          alert(
            "Sorry, Facebook does not accept a URL with a '-' character.  The passage selected has a '-' chaaracter."
          );
        } else {
          b = b.replace(/\|/g, "@");
          var a = $(
            '<fb:share-button type="button_count"></fb:share-button>'
          ).attr("href", b);
          this.sharingBar.append($("<li>").append(a));
          window.FB.XFBML.parse(a.parent().get(0));
        }
      }
    }
  },
  changeFontSizeInThisPanel: function (a) {
    a.stopPropagation();
    step.util.showFontSettings(this.model.get("passageId"));
    return false;
  },
  goToPreviousChapter: function (a) {
    this.vX(this.model.get("previousChapter"), a, false);
  },
  goToNextChapter: function (a) {
    this.vX(this.model.get("nextChapter"), a, true);
  },
  vX: function (b, d, c) {
    if (d) {
      d.preventDefault();
    }
    var a = step.util.getArgsForSiblingChapter(this, b, c);
    step.router.mD(a);
  },
  closeColumn: function (d) {
    var c = $(d.target).closest("button");
    if (c.hasClass("disabled")) {
      d.stopPropagation();
      c.blur();
      return;
    }
    this.model.trigger("destroy-column");
    this.column.remove();
    step.util.uS();
    step.util.uV();
    var b = parseInt(this.column.find("[passage-id]").attr("passage-id"));
    var e = step.util.ua(b);
    var f = this.model.get("linked");
    if (f != null) {
      var a = step.passages.findWhere({
        passageId: f,
      });
      if (a) {
        step.util.uc(a.get("passageId")).find(".linkPanel").remove();
      }
    }
    if (e.length > 0) {
      step.util.uP(e[0]);
    } else {
      step.util.uP();
    }
    this.model.destroy();
    Backbone.Events.trigger("columnsChanged", {});
  },
  activateColumn: function () {
    var a = this.column.find("[passage-id]").attr("passage-id");
    step.util.uP(a);
  },
  openNewPanel: function (a) {
    step.util.uP(this.model.get("passageId"));
    step.util.uY();
    a.stopPropagation();
  },
  resizePanel: function (a) {
    try {
      if (
        document.getElementsByClassName("mainPanel")[0].style.paddingTop ===
        "0px"
      ) {
        document.getElementById("stepnavbar").style.display = "block";
        $(".resizePanel").attr("title", "Increase size of panel");
        document.getElementsByClassName("resizePanel")[0].title = "";
        document.getElementsByClassName("mainPanel")[0].style.paddingTop =
          "50px";
        $(".glyphicon-resize-full").css("display", "inline");
        $(".glyphicon-resize-small").css("display", "none");
      } else {
        document.getElementById("stepnavbar").style.display = "none";
        $(".resizePanel").attr("title", "Decrease size of panel");
        document.getElementsByClassName("mainPanel")[0].style.paddingTop =
          "0px";
        $(".glyphicon-resize-full").css("display", "none");
        $(".glyphicon-resize-small").css("display", "inline");
      }
      $(".resizePanel").css("background-color", "var(--clrBackground)");
    } catch (b) {}
  },
  updateVisibleCloseButton: function () {
    var a = $(".column").not(".examplesColumn").length > 1;
    this.$el.find(".closeColumn").toggleClass("disabled", !a);
  },
});
step.state = {
  responseLanguage: undefined,
  language: function (b) {
    if (this.responseLanguage != undefined) {
      return this.responseLanguage;
    }
    var a = $.getUrlVar("lang");
    if (a == null) {
      a = $.cookie("lang");
    }
    if (a == null) {
      a = window.navigator.userLanguage || window.navigator.language;
    }
    if (b == 1) {
      return a.split("-")[0];
    }
    return a;
  },
  restore: function () {
    this._restoreLanguage();
  },
  isLocal: function () {
    if (this.local == undefined) {
      this.local = $("meta[step-local]").attr("content") === "true";
    }
    return this.local;
  },
  getDomain: function () {
    if (this.domain == undefined) {
      this.domain = $("meta[step-domain]").attr("content");
    }
    return this.domain;
  },
  getIncompleteLanguage: function () {
    if (this.incomplete == undefined) {
      var a = $("meta[step-incomplete-language]");
      this.incomplete = a.attr("content") === "true";
    }
    return this.incomplete;
  },
  isLtR: function () {
    if (this.direction == undefined) {
      this.direction = $("meta[step-direction]").attr("content") === "true";
    }
    return this.direction;
  },
  getCurrentVersion: function () {
    if (this.version == undefined) {
      this.version = $("meta[name='step.version']").attr("content");
    }
    return this.version;
  },
};
var CONTINUOUS_SCROLLING_VERSE_GAP = 50;
step.passage = {
  pA: function (a) {
    return parseInt($(a).closest(".passageContainer").attr("passage-id"));
  },
  pD: ["G0000", "G3588", "H0000"],
  pB: function (b) {
    if (b.strong == null) {
      return;
    }
    var c = b.strong.split(" ");
    this.pC(undefined, b.classes);
    if (c.length > 0) {
      this.uD(undefined, c[0], b.classes);
      for (var a = 1; a < c.length; a++) {
        if (step.util.uF(c[a])) {
          continue;
        }
        this.uD(undefined, c[a], b.classes);
      }
    }
  },
  uD: function (b, g, h) {
    var f = step.passages
      .findWhere({
        passageId: 0,
      })
      .get("isSimilarWord");
    if (typeof f === "undefined") {
      f = true;
    }
    if (!g || (!f && h === "relatedWordEmphasisHover")) {
      return;
    }
    var e = h || "emphasisePassagePhrase";
    var a = b ? step.util.uc(b) : $("body");
    var d = g.split(" ");
    for (var c = 0; c < d.length; c++) {
      if ($.inArray(d[c], this.pD) == -1) {
        step.util.uD(d[c], ".heading [strong", "", a, e);
        step.util.uD(d[c], ".verse [strong", "", a, e);
        step.util.uD(d[c], "span.w[strong", "span", a, e);
      }
    }
  },
  pC: function (b, c) {
    var c = c || "emphasisePassagePhrase relatedWordEmphasis";
    var a = b ? step.util.uc(b) : $("body");
    $(".verse span, span.w span, .heading span", a).removeClass(c);
  },
};
var FeedbackView = Backbone.View.extend({
  el: function () {
    return $("body");
  },
  template:
    '<div class="modal" id="raiseSupport" dir="<%= step.state.isLtR() ? "ltr" : "rtl" %>" tabindex="-1" role="dialog" aria-labelledby="raiseSupportLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content stepModalFgBg"><div class="modal-header">' +
    step.util.uf("raiseSupport") +
    '<h4 class="modal-title" id="raiseSupportLabel"><%= __s.help_feedback %></h4></div><div class="modal-body"><form role="form"><div class="form-group"><label for="feedbackEmail"><%= __s.register_email %><span class="mandatory">*</span></label><input type="email" class="form-control" value="<%= email %>" id="feedbackEmail" maxlength="200" placeholder="email@email.com"></div><div class="form-group"><label for="feedbackSummary"><%= __s.feedback_summary %><span class="mandatory">*</span></label> <input type="text" class="form-control" id="feedbackSummary" maxlength="150" placeholder="<%= __s.feedback_summary %>"></div><div class="form-group"><label for="feedbackType"><%= __s.register_type %></label><select type="text" class="form-control" id="feedbackType"><option value="Bug"><%= __s.feedback_type_bug %></option><option value="Improvement"><%= __s.feedback_type_improvement %></option><option value="New Feature"><%= __s.feedback_new_feature %></option><option value="Error found"><%= __s.feedback_error_found %></option><option value="Need help"><%= __s.feedback_need_help %></option><option value="Like to volunteer"><%= __s.feedback_volunteer %></option><option value="Just saying Hi"><%= __s.feedback_just_say_hi %></option></select></div><div class="form-group"><label for="feedbackDescription"><%= __s.feedback_description %><span class="mandatory">*</span></label> <textarea class="form-control" placeholder="<%= __s.feedback_description %>" id="feedbackDescription" /></div><p class="help-block"><%= __s.include_screenshot %></p></form></div><div class="modal-footer"><button type="button" class="btn cancelFeedback stepButton" data-dismiss="modal"><%= __s.cancel %></button><button type="button" class="btn sendFeedback stepButton stepPressedButton"><%= __s.help_submit %></button></div></div></div></div>',
  initialize: function () {
    this.render();
  },
  validate: function () {
    var a = true;
    this.feedbackForm.find("input, select, textarea").each(function (b, e) {
      var d = $(this);
      var c = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
      if (
        step.util.uO(d.val()) ||
        (d.attr("id") == "feedbackEmail" && c.exec(d.val()) == null)
      ) {
        d.closest(".form-group").addClass("has-error");
        a = false;
      } else {
        d.closest(".form-group").removeClass("has-error");
      }
    });
    return a;
  },
  render: function () {
    var a = this;
    this.feedbackForm = $(
      _.template(this.template)({
        email: step.settings.get("userFeedbackEmail") || "",
      })
    );
    this.$el.append(this.feedbackForm);
    if (step.userLanguageCode.substring(0, 2) !== "en") {
      if ($(".sendFeedback").text() === "Submit") {
        $(".sendFeedback").text(__s.help_feedback);
      }
      if ($(".cancelFeedback").text() === "Cancel") {
        $(".cancelFeedback").text(__s.close);
      }
    }
    this.feedbackForm.on("show.bs.modal", function () {
      a.feedbackForm.find("#feedbackType").val("Bug");
      a.feedbackForm
        .find("#feedbackEmail")
        .val(step.settings.get("userFeedbackEmail") || "");
      a.feedbackForm.find("#feedbackDescription").val("");
      a.feedbackForm.find("#feedbackSummary").val("");
      step.util.MW("raiseSupport");
    });
    $(".sendFeedback").click(function (b) {
      b.preventDefault();
      if (!a.validate()) {
        return;
      }
      require(["html2canvas"], function () {
        var d = [];
        var c = a.feedbackForm.find("#feedbackEmail").val();
        step.settings.save(
          {
            userFeedbackEmail: c,
          },
          {
            silent: true,
          }
        );
        d.push({
          key: "type",
          value: a.feedbackForm.find("#feedbackType").val(),
        });
        d.push({
          key: "email",
          value: c,
        });
        d.push({
          key: "description",
          value: a.feedbackForm.find("#feedbackDescription").val(),
        });
        d.push({
          key: "summary",
          value: a.feedbackForm.find("#feedbackSummary").val(),
        });
        d.push({
          key: "url",
          value: document.URL,
        });
        a.feedbackForm.modal("hide");
        $("body").removeClass("modal-open");
        $(".modal-backdrop").remove();
        step.util.MP(__s.feedback_please_wait, "warning", null, 25);
        html2canvas(document.body, {
          onrendered: function (e) {
            step.util.MP(__s.feedback_sending, "warning", null, 75);
            step.util.uR(
              SUPPORT_CREATE,
              "screenshot-part",
              "file",
              e,
              "image/png",
              d,
              function (f) {
                if (f) {
                  step.util.MP(__s.feedback_success);
                } else {
                  step.util.uN(__s.feedback_failure);
                }
              }
            );
          },
        });
      });
    });
  },
});
var ExamplesView = Backbone.View.extend({
  exampleTemplate: _.template(
    '<div id="welcomeExamples" class="passageContainer examplesContainer"><a class="closeColumn" title="<%= __s.close %> />" ontouchstart="step.util.uV(\'true\')"><i class="glyphicon glyphicon-remove"></i></a><h3><%= __s.simple_intro_welcome %></h3><span style="background-color:lightyellow;font-size:16px"><b><%= __s.announce_search_ui %></b> </span><a style="background-color:lightyellow" class="videoGuide" href="javascript:step.util.us(\'new_search_ui.gif\', 35)"><span class="glyphicon glyphicon-play-circle" style="background-color:lightyellow;font-size:16px"></span></a><br><br><p><%= __s.simple_intro %></p><div class="accordion-row" data-row="0"><h5 class="accordion-heading stepButton"><span id="g1q0" style="float:;">How do I read passages in Bibles?</span><a class="plusminus glyphicon glyphicon-triangle-right"></a></h5><div class="accordion-body"><ul style="padding-inline-start:10px"><li style="font-weight:bold"><span id="g1q1">How do I look up a passage?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><a class="videoGuide" href="javascript:step.util.us(\'Psalm23.gif\', 15)">Video guide  <span class="glyphicon glyphicon-play-circle" style="font-size:16px"></span></a><br><span id="g1q1a1">Click the Passage button for a chapter or references.</span><br><div class="faq_img" style="background-image: url(\'images/select_passage_.png\');width:190px;height:68px;border:3px solid black;display:none"></div></div><li style="font-weight:bold"><span id="g1q2">How do I see three Bibles at once?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><a class="videoGuide" href="javascript:step.util.us(\'John3.gif\', 27)">Video guide  <span class="glyphicon glyphicon-play-circle" style="font-size:16px"></span></a><br><span id="g1q2a1">Click the Bible button to select one or several Bibles.</span><br><div class="faq_img" style="background-image: url(\'images/select_bible_.png\');width:190px;height:68px;border:3px solid black;display:none"></div></div><li style="font-weight:bold"><span id="g1q3">How do I find a parallel gospel passage?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><span id="g1q3a1">1) Click the Resource icon.</span><br><div class="faq_img" style="background-image: url(\'images/resource_icon_.png\');width:190px;height:68px;border:3px solid black;display:none"></div><br><span id="g1q3a2">2) Click the resource for parallel gospel passage</span><br><div class="faq_img" style="background-image: url(\'images/gospel_harmony_.png\');width:190px;height:164px;border:3px solid black;display:none"></div></div><li style="font-weight:bold"><span id="g1q4">How do I follow a Bible reading plan?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><span id="g1q4a1">1) Click the Resource icon.</span><br><div class="faq_img" style="background-image: url(\'images/resource_icon_.png\');width:190px;height:68px;border:3px solid black;display:none"></div><br><span id="g1q4a2">2) Plans for 1/2/3 years, chronological, Jewish etc</span><br><div class="faq_img" style="background-image: url(\'images/bible_reading_plan_.png\');width:190px;height:286px;border:3px solid black;display:none"></div></div><li style="font-weight:bold"><span id="g1q5">How do I also see a commentary?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><span id="g1q5a1">1) Click the Bible button.</span><br><div class="faq_img" style="background-image: url(\'images/select_bible_.png\');width:190px;height:68px;border:3px solid black;display:none"></div><br><span id="g1q5a2">2) Click on Commentaries</span><br><div class="faq_img" style="background-image: url(\'images/commentaries_.png\');width:184px;height:40px;border:3px solid black;display:none"></div></div></ul></div></div><div class="accordion-row" data-row="1"><h5 class="accordion-heading stepButton"><span id="g2q0">How do I find words and phrases?</span><a class="plusminus glyphicon glyphicon-triangle-right"></a></h5><div class="accordion-body"><ul style="padding-inline-start:10px"><li style="font-weight:bold"><span id="g2q1">How do I find words or topics?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><a class="videoGuide" href="javascript:step.util.us(\'basic_search.gif\', 25)">Video guide  <span class="glyphicon glyphicon-play-circle" style="font-size:16px"></span></a><br><span id="g2q1a1">1) Click on the search button</span><br><div class="faq_img" style="background-image: url(\'images/search_button_.png\');width:176px;height:73px;border:3px solid black;display:none"></div><br><span id="g2q1a2">2) Enter word or phrase in search bar and press Return</span></div><li style="font-weight:bold"><span id="g2q2">How do I search only some books in the Bible?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><a class="videoGuide" href="javascript:step.util.us(\'search_range.gif\', 40)">Video guide  <span class="glyphicon glyphicon-play-circle" style="font-size:16px"></span></a><br><span id="g2q2a1">1) Click on the search button</span><br><div class="faq_img" style="background-image: url(\'images/search_button_.png\');width:176px;height:73px;border:3px solid black;display:none"></div><br><span id="g2q2a2">2) Click on Range</span><br><div class="faq_img" style="background-image: url(\'images/search_range_.png\');width:176px;height:52px;border:3px solid black;display:none"></div><br><span id="g2q2a3">3) Select the books that you wish to search</span></div><li style="font-weight:bold"><span id="g2q3">How do I find a Greek or Hebrew word?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><a class="videoGuide" href="javascript:step.util.us(\'Search_Greek_Hebrew.gif\', 40)">Video guide  <span class="glyphicon glyphicon-play-circle" style="font-size:16px"></span></a><br><span id="g2q3a1">1) Click on the search button</span><br><div class="faq_img" style="background-image: url(\'images/search_button_.png\');width:176px;height:73px;border:3px solid black;display:none"></div><br><span id="g2q3a2">2) Click on the Hebrew or Greek tab</span><br><div class="faq_img" style="background-image: url(\'images/search_hebrew_greek.png\');width:200px;height:199px;border:3px solid black;display:none"></div><br><span id="g2q3a3">3) Type in the Greek/Hebrew word in the search box, press Return, and wait for the table to fill itself.</span><br><span id="g2q3a4">4) View corresponding row to see Greek/Hebrew translation of the word</span></div><li style="font-weight:bold"><span id="g2q4">How do I find a word only where it relates to a topic?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><a href="javascript:step.util.us(\'topic_search.gif\', 35)"><span  class="videoGuide">Video guide  </span><span class="glyphicon glyphicon-play-circle" style="font-size:16px"></span></a><br><span id="g2q4a1">1) Click on the search button</span><br><div class="faq_img" style="background-image: url(\'images/search_button_.png\');width:176px;height:73px;border:3px solid black;display:none"></div><br><span id="g2q4a2">2) Click on the English tab</span><br><span id="g2q4a3">3) Type in the topic in the search box, press Return, and wait for the table to fill itself.</span><br><span id="g2q4a4">4) Click on one of the words or topics listed</span><br><div class="faq_img" style="background-image: url(\'images/topic_search.png\');width:200px;height:405px;border:3px solid black;display:none"></div></div><li style="font-weight:bold"><span id="g2q5">How do I find more about search?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><a href="https://stepbibleguide.blogspot.com/p/finding-words-and-subjects.html" id="g2q5a1">Detailed instructions are in the user\'s guide</a></ul></div></div><div class="accordion-row" data-row="2"><h5 class="accordion-heading stepButton"><span id="g3q0">How do I do a word study?</span><a class="plusminus glyphicon glyphicon-triangle-right"></a></h5><div class="accordion-body"><ul style="padding-inline-start:10px"><li style="font-weight:bold"><span id="g3q1">What information can I find about a word?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><span id="g3q1a1">When you click on a word, the detailed lexicon opens with:</span><ul><li id="g3q1a2">Meaning: how the word is used throughout the Bible</li><li id="g3q1a3">Dictionary: academic details about the word</li><li id="g3q1a4">Related words: similar in meaning or origin</li><li id="g3q1a5">Grammar: (only available for some Bibles)</li></ul><br><div class="faq_img" style="background-image: url(\'images/info_on_word_.png\');width:190px;height:167px;border:3px solid black;display:none"></div></div><li style="font-weight:bold"><span id="g3q2">Why do only some Bibles have clickable words?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><span id="g3q2a1">\'Vocabulary\' Bibles link the translation to Greek & Hebrew. So far, only some Bibles have this vocabulary feature. They are shown in the Bible select screen with the letter \'V\'.</span><br><div class="faq_img" style="background-image: url(\'images/bible_with_vocab_.png\');width:190px;height:283px;border:3px solid black;display:none"></div></div><li style="font-weight:bold"><span id="g3q3">What does ~20x or Frequency mean?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><span id="g3q3a1">It is the number of occurrences of a word in the Bible. Click on it to see them all in the selected Bible(s).</span></div><li style="font-weight:bold"><span id="g3q4">Why do some words have dropdown next to the frequency number?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><span id="g3q4a1">This reveals different forms for some words and names. These details are often interesting to scholars, eg the word \'beginning\' in Genesis.</span><br><div class="faq_img" style="background-image: url(\'images/dropdown_frequency_.png\');width:190px;height:88px;border:3px solid black;display:none"></div></div><li style="font-weight:bold"><span id="g3q5">Where do I find the maps?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><a class="videoGuide" href="javascript:step.util.us(\'map.gif\', 22)">Video guide  <span class="glyphicon glyphicon-play-circle" style="font-size:16px"></span></a><br><span id="g3q5a1">1st method:</span><br><span id="g3q5a2">Click on a place name then on the Map button in the detailed lexicon.</span><br><div class="faq_img" style="background-image: url(\'images/map_in_lexicon_.png\');width:190px;height:126px;border:3px solid black;display:none"></div><br><span id="g3q5a3">2nd method:</span><br><span id="g3q5a4">1) Click the Resource icon.</span><br><div class="faq_img" style="background-image: url(\'images/resource_icon_.png\');width:190px;height:68px;border:3px solid black;display:none"></div><br><span id="g3q5a5">2) Click on "Places in the Bible"</span><br><div class="faq_img" style="background-image: url(\'images/find_map_.png\');width:190px;height:131px;border:3px solid black;display:none"></div></div><li style="font-weight:bold"><span id="g3q6">How do I get the word frequency for a chapter or a book?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><a class="videoGuide" href="javascript:step.util.us(\'1Joh_passage_analysis.gif\', 12)">Video guide  <span class="glyphicon glyphicon-play-circle" style="font-size:16px"></span></a><br><span id="g3q6a1">1) Click on the analysis icon.</span>&nbsp;<span class="glyphicon glyphicon-stats" style="line-height:13px"></span><br><div class="faq_img" style="background-image: url(\'images/analysis_.png\');width:190px;height:116px;border:3px solid black;display:none"></div><br><span id="g3q6a2">2) Click on the "Selected passage" button if no analysis is shown.</span></div></ul></div></div><div class="accordion-row" data-row="3"><h5 class="accordion-heading stepButton"><span id="g4q0">How do I find more information on original languages?</span><a class="plusminus glyphicon glyphicon-triangle-right"></a></h5><div class="accordion-body"><ul style="padding-inline-start:10px"><li style="font-weight:bold"><span id="g4q1">How do I see Greek/Hebrew vocabulary for my Bible?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><a class="videoGuide" href="javascript:step.util.us(\'greek_hebrew_vocab.gif\', 53)">Video guide  <span class="glyphicon glyphicon-play-circle" style="font-size:16px"></span></a><br><span id="g4q1a1">1) Click on the Bible translation button</span><br><div class="faq_img" style="background-image: url(\'images/select_bible_.png\');width:190px;height:68px;border:3px solid black;display:none"></div><br><span id="g4q1a2">2) Refer to the legend and select the Bible translations with the Vocab feature</span><br><div class="faq_img" style="background-image: url(\'images/esv_with_vocab_.png\');width:190px;height:306px;border:3px solid black;display:none"></div><br><span id="g4q1a3">3) Click on the Option button, then click "Interlinear options, then select "Greek / Hebrew".  Original language vocab will be shown.</span><br><div class="faq_img" style="background-image: url(\'images/original_vocab_feature_.png\');width:190px;height:198px;border:3px solid black;display:none"></div></div><li style="font-weight:bold"><span id="g4q2">How do I see Greek/Hebrew transliteration for my Bible?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><a class="videoGuide" href="javascript:step.util.us(\'ESV_orig_voc_transliteration.gif\', 35)">Video guide  <span class="glyphicon glyphicon-play-circle" style="font-size:16px"></span></a><br><span id="g4q2a1">1) Click on the Bible translation button</span><br><div class="faq_img" style="background-image: url(\'images/select_bible_.png\');width:190px;height:68px;border:3px solid black;display:none"></div><br><span id="g4q2a2">2) Refer to the legend and select the Bible translations with the Vocab feature</span><br><div class="faq_img" style="background-image: url(\'images/esv_with_vocab_.png\');width:190px;height:306px;border:3px solid black;display:none"></div><br><span id="g4q2a3">3) Click on the Option button, then click "Interlinear options, then select "Transliteration".</span><br><div class="faq_img" style="background-image: url(\'images/transliteration_.png\');width:190px;height:230px;border:3px solid black;display:none"></div></div><li style="font-weight:bold"><span id="g4q3">How do I see Greek/Hebrew vocabulary for a verse?    </span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><a class="videoGuide" href="javascript:step.util.us(\'verse_vocab.gif\', 18)">Video guide  <span class="glyphicon glyphicon-play-circle" style="font-size:16px"></span></a><br><span id="g4q3a1">1) Click on the verse number to list the words and meanings</span><br><div class="faq_img" style="background-image: url(\'images/verse_vocab_.png\');width:190px;height:250px;border:3px solid black;display:none"></div><br><span id="g4q3a2">2) Hover over or click on a word for more details about the word</span></div><li style="font-weight:bold"><span id="g4q4">How can I view multiple Bibles together as an Interlinear?</span><a style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><a class="videoGuide" href="javascript:step.util.us(\'OHB_ESV_Gen1.gif\', 40)">Video guides  <span class="glyphicon glyphicon-play-circle" style="font-size:16px"></span></a>&nbsp;&nbsp;<a class="videoGuide" href="javascript:step.util.us(\'KJV_THGNT_John1.gif\', 35)"><span class="glyphicon glyphicon-play-circle" style="font-size:16px"></span></a><br><span id="g4q4a1">1) Click on the Bible translation button</span><br><div class="faq_img" style="background-image: url(\'images/select_bible_.png\');width:190px;height:68px;border:3px solid black;display:none"></div><br><span id="g4q4a2">2) Refer to the legend and select two Bible with the vocabulary feature</span><br><div class="faq_img" style="background-image: url(\'images/select_two_bibles_.png\');width:190px;height:322px;border:3px solid black;display:none"></div><br><span id="g4q4a3">3) Click on the Option button, then click Interlinear.  Interlinear will be shown.</span><br><div class="faq_img" style="background-image: url(\'images/interlinear_.png\');width:190px;height:338px;border:3px solid black;display:none"></div></div><li style="font-weight:bold"><span id="g4q5">How do I see the various versions of the Greek OT?</span><a id="ot-greek-qa" style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><span id="g4q5a1">1) Click on the Bible translation button</span><br><div class="faq_img" style="background-image: url(\'images/select_bible_.png\');width:190px;height:68px;border:3px solid black;display:none"></div><br><span id="g4q5a2">2) Select Ancient for the language</span><br><span id="g4q5a3">3) Scroll down to see the Greek OT translations</span><br><div class="faq_img" style="background-image: url(\'images/bible_ancient_.png\');width:190px;height:23px;border:3px solid black;display:none"></div><br><br><a id="otgreekexamples" href="html/additional_examples.html?exampleType=greekot&langFile=<%= step.userLanguageCode %>.<%= step.state.getCurrentVersion() %>.js"><%= __s.examples %></a><br><br></div><li style="font-weight:bold"><span id="g4q6">How do I display the color-coded grammar?</span><a id="color-qa" style="margin-bottom:6px;font-size:14px" class="glyphicon glyphicon-triangle-right stepExample"></a></li><div class="stepExample" style="display:none"><a class="videoGuide" href="javascript:step.util.us(\'color_code_grammar.gif\', 50)">Video guide  <span class="glyphicon glyphicon-play-circle" style="font-size:16px"></span></a><br><span id="g4q6a1">1) Click on the Bible translation button</span><br><div class="faq_img" style="background-image: url(\'images/select_bible_.png\');width:190px;height:68px;border:3px solid black;display:none"></div><br><span id="g4q6a2">2) Refer to the legend and select the Bible translations with the grammar feature</span><br><div class="faq_img" style="background-image: url(\'images/grammar_feature_.png\');width:190px;height:221px;border:3px solid black;display:none"></div><br><span id="g4q6a3">3) Click on "G" or "Grammar" at the navigation bar. The text will then be color coded.</span><br><div class="faq_img" style="background-image: url(\'images/color_code_grammar_.png\');width:190px;height:60px;border:3px solid black;display:none"></div><br><br><a id="colorcodeexamples" target="_blank" href="https://examples.stepbible.org/html/additional_examples.html?exampleType=colorCode&langFile=<%= step.userLanguageCode %>.<%= step.state.getCurrentVersion() %>.js"><%= __s.examples %></a><br></div></ul></div></div><div class="accordion-row keyboard_shortcut" data-row="4"><h5 class="accordion-heading stepButton"><span id="g5q0">Additional information</span><a class="plusminus glyphicon glyphicon-triangle-right"></a></h5><div class="accordion-body"><ul style="padding-inline-start:10px"><li class="keyboard_shortcut" style="font-weight:bold"><a href="https://www.stepbible.org/html/split.html?/?q=reference=Gen.1&skipwelcome&secondURL=https://docs.google.com/presentation/d/10oUdTW40X3f5y4wmImxRW5_3zTJnRkVUVo4jz4mU9E4/preview" target="_blank" id="g5q1">Site Guide</a></li><li class="keyboard_shortcut" style="font-weight:bold"><a href="https://www.stepbible.org/html/split.html?/?q=reference=Gen.1&skipwelcome&secondURL=https://www.stepbible.org/html/keyboard_shortcut.html" target="_blank"><%= __s.keyboard_shortcuts %></a></li></ul></div></div><div class="text-muted step-copyright"><span>&copy; <a href="https://stepbibleguide.blogspot.com/p/copyrights-licences.html" target="_blank">STEPBible</a> - 2024</span></div></div>'
  ),
  events: {
    "click .closeColumn": "onClickClose",
    "click .accordion-heading": "onClickHeading",
    "click .plusminus": "onClickHeading",
  },
  initialize: function () {
    this.render();
  },
  render: function () {
    if (
      $("#welcomeExamples").length == 0 ||
      (step.touchDevice && !step.touchWideDevice)
    ) {
      if (step.touchDevice && !step.touchWideDevice) {
        step.util.uu("", "<b>" + __s.welcome_to_step + "</b>", [
          this.exampleTemplate(),
        ]);
        $(".closeColumn").click(function (h) {
          step.util.closeModal("showLongAlertModal");
        });
        var e = this;
        $(".accordion-heading").click(function (h) {
          e.onClickHeading(h, e);
        });
        $(".plusminus").click(function (h) {
          e.onClickHeading(h, e);
        });
        $(".modal-body").find(".closeColumn").hide();
        $(".modal-body").find("h3").hide();
      } else {
        this.$el.append(this.exampleTemplate());
      }
      $("a.glyphicon.glyphicon-triangle-right.stepExample").click(
        step.util.expandCollapseExample
      );
      var c =
        step.passages
          .findWhere({
            passageId: step.util.uP(),
          })
          .get("selectedOptions") || [];
      var d =
        step.passages
          .findWhere({
            passageId: step.util.uP(),
          })
          .get("options") || [];
      if (c.indexOf("C") > -1 && d.indexOf("C") > -1) {
        cf.initCanvasAndCssForClrCodeGrammar();
      }
    }
    var g = step.userLanguageCode.toLowerCase();
    var f = g.substring(0, 2);
    if (f === "zh" || f === "fr" || f === "ar" || f === "pt" || f === "es") {
      if (g === "zh_hk") {
        g = "zh_tw";
      }
      fetch("html/faq/" + g + ".txt")
        .then(function (h) {
          return h.text();
        })
        .then(function (q) {
          var n = q.split("\n");
          for (var p = 0; p < n.length; p++) {
            if (n[p].length < 4) {
              continue;
            }
            var m = n[p].replace("", ":");
            var s = m.indexOf(":");
            if (s > 1) {
              var o = n[p].substring(0, s).trim();
              var r = n[p].substring(s + 1).trim();
              var h =
                o.substring(0, 1) === "_"
                  ? (h = "." + o.substring(1))
                  : "#" + o;
              $(h).text(r);
              if (g === "ar") {
                $(h).css("direction", "rtl");
              }
            } else {
              console.log(
                "Does not recognize foreign lang example line: " + n[p]
              );
            }
          }
        });
    }
    var b = step.util.uM("step.classicalUI");
    if (b === "true") {
      $("#classicalUIVideo").hide();
    } else {
      $("#classicalUIVideo").show();
    }
    var a = $.getUrlVars();
    if (a.indexOf("otgreekexamples") > -1) {
      this.toggleAccordion(3, 2);
      if ($("#ot-greek-qa").hasClass("glyphicon-triangle-right")) {
        $("#ot-greek-qa").click();
        setTimeout(function () {
          $("#otgreekexamples").get(0).scrollIntoView();
        }, 700);
      }
    } else {
      if (a.indexOf("colorexamples") > -1) {
        this.toggleAccordion(3, 2);
        if ($("#color-qa").hasClass("glyphicon-triangle-right")) {
          $("#color-qa").click();
          setTimeout(function () {
            $("#colorcodeexamples").get(0).scrollIntoView();
          }, 700);
        }
      }
    }
    if (step.touchDevice) {
      $(".keyboard_shortcut").hide();
    } else {
      $(".keyboard_shortcut").show();
    }
  },
  toggleAccordion: function (b, e) {
    var f = ".accordion-row[data-row=" + b + "]";
    var a = $(f);
    var d = a.find(".accordion-body");
    var g = "displayQuickTryoutAccordion" + b;
    var h = false;
    if (typeof e === "number") {
      h = true;
      for (var c = 0; c < e; c++) {
        step.util.ub("displayQuickTryoutAccordion" + c, "false");
      }
    }
    if (!d.is(":visible") || h) {
      a.find(".accordion-body").slideDown();
      a.find(".accordion-heading").addClass("stepPressedButton");
      a.find(".plusminus")
        .removeClass("glyphicon-triangle-right")
        .addClass("glyphicon-triangle-bottom");
      step.util.ub(g, "true");
    } else {
      a.find(".accordion-body").slideUp();
      a.find(".accordion-heading").removeClass("stepPressedButton");
      a.find(".plusminus")
        .removeClass("glyphicon-triangle-bottom")
        .addClass("glyphicon-triangle-right");
      step.util.ub(g, "false");
    }
    a.find(".plusminus").css(
      "color",
      a.find(".accordion-heading").css("color")
    );
  },
  onClickHeading: function (d, c) {
    d.stopImmediatePropagation();
    d.stopPropagation();
    var e = $(d.target);
    var a = e.parent();
    if ($(a).find(".accordion-heading").length == 0) {
      a = $(a).parent();
    }
    var b = a.attr("data-row");
    if (c) {
      c.toggleAccordion(b);
    } else {
      this.toggleAccordion(b);
    }
  },
  onClickClose: function () {
    step.util.uV(true);
  },
});
var ColorView = Backbone.View.extend({
  colorTemplate:
    '<link href="css/color_code_grammar.<%= jsVersion %>css" rel="stylesheet"/><link rel="stylesheet" href="css/spectrum.css"/><script src="js/color_code_config.<%= jsVersion %>js"></script><script src="libs/spectrum.js"></script><div id="ColorCode" class="passageContainer examplesContainer colorCodeContainer"><div id="sideBargenderNumClrs"></div><br><div id="sideBarVerbClrs"></div><br><div id="sideBarHVerbClrs"></div><br><a id="colorAdvancedConfig" href="javascript:step.util.MV()">Advanced configuration</a><p id="noColorGrammar" style="color:red;display:none">The passage your selected probably does not have grammar information</p></div><script>$( document ).ready(function() {initializeClrCodeSidebar();});</script>',
  events: {
    "click .closeColumn": "onClickClose",
  },
  initialize: function () {
    var a = step.util.uQ();
    var g = a.get("selectedOptions");
    if (typeof g === "string" && g.indexOf("C") == -1) {
      var c = a.get("options");
      if (typeof c === "string" && c.indexOf("C") > -1) {
        if (typeof c4 === "undefined") {
          cf.initCanvasAndCssForClrCodeGrammar();
        }
        var b = 0;
        var e = 0;
        var f = 3;
        var d = 1;
        if (c4[b][e] || c4[f] || c4[d][e]) {
          a.set("selectedOptions", g + "C");
        }
      }
    }
    this.render();
  },
  render: function () {
    var b =
      $.getUrlVars().indexOf("debug") > -1
        ? ""
        : step.state.getCurrentVersion() + ".min.";
    var a = $(
      _.template(this.colorTemplate)({
        jsVersion: b,
      })
    );
    if (step.touchDevice && !step.touchWideDevice) {
      step.util.uu("", "<b>" + __s.display_grammarColor + "</b>", [a]);
      step.sidebar = null;
      $(".closeColumn").click(function (c) {
        step.util.closeModal("showLongAlertModal");
      });
    } else {
      $("div#color.tab-pane.active").empty().append(a);
    }
  },
  onClickClose: function () {
    step.util.uV(true);
  },
});
var RestorePassageView = Backbone.View.extend({
  template:
    '<div class="modal" id="restorePassages" tabindex="-1" role="dialog" aria-labelledby="restorePassagesLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content stepModalFgBg"><div class="modal-header">' +
    step.util.uf("restorePassages") +
    '<h4 class="modal-title" id="restoreSessionTitle"><%= __s.restore_previous_session %></h4></div><div class="modal-body"><p><%= __s.previous_passages %><form role="form"><% _.each(passages, function(p) { %><div class="checkbox"><label><input type="checkbox" class="" data-passage-id="<%= p.get(\'passageId\') %>" checked="checked" /><span class="argSummary argSumSpan"><%= step.util.ui.iC(p.get("searchTokens"), null, "span") %></span></label></div><% }); %></form><p><%= __s.previous_passages_warning %></p></div><div class="modal-footer"><button type="button" class="btn btn-default closeModal" ><%= __s.close %></button><button type="button" class="btn btn-primary restoreModels"><%= __s.restore %></button></div></div></div></div>',
  el: function () {
    return $("body");
  },
  initialize: function (a) {
    _.bindAll(this);
    this.closeCallback = a.callback;
    this.render();
  },
  render: function () {
    var b = this;
    var a = step.passages.findWhere({
      passageId: 0,
    });
    var d = false;
    var e = [];
    for (var c = 0; c < step.passages.length; c++) {
      var f = step.passages.at(c);
      if (f.get("passageId") != 0) {
        if (!d && f.get("signature") == a.get("signature")) {
          a.save(
            {
              position: f.get("position"),
            },
            {
              silent: true,
            },
            {
              silent: true,
            }
          );
          f.destroy();
          c--;
          d = true;
        } else {
          e.push(f);
        }
      }
    }
    if (e.length == 0) {
      this.closeModal();
      return;
    }
    this.restoreForm = $(
      _.template(this.template)({
        passages: e,
      })
    );
    this.$el.append(this.restoreForm);
    $(".closeModal").click(this.closeModalHandler);
    $(".restoreModels").click(function (h) {
      h.preventDefault();
      $("[data-passage-id]").each(function (n, p) {
        var o = $(this);
        var m = step.passages.findWhere({
          passageId: o.data("passage-id"),
        });
        if (o.prop("checked")) {
          step.util.uY(false, m);
          step.router.mG(m, null, null);
        } else {
          step.passages.remove(m, {
            silent: true,
          });
        }
      });
      var g = function (m, i) {
        return $.data(m, "item")[field] < $.data(i, "item")[field] ? -1 : 1;
      };
      $(".column")
        .not(".examplesColumn")
        .sortElements(function (o, m) {
          var r = $(o);
          var i = $(m);
          var q = r.find(".passageContainer").attr("passage-id");
          var s = i.find(".passageContainer").attr("passage-id");
          var p = step.passages.findWhere({
            passageId: parseInt(q),
          });
          var n = step.passages.findWhere({
            passageId: parseInt(s),
          });
          return p.get("position") < n.get("position") ? -1 : 1;
        });
      b.closeModal();
    });
    this.restoreForm.modal("show");
  },
  closeModalHandler: function () {
    for (var a = 0; a < step.passages.length; a++) {
      var b = step.passages.at(a);
      if (b.get("passageId") != 0) {
        b.destroy();
        a--;
      }
    }
    this.closeModal();
  },
  closeModal: function () {
    if (this.restoreForm) {
      this.restoreForm.modal("hide");
    }
    $("body").removeClass("modal-open");
    $(".modal-backdrop").remove();
    this.closeCallback();
  },
});
WORDS_MEANING = [__s.words_meaning, __s.words_meaning_explanation];
GREEK_WORDS = [__s.greek_word, __s.greek_word_explanation];
HEBREW_WORDS = [__s.hebrew_word, __s.hebrew_word_explanation];
GREEK_WORDS_MEANING = [
  __s.greek_word_meaning,
  __s.greek_word_meaning_explanation,
];
HEBREW_WORDS_MEANING = [
  __s.hebrew_word_meaning,
  __s.hebrew_word_meaning_explanation,
];
SPECIFIC_FORM = __s.specific_form;
ALL_FORMS = __s.all_forms;
ALL_RELATED = __s.all_related_words;
SPECIFIC_GRAMMAR = __s.specific_grammar;
ORIGINAL_SPELLING = __s.original_spelling;
VOCABULARY = __s.vocabulary;
SCRIPTURE = __s.scripture;
if (!window.step) {
  window.step = {};
}
step.defaults = {
  detailLevel: 0,
  pageSize: 20,
  syncMode: -1,
  langWithTranslatedLex: "",
  passages: [
    {
      version: "ESV",
      reference: "Mat 1",
      options: ["H", "V", "N"],
    },
    {
      version: "ESV",
      reference: "Gen 1",
      options: ["H", "V", "N"],
    },
  ],
  passage: {
    interOptions: [
      __s.passage_interleaved,
      __s.passage_interleaved_with_comparison,
      __s.passage_interlinear,
      __s.passage_column_view,
      __s.passage_column_view_with_compare,
    ],
    interOptionsExplanations: [
      __s.passage_interleaved_explanation,
      __s.passage_interleaved_with_comparison_explanation,
      __s.passage_interlinear_explanation,
      __s.passage_column_view_explanation,
      __s.passage_column_view_with_compare_explanation,
    ],
    interNamedOptions: [
      "INTERLEAVED",
      "INTERLEAVED_COMPARE",
      "INTERLINEAR",
      "COLUMN",
      "COLUMN_COMPARE",
    ],
  },
  analysis: {
    scope: [
      __s.stats_scope_chapter,
      __s.stats_scope_nearby_chapters,
      __s.stats_scope_book,
    ],
    scopeType: ["CHAPTER", "NEAR_BY_CHAPTER", "BOOK"],
    sort: [
      __s.stats_sort_by_frequency,
      __s.stats_sort_by_reversed_frequency,
      __s.stats_sort_by_alphabet,
    ],
    sortType: [
      "SORT_BY_FREQUENCY",
      "SORT_BY_REVERSED_FREQUENCY",
      "SORT_BY_ALPHABET",
    ],
    kind: [__s.stats_type_word, __s.stats_type_text, __s.stats_type_subjects],
    kindTypes: ["WORD", "TEXT", "SUBJECT", "PASSAGE"],
  },
  infoPopup: {
    lexiconTab: 0,
    wordleTab: 1,
  },
  search: {
    luceneValidateRegex: /[!\&\|/():~\[\]{}^+-]|AND|OR|NOT/,
    textual: {
      sortByRelevance: true,
      availableRanges: [
        {
          label: __s.whole_bible,
          value: __s.whole_bible_range,
        },
        {
          label: __s.old_testament,
          value: __s.old_testament_range,
        },
        {
          label: __s.new_testament,
          value: __s.new_testament_range,
        },
        {
          label: __s.the_pentateuch,
          value: __s.the_pentateuch_range,
        },
        {
          label: __s.history_books,
          value: __s.history_books_range,
        },
        {
          label: __s.poetic_books,
          value: __s.poetic_books_range,
        },
        {
          label: __s.prophets,
          value: __s.prophets_range,
        },
        {
          label: __s.gospels_and_acts,
          value: __s.gospels_and_acts_range,
        },
        {
          label: __s.epistles,
          value: __s.epistles_range,
        },
      ],
      simpleTextTypes: [
        __s.simple_search_types_one_or_more_words,
        __s.simple_search_types_all_words,
        __s.simple_search_types_exact,
        __s.simple_search_types_similar,
        __s.simple_search_types_starting_with,
      ],
      simpleTextTypesReference: ["ANY", "ALL", "EXACT", "SIMILAR", "STARTS"],
      simpleTextSecondaryTypes: [
        __s.simple_search_types_one_or_more_words,
        __s.simple_search_types_all_words,
        __s.simple_search_types_exact,
        __s.simple_search_types_similar,
        __s.simple_search_types_starting_with,
      ],
      simpleTextSecondaryTypesReference: [
        "ANY",
        "ALL",
        "EXACT",
        "SIMILAR",
        "STARTS",
      ],
      simpleTextIncludes: [
        __s.simple_search_includes_include,
        __s.simple_search_includes_exclude,
      ],
      simpleTextIncludesReference: ["INCLUDE", "EXCLUDE"],
      simpleTextProximities: [
        __s.simple_search_proximity_same_verse,
        __s.simple_search_proximity_1_verse,
        __s.simple_search_proximity_2_verses,
        __s.simple_search_proximity_6_verses,
        __s.simple_search_proximity_30_verses,
      ],
      simpleTextProximitiesReference: [0, 1, 2, 6, 30],
      simpleTextSortBy: [
        __s.simple_search_sort_by_relevance,
        __s.simple_search_sort_by_bible_occurence,
      ],
    },
    original: {
      originalTypes: [
        WORDS_MEANING[0],
        GREEK_WORDS[0],
        GREEK_WORDS_MEANING[0],
        HEBREW_WORDS[0],
        HEBREW_WORDS_MEANING[0],
      ],
      originalTypesReference: [
        "MEANING",
        "GREEK",
        "GREEK_MEANING",
        "HEBREW",
        "HEBREW_MEANING",
      ],
      originalForms: [ALL_RELATED, ALL_FORMS, SPECIFIC_FORM],
      originalFormsReference: ["RELATED", "ALL", "SPECIFIC"],
      originalSorting: [SCRIPTURE, VOCABULARY, ORIGINAL_SPELLING],
      originalSortingValues: ["SCRIPTURE", "VOCABULARY", "ORIGINAL_SPELLING"],
    },
    subject: {
      subjectTypes: ["ESV", "NAVE", "NAVE_EXTENDED"],
    },
  },
};
step.name_types = [
  "man",
  "woman",
  "king",
  "queen",
  "judge",
  "place",
  "group",
  "prophet",
  "prophetess",
  "person or group",
  "god",
  "location",
  "angel",
  "ruler",
];
step.plural_name_types = {
  man: "men",
  woman: "women",
  king: "kings",
  queen: "queens",
  judge: "judges",
  place: "places",
  group: "groups",
  prophet: "prophets",
  prophetess: "prophetesses",
  "person or group": "people or groups",
  god: "gods",
  location: "locations",
  angel: "angels",
  ruler: "rulers",
};
(function () {
  function h() {
    step.keyedVersions = {};
    step.itemisedVersions = [];
    for (var v = 0; v < window.bibleVersions.length; v++) {
      var o = {};
      var s = window.bibleVersions[v];
      o.initials = s[0];
      o.name = s[1];
      var n = s[7].split("");
      o.hasStrongs = n[0] === "T" ? true : false;
      o.hasMorphology = n[1] === "T" ? true : false;
      o.hasRedLetter = n[2] === "T" ? true : false;
      o.hasNotes = n[3] === "T" ? true : false;
      o.hasHeadings = n[4] === "T" ? true : false;
      o.questionable = n[5] === "T" ? true : false;
      o.originalLanguage = s[2];
      o.languageCode = s[3];
      o.category = s[4];
      o.languageName = s[5];
      o.shortInitials = s[6];
      o.hasSeptuagintTagging = n[6] === "T" ? true : false;
      o.hasAllNTOTorBoth = n[7];
      var w = {
        item: o,
        itemType: "version",
      };
      step.itemisedVersions.push(w);
      step.keyedVersions[o.initials] = o;
      step.keyedVersions[o.shortInitials] = o;
    }
    c("ESV");
    c("NIV");
    c("OHB");
    c("SBLG");
    c("LXX");
    c("Neno");
    c("NVI");
    c("PNVI");
    c("FreSegond");
    c("GerElb1905");
    c("GerSch");
    c("ItaRive");
    c("RusSynodal");
    c("NRT");
    window.bibleVersions = null;
    for (var q = 0; q < window.availLangs.length; q++) {
      var r = window.availLangs[q];
      var m = {};
      m.code = r[0];
      m.originalLanguageName = r[1];
      m.userLocaleLanguageName = r[2];
      var n = r[3].split("");
      m.complete = n[0] === "T" ? true : false;
      m.partial = n[1] === "T" ? true : false;
      var u = "<li ";
      var p = step.userLanguageCode;
      if (p === "iw") {
        p = "he";
      } else {
        if (p === "in") {
          p = "id";
        }
      }
      if (p === m.code) {
        u += "class=active ";
      }
      if (!m.complete) {
        var t = m.partial ? __s.partially_translated : __s.machine_translated;
        u += 'title="' + t + '" ';
      }
      u +=
        "><a onclick=\"window.localStorage.clear(); $.cookie('lang', '" +
        m.code +
        '\')" lang="' +
        m.code +
        '" href="/?lang=' +
        m.code;
      if ($.getUrlVars().indexOf("debug") > -1) {
        u += "&debug";
      }
      u += '">' + m.originalLanguageName + " - " + m.userLocaleLanguageName;
      if (!m.complete) {
        u += "*";
      }
      u += "</a></li>";
      $("#languageMenu").append(u);
    }
    window.availLangs = null;
  }
  function c(i) {
    var m = step.keyedVersions[i];
    if (m) {
      m.recommended = true;
    }
  }
  function f() {
    var m = new SettingsModelList();
    m.fetch();
    if (m.length == 0) {
      var i = new SettingsModel();
      m.add(i);
      i.save();
    }
    step.settings = m.at(0);
    step.settings.save({
      relatedWordsOpen: false,
    });
    step.tempKeyInput = "";
    if (!step.touchDevice) {
      var n;
      $(document).keyup(function (w) {
        if (
          $("#bibleVersions:visible").length > 0 ||
          $("#saveClrModalInputArea:visible").length > 0 ||
          $("#addHeaderInfoModal:visible").length > 0
        ) {
          w.preventDefault();
          return false;
        }
        if (w.keyCode == 27) {
          $("#quickLexicon").remove();
          $(".qtip-focus").css("opacity", 0);
        }
        const u = document.getElementById("quickLexicon");
        if (
          u &&
          typeof u.scrollTop === "number" &&
          ($("#down-arrow").length = 1)
        ) {
          if (
            w.keyCode == 39 ||
            w.keyCode == 40 ||
            w.keyCode == 34 ||
            w.keyCode == 40 ||
            w.keyCode == 190
          ) {
            u.scrollTop += 150;
            w.preventDefault();
            return false;
          } else {
            if (
              w.keyCode == 38 ||
              w.keyCode == 37 ||
              w.keyCode == 33 ||
              w.keyCode == 38 ||
              w.keyCode == 188
            ) {
              u.scrollTop = Math.max(0, u.scrollTop - 150);
              w.preventDefault();
              return false;
            }
          }
        }
        if (
          $("#s2id_masterSearch:visible").length == 0 &&
          $("textarea:visible").length == 0 &&
          $("textarea#userTextInput:visible").length == 0 &&
          !w.altKey &&
          !w.ctrlKey
        ) {
          var p = w.keyCode ? w.keyCode : w.which;
          if (p == 188 || p == 190) {
            var r = $(".passageContainer");
            if (r.length > 1) {
              var t = $(".passageContainer.active")[0].getAttribute(
                "passage-id"
              );
              var o = 0;
              for (var v = 0; v < r.length; v++) {
                if ($(".passageContainer")[v].getAttribute("passage-id") == t) {
                  if (p == 188) {
                    if (v > 0) {
                      o = v - 1;
                    } else {
                      o = r.length - 1;
                    }
                  } else {
                    if (v < r.length - 1) {
                      o = v + 1;
                    } else {
                      o = 0;
                    }
                  }
                  step.util.uP(o);
                  break;
                }
              }
            }
            step.tempKeyInput = "";
          } else {
            if (p == 37) {
              if (w.shiftKey) {
                $("a.previousChapter").click();
              } else {
                $(".passageContainer.active").find("a.previousChapter").click();
              }
              step.tempKeyInput = "";
            } else {
              if (p == 39) {
                if (w.shiftKey) {
                  $("a.nextChapter").click();
                } else {
                  $(".passageContainer.active").find("a.nextChapter").click();
                }
                step.tempKeyInput = "";
              } else {
                if (p == 187 && !step.touchDevice) {
                  step.util.uY();
                  step.tempKeyInput = "";
                } else {
                  if (p == 191) {
                    step.util.ui.showTutorial();
                    step.tempKeyInput = "";
                  } else {
                    if ((p > 48 && p < 52) || (p > 64 && p < 91)) {
                      var q = String.fromCharCode(p).toLowerCase();
                      if (w.shiftKey) {
                        step.tempKeyInput = "";
                        if (q === "t" || q === "b") {
                          step.util.uy();
                        } else {
                          if (q === "s") {
                            step.util.ur();
                          } else {
                            if (q === "h") {
                              step.util.ui.initSidebar("history");
                            } else {
                              if (q === "p" || q === "r") {
                                step.util.up();
                              } else {
                                if (q === "a" || q === "v") {
                                  step.util.ui.initSidebar("analysis");
                                } else {
                                  if (q === "c") {
                                    $(".sidebar-offcanvas")
                                      .find("a.glyphicon-remove")
                                      .click();
                                    $("#welcomeExamples")
                                      .find(".closeColumn")
                                      .click();
                                  }
                                }
                              }
                            }
                          }
                        }
                      } else {
                        n && clearTimeout(n);
                        step.tempKeyInput += q;
                        n = setTimeout(function () {
                          step.tempKeyInput = "";
                        }, 1500);
                        if (step.tempKeyInput.length >= 2) {
                          var x = JSON.parse(__s.list_of_bibles_books);
                          for (var v = 0; v < x.length; v++) {
                            var s = x[v][0];
                            if (!(false || !!document.documentMode)) {
                              s = s.normalize("NFD");
                            }
                            if (
                              s
                                .replace(/[\u0300-\u036f\s]/g, "")
                                .toLowerCase()
                                .indexOf(step.tempKeyInput) == 0
                            ) {
                              step.util.up();
                              step.tempKeyInput = "";
                              return;
                            }
                          }
                          step.tempKeyInput = step.tempKeyInput.substr(1);
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      });
    }
  }
  function g() {
    window.searchView = new MainSearchView();
    searchView.syncWithUrl(step.util.uQ());
  }
  function a() {
    Backbone.history = _.extend(Backbone.history, {
      getFragment: function (i) {
        if (i == null) {
          var n = window.location.pathname;
          if (n && n[0] == "/") {
            n = n.slice(1);
          }
          var m = window.location.search;
          if (m) {
            m.replace(/%7C/g, URL_SEPARATOR).replace(/\|/g, URL_SEPARATOR);
            n += m;
          }
          return n;
        }
        return i.replace(/^[#\/]|\s+$/g, "");
      },
    });
  }
  function e(m) {
    if (!step.passages || !m) {
      return null;
    }
    var i = m.signature;
    for (var n = 0; n < step.passages.length; n++) {
      var o = step.passages.at(n);
      if (o.get("signature") == i) {
        return o;
      }
    }
    return step.passages.at(0);
  }
  function b() {
    step.router = new StepRouter();
    step.passages = new PassageModelList();
    step.passages.fetch();
    step.bookmarks = new HistoryModelList();
    step.bookmarks.fetch();
    for (var w = 0; w < step.passages.length; w++) {
      var i = step.passages.at(w);
      i.save(
        {
          passageId: w + 1,
          pageNumber: 1,
          results: i.get("firstPageResults"),
          linked: null,
        },
        {
          silent: true,
        }
      );
    }
    if (window.tempModel) {
      var n = $(".passageContainer").find(".passageContent").html().trim();
      var m = new PassageModel({
        passageId: 0,
        position: -1,
      });
      step.passages.add(m);
      window.tempModel.createSilently = true;
      var v = e(window.tempModel);
      m.save(window.tempModel, {
        silent: true,
      });
      m.save(
        {
          isQuickLexicon: v ? v.get("isQuickLexicon") : true,
          isSimilarWord: v ? v.get("isSimilarWord") : true,
          isEnWithZhLexicon: v ? v.get("isEnWithZhLexicon") : true,
          isVerseVocab: v ? v.get("isVerseVocab") : true,
          results: null,
          linked: null,
          value: n,
          isSwipeLeftRight: v ? v.get("isSwipeLeftRight") : true,
        },
        {
          silent: true,
        }
      );
      new PassageMenuView({
        model: m,
      });
      step.router.mG(m, true, $.getUrlVar("q"));
      $(".helpMenuTrigger").one("click", function () {
        require(["view_help_menu"], function () {
          new ViewHelpMenuOptions({});
        });
      });
    }
    if (step.passages.length == 0) {
      step.passages.add(
        new PassageModel({
          passageId: 0,
        })
      );
    }
    var q = step.util.uM("step.usageCount");
    var t = parseInt(q, 10);
    if (isNaN(t)) {
      t = 0;
    }
    var s = step.util.uM("step.showICCAnnounce");
    var u = parseInt(s, 10);
    if (isNaN(u)) {
      u = 0;
    }
    var x = $.getUrlVars();
    if (
      ((x.indexOf("skipwelcome") > -1 ||
        x.indexOf("clickvocab") > -1 ||
        t > 30) &&
        u > 0) ||
      (step.touchDevice && !step.touchWideDevice)
    ) {
      step.util.uV("true");
      if (x.indexOf("clickvocab") > -1) {
        var o = x.q.indexOf("strong=");
        if (o > -1) {
          var r = x.q
            .substring(o + 7)
            .split(URL_SEPARATOR)[0]
            .split("|")[0]
            .split("&")[0];
          step.util.ui.iJ(r);
        }
      }
    } else {
      if (t > 12 && window.innerWidth > 767) {
        step.util.ui.showTutorial();
      } else {
        new ExamplesView({
          el: $(".examplesColumn"),
        });
      }
    }
    t++;
    step.util.ub("step.usageCount", t);
    u++;
    step.util.ub("step.showICCAnnounce", u);
    $("#stepDisclaimer").popover();
  }
  function d() {
    var m = $.getUrlVars();
    var i = m.indexOf("debug") > -1 ? "&debug" : "";
    if (m.indexOf("colorCode1") > -1) {
      cf.setNextPageURL(
        "?q=version=ESV@reference=Col.3&options=HVGUNC&skipwelcome" + i,
        "verb, imperative mood",
        "kjv_verb_imperative_explanation"
      );
    } else {
      if (m.indexOf("colorCode2") > -1) {
        cf.setNextPageURL(
          "/?q=version=ESV@reference=Col.1&options=HVGUNC&skipwelcome" + i,
          "verb, main vs supporting verbs",
          "kjv_verb_main_supporting_explanation"
        );
      } else {
        if (m.indexOf("colorCode3") > -1) {
          cf.setNextPageURL(
            "/?q=version=ESV@reference=Mat.1&options=HVGUNC&skipwelcome" + i,
            "gender and number",
            "kjv_verb_number_and_gender_explanation"
          );
        } else {
          if (m.indexOf("colorCode4") > -1) {
            cf.setNextPageURL(
              "/?q=version=KJV@reference=Eph.1&options=HVGUNC&skipwelcome" + i,
              C_AspectDesc,
              ""
            );
          } else {
            if (m.indexOf("colorCode5") > -1) {
              cf.setNextPageURL(
                "/?q=version=SBLG@reference=Rom.12&options=CEMVALHUN&skipwelcome" +
                  i,
                C_AspectDesc,
                ""
              );
            } else {
              if (m.indexOf("colorCode6") > -1) {
                cf.setNextPageURL(
                  "/?q=version=THOT@reference=Gen.1&options=HVLUNC&skipwelcome" +
                    i,
                  C_AspectDesc,
                  "",
                  true
                );
              } else {
                if (m.indexOf("colorCode7") > -1) {
                  cf.setNextPageURL(
                    "/?q=version=CUn@reference=Col.1&options=HVGUNC&skipwelcome" +
                      i,
                    C_AspectDesc,
                    ""
                  );
                } else {
                  if (m.indexOf("colorCode8") > -1) {
                    cf.setNextPageURL(
                      "/?q=version=SBLG@version=KJV@version=CUn@reference=Eph.5&options=CVLHUVNEAM&display=INTERLEAVED&skipwelcome" +
                        i,
                      C_AspectDesc,
                      ""
                    );
                  } else {
                    if (m.indexOf("otGreek1") > -1) {
                      cf.setNextPageURL(
                        "/?q=version=LXX@version=EngLXX@version=ABGk@version=ABEn@reference=Exod.31&options=VLGUHVNAT&display=INTERLEAVED&skipwelcome" +
                          i,
                        "",
                        ""
                      );
                    } else {
                      if (m.indexOf("otGreek2") > -1) {
                        cf.setNextPageURL(
                          "/?q=version=ESV@version=THOT@version=ABGk@version=ABEn@reference=Isa.53.1%20John.12.38&options=VVNH&display=COLUMN&pos=1&skipwelcome" +
                            i,
                          "",
                          ""
                        );
                      } else {
                        return false;
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    return true;
  }
  $(window).on("load", function () {
    if (d()) {
      return;
    }
    define.amd = null;
    if ((window.location.hash || "").indexOf("#") != -1) {
      window.location.hash = "";
    }
    window.step = window.step || {};
    f();
    h();
    a();
    b();
    g();
    Backbone.history.start({
      pushState: true,
      silent: true,
    });
    try {
      var q = $.getUrlVar("q") || "";
      if (
        q.search(/version/) == -1 &&
        $.getUrlVars().indexOf("noredirect") == -1
      ) {
        q = q
          .replace(/%3D/g, "=")
          .replace(/%7C/g, URL_SEPARATOR)
          .replace(/\|/g, URL_SEPARATOR);
        var u = new HistoryModelList();
        if (typeof u === "object") {
          u.fetch();
          var z = 0;
          var n = "";
          while (z < u.length && n === "") {
            var C = u.at(z);
            if (typeof C === "object") {
              var y = C.get("args");
              if (typeof y === "string") {
                y = y
                  .replace(/%7C/g, URL_SEPARATOR)
                  .replace(/\|/g, URL_SEPARATOR);
                if (y.search(/reference/) > -1) {
                  n = decodeURIComponent(y);
                  var r = n.search(/version=[^@]+/);
                  var o = "";
                  while (r > -1) {
                    var p = RegExp.lastMatch;
                    p = p.replace(/version=/, "");
                    if (typeof step.keyedVersions[p] === "object") {
                      o += "version=" + p + URL_SEPARATOR;
                    }
                    n = n.replace(/version=[^@]+/, "");
                    r = n.search(/version=[^@]+/);
                  }
                  o = o.replace(/@$/, "");
                  if (q === "") {
                    r = n.search(/reference=[^@]+/);
                    while (r > -1) {
                      q += RegExp.lastMatch + URL_SEPARATOR;
                      n = n.replace(/reference=[^@]+/, "");
                      r = n.search(/reference=[^@]+/);
                    }
                    q = q.replace(/@$/, "");
                  }
                  if (o !== "" && q !== "") {
                    var m = C.get("options") || "";
                    var v = C.get("display") || "";
                    if (typeof m === "string" && typeof v === "string") {
                      step.router.doMasterSearch(o + URL_SEPARATOR + q, m, v);
                    }
                  }
                }
              }
            }
            ++z;
          }
        }
      }
    } catch (x) {
      console.log("navigate to version+query error: ", x);
    }
    new FeedbackView();
    if (step.passages.length > 1) {
      _.each(
        step.passages.reject(function (E) {
          return E.get("passageId") == 0;
        }),
        function (E) {
          E.destroy();
        }
      );
    }
    var t =
      "UNKNOWN GB DE FR IT ES PL RO NL BE GR SE PT AT BG CY CZ DK EE FI HR HU IE LT LU LV MT SI SK";
    if (t.indexOf(step.userCountryCode) > -1) {
      step.util.uL("cookie_notification", "info");
    }
    var A = step.util.uM("colorCode-InfoMsg");
    if (A) {
      localStorage.removeItem("colorCode-InfoMsg");
      if (A != '""') {
        step.util.uL(JSON.parse(A), "info");
      }
    }
    if (step.state.getIncompleteLanguage()) {
      step.util.uL("machine_translated", "info");
    }
    if (window.localStorage) {
      var D = step.util.uM("step.version");
      var B = step.state.getCurrentVersion();
      if (D != B) {
        console.log("Upgrading versions: ", D, B);
        step.util.ub("step.version", B);
      }
    }
    var s = window.location.origin.indexOf("examples.stepbible.org") > -1;
    if (window != window.top) {
      step.util.uV(true);
      if (!s) {
        var i = $(
          "<button class='stepBreakout btn btn-default btn-xs'><span class='glyphicon glyphicon-new-window'></button>"
        );
        $(".headerButtons").append(i);
        i.on("click", function () {
          window.open(window.location);
        });
      }
    } else {
      if (s) {
        alert(
          "Please use www.stepbible.org instead of this server which will only show examples."
        );
      }
    }
    var w = navigator.userAgent.toLowerCase();
    if (w.indexOf("firefox") > -1) {
      $("#panel-icon").hide();
    }
    if (
      typeof navigator.clipboard !== "object" ||
      typeof navigator.clipboard.writeText !== "function"
    ) {
      $("#copy-icon").hide();
    }
    if (
      (step.appleTouchDevice && w.search(/ cpu os [345678]_/) > -1) ||
      false ||
      !!document.documentMode
    ) {
      $("#panel-icon").css("color", "black");
      $("#stats-icon").css("color", "black");
      $("#bookmark-icon").css("color", "black");
      $("#examples-icon1").css("color", "black");
      $("#examples-icon2").css("color", "black");
      $("#fonts-icon").css("color", "black");
      $("#languages-icon").css("color", "black");
      $(".icon-language").css("color", "black");
      $("#raiseSupportTrigger").css("color", "black");
      $("#more-icon").css("color", "black");
    }
    step.util.u0();
  });
  $(window).resize(function () {
    step.util.uS();
  });
})();
