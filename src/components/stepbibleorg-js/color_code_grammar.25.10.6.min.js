"use strict";
var C_AspectDesc = "underlining based on verb aspect";
var C_TenseDesc = "underlining based on verb tense";
var C_OrigDesc = "original colors defined in 2019";
function ULOBJ(a) {
  this.name = a;
  this.img = new Image();
  this.canvas = null;
  this.context = null;
  this.animCount = 0;
  this.animIncrement = 1;
  this.displayStatusByMood = true;
  this.displayStatusByTense = true;
}
function NAMEANDARRAY(b, a) {
  this.name = b;
  this.array = a;
}
var cc = [
  [
    0, 3, 6, 8, 11, 14, 17, 20, 21, 22, 25, 26, 27, 30, 33, 36, 41, 44, 47, 50,
    53, 56, 59, 62, 65, 67, 70, 71,
  ],
  [
    1, 4, 7, 9, 12, 15, 18, 23, 28, 31, 34, 37, 39, 42, 45, 48, 51, 54, 57, 60,
    63, 66, 68, 72,
  ],
  [
    2, 5, 10, 13, 16, 19, 24, 29, 32, 35, 38, 40, 43, 46, 49, 52, 55, 58, 61,
    64, 69, 73,
  ],
  800,
  1125,
  {
    p: "present",
    i: "imperfect",
    r: "perfect",
    l: "pluperfect",
    a: "aorist",
    f: "future",
  },
  {
    present: "p",
    imperfect: "i",
    perfect: "r",
    pluperfect: "l",
    aorist: "a",
    future: "f",
  },
  ["p", "i", "a", "r", "l", "f"],
  [false, false, false, false, false, false],
  {
    i: "indicative",
    s: "subjunctive",
    o: "optative",
    m: "imperative",
    n: "infinitive",
    p: "participle",
  },
  {
    indicative: "i",
    subjunctive: "s",
    optative: "o",
    imperative: "m",
    infinitive: "n",
    participle: "p",
  },
  ["i", "m", "s", "o", "n", "p"],
  [false, false, false, false, false, false],
  {
    perfect: "p",
    va_imperfect: "w",
    infinitive: "f",
    participle: "r",
    participle_passive: "s",
    imperative: "v",
    imperfect_not_jussive: "n",
    ve_perfect: "q",
    imperfect: "i",
    ve_imperfect: "u",
    jussive: "j",
    cohortative: "c",
  },
  ["p", "w", "i", "q", "n", "u", "j", "c", "v", "f", "r", "s"],
  [
    false,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    false,
    false,
    false,
    true,
  ],
  {
    qal: "q",
    niphal: "N",
    hithpael: "t",
    piel: "p",
    pual: "P",
    hothpaal: "u",
    nithpael: "D",
    polal: "O",
    hiphil: "h",
    tiphil: "c",
    hophal: "H",
    hishtaphel: "v",
  },
  ["q", "N", "t", "p", "P", "u", "D", "O", "h", "c", "H", "v"],
  [false, true, true, false, true, true, true, true, false, true, true, true],
  {
    peal: "q",
    peil: "Q",
    itpeel: "i",
    hishtaphel: "t",
    pael: "p",
    hithpeel: "u",
    ithpaal: "P",
    hithpaal: "M",
    aphel: "a",
    haphel: "h",
    shaphel: "e",
    hophal: "H",
    ishtaphel: "v",
  },
  ["q", "Q", "i", "t", "p", "u", "P", "M", "a", "h", "e", "H", "v"],
  [
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    true,
  ],
  {
    Arrow: "ulArrow",
    "Short Arrow": "ulShortArrow",
    "Reverse Arrow": "ulReverseArrow",
    "Short Reverse Arrow": "ulShortReverseArrow",
    Dash: "ulDash",
    "2 lines": "ulDoubleSolid",
    Underline: "ulSolid",
    Dots: "ulDot",
    Wave: "ulWave",
    "Dash Dot": "ulDashDot",
    "Dash Dot Dot": "ulDashDotDot",
    None: "ulNone",
  },
  {
    ulArrow: "Arrow",
    ulShortArrow: "Short Arrow",
    ulReverseArrow: "Reverse Arrow",
    ulShortReverseArrow: "Short Reverse Arrow",
    ulDash: "Dash",
    ulDoubleSolid: "2 lines",
    ulSolid: "Underline",
    ulDot: "Dots",
    ulWave: "Wave",
    ulDashDot: "Dash Dot",
    ulDashDotDot: "Dash Dot Dot",
    ulNone: "None",
  },
  [
    new NAMEANDARRAY(
      "indicative",
      [0, 1, 2, 17, 18, 19, 22, 23, 24, 36, 37, 38, 41, 42, 43, 59, 60, 61]
    ),
    new NAMEANDARRAY("subjunctive", [3, 4, 5, 20, 25, 44, 45, 46, 62, 63, 64]),
    new NAMEANDARRAY("optative", [6, 7, 26, 47, 48, 49, 65, 66]),
    new NAMEANDARRAY("imperative", [8, 9, 10, 27, 28, 29, 50, 51, 52, 70]),
    new NAMEANDARRAY(
      "infinitive",
      [11, 12, 13, 30, 31, 32, 53, 54, 55, 67, 68, 69]
    ),
    new NAMEANDARRAY(
      "participle",
      [14, 15, 16, 21, 33, 34, 35, 39, 40, 56, 57, 58, 71, 72, 73]
    ),
  ],
  [
    new NAMEANDARRAY(
      "present",
      [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]
    ),
    new NAMEANDARRAY("imperfect", [17, 18, 19, 20, 21]),
    new NAMEANDARRAY(
      "perfect",
      [22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35]
    ),
    new NAMEANDARRAY("pluperfect", [36, 37, 38, 39, 40]),
    new NAMEANDARRAY(
      "aorist",
      [41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58]
    ),
    new NAMEANDARRAY(
      "future",
      [59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73]
    ),
  ],
  {
    p: ["perfect", "Perfect", true],
    w: ["va_imperfect", "va+Imperfect", true],
    f: ["infinitive", "Infinitive", true],
    r: ["participle", "Participle", true],
    s: ["participle_passive", "Participle-Passive", false],
    v: ["imperative", "Imperative", true],
    n: ["imperfect_not_jussive", "Imperfect-not-jussive", false],
    q: ["ve_perfect", "ve+Perfect", true],
    i: ["imperfect", "Imperfect", true],
    u: ["ve_imperfect", "ve+Imperfect", false],
    j: ["jussive", "Jussive", true],
    c: ["cohortative", "Cohortative", true],
  },
  {
    q: ["qal", "a", true],
    N: ["niphal", "p", true],
    t: ["hithpael", "m", true],
    p: ["piel", "a", true],
    P: ["pual", "p", true],
    u: ["hothpaal", "p", false],
    D: ["nithpael", "p", false],
    O: ["polal", "p", false],
    h: ["hiphil", "a", true],
    c: ["tiphil", "a", false],
    H: ["hophal", "p", true],
    v: ["hishtaphel", "m", true],
  },
  {
    q: ["peal", "a", false],
    Q: ["peil", "p", false],
    i: ["itpeel", "m", false],
    t: ["hishtaphel", "m", false],
    p: ["pael", "a", false],
    u: ["hithpeel", "p", false],
    P: ["ithpaal", "m", false],
    M: ["hithpaal", "m", true],
    a: ["aphel", "a", false],
    h: ["haphel", "a", false],
    e: ["shaphel", "a", false],
    H: ["hophal", "p", false],
    v: ["ishtaphel", "m", false],
  },
  {
    Underline: "___",
    Dash: "- - -",
    "Dash Dot": "-.-.",
    "Dash Dot Dot": "-..",
    Dots: "......",
    Wave: "〜",
    Arrow: "→",
    "Short Arrow": "> >",
    "Reverse Arrow": "←",
    "Short Reverse Arrow": "< <",
    "2 lines": "══",
  },
];
var cv = [
  false,
  null,
  true,
  false,
  false,
  [
    new ULOBJ("ulArrow"),
    new ULOBJ("ulDash"),
    new ULOBJ("ulSolid"),
    new ULOBJ("ulDoubleSolid"),
    new ULOBJ("ulDot"),
    new ULOBJ("ulWave"),
    new ULOBJ("ulDashDot"),
    new ULOBJ("ulDashDotDot"),
    new ULOBJ("ulShortArrow"),
    new ULOBJ("ulReverseArrow"),
    new ULOBJ("ulShortReverseArrow"),
    new ULOBJ("ulNone"),
  ],
  [
    new ULOBJ("pai"),
    new ULOBJ("pmi"),
    new ULOBJ("ppi"),
    new ULOBJ("pas"),
    new ULOBJ("pms"),
    new ULOBJ("pps"),
    new ULOBJ("pao"),
    new ULOBJ("pmo"),
    new ULOBJ("pam"),
    new ULOBJ("pmm"),
    new ULOBJ("ppm"),
    new ULOBJ("pan"),
    new ULOBJ("pmn"),
    new ULOBJ("ppn"),
    new ULOBJ("pap"),
    new ULOBJ("pmp"),
    new ULOBJ("ppp"),
    new ULOBJ("iai"),
    new ULOBJ("imi"),
    new ULOBJ("ipi"),
    new ULOBJ("ias"),
    new ULOBJ("iap"),
    new ULOBJ("rai"),
    new ULOBJ("rmi"),
    new ULOBJ("rpi"),
    new ULOBJ("ras"),
    new ULOBJ("rao"),
    new ULOBJ("ram"),
    new ULOBJ("rmm"),
    new ULOBJ("rpm"),
    new ULOBJ("ran"),
    new ULOBJ("rmn"),
    new ULOBJ("rpn"),
    new ULOBJ("rap"),
    new ULOBJ("rmp"),
    new ULOBJ("rpp"),
    new ULOBJ("lai"),
    new ULOBJ("lmi"),
    new ULOBJ("lpi"),
    new ULOBJ("lmp"),
    new ULOBJ("lpp"),
    new ULOBJ("aai"),
    new ULOBJ("ami"),
    new ULOBJ("api"),
    new ULOBJ("aas"),
    new ULOBJ("ams"),
    new ULOBJ("aps"),
    new ULOBJ("aao"),
    new ULOBJ("amo"),
    new ULOBJ("apo"),
    new ULOBJ("aam"),
    new ULOBJ("amm"),
    new ULOBJ("apm"),
    new ULOBJ("aan"),
    new ULOBJ("amn"),
    new ULOBJ("apn"),
    new ULOBJ("aap"),
    new ULOBJ("amp"),
    new ULOBJ("app"),
    new ULOBJ("fai"),
    new ULOBJ("fmi"),
    new ULOBJ("fpi"),
    new ULOBJ("fas"),
    new ULOBJ("fms"),
    new ULOBJ("fps"),
    new ULOBJ("fao"),
    new ULOBJ("fmo"),
    new ULOBJ("fan"),
    new ULOBJ("fmn"),
    new ULOBJ("fpn"),
    new ULOBJ("fam"),
    new ULOBJ("fap"),
    new ULOBJ("fmp"),
    new ULOBJ("fpp"),
  ],
  [],
  {},
  {},
  {},
  -1,
  cc[2].slice(0),
  cc[1].slice(0),
  [],
  0,
  0,
  "",
  [],
  false,
  false,
  [
    new ULOBJ("ulPassive"),
    new ULOBJ("ulMiddle"),
    new ULOBJ("ulOTPassive"),
    new ULOBJ("ulOTMiddle"),
  ],
];
var c4;
var cf = {
  σCA: function () {
    var a = [];
    a[0] = [];
    a[0][0] = false;
    a[0][1] = [
      "#000000",
      "#ff0000",
      "#ff8800",
      "#ff8800",
      "#0000ff",
      "#ff00ff",
      "#000000",
    ];
    a[0][2] = [
      "Dash",
      "Arrow",
      "Underline",
      "2 lines",
      "2 lines",
      "Dots",
      "Underline",
    ];
    a[0][3] = "#ffd6b8";
    a[0][4] = "#000000";
    a[0][5] = true;
    a[0][6] = true;
    a[0][7] = true;
    a[0][8] = false;
    a[0][9] = "#a3fefe";
    a[0][10] = "#000000";
    a[0][11] = true;
    a[0][12] = true;
    a[0][13] = true;
    a[0][14] = false;
    a[0][15] = null;
    a[0][16] = null;
    a[0][17] = [true, true, true, true, true, true];
    a[0][18] = [true, true, true, true, true, true];
    a[0][19] = [false, false, false, false, false, false];
    a[0][20] = cc[7];
    a[0][21] = cc[11];
    a[0][22] = cc[8];
    a[0][23] = cc[12];
    a[0][24] = true;
    a[0][25] = "#ffffff";
    a[0][26] = "#ffffff";
    a[0][27] = false;
    a[0][28] = false;
    a[0][29] = false;
    a[0][30] = false;
    a[1] = [];
    a[1][0] = false;
    a[1][1] = [
      "#000000",
      "#ff0000",
      "#0000ff",
      "#000000",
      "#000000",
      "#000000",
      "#000000",
      "#000000",
      "#000000",
      "#000000",
      "#000000",
      "#000000",
    ];
    a[1][2] = [
      "Short Reverse Arrow",
      "Arrow",
      "Dash Dot Dot",
      "Dash Dot",
      "Underline",
      "Dash",
      "Underline",
      "Underline",
      "Underline",
      "Underline",
      "Underline",
      "Underline",
    ];
    a[1][3] = "#ffd6b8";
    a[1][4] = "#000000";
    a[1][5] = true;
    a[1][6] = true;
    a[1][7] = true;
    a[1][8] = false;
    a[1][9] = "#a3fefe";
    a[1][10] = "#000000";
    a[1][11] = true;
    a[1][12] = true;
    a[1][13] = true;
    a[1][14] = false;
    a[1][15] = {
      desc: ["Simple", "Intensive / Resultative", "Causative / Declarative"],
      repeat: [0, 0, 0],
    };
    a[1][16] = {
      desc: [
        "Past or poss.<br>Present",
        "Present or<br>Future",
        "Any time<br>or Present",
      ],
      repeat: [0, 1, 2],
    };
    a[1][17] = [
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
    ];
    a[1][18] = [
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
      true,
    ];
    a[1][19] = cc[14];
    a[1][20] = cc[15];
    a[1][21] = cc[17];
    a[1][22] = cc[18];
    a[1][23] = cc[20];
    a[1][24] = cc[21];
    a[1][25] = cc[27];
    a[1][26] = cc[28];
    a[1][27] = cc[26];
    a[1][28] = true;
    a[3] = false;
    a[4] = "#000099";
    a[5] = "#C90000";
    a[6] = "#000000";
    a[7] = "normal";
    a[8] = "bold";
    a[2] = "20250419";
    return a;
  },
  initCanvasAndCssForClrCodeGrammar: function () {
    if (c4 === undefined) {
      cf.σCv();
    }
    cf.σCh();
    cf.σCi();
    cf.σCj();
    cf.σCk();
    cf.σCl();
    cf.σCm(cv[5][2]);
    cf.σCn();
    cf.σCo();
    cf.σCp();
    cf.σCq();
    cf.σCr();
    cf.σCs();
    cf.σCE();
    cf.σCD();
    cf.goAnimate(0);
  },
  σCB: function (b) {
    var a = Math.round(b / 5);
    if (a % 2 === 0) {
      if (a > 3) {
        a -= 1;
      } else {
        a += 1;
      }
    }
    return a;
  },
  σCC: function (e, d, b) {
    var c = document.getElementById(e);
    if (c == undefined) {
      c = document.createElement("canvas");
      c.id = e;
      c.width = d;
      c.height = b;
      c.hidden = true;
      var a = document.getElementsByTagName("body")[0];
      a.appendChild(c);
    }
    return c;
  },
  σCh: function () {
    var a = cv[5][0];
    a.canvas = cf.σCC(a.name, 18, 10);
    a.context = a.canvas.getContext("2d", {
      willReadFrequently: true,
    });
    a.context.beginPath();
    a.context.lineJoin = "round";
    a.context.lineWidth = 1;
    a.context.moveTo(9, 2);
    a.context.lineTo(18, 5);
    a.context.lineTo(9, 8);
    a.context.fill();
    a.context.closePath();
    a.context.beginPath();
    a.context.lineWidth = 2;
    a.context.moveTo(9, 5);
    a.context.lineTo(3, 5);
    a.context.stroke();
    a.context.closePath();
    a.img.src = a.canvas.toDataURL("image/png");
    a.animIncrement = cf.σCB(a.canvas.width);
  },
  σCi: function () {
    var a = cv[5][8];
    a.canvas = cf.σCC(a.name, 10, 10);
    a.context = a.canvas.getContext("2d", {
      willReadFrequently: true,
    });
    a.context.beginPath();
    a.context.lineJoin = "round";
    a.context.lineWidth = 2;
    a.context.moveTo(3, 2);
    a.context.lineTo(10, 5);
    a.context.lineTo(3, 8);
    a.context.stroke();
    a.context.closePath();
    a.img.src = a.canvas.toDataURL("image/png");
    a.animIncrement = cf.σCB(a.canvas.width);
  },
  σCj: function () {
    var a = cv[5][9];
    a.canvas = cf.σCC(a.name, 18, 10);
    a.context = a.canvas.getContext("2d", {
      willReadFrequently: true,
    });
    a.context.beginPath();
    a.context.lineJoin = "round";
    a.context.lineWidth = 1;
    a.context.moveTo(9, 2);
    a.context.lineTo(0, 5);
    a.context.lineTo(9, 8);
    a.context.fill();
    a.context.closePath();
    a.context.beginPath();
    a.context.lineWidth = 2;
    a.context.moveTo(9, 5);
    a.context.lineTo(15, 5);
    a.context.stroke();
    a.context.closePath();
    a.img.src = a.canvas.toDataURL("image/png");
    a.animIncrement = cf.σCB(a.canvas.width);
  },
  σCk: function () {
    var a = cv[5][10];
    a.canvas = cf.σCC(a.name, 10, 10);
    a.context = a.canvas.getContext("2d", {
      willReadFrequently: true,
    });
    a.context.beginPath();
    a.context.lineJoin = "round";
    a.context.lineWidth = 2;
    a.context.moveTo(8, 2);
    a.context.lineTo(1, 5);
    a.context.lineTo(8, 8);
    a.context.stroke();
    a.context.closePath();
    a.img.src = a.canvas.toDataURL("image/png");
    a.animIncrement = cf.σCB(a.canvas.width);
  },
  σCl: function () {
    var a = cv[5][1];
    a.canvas = cf.σCC(a.name, 13, 10);
    a.context = a.canvas.getContext("2d", {
      willReadFrequently: true,
    });
    a.context.beginPath();
    a.context.lineWidth = 4;
    a.context.moveTo(4, 4);
    a.context.lineTo(13, 4);
    a.context.stroke();
    a.context.closePath();
    a.img.src = a.canvas.toDataURL("image/png");
    a.animIncrement = cf.σCB(a.canvas.width);
  },
  σCm: function (b) {
    var a = b;
    a.canvas = cf.σCC(a.name, 1, 10);
    a.context = a.canvas.getContext("2d", {
      willReadFrequently: true,
    });
    a.context.beginPath();
    a.context.lineWidth = 3;
    a.context.moveTo(0, 4);
    a.context.lineTo(1, 4);
    a.context.stroke();
    a.context.closePath();
    a.img.src = a.canvas.toDataURL("image/png");
  },
  σCn: function () {
    var a = cv[5][6];
    a.canvas = cf.σCC(a.name, 19, 10);
    a.context = a.canvas.getContext("2d", {
      willReadFrequently: true,
    });
    a.context.beginPath();
    a.context.arc(5, 4, 2, 0, 2 * Math.PI);
    a.context.fill();
    a.context.stroke();
    a.context.closePath();
    a.context.beginPath();
    a.context.lineWidth = 4;
    a.context.moveTo(10, 4);
    a.context.lineTo(19, 4);
    a.context.stroke();
    a.context.closePath();
    a.img.src = a.canvas.toDataURL("image/png");
    a.animIncrement = cf.σCB(a.canvas.width);
  },
  σCo: function () {
    var a = cv[5][7];
    a.canvas = cf.σCC(a.name, 26, 10);
    a.context = a.canvas.getContext("2d", {
      willReadFrequently: true,
    });
    a.context.beginPath();
    a.context.arc(5, 4, 2, 0, 2 * Math.PI);
    a.context.fill();
    a.context.stroke();
    a.context.closePath();
    a.context.beginPath();
    a.context.arc(12, 4, 2, 0, 2 * Math.PI);
    a.context.fill();
    a.context.stroke();
    a.context.closePath();
    a.context.beginPath();
    a.context.lineWidth = 4;
    a.context.moveTo(17, 4);
    a.context.lineTo(26, 4);
    a.context.stroke();
    a.context.closePath();
    a.img.src = a.canvas.toDataURL("image/png");
    a.animIncrement = cf.σCB(a.canvas.width);
  },
  σCp: function () {
    var a = cv[5][11];
    a.canvas = cf.σCC(a.name, 1, 10);
    a.context = a.canvas.getContext("2d", {
      willReadFrequently: true,
    });
    a.img.src = a.canvas.toDataURL("image/png");
  },
  σCq: function () {
    var a = cv[5][3];
    a.canvas = cf.σCC(a.name, 1, 10);
    a.context = a.canvas.getContext("2d", {
      willReadFrequently: true,
    });
    a.context.beginPath();
    a.context.lineWidth = 2;
    a.context.moveTo(0, 2);
    a.context.lineTo(1, 2);
    a.context.stroke();
    a.context.moveTo(0, 7);
    a.context.lineTo(1, 7);
    a.context.stroke();
    a.context.closePath();
    a.img.src = a.canvas.toDataURL("image/png");
  },
  σCr: function () {
    var a = cv[5][4];
    a.canvas = cf.σCC(a.name, 10, 10);
    a.context = a.canvas.getContext("2d", {
      willReadFrequently: true,
    });
    a.context.beginPath();
    a.context.arc(5, 4, 2, 0, 2 * Math.PI);
    a.context.fill();
    a.context.stroke();
    a.context.closePath();
    a.img.src = a.canvas.toDataURL("image/png");
    a.animIncrement = cf.σCB(a.canvas.width);
  },
  σCs: function () {
    var b = cv[5][5];
    b.canvas = cf.σCC(b.name, 22, 10);
    b.context = b.canvas.getContext("2d", {
      willReadFrequently: true,
    });
    b.context.beginPath();
    b.context.strokeStyle = "black";
    b.context.lineWidth = 2;
    var c = 7;
    for (var a = 0; a <= b.canvas.width; a += 1) {
      var d = Math.round(
        c / 2 +
          (c / 2) * Math.sin(((a + -c / 2) / (b.canvas.width / 2)) * Math.PI) +
          1
      );
      if (a === 0) {
        b.context.moveTo(a, d);
      } else {
        b.context.lineTo(a, d);
      }
    }
    b.context.stroke();
    b.context.closePath();
    b.img.src = b.canvas.toDataURL("image/png");
    b.animIncrement = cf.σCB(b.canvas.width);
  },
  σCe: function (h, b, a) {
    var e;
    if (b != null && h == b) {
      e = "ulNone";
    } else {
      e = cc[22][c4[1][2][h]];
    }
    var c = _.find(cv[5], function (j) {
      return j.name == e;
    });
    if (a == null) {
      a = cf.σCO("H").orderOfXAxisItems.length;
    }
    cv[7][h] = new Array(a * 3);
    for (var f = 0; f < a; f++) {
      var i = c4[1][1][f];
      for (var d = 0; d < 3; d++) {
        var g = f * 3 + d;
        cv[7][h][g] = new ULOBJ("R" + h + "C" + g);
        cf.σCF(cv[7][h][g], c, i, -1);
      }
    }
  },
  σCD: function () {
    var e = cf.σCO("H").orderOfYAxisItems.length;
    var d = cf.σCO("H").orderOfXAxisItems.length;
    cv[7] = new Array(e + 1);
    for (var h = 0; h <= e; h++) {
      cf.σCe(h, e, d);
    }
    var i = -1;
    cv[8] = {};
    for (var a = 0; a < c4[1][19].length; a += 1) {
      if (!c4[1][20][a]) {
        i += 1;
      }
      cv[8][c4[1][19][a]] = i;
    }
    var b = -1;
    for (var g = 0; g < c4[1][21].length; g += 1) {
      if (!c4[1][22][g]) {
        b += 1;
      }
      var j = b * 3;
      if (c4[1][21][g] != undefined) {
        if (c4[1][25][c4[1][21][g]][1] == "p") {
          j += 1;
        } else {
          if (c4[1][25][c4[1][21][g]][1] == "m") {
            j += 2;
          }
        }
        cv[9][c4[1][21][g]] = j;
      }
    }
    b = -1;
    for (var f = 0; f < c4[1][23].length; f += 1) {
      if (!c4[1][24][f]) {
        b += 1;
      }
      var c = b * 3;
      if (c4[1][23][f] != undefined) {
        if (c4[1][26][c4[1][23][f]][1] == "p") {
          c += 1;
        } else {
          if (c4[1][26][c4[1][23][f]][1] == "m") {
            c += 2;
          }
        }
        cv[10][c4[1][23][f]] = c;
      }
    }
    cf.σCF(cv[21][2], cv[5][2], "#000000", 0, "otPassivePreview");
    cf.σCF(cv[21][3], cv[5][2], "#000000", 0, "otMiddlePreview");
  },
  σCE: function () {
    var o, p, n, l, g, k;
    if (c4[0][24]) {
      o = "tense";
      p = "mood";
    } else {
      o = "mood";
      p = "tense";
    }
    var b = cf.σCN();
    for (var j = 0; j < b.nameOfAllYAxisItems.length; j += 1) {
      var a = cc[22][c4[0][2][cf.σCd(o, j)]];
      var f = _.find(cv[5], function (q) {
        return q.name == a;
      });
      for (var i = 0; i < b.nameOfAllXAxisItems.length; i += 1) {
        var d = c4[0][1][cf.σCd(p, i)];
        if (c4[0][24]) {
          n = i;
          l = j;
          g = b.nameOfAllXAxisItems[i];
          k = b.nameOfAllYAxisItems[j];
        } else {
          n = j;
          l = i;
          g = b.nameOfAllYAxisItems[j];
          k = b.nameOfAllXAxisItems[i];
        }
        var c = _.find(cc[25], function (q) {
          return q.name == k;
        }).array;
        var e = _.find(cc[24], function (q) {
          return q.name == g;
        }).array;
        for (var h = 0; h < c.length; h += 1) {
          var m = c[h];
          if (e.indexOf(m) > -1) {
            cf.σCF(cv[6][m], f, d, m);
            cv[6][m].displayStatusByTense = c4[0][18][l];
            cv[6][m].displayStatusByMood = c4[0][17][n];
          }
        }
      }
    }
  },
  σCF: function (b, c, a, d, e) {
    b.canvas = cf.σCC(b.name, Math.max(c.canvas.width, 26), c.canvas.height);
    cf.σCJ(b, c, a, d, e);
  },
  σCG: function (a) {
    if (
      (a != null &&
        cv[6][a].displayStatusByMood &&
        a != null &&
        cv[6][a].displayStatusByTense &&
        c4[0][0]) ||
      a == -1
    ) {
      return true;
    } else {
      return false;
    }
  },
  σCH: function (a, b) {
    var c = false;
    if (c4[1][0]) {
      if (a == cv[7].length - 1) {
        c = true;
      } else {
        if (c4[1][18][a] && c4[1][17][Math.floor(b / 3)]) {
          c = true;
        } else {
          c = c4[1][18][a] && c4[1][17][Math.floor(b / 3)];
        }
      }
    }
    return c;
  },
  refreshClrGrammarCSS: function (a, d) {
    if (c4[3]) {
      if (cv[20]) {
        cv[20] = false;
        $(".hide_mas").removeClass("hide_mas").addClass("mas");
        $(".hide_fem").removeClass("hide_fem").addClass("fem");
        $(".hide_neut").removeClass("hide_neut").addClass("neut");
        $(".hide_sing").removeClass("hide_sing").addClass("sing");
        $(".hide_plur").removeClass("hide_plur").addClass("plur");
      }
      $(".mas").css("color", c4[4]);
      $(".fem").css("color", c4[5]);
      $(".neut").css("color", c4[6]);
      cf.σCc("singular", c4[7]);
      cf.σCc("plural", c4[8]);
    } else {
      if (cv[19]) {
        $(".mas").css("color", "");
        $(".fem").css("color", "");
        $(".neut").css("color", "");
        $(".sing").css("font-weight", "");
        $(".plur").css("font-weight", "");
        $(".sing").css("font-style", "");
        $(".plur").css("font-style", "");
        cv[19] = false;
      }
      $(".mas").removeClass("mas").addClass("hide_mas");
      $(".fem").removeClass("fem").addClass("hide_fem");
      $(".neut").removeClass("neut").addClass("hide_neut");
      $(".sing").removeClass("sing").addClass("hide_sing");
      $(".plur").removeClass("plur").addClass("hide_plur");
    }
    if (a == undefined || a.length > 0) {
      for (var g = 0; g < cv[6].length; g += 1) {
        if (cf.σCG(g)) {
          if (a == undefined || a.indexOf(" v" + cv[6][g].name + " ") > -1) {
            $(".v" + cv[6][g].name).css(
              "background",
              "url(" + cv[6][g].img.src + ") repeat-x 100% 100%"
            );
          }
        } else {
          $(".v" + cv[6][g].name).css("background", "none");
        }
      }
    }
    if (d == undefined) {
      for (var m = 0; m < cv[7].length; m += 1) {
        for (var f = 0; f < cv[7][m].length; f += 1) {
          if (cf.σCH(m, f)) {
            $(".vot_" + cv[7][m][f].name).css(
              "background",
              "url(" + cv[7][m][f].img.src + ") repeat-x 100% 100%"
            );
          } else {
            $(".vot_" + cv[7][m][f].name).css("background", "none");
          }
        }
      }
    } else {
      if (d.length > 4 && c4[1][0]) {
        var i = d.split(" ");
        for (var l = 0; l < i.length; l += 1) {
          var b = cf.σCI(i[l]);
          var n = b[0];
          var e = b[1];
          if (n != null && e != null) {
            if (cf.σCH(n, e)) {
              $(".vot_" + cv[7][n][e].name).css(
                "background",
                "url(" + cv[7][n][e].img.src + ") repeat-x 100% 100%"
              );
            } else {
              $(".vot_" + cv[7][n][e].name).css("background", "none");
            }
          }
        }
      }
    }
    var h = $("#sideBarVerbClrs");
    var c = $("#sideBarHVerbClrs");
    if (h.length > 0 || c.length > 0) {
      this.σCAD(h, c);
      if (h.length > 0) {
        this.σCAG();
        cf.σCF(cv[21][0], cv[5][2], "#000000", 0, "passivePreview");
        cf.σCF(cv[21][1], cv[5][2], "#000000", 0, "middlePreview");
      }
      if (c.length > 0) {
        this.σCAH();
        cf.σCF(cv[21][2], cv[5][2], "#000000", 0, "otPassivePreview");
        cf.σCF(cv[21][3], cv[5][2], "#000000", 0, "otMiddlePreview");
      }
    }
    $(".primaryLightBg").css("text-shadow", "none");
  },
  σCAD: function (d, e) {
    for (var a = 0; a < cv[5].length; a++) {
      var c = cv[5][a].name;
      if (c === "ulDot") {
        c = "ulDots";
      } else {
        if (c === "ulSolid") {
          c = "ulUnderline";
        } else {
          if (c === "ulDoubleSolid") {
            c = "ul2lines";
          }
        }
      }
      var b = d.find("." + c);
      if (b.length > 0) {
        if (c4[0][0]) {
          b.css(
            "background",
            "url(" + cv[5][a].img.src + ") repeat-x 100% 100%"
          );
        } else {
          b.css("background", "none");
        }
      }
      b = e.find("." + c);
      if (b.length > 0) {
        if (c4[1][0]) {
          b.css(
            "background",
            "url(" + cv[5][a].img.src + ") repeat-x 100% 100%"
          );
        } else {
          b.css("background", "none");
        }
      }
    }
  },
  σCAG: function () {
    for (var b = 0; b < c4[0][1].length; b++) {
      var a =
        $("#axisXOnOffCheckbox" + b).prop("checked") && c4[0][0]
          ? c4[0][1][b]
          : "var(--clrBackground)";
      $(".moodPreview" + b).css("text-decoration-color", a);
    }
  },
  σCAH: function () {
    for (var b = 0; b < c4[1][1].length; b++) {
      var a =
        $("#OTaxisXOnOffCheckbox" + b).prop("checked") && c4[1][0]
          ? c4[1][1][b]
          : "var(--clrBackground)";
      $(".stemPreview" + b).css("text-decoration-color", a);
    }
  },
  σCI: function (b) {
    var d = null,
      c = null;
    var a = b.length;
    if (a >= 4 && a <= 6 && b.substr(0, 1) == "R") {
      if (b.substr(2, 1) == "C") {
        d = parseInt(b.substr(1, 1));
        c = parseInt(b.substr(3));
      } else {
        if (b.substr(3, 1) == "C") {
          d = parseInt(b.substr(1, 2));
          c = parseInt(b.substr(4));
        }
      }
    }
    return [d, c];
  },
  σCJ: function (l, i, g, o, b) {
    if (g !== undefined) {
      var q;
      l.canvas.heigth = i.canvas.height;
      l.canvas.width = i.canvas.width;
      l.context = l.canvas.getContext("2d", {
        willReadFrequently: true,
      });
      l.context.drawImage(i.canvas, 0, 0);
      var j = false;
      var d = false;
      var c = "";
      var k = "";
      var e = false;
      var n = l.name;
      if (typeof b === "string") {
        if (b === "passivePreview") {
          n = "ppi";
        } else {
          if (b === "middlePreview") {
            n = "pmi";
          } else {
            if (b === "otPassivePreview") {
              n = "R0C1";
            } else {
              if (b === "otMiddlePreview") {
                n = "R0C2";
              }
            }
          }
        }
      }
      if (n.length === 3) {
        var m = n.substr(1, 1);
        j = n.length === 3 && m === "p";
        d = n.length === 3 && m === "m";
        if (j) {
          if (c4[0][6]) {
            q = c4[0][3];
          }
          if (c4[0][8]) {
            c = c4[0][4];
          }
        } else {
          if (d) {
            if (c4[0][12]) {
              q = c4[0][9];
            }
            if (c4[0][14]) {
              k = c4[0][10];
            }
          }
        }
      } else {
        if (n.length > 3) {
          var a = cf.σCI(n);
          var f = a[1];
          if (f != null) {
            e = true;
            var h = cf.σCO("H").orderOfXAxisItems.length;
            if (f <= h * 3) {
              if (f % 3 == 1) {
                j = true;
                if (c4[1][6]) {
                  q = c4[1][3];
                }
                if (c4[1][8]) {
                  c = c4[1][4];
                }
              } else {
                if (f % 3 == 2) {
                  d = true;
                  if (c4[1][12]) {
                    q = c4[1][9];
                  }
                  if (c4[1][14]) {
                    k = c4[1][10];
                  }
                }
              }
            }
          }
        }
      }
      cf.σCu(l, g, q);
      if (j && c != "") {
        l.context.beginPath();
        l.context.strokeStyle = c;
        l.context.lineWidth = 2;
        l.context.moveTo(0, l.canvas.heigth - 1);
        l.context.lineTo(l.canvas.width, l.canvas.heigth - 1);
        l.context.stroke();
        l.context.closePath();
      } else {
        if (d && k != "") {
          l.context.beginPath();
          l.context.strokeStyle = k;
          l.context.lineWidth = 2;
          l.context.moveTo(0, l.canvas.heigth - 1);
          l.context.lineTo(l.canvas.width, l.canvas.heigth - 1);
          l.context.stroke();
          l.context.closePath();
        }
      }
      l.img.src = l.canvas.toDataURL("image/png");
      l.animIncrement = cf.σCB(l.canvas.width);
      if (typeof b === "string") {
        if ((c4[0][0] && n.length == 3) || (c4[1][0] && e)) {
          $("." + b).css(
            "background",
            "url(" + l.img.src + ") repeat-x 100% 100%"
          );
        } else {
          $("." + b).css("background", "none");
        }
      } else {
        if (n.length == 3 && cf.σCG(o)) {
          $(".v" + n).css(
            "background",
            "url(" + l.img.src + ") repeat-x 100% 100%"
          );
        } else {
          if (e) {
            var p = cf.σCI(n);
            if (cf.σCH(p[0], p[1])) {
              $(".vot_" + n).css(
                "background",
                "url(" + l.img.src + ") repeat-x 100% 100%"
              );
            }
          }
        }
      }
    }
  },
  goAnimate: function (e) {
    var d = c4[0][8] && c4[0][28];
    var f = c4[0][14] && c4[0][30];
    if ((d || f || cv[14].length > 0) && cv[0] && c4[0][0]) {
      if (e === 0 || e - cv[15] > cc[3]) {
        if (cv[16] < cc[4] * 2) {
          if (cv[16] < cc[4]) {
            if (f) {
              for (var b = 0; b < cv[13].length; b += 1) {
                if (cf.σCG(cv[13][b])) {
                  cf.σCK(cv[6][cv[13][b]], "middle");
                }
              }
            }
            if (d) {
              for (var c = 0; c < cv[12].length; c += 1) {
                if (cf.σCG(cv[12][c])) {
                  cf.σCK(cv[6][cv[12][c]], "passive");
                }
              }
            }
            for (var a = 0; a < cv[14].length; a += 1) {
              if (cf.σCG(cv[14][a])) {
                cf.σCt(cv[6][cv[14][a]], d, f);
              }
            }
          }
          cv[15] = window.performance.now();
          cv[11] = requestAnimationFrame(cf.goAnimate);
        } else {
          cv[11] = -1;
        }
        cv[16] += 1;
      } else {
        cv[11] = requestAnimationFrame(cf.goAnimate);
      }
    } else {
      cv[11] = -1;
    }
  },
  σCt: function (b, a, d) {
    if (b.canvas.width > 1) {
      b.context.clearRect(0, 0, b.canvas.width, b.canvas.height);
      if (b.animCount > b.canvas.width) {
        b.animCount = b.animCount - b.canvas.width;
      }
      if (b.animCount > 0) {
        b.context.drawImage(
          b.img,
          b.animCount - b.canvas.width,
          0,
          b.canvas.width,
          b.canvas.height
        );
      }
      b.context.drawImage(
        b.img,
        b.animCount,
        0,
        b.canvas.width,
        b.canvas.height
      );
    }
    b.animCount = b.animCount + b.animIncrement;
    if (b.name.substr(1, 1) === "p" && a) {
      cf.σCL(b, "passive");
    }
    if (b.name.substr(1, 1) === "m" && d) {
      cf.σCL(b, "middle");
    }
    var c = b.canvas.toDataURL("image/png");
    $(".v" + b.name).css("background", "url(" + c + ") repeat-x 100% 100%");
  },
  σCK: function (b, a) {
    cf.σCL(b, a);
    b.animCount = b.animCount + b.animIncrement;
    var c = b.canvas.toDataURL("image/png");
    $(".v" + b.name).css("background", "url(" + c + ") repeat-x 100% 100%");
  },
  σCL: function (d, c) {
    var b, a;
    if (c === "middle") {
      b = c4[0][10];
      a = c4[0][26];
    } else {
      b = c4[0][4];
      a = c4[0][25];
    }
    d.context.beginPath();
    d.context.lineWidth = 2;
    if (d.animCount % 2 === 0) {
      d.context.strokeStyle = b;
    } else {
      d.context.strokeStyle = a;
    }
    d.context.moveTo(0, d.canvas.height - 1);
    d.context.lineTo(d.canvas.width, d.canvas.height - 1);
    d.context.stroke();
    d.context.closePath();
  },
  σCu: function (g, e, c) {
    var a = cf.σCf(e);
    var f = null;
    var h = g.context.getImageData(0, 0, g.canvas.width, g.canvas.height);
    var d = h.data;
    if (c !== undefined) {
      f = cf.σCf(c);
    }
    for (var b = 0; b < d.length - g.canvas.width * 2; b += 4) {
      if (
        a !== null &&
        d[b] === 0 &&
        d[b + 1] === 0 &&
        d[b + 2] === 0 &&
        d[b + 3] > 20
      ) {
        d[b] = a.r;
        d[b + 1] = a.g;
        d[b + 2] = a.b;
      } else {
        if (
          f !== null &&
          d[b] === 0 &&
          d[b + 1] === 0 &&
          d[b + 2] === 0 &&
          d[b + 3] < 5
        ) {
          d[b] = f.r;
          d[b + 1] = f.g;
          d[b + 2] = f.b;
          d[b + 3] = 255;
        }
      }
    }
    g.context.putImageData(h, 0, 0);
  },
  σCf: function (b) {
    var a = /^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);
    return a
      ? {
          r: parseInt(a[1], 16),
          g: parseInt(a[2], 16),
          b: parseInt(a[3], 16),
        }
      : null;
  },
  σCv: function () {
    var b = step.util.σuM("colorCode-CurrentSettings");
    var c = cf.σCA();
    if (b) {
      var a = (c4 = JSON.parse(b));
      if (a[2] === c[2]) {
        c4 = a;
      } else {
        if (a[2] === "20250331") {
          a[3] = false;
          a[0][0] = false;
          a[1][0] = false;
          if (JSON.stringify(a) === JSON.stringify(c)) {
            c4 = c;
          } else {
            a[2] = c[2];
            c4 = a;
          }
          this.σCM();
        } else {
          c4 = c;
          alert(
            "We have to updated our 6 years old color scheme. The new default color configuration is used."
          );
          this.σCM();
        }
      }
    } else {
      c4 = c;
    }
  },
  σCM: function () {
    step.util.σub("colorCode-CurrentSettings", JSON.stringify(c4));
  },
  σCN: function () {
    var o = [],
      a = [],
      h = [],
      s = [];
    var t, c, u, d, e, p;
    var m = [],
      f = [],
      k = [],
      q = [],
      j = [],
      w = [];
    var l = [],
      g = [];
    var v = -1;
    for (var r = 0; r < c4[0][21].length; r++) {
      if (!c4[0][23][r]) {
        m.push(c4[0][21][r]);
        k.push(cc[9][c4[0][21][r]]);
        j.push(cf.σCP(cc[9][c4[0][21][r]]));
        v++;
      } else {
        j[v] += "<br>" + cf.σCP(cc[9][c4[0][21][r]]);
      }
      l.push(cc[9][c4[0][21][r]]);
    }
    var b = -1;
    for (var n = 0; n < c4[0][20].length; n++) {
      if (!c4[0][22][n]) {
        f.push(c4[0][20][n]);
        q.push(cc[5][c4[0][20][n]]);
        w.push(cf.σCP(cc[5][c4[0][20][n]]));
        b++;
      } else {
        w[b] += "<br>" + cf.σCP(cc[5][c4[0][20][n]]);
      }
      g.push(cc[5][c4[0][20][n]]);
    }
    if (c4[0][24]) {
      u = "moods";
      d = "tenses";
      t = m;
      c = f;
      o = k;
      a = q;
      h = j;
      s = w;
      e = l;
      p = g;
    } else {
      u = "tenses";
      d = "moods";
      t = f;
      c = m;
      o = q;
      a = k;
      h = w;
      s = j;
      e = g;
      p = l;
    }
    return {
      nameOfXAxisItems: o,
      nameOfYAxisItems: a,
      descOfXAxisItems: h,
      descOfYAxisItems: s,
      orderOfXAxisItems: t,
      orderOfYAxisItems: c,
      xAxisTitle: u,
      yAxisTitle: d,
      nameOfAllXAxisItems: e,
      nameOfAllYAxisItems: p,
    };
  },
  σCO: function (v) {
    var s = [],
      b = [],
      m = [],
      B = [];
    var C, d, D, e, g, y;
    var u = [],
      l = [],
      q = [],
      h = [],
      o = [],
      f = [];
    var t = [],
      k = [];
    var r;
    var c = 0;
    var a = -1;
    if (v == "H") {
      r = c4[1][22];
      c = c4[1][21].length;
    } else {
      r = c4[1][24];
      c = c4[1][23].length;
    }
    for (var z = 0; z < c; z++) {
      var A = "";
      var n = "";
      var p = false;
      if (v == "H" && c4[1][21][z] != null) {
        A = c4[1][21][z];
        n = c4[1][25][A][0];
        p = c4[1][25][A][2];
      } else {
        if (v == "A" && c4[1][23][z] != null) {
          A = c4[1][23][z];
          n = c4[1][26][A][0];
          p = c4[1][26][A][2];
        }
      }
      if (!r[z]) {
        u.push(A);
        q.push(n);
        if (p) {
          o.push(cf.σCP(n));
        } else {
          o.push("");
        }
        a++;
      } else {
        if (p) {
          if (o[a].length > 0) {
            o[a] += "<br>";
          }
          o[a] += cf.σCP(n);
        }
      }
      t.push(n);
    }
    var x = -1;
    for (var w = 0; w < c4[1][19].length; w++) {
      if (!c4[1][20][w]) {
        l.push(c4[1][19][w]);
        h.push(c4[1][27][c4[1][19][w]][0]);
        if (c4[1][27][c4[1][19][w]][2]) {
          f.push(c4[1][27][c4[1][19][w]][1]);
        } else {
          f.push("");
        }
        x++;
      } else {
        if (c4[1][27][c4[1][19][w]][2]) {
          if (f[x].length > 0) {
            f[x] += " &<br>";
          }
          f[x] += c4[1][27][c4[1][19][w]][1];
        }
      }
      k.push(c4[1][27][c4[1][19][w]][0]);
    }
    if (c4[1][28]) {
      D = "stems";
      e = "forms";
      C = u;
      d = l;
      s = q;
      b = h;
      m = o;
      B = f;
      g = t;
      y = k;
    } else {
      D = "forms";
      e = "stems";
      C = l;
      d = u;
      s = h;
      b = q;
      m = f;
      B = o;
      g = k;
      y = t;
    }
    return {
      nameOfXAxisItems: s,
      nameOfYAxisItems: b,
      descOfXAxisItems: m,
      descOfYAxisItems: B,
      orderOfXAxisItems: C,
      orderOfYAxisItems: d,
      xAxisTitle: D,
      yAxisTitle: e,
      nameOfAllXAxisItems: g,
      nameOfAllYAxisItems: y,
    };
  },
  σCP: function (a) {
    return a.charAt(0).toUpperCase() + a.slice(1);
  },
  setNextPageURL: function (b, c, d, a) {
    if (c !== "") {
      cf.openUserSelectedConfig(c, a);
    }
    if (d !== "") {
      step.util.σub("colorCode-InfoMsg", JSON.stringify(d));
    }
    window.location.assign(b);
  },
  σCQ: function (f, d, a) {
    var b;
    var g = cv[1][d];
    for (var e = f.length; e > 0 && b == undefined; e--) {
      b = g[f.substr(0, e)];
    }
    if (b == undefined) {
      return;
    } else {
      var c = cv[1].txtArray[b];
      if (c == undefined) {
        return;
      }
      a[d] = c;
    }
  },
  getTOSMorphologyInfo: function (h) {
    var t = [];
    if (h.indexOf("TOS:") == 0 && cv[1] != null) {
      var r = h.split(" ");
      for (var s = 0; s < r.length; s++) {
        var n = {};
        var a = r[s];
        if (a.indexOf("TOS:") == 0) {
          a = a.substr(4);
        }
        if (a === "nomorph") {
          t.push(n);
          continue;
        }
        var c = a.substr(0, 1);
        cf.σCQ(c, "language", n);
        var o = a.substr(1) + a.substr(0, 1);
        cf.σCQ(o, "description", n);
        var e = a.substr(1, 1);
        cf.σCQ(e, "ot_function", n);
        if (n.ot_function != undefined) {
          if (a.length > 2) {
            var g = 2;
            var m = "";
            if (n.ot_function.toLowerCase().indexOf("verb") == 0) {
              g = 3;
              m = a.substr(2, 1) + c;
              cf.σCQ(m, "stem", n);
              if (
                a.length == 5 &&
                (a.substr(3, 2) == "aa" || a.substr(3, 2) == "cc")
              ) {
                cf.σCQ(a.substr(4, 1), "state", n);
                cf.σCQ(a.substr(4, 1), "stateExplained", n);
                cf.σCQ(a.substr(4, 1), "stateDesc", n);
                a = a.substr(0, 3) + "f" + a.substr(4, 1);
              }
            }
            var v = a.substr(g, 1);
            var j = v + e;
            var w, x;
            cf.σCQ(j, "ot_form", n);
            if (a.length == g + 4) {
              var f = a.substr(g + 1, 1);
              var d = a.substr(g + 2, 1);
              var b = a.substr(g + 3, 1);
              var u;
              if (f == "1" || f == "2" || f == "3") {
                w = f;
                cf.σCQ(w, "person", n);
                cf.σCQ(f + b, "personExplained", n);
                cf.σCQ(f + b, "personDesc", n);
                u = d;
                x = b;
              } else {
                u = f;
                x = d;
                cf.σCQ(b, "state", n);
                cf.σCQ(b, "stateExplained", n);
                cf.σCQ(b, "stateDesc", n);
              }
              cf.σCQ(u, "gender", n);
              cf.σCQ(x, "number", n);
              cf.σCQ(u, "genderExplained", n);
              var l = u + x;
              cf.σCQ(l, "genderDesc", n);
              cf.σCQ(x, "numberExplained", n);
              cf.σCQ(x, "numberDesc", n);
            } else {
              if (a.length == 4) {
                cf.σCQ(a.substr(3, 1), "gender", n);
                cf.σCQ(a.substr(3, 1), "genderExplained", n);
                cf.σCQ(a.substr(3, 1), "genderDesc", n);
              }
            }
            if (e == "V") {
              cf.σCQ(m, "ot_action", n);
              var p = m;
              if (j == "sV" && m == "qH") {
                p = m + v;
              }
              cf.σCQ(p, "ot_voice", n);
              cf.σCQ(j, "ot_tense", n);
              var k = j;
              if (j == "iV") {
                k = j + w;
              }
              cf.σCQ(k, "ot_mood", n);
              cf.σCQ(k, "ot_moodExplained", n);
              cf.σCQ(k, "ot_moodDesc", n);
              cf.σCQ(m, "stemExplained", n);
              cf.σCQ(m, "stemDesc", n);
              cf.σCQ(m, "ot_actionExplained", n);
              cf.σCQ(m, "ot_actionDesc", n);
              cf.σCQ(p + x, "ot_voiceExplained", n);
              cf.σCQ(p + x, "ot_voiceDesc", n);
              cf.σCQ(j, "ot_tenseExplained", n);
              cf.σCQ(j, "ot_tenseDesc", n);
            }
            var q = e + v + x;
            cf.σCQ(q, "ot_functionExplained", n);
            cf.σCQ(q, "ot_functionDesc", n);
            cf.σCQ(j, "ot_formExplained", n);
            cf.σCQ(j, "ot_formDesc", n);
          }
        }
        cf.σCw(a, n);
        t.push(n);
      }
    }
    return t;
  },
  σCw: function (b, a) {
    var c = "";
    if (b.search(/^[HA]V[a-zA-Z](fc|fa)$/) > -1) {
      c = cf.σCR(a, [
        "ot_actionDesc",
        "functionDesc",
        "ot_moodDesc",
        "formDesc",
        "ot_voiceDesc",
        "stateDesc",
      ]);
    } else {
      if (b.search(/^[HA]V[a-zA-Z][rs]/) > -1) {
        c = cf.σCR(a, [
          "ot_actionDesc",
          "functionDesc",
          "formDesc",
          "ot_voiceDesc",
          "genderDesc",
          "numberDesc",
          "stateDesc",
        ]);
      } else {
        if (b.search(/^[HA]V/) > -1) {
          c = cf.σCR(a, [
            "ot_actionDesc",
            "functionDesc",
            "ot_moodDesc",
            "formDesc",
            "ot_tenseDesc",
            "ot_voiceDesc",
            "genderDesc",
            "numberDesc",
            "personDesc",
          ]);
        } else {
          if (b.search(/^[HA]Ng\w\wd$/) > -1) {
            c = cf.σCR(a, [
              "functionDesc",
              "stateDesc",
              "genderDesc",
              "numberDesc",
              "formDesc",
            ]);
          } else {
            if (
              b.search(/^[HA]Ng\w\w[ac]$/) > -1 ||
              b.search(/^[HA]Aabsa$/) > -1
            ) {
              c = cf.σCR(a, [
                "functionDesc",
                "genderDesc",
                "numberDesc",
                "formDesc",
                "stateDesc",
              ]);
            } else {
              if (b.search(/^[HA][PS]p\w\w\w$/) > -1) {
                c = cf.σCR(a, [
                  "functionDesc",
                  "formDesc",
                  "genderDesc",
                  "numberDesc",
                  "personDesc",
                ]);
              } else {
                if (b.search(/^[HA]Ng$/) > -1) {
                  c = cf.σCR(a, [
                    "functionDesc",
                    "formDesc",
                    "genderDesc",
                    "numberDesc",
                    "personDesc",
                  ]);
                } else {
                  if (b.search(/^[HA]A[co]\w\wd$/) > -1) {
                    c = cf.σCR(a, [
                      "functionDesc",
                      "formDesc",
                      "stateDesc",
                      "genderDesc",
                      "numberDesc",
                    ]);
                  } else {
                    if (b.search(/^[HA][NA]\w\w\wd$/) > -1) {
                      c = cf.σCR(a, [
                        "functionDesc",
                        "stateDesc",
                        "formDesc",
                        "genderDesc",
                        "numberDesc",
                      ]);
                    } else {
                      c = cf.σCR(a, [
                        "functionDesc",
                        "ot_actionDesc",
                        "ot_voiceDesc",
                        "fromDesc",
                        "ot_tenseDesc",
                        "ot_moodDesc",
                        "personDesc",
                        "genderDesc",
                        "numberDesc",
                        "stateDesc",
                      ]);
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    if (c != "") {
      a.explanation = c;
    }
  },
  σCR: function (d, c) {
    var a = "";
    for (var b = 0; b < c.length; b++) {
      if (d[c[b]] != undefined || (d[c[b]] != null && d[c[b]].length > 0)) {
        a += d[c[b]] + " ";
      }
    }
    return a.replace(/\s\s+/, " ").replace(/^\s/, "").replace(/\s$/, "");
  },
  addClassForTHOT: function (e, n) {
    var k = "",
      p = e.length,
      q = 0,
      b = 0;
    var i = "";
    while (q < p) {
      var r = e.indexOf("morph=", q);
      if (r > -1) {
        var o = e.substr(r + 6, 1);
        if (o !== '"' && o !== "'") {
          console.log(
            "error at addClassForTHOT cannot find ending quote at " +
              f +
              " " +
              e.substr(r + 6, 25)
          );
          continue;
        }
        q = r + 6;
        var g = false;
        if (e.substr(r + 7, 4) === "TOS:") {
          q += 5;
        } else {
          if (e.substr(r + 7, 5) === "oshm:") {
            q += 6;
            g = true;
          } else {
            if (
              n.indexOf("ESV") > -1 ||
              n.indexOf("NASB2020") > -1 ||
              n.indexOf("NET2FULL") > -1 ||
              n.indexOf("CUN") > -1
            ) {
              q += 1;
            } else {
              continue;
            }
          }
        }
        var f = e.indexOf(o, q);
        if (f > -1 && f - q < 60) {
          var d = e.substring(q, f);
          q = f + 1;
          var l = cf.σCx(d, g).trim();
          if (l.length > 0) {
            var m = e.indexOf(">", q);
            if (m > -1) {
              var j = e.lastIndexOf("<span", r);
              if (j > -1 && j >= b) {
                var a = e.substring(j + 6, m);
                var s = a.indexOf("class");
                if (s > -1) {
                  k = k.concat(e.substring(b, j + s + 11));
                  b = j + s + 11;
                  if (a.substr(s + 5, 1) == "=") {
                    var c = a.substr(s + 6, 1);
                    if (c === '"' || c === "'") {
                      k = k.concat(e.substring(b, j + s + 13));
                      b = j + s + 13;
                      k = k.concat(l);
                      if (a.substr(s + 7, 1) != c) {
                        k = k.concat(" ");
                      }
                    } else {
                      console.log(
                        "error at addClassForTHOT Cannot find quote after class.  Please let the STEP people know"
                      );
                    }
                  } else {
                    k = k.concat('="' + l + '" ');
                  }
                } else {
                  k = k.concat(e.substring(b, m));
                  b = m;
                  k = k.concat(' class="');
                  k = k.concat(l);
                  k = k.concat('" ');
                }
              }
              var h = l.split(" ").filter(function (t) {
                return (
                  t.substr(0, 4) == "vot_" && i.indexOf(t.substr(4, 4)) == -1
                );
              });
              if (h.length > 0) {
                i += " " + h[0].substr(4, 4);
              }
            } else {
              console.log("error at addClassForTHOT cannot find >");
            }
          }
        }
      } else {
        break;
      }
    }
    return [k.concat(e.substring(b, p)), i + " "];
  },
  getClassesForNT: function (f) {
    var b = f.length;
    var g = 0;
    var a = "";
    while (g < b) {
      var e = f.indexOf("class=", g);
      if (e > -1) {
        var d = f.substr(e + 6, 1);
        if (d === '"' || d === "'") {
          g = e + 7;
          var h = f.indexOf(d, g);
          if (h > -1 && h - g < 100) {
            if (h > 0) {
              var i = f.substring(g, h);
              var c = i.split(" ").filter(function (j) {
                return (
                  j.length == 4 &&
                  j.substr(0, 1) == "v" &&
                  j.substr(1, 1) != "e" &&
                  a.indexOf(j) == -1
                );
              });
              if (c.length > 0) {
                a += " " + c[0];
              }
            }
            g = h + 1;
          } else {
            alert("warning: getClassesForNT cannot find ending quote at " + h);
          }
        } else {
          g = e + 6;
        }
      } else {
        break;
      }
    }
    return a + " ";
  },
  σCx: function (i, b) {
    var k = "";
    if (typeof i === "string") {
      var g = i.split(" ")[0];
      if (b) {
        var e = step.util.σMT("oshm:" + i);
        if (e.substring(0, 4) === "TOS:") {
          g = e.substring(4).split(" ")[0];
        }
      }
      var c = "";
      var h = "";
      var j = g.length;
      if (j == 6 || j == 7) {
        var a = g.substr(j - 3, 1);
        if (a === "1" || a === "2" || a === "3") {
          h = g.substr(j - 2, 1);
          c = g.substr(j - 1, 1);
        } else {
          if (
            a === "b" ||
            a === "c" ||
            a === "f" ||
            a === "l" ||
            a === "m" ||
            a === "t"
          ) {
            h = a;
            c = g.substr(j - 2, 1);
          }
        }
      } else {
        if (j == 4) {
          h = g.substr(3, 1);
        }
      }
      if (c !== "") {
        if (c === "p" || c === "d") {
          k += "plur ";
        } else {
          if (c === "s") {
            k += "sing ";
          }
        }
      }
      if (h !== "") {
        if (h === "m") {
          k += "mas ";
        } else {
          if (h === "f") {
            k += "fem ";
          } else {
            if (h === "b" || h === "c" || h === "l" || h === "t") {
              k += "neut ";
            }
          }
        }
      }
      if (g.substr(1, 1) == "V") {
        if (g.length == 5) {
          g = g.substr(0, 3) + "f" + g.substr(4, 1);
        }
        var f = cv[8][g.substr(3, 1)];
        var d;
        if (g.substr(0, 1) == "H") {
          d = cv[9][g.substr(2, 1)];
        } else {
          if (g.substr(0, 1) == "A") {
            d = cv[10][g.substr(2, 1)];
          }
        }
        if (f != undefined && d != undefined) {
          k += "vot_R" + f + "C" + d;
        } else {
          console.log("unknown verb " + g);
        }
      }
    }
    return k;
  },
  σCc: function (b, a) {
    var c = "";
    if (b === "singular") {
      c = ".sing";
    } else {
      if (b === "plural") {
        c = ".plur";
      } else {
        return;
      }
    }
    if (a === "bold") {
      $(c).css("font-style", "normal");
      $(c).css("font-weight", "bold");
    } else {
      if (a === "normal") {
        $(c).css("font-style", "normal");
        $(c).css("font-weight", "normal");
      } else {
        if (a === "normal_italic") {
          $(c).css("font-style", "italic");
          $(c).css("font-weight", "normal");
        }
      }
    }
    cv[19] = true;
  },
  σCd: function (e, d) {
    var b = d;
    var a = e == "mood" ? c4[0][23] : c4[0][22];
    for (var c = 1; c <= d; c++) {
      if (a[c]) {
        b--;
      }
    }
    return b;
  },
  openUserSelectedConfig: function (a, f) {
    var b;
    if (a != null) {
      b = a;
    } else {
      b = document.getElementById("openClrConfigDropdown").value.toLowerCase();
    }
    var g = true;
    if (c4 != undefined) {
      g = c4[3];
    }
    if (b === C_AspectDesc) {
      c4 = cf.σCA();
      if (f) {
        c4[1][0] = true;
      } else {
        c4[0][0] = true;
      }
    } else {
      if (b === C_TenseDesc) {
        c4 = cf.σCAI();
        c4[0][0] = true;
      } else {
        if (b === C_OrigDesc) {
          c4 = cf.σCAC();
        } else {
          if (b === "gender and number") {
            c4 = cf.σCAB();
          } else {
            if (b === "verb, imperative mood") {
              c4 = cf.σCAF();
            } else {
              if (b === "verb, main vs supporting verbs") {
                c4 = cf.σCAE();
              } else {
                var i = false;
                var e = step.util.σuM("colorCode-UserClrConfigNames");
                if (e) {
                  var h = JSON.parse(e).filter(function (j) {
                    return j.toLowerCase() == b;
                  });
                  if (h.length > 0) {
                    var d = step.util.σuM(
                      "colorCode-UserClrConfigName-" + h[0]
                    );
                    if (d) {
                      i = true;
                      var c = (c4 = JSON.parse(d));
                      if (c[2] === "20250419" || c[2] === "20250331") {
                        c4 = c;
                      } else {
                        alert(
                          "The version of the saved color configuration is out of date. We have to updated our 6 years old color scheme. Please customized your colors based on our new color schemes."
                        );
                      }
                    }
                  }
                }
                if (!i) {
                  alert(
                    "Cannot find a configuation that match your selection " + b
                  );
                  return;
                }
              }
            }
          }
        }
      }
    }
    cf.σCM();
    if (!g && c4[3]) {
      cv[20] = true;
    }
    step.util.closeModal("openClrModal");
    if (a == null) {
      σCAg();
    }
  },
  σCAB: function () {
    var a = cf.σCA();
    a[3] = true;
    a[0][0] = false;
    a[0][16] = null;
    a[1][0] = false;
    a[1][15] = null;
    a[1][16] = null;
    return a;
  },
  σCAC: function () {
    var a = cf.σCA();
    a[0][0] = true;
    a[0][1] = [
      "#31ff00",
      "#ffa500",
      "#925011",
      "#f92d02",
      "#fff700",
      "#091bfd",
    ];
    a[0][2] = [
      "Dash",
      "Arrow",
      "Dots",
      "Reverse Arrow",
      "Short Reverse Arrow",
      "Short Reverse Arrow",
    ];
    a[0][20] = ["p", "f", "a", "i", "r", "l"];
    a[0][21] = ["i", "s", "o", "m", "n", "p"];
    a[0][16] = {
      desc: ["Present", "Future", "Past /<br>Present", "Past"],
      repeat: [0, 0, 0, 2],
    };
    return a;
  },
  σCAI: function () {
    var a = cf.σCA();
    a[0][0] = true;
    a[0][2] = [
      "Dash",
      "Reverse Arrow",
      "Underline",
      "Short Reverse Arrow",
      "2 lines",
      "Short Arrow",
    ];
    return a;
  },
  σCAE: function () {
    var a = cf.σCA();
    a[0][0] = true;
    a[0][1] = [
      "#008000",
      "#008000",
      "#ed12ed",
      "#ed12ed",
      "#ed12ed",
      "#ed12ed",
    ];
    a[0][2] = [
      "Underline",
      "Underline",
      "Underline",
      "Underline",
      "Underline",
      "Underline",
    ];
    a[0][16] = null;
    a[3] = false;
    a[1][15] = null;
    a[1][16] = null;
    return a;
  },
  σCAF: function () {
    var a = cf.σCA();
    a[0][0] = true;
    a[0][17] = [false, true, false, false, false, false];
    a[0][2] = [
      "Underline",
      "Underline",
      "Underline",
      "Underline",
      "Underline",
      "Underline",
    ];
    a[0][16] = null;
    a[3] = false;
    return a;
  },
};
